(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function _1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h0={exports:{}},ru={},f0={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=Symbol.for("react.element"),w1=Symbol.for("react.portal"),x1=Symbol.for("react.fragment"),E1=Symbol.for("react.strict_mode"),b1=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),A1=Symbol.for("react.suspense"),C1=Symbol.for("react.memo"),k1=Symbol.for("react.lazy"),Em=Symbol.iterator;function R1(t){return t===null||typeof t!="object"?null:(t=Em&&t[Em]||t["@@iterator"],typeof t=="function"?t:null)}var p0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m0=Object.assign,g0={};function so(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||p0}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y0(){}y0.prototype=so.prototype;function nf(t,e,n){this.props=t,this.context=e,this.refs=g0,this.updater=n||p0}var rf=nf.prototype=new y0;rf.constructor=nf;m0(rf,so.prototype);rf.isPureReactComponent=!0;var bm=Array.isArray,v0=Object.prototype.hasOwnProperty,sf={current:null},_0={key:!0,ref:!0,__self:!0,__source:!0};function w0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)v0.call(e,r)&&!_0.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Oa,type:t,key:s,ref:o,props:i,_owner:sf.current}}function P1(t,e){return{$$typeof:Oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function of(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oa}function D1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sm=/\/+/g;function Xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?D1(""+t.key):e.toString(36)}function Wl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Oa:case w1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xu(o,0):r,bm(i)?(n="",t!=null&&(n=t.replace(Sm,"$&/")+"/"),Wl(i,e,n,"",function(h){return h})):i!=null&&(of(i)&&(i=P1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Sm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bm(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+Xu(s,c);o+=Wl(s,e,n,u,i)}else if(u=R1(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+Xu(s,c++),o+=Wl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xl(t,e,n){if(t==null)return t;var r=[],i=0;return Wl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function j1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},ql={transition:null},N1={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:sf};function x0(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:xl,forEach:function(t,e,n){xl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xl(t,function(){e++}),e},toArray:function(t){return xl(t,function(e){return e})||[]},only:function(t){if(!of(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=so;ye.Fragment=x1;ye.Profiler=b1;ye.PureComponent=nf;ye.StrictMode=E1;ye.Suspense=A1;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1;ye.act=x0;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)v0.call(e,u)&&!_0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Oa,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:I1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S1,_context:t},t.Consumer=t};ye.createElement=w0;ye.createFactory=function(t){var e=w0.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:T1,render:t}};ye.isValidElement=of;ye.lazy=function(t){return{$$typeof:k1,_payload:{_status:-1,_result:t},_init:j1}};ye.memo=function(t,e){return{$$typeof:C1,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};ye.unstable_act=x0;ye.useCallback=function(t,e){return qt.current.useCallback(t,e)};ye.useContext=function(t){return qt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return qt.current.useEffect(t,e)};ye.useId=function(){return qt.current.useId()};ye.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return qt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};ye.useRef=function(t){return qt.current.useRef(t)};ye.useState=function(t){return qt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return qt.current.useTransition()};ye.version="18.3.1";f0.exports=ye;var ee=f0.exports;const M1=_1(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=ee,L1=Symbol.for("react.element"),V1=Symbol.for("react.fragment"),z1=Object.prototype.hasOwnProperty,F1=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function E0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)z1.call(e,r)&&!U1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:L1,type:t,key:s,ref:o,props:i,_owner:F1.current}}ru.Fragment=V1;ru.jsx=E0;ru.jsxs=E0;h0.exports=ru;var l=h0.exports,Md={},b0={exports:{}},pn={},S0={exports:{}},I0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,se){var ue=Q.length;Q.push(se);e:for(;0<ue;){var Te=ue-1>>>1,Ee=Q[Te];if(0<i(Ee,se))Q[Te]=se,Q[ue]=Ee,ue=Te;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var se=Q[0],ue=Q.pop();if(ue!==se){Q[0]=ue;e:for(var Te=0,Ee=Q.length,je=Ee>>>1;Te<je;){var xt=2*(Te+1)-1,ft=Q[xt],rn=xt+1,Gt=Q[rn];if(0>i(ft,ue))rn<Ee&&0>i(Gt,ft)?(Q[Te]=Gt,Q[rn]=ue,Te=rn):(Q[Te]=ft,Q[xt]=ue,Te=xt);else if(rn<Ee&&0>i(Gt,ue))Q[Te]=Gt,Q[rn]=ue,Te=rn;else break e}}return se}function i(Q,se){var ue=Q.sortIndex-se.sortIndex;return ue!==0?ue:Q.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,y=null,g=3,R=!1,j=!1,M=!1,F=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(Q){for(var se=n(h);se!==null;){if(se.callback===null)r(h);else if(se.startTime<=Q)r(h),se.sortIndex=se.expirationTime,e(u,se);else break;se=n(h)}}function V(Q){if(M=!1,P(Q),!j)if(n(u)!==null)j=!0,Mr(W);else{var se=n(h);se!==null&&Oe(V,se.startTime-Q)}}function W(Q,se){j=!1,M&&(M=!1,k(v),v=-1),R=!0;var ue=g;try{for(P(se),y=n(u);y!==null&&(!(y.expirationTime>se)||Q&&!D());){var Te=y.callback;if(typeof Te=="function"){y.callback=null,g=y.priorityLevel;var Ee=Te(y.expirationTime<=se);se=t.unstable_now(),typeof Ee=="function"?y.callback=Ee:y===n(u)&&r(u),P(se)}else r(u);y=n(u)}if(y!==null)var je=!0;else{var xt=n(h);xt!==null&&Oe(V,xt.startTime-se),je=!1}return je}finally{y=null,g=ue,R=!1}}var B=!1,E=null,v=-1,T=5,A=-1;function D(){return!(t.unstable_now()-A<T)}function I(){if(E!==null){var Q=t.unstable_now();A=Q;var se=!0;try{se=E(!0,Q)}finally{se?C():(B=!1,E=null)}}else B=!1}var C;if(typeof S=="function")C=function(){S(I)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,kt=ve.port2;ve.port1.onmessage=I,C=function(){kt.postMessage(null)}}else C=function(){F(I,0)};function Mr(Q){E=Q,B||(B=!0,C())}function Oe(Q,se){v=F(function(){Q(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){j||R||(j=!0,Mr(W))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Q){switch(g){case 1:case 2:case 3:var se=3;break;default:se=g}var ue=g;g=se;try{return Q()}finally{g=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ue=g;g=Q;try{return se()}finally{g=ue}},t.unstable_scheduleCallback=function(Q,se,ue){var Te=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Te+ue:Te):ue=Te,Q){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ue+Ee,Q={id:m++,callback:se,priorityLevel:Q,startTime:ue,expirationTime:Ee,sortIndex:-1},ue>Te?(Q.sortIndex=ue,e(h,Q),n(u)===null&&Q===n(h)&&(M?(k(v),v=-1):M=!0,Oe(V,ue-Te))):(Q.sortIndex=Ee,e(u,Q),j||R||(j=!0,Mr(W))),Q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(Q){var se=g;return function(){var ue=g;g=se;try{return Q.apply(this,arguments)}finally{g=ue}}}})(I0);S0.exports=I0;var B1=S0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=ee,fn=B1;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T0=new Set,ua={};function ss(t,e){Ws(t,e),Ws(t+"Capture",e)}function Ws(t,e){for(ua[t]=e,t=0;t<e.length;t++)T0.add(e[t])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=Object.prototype.hasOwnProperty,W1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Im={},Tm={};function q1(t){return Od.call(Tm,t)?!0:Od.call(Im,t)?!1:W1.test(t)?Tm[t]=!0:(Im[t]=!0,!1)}function H1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G1(t,e,n,r){if(e===null||typeof e>"u"||H1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var af=/[\-:]([a-z])/g;function lf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(af,lf);Ct[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(af,lf);Ct[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(af,lf);Ct[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function cf(t,e,n,r){var i=Ct.hasOwnProperty(e)?Ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(G1(e,n,i,r)&&(n=null),r||i===null?q1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rr=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),ws=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),uf=Symbol.for("react.strict_mode"),Ld=Symbol.for("react.profiler"),A0=Symbol.for("react.provider"),C0=Symbol.for("react.context"),df=Symbol.for("react.forward_ref"),Vd=Symbol.for("react.suspense"),zd=Symbol.for("react.suspense_list"),hf=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),k0=Symbol.for("react.offscreen"),Am=Symbol.iterator;function ko(t){return t===null||typeof t!="object"?null:(t=Am&&t[Am]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Ju;function zo(t){if(Ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ju=e&&e[1]||""}return`
`+Ju+t}var Zu=!1;function ed(t,e){if(!t||Zu)return"";Zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,c=s.length-1;1<=o&&0<=c&&i[o]!==s[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==s[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==s[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function K1(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=ed(t.type,!1),t;case 11:return t=ed(t.type.render,!1),t;case 1:return t=ed(t.type,!0),t;default:return""}}function Fd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case ws:return"Portal";case Ld:return"Profiler";case uf:return"StrictMode";case Vd:return"Suspense";case zd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C0:return(t.displayName||"Context")+".Consumer";case A0:return(t._context.displayName||"Context")+".Provider";case df:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hf:return e=t.displayName||null,e!==null?e:Fd(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Fd(t(e))}catch{}}return null}function Q1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fd(e);case 8:return e===uf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function R0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Y1(t){var e=R0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bl(t){t._valueTracker||(t._valueTracker=Y1(t))}function P0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=R0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ud(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D0(t,e){e=e.checked,e!=null&&cf(t,"checked",e,!1)}function Bd(t,e){D0(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$d(t,e.type,n):e.hasOwnProperty("defaultValue")&&$d(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function km(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $d(t,e,n){(e!=="number"||hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fo=Array.isArray;function Ns(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Fo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function j0(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function N0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?N0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sl,M0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sl=Sl||document.createElement("div"),Sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X1=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){X1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function O0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function L0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=O0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var J1=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hd(t,e){if(e){if(J1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Gd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=null;function ff(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qd=null,Ms=null,Os=null;function Dm(t){if(t=za(t)){if(typeof Qd!="function")throw Error($(280));var e=t.stateNode;e&&(e=lu(e),Qd(t.stateNode,t.type,e))}}function V0(t){Ms?Os?Os.push(t):Os=[t]:Ms=t}function z0(){if(Ms){var t=Ms,e=Os;if(Os=Ms=null,Dm(t),e)for(t=0;t<e.length;t++)Dm(e[t])}}function F0(t,e){return t(e)}function U0(){}var td=!1;function B0(t,e,n){if(td)return t(e,n);td=!0;try{return F0(t,e,n)}finally{td=!1,(Ms!==null||Os!==null)&&(U0(),z0())}}function ha(t,e){var n=t.stateNode;if(n===null)return null;var r=lu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Yd=!1;if(Er)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Yd=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Yd=!1}function Z1(t,e,n,r,i,s,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Qo=!1,fc=null,pc=!1,Xd=null,eE={onError:function(t){Qo=!0,fc=t}};function tE(t,e,n,r,i,s,o,c,u){Qo=!1,fc=null,Z1.apply(eE,arguments)}function nE(t,e,n,r,i,s,o,c,u){if(tE.apply(this,arguments),Qo){if(Qo){var h=fc;Qo=!1,fc=null}else throw Error($(198));pc||(pc=!0,Xd=h)}}function os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jm(t){if(os(t)!==t)throw Error($(188))}function rE(t){var e=t.alternate;if(!e){if(e=os(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jm(i),t;if(s===r)return jm(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function W0(t){return t=rE(t),t!==null?q0(t):null}function q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q0(t);if(e!==null)return e;t=t.sibling}return null}var H0=fn.unstable_scheduleCallback,Nm=fn.unstable_cancelCallback,iE=fn.unstable_shouldYield,sE=fn.unstable_requestPaint,rt=fn.unstable_now,oE=fn.unstable_getCurrentPriorityLevel,pf=fn.unstable_ImmediatePriority,G0=fn.unstable_UserBlockingPriority,mc=fn.unstable_NormalPriority,aE=fn.unstable_LowPriority,K0=fn.unstable_IdlePriority,iu=null,Qn=null;function lE(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(iu,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:dE,cE=Math.log,uE=Math.LN2;function dE(t){return t>>>=0,t===0?32:31-(cE(t)/uE|0)|0}var Il=64,Tl=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=Uo(c):(s&=o,s!==0&&(r=Uo(s)))}else o=n&~i,o!==0?r=Uo(o):s!==0&&(r=Uo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),i=1<<n,r|=t[n],e&=~i;return r}function hE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Mn(s),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=hE(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function Jd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q0(){var t=Il;return Il<<=1,!(Il&4194240)&&(Il=64),t}function nd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function La(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function pE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Mn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function mf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function Y0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X0,gf,J0,Z0,ev,Zd=!1,Al=[],ti=null,ni=null,ri=null,fa=new Map,pa=new Map,Hr=[],mE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mm(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(e.pointerId)}}function Po(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=za(e),e!==null&&gf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gE(t,e,n,r,i){switch(e){case"focusin":return ti=Po(ti,t,e,n,r,i),!0;case"dragenter":return ni=Po(ni,t,e,n,r,i),!0;case"mouseover":return ri=Po(ri,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fa.set(s,Po(fa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pa.set(s,Po(pa.get(s)||null,t,e,n,r,i)),!0}return!1}function tv(t){var e=Ui(t.target);if(e!==null){var n=os(e);if(n!==null){if(e=n.tag,e===13){if(e=$0(n),e!==null){t.blockedOn=e,ev(t.priority,function(){J0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kd=r,n.target.dispatchEvent(r),Kd=null}else return e=za(n),e!==null&&gf(e),t.blockedOn=n,!1;e.shift()}return!0}function Om(t,e,n){Hl(t)&&n.delete(e)}function yE(){Zd=!1,ti!==null&&Hl(ti)&&(ti=null),ni!==null&&Hl(ni)&&(ni=null),ri!==null&&Hl(ri)&&(ri=null),fa.forEach(Om),pa.forEach(Om)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,Zd||(Zd=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,yE)))}function ma(t){function e(i){return Do(i,t)}if(0<Al.length){Do(Al[0],t);for(var n=1;n<Al.length;n++){var r=Al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ti!==null&&Do(ti,t),ni!==null&&Do(ni,t),ri!==null&&Do(ri,t),fa.forEach(e),pa.forEach(e),n=0;n<Hr.length;n++)r=Hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hr.length&&(n=Hr[0],n.blockedOn===null);)tv(n),n.blockedOn===null&&Hr.shift()}var Ls=Rr.ReactCurrentBatchConfig,yc=!0;function vE(t,e,n,r){var i=Ne,s=Ls.transition;Ls.transition=null;try{Ne=1,yf(t,e,n,r)}finally{Ne=i,Ls.transition=s}}function _E(t,e,n,r){var i=Ne,s=Ls.transition;Ls.transition=null;try{Ne=4,yf(t,e,n,r)}finally{Ne=i,Ls.transition=s}}function yf(t,e,n,r){if(yc){var i=eh(t,e,n,r);if(i===null)hd(t,e,r,vc,n),Mm(t,r);else if(gE(i,t,e,n,r))r.stopPropagation();else if(Mm(t,r),e&4&&-1<mE.indexOf(t)){for(;i!==null;){var s=za(i);if(s!==null&&X0(s),s=eh(t,e,n,r),s===null&&hd(t,e,r,vc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hd(t,e,r,null,n)}}var vc=null;function eh(t,e,n,r){if(vc=null,t=ff(r),t=Ui(t),t!==null)if(e=os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vc=t,null}function nv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oE()){case pf:return 1;case G0:return 4;case mc:case aE:return 16;case K0:return 536870912;default:return 16}default:return 16}}var Jr=null,vf=null,Gl=null;function rv(){if(Gl)return Gl;var t,e=vf,n=e.length,r,i="value"in Jr?Jr.value:Jr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gl=i.slice(t,1<r?1-r:void 0)}function Kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function Lm(){return!1}function mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cl:Lm,this.isPropagationStopped=Lm,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_f=mn(oo),Va=Je({},oo,{view:0,detail:0}),wE=mn(Va),rd,id,jo,su=Je({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jo&&(jo&&t.type==="mousemove"?(rd=t.screenX-jo.screenX,id=t.screenY-jo.screenY):id=rd=0,jo=t),rd)},movementY:function(t){return"movementY"in t?t.movementY:id}}),Vm=mn(su),xE=Je({},su,{dataTransfer:0}),EE=mn(xE),bE=Je({},Va,{relatedTarget:0}),sd=mn(bE),SE=Je({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),IE=mn(SE),TE=Je({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AE=mn(TE),CE=Je({},oo,{data:0}),zm=mn(CE),kE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PE[t])?!!e[t]:!1}function wf(){return DE}var jE=Je({},Va,{key:function(t){if(t.key){var e=kE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wf,charCode:function(t){return t.type==="keypress"?Kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NE=mn(jE),ME=Je({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fm=mn(ME),OE=Je({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wf}),LE=mn(OE),VE=Je({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),zE=mn(VE),FE=Je({},su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UE=mn(FE),BE=[9,13,27,32],xf=Er&&"CompositionEvent"in window,Yo=null;Er&&"documentMode"in document&&(Yo=document.documentMode);var $E=Er&&"TextEvent"in window&&!Yo,iv=Er&&(!xf||Yo&&8<Yo&&11>=Yo),Um=" ",Bm=!1;function sv(t,e){switch(t){case"keyup":return BE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ov(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Es=!1;function WE(t,e){switch(t){case"compositionend":return ov(e);case"keypress":return e.which!==32?null:(Bm=!0,Um);case"textInput":return t=e.data,t===Um&&Bm?null:t;default:return null}}function qE(t,e){if(Es)return t==="compositionend"||!xf&&sv(t,e)?(t=rv(),Gl=vf=Jr=null,Es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iv&&e.locale!=="ko"?null:e.data;default:return null}}var HE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HE[t.type]:e==="textarea"}function av(t,e,n,r){V0(r),e=_c(e,"onChange"),0<e.length&&(n=new _f("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xo=null,ga=null;function GE(t){vv(t,0)}function ou(t){var e=Is(t);if(P0(e))return t}function KE(t,e){if(t==="change")return e}var lv=!1;if(Er){var od;if(Er){var ad="oninput"in document;if(!ad){var Wm=document.createElement("div");Wm.setAttribute("oninput","return;"),ad=typeof Wm.oninput=="function"}od=ad}else od=!1;lv=od&&(!document.documentMode||9<document.documentMode)}function qm(){Xo&&(Xo.detachEvent("onpropertychange",cv),ga=Xo=null)}function cv(t){if(t.propertyName==="value"&&ou(ga)){var e=[];av(e,ga,t,ff(t)),B0(GE,e)}}function QE(t,e,n){t==="focusin"?(qm(),Xo=e,ga=n,Xo.attachEvent("onpropertychange",cv)):t==="focusout"&&qm()}function YE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ou(ga)}function XE(t,e){if(t==="click")return ou(e)}function JE(t,e){if(t==="input"||t==="change")return ou(e)}function ZE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:ZE;function ya(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Od.call(e,i)||!zn(t[i],e[i]))return!1}return!0}function Hm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gm(t,e){var n=Hm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hm(n)}}function uv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dv(){for(var t=window,e=hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hc(t.document)}return e}function Ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eb(t){var e=dv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uv(n.ownerDocument.documentElement,n)){if(r!==null&&Ef(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gm(n,s);var o=Gm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tb=Er&&"documentMode"in document&&11>=document.documentMode,bs=null,th=null,Jo=null,nh=!1;function Km(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nh||bs==null||bs!==hc(r)||(r=bs,"selectionStart"in r&&Ef(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jo&&ya(Jo,r)||(Jo=r,r=_c(th,"onSelect"),0<r.length&&(e=new _f("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bs)))}function kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ss={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},ld={},hv={};Er&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function au(t){if(ld[t])return ld[t];if(!Ss[t])return t;var e=Ss[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hv)return ld[t]=e[n];return t}var fv=au("animationend"),pv=au("animationiteration"),mv=au("animationstart"),gv=au("transitionend"),yv=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(t,e){yv.set(t,e),ss(e,[t])}for(var cd=0;cd<Qm.length;cd++){var ud=Qm[cd],nb=ud.toLowerCase(),rb=ud[0].toUpperCase()+ud.slice(1);bi(nb,"on"+rb)}bi(fv,"onAnimationEnd");bi(pv,"onAnimationIteration");bi(mv,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(gv,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ib=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function Ym(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nE(r,e,void 0,t),t.currentTarget=null}function vv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;Ym(i,c,h),s=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;Ym(i,c,h),s=u}}}if(pc)throw t=Xd,pc=!1,Xd=null,t}function We(t,e){var n=e[ah];n===void 0&&(n=e[ah]=new Set);var r=t+"__bubble";n.has(r)||(_v(e,t,2,!1),n.add(r))}function dd(t,e,n){var r=0;e&&(r|=4),_v(n,t,r,e)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function va(t){if(!t[Rl]){t[Rl]=!0,T0.forEach(function(n){n!=="selectionchange"&&(ib.has(n)||dd(n,!1,t),dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rl]||(e[Rl]=!0,dd("selectionchange",!1,e))}}function _v(t,e,n,r){switch(nv(e)){case 1:var i=vE;break;case 4:i=_E;break;default:i=yf}n=i.bind(null,e,n,t),i=void 0,!Yd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Ui(c),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}c=c.parentNode}}r=r.return}B0(function(){var h=s,m=ff(n),y=[];e:{var g=yv.get(t);if(g!==void 0){var R=_f,j=t;switch(t){case"keypress":if(Kl(n)===0)break e;case"keydown":case"keyup":R=NE;break;case"focusin":j="focus",R=sd;break;case"focusout":j="blur",R=sd;break;case"beforeblur":case"afterblur":R=sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=EE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=LE;break;case fv:case pv:case mv:R=IE;break;case gv:R=zE;break;case"scroll":R=wE;break;case"wheel":R=UE;break;case"copy":case"cut":case"paste":R=AE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Fm}var M=(e&4)!==0,F=!M&&t==="scroll",k=M?g!==null?g+"Capture":null:g;M=[];for(var S=h,P;S!==null;){P=S;var V=P.stateNode;if(P.tag===5&&V!==null&&(P=V,k!==null&&(V=ha(S,k),V!=null&&M.push(_a(S,V,P)))),F)break;S=S.return}0<M.length&&(g=new R(g,j,null,n,m),y.push({event:g,listeners:M}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",g&&n!==Kd&&(j=n.relatedTarget||n.fromElement)&&(Ui(j)||j[br]))break e;if((R||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,R?(j=n.relatedTarget||n.toElement,R=h,j=j?Ui(j):null,j!==null&&(F=os(j),j!==F||j.tag!==5&&j.tag!==6)&&(j=null)):(R=null,j=h),R!==j)){if(M=Vm,V="onMouseLeave",k="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(M=Fm,V="onPointerLeave",k="onPointerEnter",S="pointer"),F=R==null?g:Is(R),P=j==null?g:Is(j),g=new M(V,S+"leave",R,n,m),g.target=F,g.relatedTarget=P,V=null,Ui(m)===h&&(M=new M(k,S+"enter",j,n,m),M.target=P,M.relatedTarget=F,V=M),F=V,R&&j)t:{for(M=R,k=j,S=0,P=M;P;P=ms(P))S++;for(P=0,V=k;V;V=ms(V))P++;for(;0<S-P;)M=ms(M),S--;for(;0<P-S;)k=ms(k),P--;for(;S--;){if(M===k||k!==null&&M===k.alternate)break t;M=ms(M),k=ms(k)}M=null}else M=null;R!==null&&Xm(y,g,R,M,!1),j!==null&&F!==null&&Xm(y,F,j,M,!0)}}e:{if(g=h?Is(h):window,R=g.nodeName&&g.nodeName.toLowerCase(),R==="select"||R==="input"&&g.type==="file")var W=KE;else if($m(g))if(lv)W=JE;else{W=YE;var B=QE}else(R=g.nodeName)&&R.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(W=XE);if(W&&(W=W(t,h))){av(y,W,n,m);break e}B&&B(t,g,h),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&$d(g,"number",g.value)}switch(B=h?Is(h):window,t){case"focusin":($m(B)||B.contentEditable==="true")&&(bs=B,th=h,Jo=null);break;case"focusout":Jo=th=bs=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Km(y,n,m);break;case"selectionchange":if(tb)break;case"keydown":case"keyup":Km(y,n,m)}var E;if(xf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Es?sv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(iv&&n.locale!=="ko"&&(Es||v!=="onCompositionStart"?v==="onCompositionEnd"&&Es&&(E=rv()):(Jr=m,vf="value"in Jr?Jr.value:Jr.textContent,Es=!0)),B=_c(h,v),0<B.length&&(v=new zm(v,t,null,n,m),y.push({event:v,listeners:B}),E?v.data=E:(E=ov(n),E!==null&&(v.data=E)))),(E=$E?WE(t,n):qE(t,n))&&(h=_c(h,"onBeforeInput"),0<h.length&&(m=new zm("onBeforeInput","beforeinput",null,n,m),y.push({event:m,listeners:h}),m.data=E))}vv(y,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _c(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ha(t,n),s!=null&&r.unshift(_a(t,s,i)),s=ha(t,e),s!=null&&r.push(_a(t,s,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,i?(u=ha(n,s),u!=null&&o.unshift(_a(n,u,c))):i||(u=ha(n,s),u!=null&&o.push(_a(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sb=/\r\n?/g,ob=/\u0000|\uFFFD/g;function Jm(t){return(typeof t=="string"?t:""+t).replace(sb,`
`).replace(ob,"")}function Pl(t,e,n){if(e=Jm(e),Jm(t)!==e&&n)throw Error($(425))}function wc(){}var rh=null,ih=null;function sh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oh=typeof setTimeout=="function"?setTimeout:void 0,ab=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,lb=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(t){return Zm.resolve(null).then(t).catch(cb)}:oh;function cb(t){setTimeout(function(){throw t})}function fd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ma(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ma(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function eg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),Kn="__reactFiber$"+ao,wa="__reactProps$"+ao,br="__reactContainer$"+ao,ah="__reactEvents$"+ao,ub="__reactListeners$"+ao,db="__reactHandles$"+ao;function Ui(t){var e=t[Kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[br]||n[Kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eg(t);t!==null;){if(n=t[Kn])return n;t=eg(t)}return e}t=n,n=t.parentNode}return null}function za(t){return t=t[Kn]||t[br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function lu(t){return t[wa]||null}var lh=[],Ts=-1;function Si(t){return{current:t}}function qe(t){0>Ts||(t.current=lh[Ts],lh[Ts]=null,Ts--)}function Be(t,e){Ts++,lh[Ts]=t.current,t.current=e}var gi={},Vt=Si(gi),en=Si(!1),Gi=gi;function qs(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function tn(t){return t=t.childContextTypes,t!=null}function xc(){qe(en),qe(Vt)}function tg(t,e,n){if(Vt.current!==gi)throw Error($(168));Be(Vt,e),Be(en,n)}function wv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,Q1(t)||"Unknown",i));return Je({},n,r)}function Ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,Gi=Vt.current,Be(Vt,t),Be(en,en.current),!0}function ng(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=wv(t,e,Gi),r.__reactInternalMemoizedMergedChildContext=t,qe(en),qe(Vt),Be(Vt,t)):qe(en),Be(en,n)}var hr=null,cu=!1,pd=!1;function xv(t){hr===null?hr=[t]:hr.push(t)}function hb(t){cu=!0,xv(t)}function Ii(){if(!pd&&hr!==null){pd=!0;var t=0,e=Ne;try{var n=hr;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,cu=!1}catch(i){throw hr!==null&&(hr=hr.slice(t+1)),H0(pf,Ii),i}finally{Ne=e,pd=!1}}return null}var As=[],Cs=0,bc=null,Sc=0,_n=[],wn=0,Ki=null,pr=1,mr="";function Vi(t,e){As[Cs++]=Sc,As[Cs++]=bc,bc=t,Sc=e}function Ev(t,e,n){_n[wn++]=pr,_n[wn++]=mr,_n[wn++]=Ki,Ki=t;var r=pr;t=mr;var i=32-Mn(r)-1;r&=~(1<<i),n+=1;var s=32-Mn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pr=1<<32-Mn(e)+i|n<<i|r,mr=s+t}else pr=1<<s|n<<i|r,mr=t}function bf(t){t.return!==null&&(Vi(t,1),Ev(t,1,0))}function Sf(t){for(;t===bc;)bc=As[--Cs],As[Cs]=null,Sc=As[--Cs],As[Cs]=null;for(;t===Ki;)Ki=_n[--wn],_n[wn]=null,mr=_n[--wn],_n[wn]=null,pr=_n[--wn],_n[wn]=null}var hn=null,un=null,Ge=!1,jn=null;function bv(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ki!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function ch(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uh(t){if(Ge){var e=un;if(e){var n=e;if(!rg(t,e)){if(ch(t))throw Error($(418));e=ii(n.nextSibling);var r=hn;e&&rg(t,e)?bv(r,n):(t.flags=t.flags&-4097|2,Ge=!1,hn=t)}}else{if(ch(t))throw Error($(418));t.flags=t.flags&-4097|2,Ge=!1,hn=t}}}function ig(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Dl(t){if(t!==hn)return!1;if(!Ge)return ig(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sh(t.type,t.memoizedProps)),e&&(e=un)){if(ch(t))throw Sv(),Error($(418));for(;e;)bv(t,e),e=ii(e.nextSibling)}if(ig(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?ii(t.stateNode.nextSibling):null;return!0}function Sv(){for(var t=un;t;)t=ii(t.nextSibling)}function Hs(){un=hn=null,Ge=!1}function If(t){jn===null?jn=[t]:jn.push(t)}var fb=Rr.ReactCurrentBatchConfig;function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var c=i.refs;o===null?delete c[s]:c[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sg(t){var e=t._init;return e(t._payload)}function Iv(t){function e(k,S){if(t){var P=k.deletions;P===null?(k.deletions=[S],k.flags|=16):P.push(S)}}function n(k,S){if(!t)return null;for(;S!==null;)e(k,S),S=S.sibling;return null}function r(k,S){for(k=new Map;S!==null;)S.key!==null?k.set(S.key,S):k.set(S.index,S),S=S.sibling;return k}function i(k,S){return k=li(k,S),k.index=0,k.sibling=null,k}function s(k,S,P){return k.index=P,t?(P=k.alternate,P!==null?(P=P.index,P<S?(k.flags|=2,S):P):(k.flags|=2,S)):(k.flags|=1048576,S)}function o(k){return t&&k.alternate===null&&(k.flags|=2),k}function c(k,S,P,V){return S===null||S.tag!==6?(S=xd(P,k.mode,V),S.return=k,S):(S=i(S,P),S.return=k,S)}function u(k,S,P,V){var W=P.type;return W===xs?m(k,S,P.props.children,V,P.key):S!==null&&(S.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Wr&&sg(W)===S.type)?(V=i(S,P.props),V.ref=No(k,S,P),V.return=k,V):(V=tc(P.type,P.key,P.props,null,k.mode,V),V.ref=No(k,S,P),V.return=k,V)}function h(k,S,P,V){return S===null||S.tag!==4||S.stateNode.containerInfo!==P.containerInfo||S.stateNode.implementation!==P.implementation?(S=Ed(P,k.mode,V),S.return=k,S):(S=i(S,P.children||[]),S.return=k,S)}function m(k,S,P,V,W){return S===null||S.tag!==7?(S=Hi(P,k.mode,V,W),S.return=k,S):(S=i(S,P),S.return=k,S)}function y(k,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return S=xd(""+S,k.mode,P),S.return=k,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case El:return P=tc(S.type,S.key,S.props,null,k.mode,P),P.ref=No(k,null,S),P.return=k,P;case ws:return S=Ed(S,k.mode,P),S.return=k,S;case Wr:var V=S._init;return y(k,V(S._payload),P)}if(Fo(S)||ko(S))return S=Hi(S,k.mode,P,null),S.return=k,S;jl(k,S)}return null}function g(k,S,P,V){var W=S!==null?S.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return W!==null?null:c(k,S,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case El:return P.key===W?u(k,S,P,V):null;case ws:return P.key===W?h(k,S,P,V):null;case Wr:return W=P._init,g(k,S,W(P._payload),V)}if(Fo(P)||ko(P))return W!==null?null:m(k,S,P,V,null);jl(k,P)}return null}function R(k,S,P,V,W){if(typeof V=="string"&&V!==""||typeof V=="number")return k=k.get(P)||null,c(S,k,""+V,W);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case El:return k=k.get(V.key===null?P:V.key)||null,u(S,k,V,W);case ws:return k=k.get(V.key===null?P:V.key)||null,h(S,k,V,W);case Wr:var B=V._init;return R(k,S,P,B(V._payload),W)}if(Fo(V)||ko(V))return k=k.get(P)||null,m(S,k,V,W,null);jl(S,V)}return null}function j(k,S,P,V){for(var W=null,B=null,E=S,v=S=0,T=null;E!==null&&v<P.length;v++){E.index>v?(T=E,E=null):T=E.sibling;var A=g(k,E,P[v],V);if(A===null){E===null&&(E=T);break}t&&E&&A.alternate===null&&e(k,E),S=s(A,S,v),B===null?W=A:B.sibling=A,B=A,E=T}if(v===P.length)return n(k,E),Ge&&Vi(k,v),W;if(E===null){for(;v<P.length;v++)E=y(k,P[v],V),E!==null&&(S=s(E,S,v),B===null?W=E:B.sibling=E,B=E);return Ge&&Vi(k,v),W}for(E=r(k,E);v<P.length;v++)T=R(E,k,v,P[v],V),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?v:T.key),S=s(T,S,v),B===null?W=T:B.sibling=T,B=T);return t&&E.forEach(function(D){return e(k,D)}),Ge&&Vi(k,v),W}function M(k,S,P,V){var W=ko(P);if(typeof W!="function")throw Error($(150));if(P=W.call(P),P==null)throw Error($(151));for(var B=W=null,E=S,v=S=0,T=null,A=P.next();E!==null&&!A.done;v++,A=P.next()){E.index>v?(T=E,E=null):T=E.sibling;var D=g(k,E,A.value,V);if(D===null){E===null&&(E=T);break}t&&E&&D.alternate===null&&e(k,E),S=s(D,S,v),B===null?W=D:B.sibling=D,B=D,E=T}if(A.done)return n(k,E),Ge&&Vi(k,v),W;if(E===null){for(;!A.done;v++,A=P.next())A=y(k,A.value,V),A!==null&&(S=s(A,S,v),B===null?W=A:B.sibling=A,B=A);return Ge&&Vi(k,v),W}for(E=r(k,E);!A.done;v++,A=P.next())A=R(E,k,v,A.value,V),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?v:A.key),S=s(A,S,v),B===null?W=A:B.sibling=A,B=A);return t&&E.forEach(function(I){return e(k,I)}),Ge&&Vi(k,v),W}function F(k,S,P,V){if(typeof P=="object"&&P!==null&&P.type===xs&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case El:e:{for(var W=P.key,B=S;B!==null;){if(B.key===W){if(W=P.type,W===xs){if(B.tag===7){n(k,B.sibling),S=i(B,P.props.children),S.return=k,k=S;break e}}else if(B.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Wr&&sg(W)===B.type){n(k,B.sibling),S=i(B,P.props),S.ref=No(k,B,P),S.return=k,k=S;break e}n(k,B);break}else e(k,B);B=B.sibling}P.type===xs?(S=Hi(P.props.children,k.mode,V,P.key),S.return=k,k=S):(V=tc(P.type,P.key,P.props,null,k.mode,V),V.ref=No(k,S,P),V.return=k,k=V)}return o(k);case ws:e:{for(B=P.key;S!==null;){if(S.key===B)if(S.tag===4&&S.stateNode.containerInfo===P.containerInfo&&S.stateNode.implementation===P.implementation){n(k,S.sibling),S=i(S,P.children||[]),S.return=k,k=S;break e}else{n(k,S);break}else e(k,S);S=S.sibling}S=Ed(P,k.mode,V),S.return=k,k=S}return o(k);case Wr:return B=P._init,F(k,S,B(P._payload),V)}if(Fo(P))return j(k,S,P,V);if(ko(P))return M(k,S,P,V);jl(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,S!==null&&S.tag===6?(n(k,S.sibling),S=i(S,P),S.return=k,k=S):(n(k,S),S=xd(P,k.mode,V),S.return=k,k=S),o(k)):n(k,S)}return F}var Gs=Iv(!0),Tv=Iv(!1),Ic=Si(null),Tc=null,ks=null,Tf=null;function Af(){Tf=ks=Tc=null}function Cf(t){var e=Ic.current;qe(Ic),t._currentValue=e}function dh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vs(t,e){Tc=t,Tf=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(Tf!==t)if(t={context:t,memoizedValue:e,next:null},ks===null){if(Tc===null)throw Error($(308));ks=t,Tc.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var Bi=null;function kf(t){Bi===null?Bi=[t]:Bi.push(t)}function Av(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function Rf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sr(t,n)}return i=r.interleaved,i===null?(e.next=e,kf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sr(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mf(t,n)}}function og(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ac(t,e,n,r){var i=t.updateQueue;qr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=u))}if(s!==null){var y=i.baseState;o=0,m=h=u=null,c=s;do{var g=c.lane,R=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:R,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=t,M=c;switch(g=e,R=n,M.tag){case 1:if(j=M.payload,typeof j=="function"){y=j.call(R,y,g);break e}y=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=M.payload,g=typeof j=="function"?j.call(R,y,g):j,g==null)break e;y=Je({},y,g);break e;case 2:qr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[c]:g.push(c))}else R={eventTime:R,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(h=m=R,u=y):m=m.next=R,o|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;g=c,c=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(m===null&&(u=y),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yi|=o,t.lanes=o,t.memoizedState=y}}function ag(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Fa={},Yn=Si(Fa),xa=Si(Fa),Ea=Si(Fa);function $i(t){if(t===Fa)throw Error($(174));return t}function Pf(t,e){switch(Be(Ea,e),Be(xa,t),Be(Yn,Fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qd(e,t)}qe(Yn),Be(Yn,e)}function Ks(){qe(Yn),qe(xa),qe(Ea)}function kv(t){$i(Ea.current);var e=$i(Yn.current),n=qd(e,t.type);e!==n&&(Be(xa,t),Be(Yn,n))}function Df(t){xa.current===t&&(qe(Yn),qe(xa))}var Qe=Si(0);function Cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var md=[];function jf(){for(var t=0;t<md.length;t++)md[t]._workInProgressVersionPrimary=null;md.length=0}var Yl=Rr.ReactCurrentDispatcher,gd=Rr.ReactCurrentBatchConfig,Qi=0,Xe=null,ct=null,yt=null,kc=!1,Zo=!1,ba=0,pb=0;function Dt(){throw Error($(321))}function Nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function Mf(t,e,n,r,i,s){if(Qi=s,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?vb:_b,t=n(r,i),Zo){s=0;do{if(Zo=!1,ba=0,25<=s)throw Error($(301));s+=1,yt=ct=null,e.updateQueue=null,Yl.current=wb,t=n(r,i)}while(Zo)}if(Yl.current=Rc,e=ct!==null&&ct.next!==null,Qi=0,yt=ct=Xe=null,kc=!1,e)throw Error($(300));return t}function Of(){var t=ba!==0;return ba=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Xe.memoizedState=yt=t:yt=yt.next=t,yt}function Tn(){if(ct===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=yt===null?Xe.memoizedState:yt.next;if(e!==null)yt=e,ct=t;else{if(t===null)throw Error($(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},yt===null?Xe.memoizedState=yt=t:yt=yt.next=t}return yt}function Sa(t,e){return typeof e=="function"?e(t):e}function yd(t){var e=Tn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=o=null,u=null,h=s;do{var m=h.lane;if((Qi&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=y,o=r):u=u.next=y,Xe.lanes|=m,Yi|=m}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=c,zn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xe.lanes|=s,Yi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vd(t){var e=Tn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zn(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Rv(){}function Pv(t,e){var n=Xe,r=Tn(),i=e(),s=!zn(r.memoizedState,i);if(s&&(r.memoizedState=i,Zt=!0),r=r.queue,Lf(Nv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Ia(9,jv.bind(null,n,r,i,e),void 0,null),_t===null)throw Error($(349));Qi&30||Dv(n,e,i)}return i}function Dv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jv(t,e,n,r){e.value=n,e.getSnapshot=r,Mv(e)&&Ov(t)}function Nv(t,e,n){return n(function(){Mv(e)&&Ov(t)})}function Mv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function Ov(t){var e=Sr(t,1);e!==null&&On(e,t,1,-1)}function lg(t){var e=Hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:t},e.queue=t,t=t.dispatch=yb.bind(null,Xe,t),[e.memoizedState,t]}function Ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lv(){return Tn().memoizedState}function Xl(t,e,n,r){var i=Hn();Xe.flags|=t,i.memoizedState=Ia(1|e,n,void 0,r===void 0?null:r)}function uu(t,e,n,r){var i=Tn();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&Nf(r,o.deps)){i.memoizedState=Ia(e,n,s,r);return}}Xe.flags|=t,i.memoizedState=Ia(1|e,n,s,r)}function cg(t,e){return Xl(8390656,8,t,e)}function Lf(t,e){return uu(2048,8,t,e)}function Vv(t,e){return uu(4,2,t,e)}function zv(t,e){return uu(4,4,t,e)}function Fv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uv(t,e,n){return n=n!=null?n.concat([t]):null,uu(4,4,Fv.bind(null,e,t),n)}function Vf(){}function Bv(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $v(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Wv(t,e,n){return Qi&21?(zn(n,e)||(n=Q0(),Xe.lanes|=n,Yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function mb(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=gd.transition;gd.transition={};try{t(!1),e()}finally{Ne=n,gd.transition=r}}function qv(){return Tn().memoizedState}function gb(t,e,n){var r=ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hv(t))Gv(e,n);else if(n=Av(t,e,n,r),n!==null){var i=$t();On(n,t,r,i),Kv(n,e,r)}}function yb(t,e,n){var r=ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hv(t))Gv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,c=s(o,n);if(i.hasEagerState=!0,i.eagerState=c,zn(c,o)){var u=e.interleaved;u===null?(i.next=i,kf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Av(t,e,i,r),n!==null&&(i=$t(),On(n,t,r,i),Kv(n,e,r))}}function Hv(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function Gv(t,e){Zo=kc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mf(t,n)}}var Rc={readContext:In,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},vb={readContext:In,useCallback:function(t,e){return Hn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:cg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,Fv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=Hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gb.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=Hn();return t={current:t},e.memoizedState=t},useState:lg,useDebugValue:Vf,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=lg(!1),e=t[0];return t=mb.bind(null,t[1]),Hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,i=Hn();if(Ge){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),_t===null)throw Error($(349));Qi&30||Dv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cg(Nv.bind(null,r,s,t),[t]),r.flags|=2048,Ia(9,jv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Hn(),e=_t.identifierPrefix;if(Ge){var n=mr,r=pr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ba++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_b={readContext:In,useCallback:Bv,useContext:In,useEffect:Lf,useImperativeHandle:Uv,useInsertionEffect:Vv,useLayoutEffect:zv,useMemo:$v,useReducer:yd,useRef:Lv,useState:function(){return yd(Sa)},useDebugValue:Vf,useDeferredValue:function(t){var e=Tn();return Wv(e,ct.memoizedState,t)},useTransition:function(){var t=yd(Sa)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:qv,unstable_isNewReconciler:!1},wb={readContext:In,useCallback:Bv,useContext:In,useEffect:Lf,useImperativeHandle:Uv,useInsertionEffect:Vv,useLayoutEffect:zv,useMemo:$v,useReducer:vd,useRef:Lv,useState:function(){return vd(Sa)},useDebugValue:Vf,useDeferredValue:function(t){var e=Tn();return ct===null?e.memoizedState=t:Wv(e,ct.memoizedState,t)},useTransition:function(){var t=vd(Sa)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Rv,useSyncExternalStore:Pv,useId:qv,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var du={isMounted:function(t){return(t=t._reactInternals)?os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),i=ai(t),s=vr(r,i);s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(On(e,t,i,r),Ql(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),i=ai(t),s=vr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(On(e,t,i,r),Ql(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=ai(t),i=vr(n,r);i.tag=2,e!=null&&(i.callback=e),e=si(t,i,r),e!==null&&(On(e,t,r,n),Ql(e,t,r))}};function ug(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ya(n,r)||!ya(i,s):!0}function Qv(t,e,n){var r=!1,i=gi,s=e.contextType;return typeof s=="object"&&s!==null?s=In(s):(i=tn(e)?Gi:Vt.current,r=e.contextTypes,s=(r=r!=null)?qs(t,i):gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=du,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function dg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&du.enqueueReplaceState(e,e.state,null)}function fh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=In(s):(s=tn(e)?Gi:Vt.current,i.context=qs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&du.enqueueReplaceState(i,i.state,null),Ac(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qs(t,e){try{var n="",r=e;do n+=K1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ph(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xb=typeof WeakMap=="function"?WeakMap:Map;function Yv(t,e,n){n=vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dc||(Dc=!0,Sh=r),ph(t,e)},n}function Xv(t,e,n){n=vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ph(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ph(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Mb.bind(null,t,e,n),e.then(t,t))}function fg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vr(-1,1),e.tag=2,si(n,e,1))),n.lanes|=1),t)}var Eb=Rr.ReactCurrentOwner,Zt=!1;function Bt(t,e,n,r){e.child=t===null?Tv(e,null,n,r):Gs(e,t.child,n,r)}function mg(t,e,n,r,i){n=n.render;var s=e.ref;return Vs(e,i),r=Mf(t,e,n,r,s,i),n=Of(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ir(t,e,i)):(Ge&&n&&bf(e),e.flags|=1,Bt(t,e,r,i),e.child)}function gg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Jv(t,e,s,r,i)):(t=tc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(o,r)&&t.ref===e.ref)return Ir(t,e,i)}return e.flags|=1,t=li(s,r),t.ref=e.ref,t.return=e,e.child=t}function Jv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ya(s,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Ir(t,e,i)}return mh(t,e,n,r,i)}function Zv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Ps,ln),ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(Ps,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Be(Ps,ln),ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Be(Ps,ln),ln|=r;return Bt(t,e,i,n),e.child}function e_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mh(t,e,n,r,i){var s=tn(n)?Gi:Vt.current;return s=qs(e,s),Vs(e,i),n=Mf(t,e,n,r,s,i),r=Of(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ir(t,e,i)):(Ge&&r&&bf(e),e.flags|=1,Bt(t,e,n,i),e.child)}function yg(t,e,n,r,i){if(tn(n)){var s=!0;Ec(e)}else s=!1;if(Vs(e,i),e.stateNode===null)Jl(t,e),Qv(e,n,r),fh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=In(h):(h=tn(n)?Gi:Vt.current,h=qs(e,h));var m=n.getDerivedStateFromProps,y=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&dg(e,o,r,h),qr=!1;var g=e.memoizedState;o.state=g,Ac(e,r,o,i),u=e.memoizedState,c!==r||g!==u||en.current||qr?(typeof m=="function"&&(hh(e,n,m,r),u=e.memoizedState),(c=qr||ug(e,n,c,r,g,u,h))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cv(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:Pn(e.type,c),o.props=h,y=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=In(u):(u=tn(n)?Gi:Vt.current,u=qs(e,u));var R=n.getDerivedStateFromProps;(m=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==y||g!==u)&&dg(e,o,r,u),qr=!1,g=e.memoizedState,o.state=g,Ac(e,r,o,i);var j=e.memoizedState;c!==y||g!==j||en.current||qr?(typeof R=="function"&&(hh(e,n,R,r),j=e.memoizedState),(h=qr||ug(e,n,h,r,g,j,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),o.props=r,o.state=j,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return gh(t,e,n,r,s,i)}function gh(t,e,n,r,i,s){e_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ng(e,n,!1),Ir(t,e,s);r=e.stateNode,Eb.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gs(e,t.child,null,s),e.child=Gs(e,null,c,s)):Bt(t,e,c,s),e.memoizedState=r.state,i&&ng(e,n,!0),e.child}function t_(t){var e=t.stateNode;e.pendingContext?tg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tg(t,e.context,!1),Pf(t,e.containerInfo)}function vg(t,e,n,r,i){return Hs(),If(i),e.flags|=256,Bt(t,e,n,r),e.child}var yh={dehydrated:null,treeContext:null,retryLane:0};function vh(t){return{baseLanes:t,cachePool:null,transitions:null}}function n_(t,e,n){var r=e.pendingProps,i=Qe.current,s=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Be(Qe,i&1),t===null)return uh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pu(o,r,0,null),t=Hi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vh(n),e.memoizedState=yh,t):zf(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return bb(t,e,o,r,c,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=li(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=li(c,s):(s=Hi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?vh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yh,r}return s=t.child,t=s.sibling,r=li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zf(t,e){return e=pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nl(t,e,n,r){return r!==null&&If(r),Gs(e,t.child,null,n),t=zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bb(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=_d(Error($(422))),Nl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pu({mode:"visible",children:r.children},i,0,null),s=Hi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Gs(e,t.child,null,o),e.child.memoizedState=vh(o),e.memoizedState=yh,s);if(!(e.mode&1))return Nl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error($(419)),r=_d(s,r,void 0),Nl(t,e,o,r)}if(c=(o&t.childLanes)!==0,Zt||c){if(r=_t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sr(t,i),On(r,t,i,-1))}return qf(),r=_d(Error($(421))),Nl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ob.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,un=ii(i.nextSibling),hn=e,Ge=!0,jn=null,t!==null&&(_n[wn++]=pr,_n[wn++]=mr,_n[wn++]=Ki,pr=t.id,mr=t.overflow,Ki=e),e=zf(e,r.children),e.flags|=4096,e)}function _g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dh(t.return,e,n)}function wd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function r_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_g(t,n,e);else if(t.tag===19)_g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wd(e,!0,n,null,s);break;case"together":wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Sb(t,e,n){switch(e.tag){case 3:t_(e),Hs();break;case 5:kv(e);break;case 1:tn(e.type)&&Ec(e);break;case 4:Pf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Be(Ic,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?n_(t,e,n):(Be(Qe,Qe.current&1),t=Ir(t,e,n),t!==null?t.sibling:null);Be(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Be(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,Zv(t,e,n)}return Ir(t,e,n)}var i_,_h,s_,o_;i_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_h=function(){};s_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$i(Yn.current);var s=null;switch(n){case"input":i=Ud(t,i),r=Ud(t,r),s=[];break;case"select":i=Je({},i,{value:void 0}),r=Je({},r,{value:void 0}),s=[];break;case"textarea":i=Wd(t,i),r=Wd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wc)}Hd(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ua.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(c=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ua.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&We("scroll",t),s||c===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};o_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ib(t,e,n){var r=e.pendingProps;switch(Sf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return tn(e.type)&&xc(),jt(e),null;case 3:return r=e.stateNode,Ks(),qe(en),qe(Vt),jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Ah(jn),jn=null))),_h(t,e),jt(e),null;case 5:Df(e);var i=$i(Ea.current);if(n=e.type,t!==null&&e.stateNode!=null)s_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return jt(e),null}if(t=$i(Yn.current),Dl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Kn]=e,r[wa]=s,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<Bo.length;i++)We(Bo[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":Cm(r,s),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},We("invalid",r);break;case"textarea":Rm(r,s),We("invalid",r)}Hd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Pl(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Pl(r.textContent,c,t),i=["children",""+c]):ua.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&We("scroll",r)}switch(n){case"input":bl(r),km(r,s,!0);break;case"textarea":bl(r),Pm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=N0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Kn]=e,t[wa]=r,i_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gd(n,r),n){case"dialog":We("cancel",t),We("close",t),i=r;break;case"iframe":case"object":case"embed":We("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bo.length;i++)We(Bo[i],t);i=r;break;case"source":We("error",t),i=r;break;case"img":case"image":case"link":We("error",t),We("load",t),i=r;break;case"details":We("toggle",t),i=r;break;case"input":Cm(t,r),i=Ud(t,r),We("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Je({},r,{value:void 0}),We("invalid",t);break;case"textarea":Rm(t,r),i=Wd(t,r),We("invalid",t);break;default:i=r}Hd(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?L0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&M0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&da(t,u):typeof u=="number"&&da(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ua.hasOwnProperty(s)?u!=null&&s==="onScroll"&&We("scroll",t):u!=null&&cf(t,s,u,o))}switch(n){case"input":bl(t),km(t,r,!1);break;case"textarea":bl(t),Pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ns(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ns(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)o_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=$i(Ea.current),$i(Yn.current),Dl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kn]=e,(s=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:Pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kn]=e,e.stateNode=r}return jt(e),null;case 13:if(qe(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&un!==null&&e.mode&1&&!(e.flags&128))Sv(),Hs(),e.flags|=98560,s=!1;else if(s=Dl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Kn]=e}else Hs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else jn!==null&&(Ah(jn),jn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?ut===0&&(ut=3):qf())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return Ks(),_h(t,e),t===null&&va(e.stateNode.containerInfo),jt(e),null;case 10:return Cf(e.type._context),jt(e),null;case 17:return tn(e.type)&&xc(),jt(e),null;case 19:if(qe(Qe),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mo(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cc(t),o!==null){for(e.flags|=128,Mo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Qe,Qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>Ys&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ge)return jt(e),null}else 2*rt()-s.renderingStartTime>Ys&&n!==1073741824&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=Qe.current,Be(Qe,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return Wf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Tb(t,e){switch(Sf(e),e.tag){case 1:return tn(e.type)&&xc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ks(),qe(en),qe(Vt),jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Df(e),null;case 13:if(qe(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Hs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Qe),null;case 4:return Ks(),null;case 10:return Cf(e.type._context),null;case 22:case 23:return Wf(),null;case 24:return null;default:return null}}var Ml=!1,Ot=!1,Ab=typeof WeakSet=="function"?WeakSet:Set,X=null;function Rs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function wh(t,e,n){try{n()}catch(r){tt(t,e,r)}}var wg=!1;function Cb(t,e){if(rh=yc,t=dv(),Ef(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,m=0,y=t,g=null;t:for(;;){for(var R;y!==n||i!==0&&y.nodeType!==3||(c=o+i),y!==s||r!==0&&y.nodeType!==3||(u=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(R=y.firstChild)!==null;)g=y,y=R;for(;;){if(y===t)break t;if(g===n&&++h===i&&(c=o),g===s&&++m===r&&(u=o),(R=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=R}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ih={focusedElem:t,selectionRange:n},yc=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var M=j.memoizedProps,F=j.memoizedState,k=e.stateNode,S=k.getSnapshotBeforeUpdate(e.elementType===e.type?M:Pn(e.type,M),F);k.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(V){tt(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return j=wg,wg=!1,j}function ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wh(e,n,s)}i=i.next}while(i!==r)}}function hu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function a_(t){var e=t.alternate;e!==null&&(t.alternate=null,a_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kn],delete e[wa],delete e[ah],delete e[ub],delete e[db])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l_(t){return t.tag===5||t.tag===3||t.tag===4}function xg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wc));else if(r!==4&&(t=t.child,t!==null))for(Eh(t,e,n),t=t.sibling;t!==null;)Eh(t,e,n),t=t.sibling}function bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bh(t,e,n),t=t.sibling;t!==null;)bh(t,e,n),t=t.sibling}var St=null,Dn=!1;function Fr(t,e,n){for(n=n.child;n!==null;)c_(t,e,n),n=n.sibling}function c_(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(iu,n)}catch{}switch(n.tag){case 5:Ot||Rs(n,e);case 6:var r=St,i=Dn;St=null,Fr(t,e,n),St=r,Dn=i,St!==null&&(Dn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Dn?(t=St,n=n.stateNode,t.nodeType===8?fd(t.parentNode,n):t.nodeType===1&&fd(t,n),ma(t)):fd(St,n.stateNode));break;case 4:r=St,i=Dn,St=n.stateNode.containerInfo,Dn=!0,Fr(t,e,n),St=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wh(n,e,o),i=i.next}while(i!==r)}Fr(t,e,n);break;case 1:if(!Ot&&(Rs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){tt(n,e,c)}Fr(t,e,n);break;case 21:Fr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Fr(t,e,n),Ot=r):Fr(t,e,n);break;default:Fr(t,e,n)}}function Eg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ab),e.forEach(function(r){var i=Lb.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:St=c.stateNode,Dn=!1;break e;case 3:St=c.stateNode.containerInfo,Dn=!0;break e;case 4:St=c.stateNode.containerInfo,Dn=!0;break e}c=c.return}if(St===null)throw Error($(160));c_(s,o,i),St=null,Dn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){tt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u_(e,t),e=e.sibling}function u_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),qn(t),r&4){try{ea(3,t,t.return),hu(3,t)}catch(M){tt(t,t.return,M)}try{ea(5,t,t.return)}catch(M){tt(t,t.return,M)}}break;case 1:kn(e,t),qn(t),r&512&&n!==null&&Rs(n,n.return);break;case 5:if(kn(e,t),qn(t),r&512&&n!==null&&Rs(n,n.return),t.flags&32){var i=t.stateNode;try{da(i,"")}catch(M){tt(t,t.return,M)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&D0(i,s),Gd(c,o);var h=Gd(c,s);for(o=0;o<u.length;o+=2){var m=u[o],y=u[o+1];m==="style"?L0(i,y):m==="dangerouslySetInnerHTML"?M0(i,y):m==="children"?da(i,y):cf(i,m,y,h)}switch(c){case"input":Bd(i,s);break;case"textarea":j0(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Ns(i,!!s.multiple,R,!1):g!==!!s.multiple&&(s.defaultValue!=null?Ns(i,!!s.multiple,s.defaultValue,!0):Ns(i,!!s.multiple,s.multiple?[]:"",!1))}i[wa]=s}catch(M){tt(t,t.return,M)}}break;case 6:if(kn(e,t),qn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(M){tt(t,t.return,M)}}break;case 3:if(kn(e,t),qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ma(e.containerInfo)}catch(M){tt(t,t.return,M)}break;case 4:kn(e,t),qn(t);break;case 13:kn(e,t),qn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bf=rt())),r&4&&Eg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(h=Ot)||m,kn(e,t),Ot=h):kn(e,t),qn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(X=t,m=t.child;m!==null;){for(y=X=m;X!==null;){switch(g=X,R=g.child,g.tag){case 0:case 11:case 14:case 15:ea(4,g,g.return);break;case 1:Rs(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(M){tt(r,n,M)}}break;case 5:Rs(g,g.return);break;case 22:if(g.memoizedState!==null){Sg(y);continue}}R!==null?(R.return=g,X=R):Sg(y)}m=m.sibling}e:for(m=null,y=t;;){if(y.tag===5){if(m===null){m=y;try{i=y.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=y.stateNode,u=y.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=O0("display",o))}catch(M){tt(t,t.return,M)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(M){tt(t,t.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:kn(e,t),qn(t),r&4&&Eg(t);break;case 21:break;default:kn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l_(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(da(i,""),r.flags&=-33);var s=xg(t);bh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=xg(t);Eh(t,c,o);break;default:throw Error($(161))}}catch(u){tt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kb(t,e,n){X=t,d_(t)}function d_(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ml;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Ot;c=Ml;var h=Ot;if(Ml=o,(Ot=u)&&!h)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?Ig(i):u!==null?(u.return=o,X=u):Ig(i);for(;s!==null;)X=s,d_(s),s=s.sibling;X=i,Ml=c,Ot=h}bg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):bg(t)}}function bg(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||hu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ag(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ag(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&ma(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ot||e.flags&512&&xh(e)}catch(g){tt(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Sg(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Ig(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hu(4,e)}catch(u){tt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){tt(e,i,u)}}var s=e.return;try{xh(e)}catch(u){tt(e,s,u)}break;case 5:var o=e.return;try{xh(e)}catch(u){tt(e,o,u)}}}catch(u){tt(e,e.return,u)}if(e===t){X=null;break}var c=e.sibling;if(c!==null){c.return=e.return,X=c;break}X=e.return}}var Rb=Math.ceil,Pc=Rr.ReactCurrentDispatcher,Ff=Rr.ReactCurrentOwner,bn=Rr.ReactCurrentBatchConfig,Ie=0,_t=null,st=null,At=0,ln=0,Ps=Si(0),ut=0,Ta=null,Yi=0,fu=0,Uf=0,ta=null,Xt=null,Bf=0,Ys=1/0,ur=null,Dc=!1,Sh=null,oi=null,Ol=!1,Zr=null,jc=0,na=0,Ih=null,Zl=-1,ec=0;function $t(){return Ie&6?rt():Zl!==-1?Zl:Zl=rt()}function ai(t){return t.mode&1?Ie&2&&At!==0?At&-At:fb.transition!==null?(ec===0&&(ec=Q0()),ec):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:nv(t.type)),t):1}function On(t,e,n,r){if(50<na)throw na=0,Ih=null,Error($(185));La(t,n,r),(!(Ie&2)||t!==_t)&&(t===_t&&(!(Ie&2)&&(fu|=n),ut===4&&Gr(t,At)),nn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(Ys=rt()+500,cu&&Ii()))}function nn(t,e){var n=t.callbackNode;fE(t,e);var r=gc(t,t===_t?At:0);if(r===0)n!==null&&Nm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nm(n),e===1)t.tag===0?hb(Tg.bind(null,t)):xv(Tg.bind(null,t)),lb(function(){!(Ie&6)&&Ii()}),n=null;else{switch(Y0(r)){case 1:n=pf;break;case 4:n=G0;break;case 16:n=mc;break;case 536870912:n=K0;break;default:n=mc}n=__(n,h_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function h_(t,e){if(Zl=-1,ec=0,Ie&6)throw Error($(327));var n=t.callbackNode;if(zs()&&t.callbackNode!==n)return null;var r=gc(t,t===_t?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nc(t,r);else{e=r;var i=Ie;Ie|=2;var s=p_();(_t!==t||At!==e)&&(ur=null,Ys=rt()+500,qi(t,e));do try{jb();break}catch(c){f_(t,c)}while(!0);Af(),Pc.current=s,Ie=i,st!==null?e=0:(_t=null,At=0,e=ut)}if(e!==0){if(e===2&&(i=Jd(t),i!==0&&(r=i,e=Th(t,i))),e===1)throw n=Ta,qi(t,0),Gr(t,r),nn(t,rt()),n;if(e===6)Gr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Pb(i)&&(e=Nc(t,r),e===2&&(s=Jd(t),s!==0&&(r=s,e=Th(t,s))),e===1))throw n=Ta,qi(t,0),Gr(t,r),nn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:zi(t,Xt,ur);break;case 3:if(Gr(t,r),(r&130023424)===r&&(e=Bf+500-rt(),10<e)){if(gc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oh(zi.bind(null,t,Xt,ur),e);break}zi(t,Xt,ur);break;case 4:if(Gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Mn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rb(r/1960))-r,10<r){t.timeoutHandle=oh(zi.bind(null,t,Xt,ur),r);break}zi(t,Xt,ur);break;case 5:zi(t,Xt,ur);break;default:throw Error($(329))}}}return nn(t,rt()),t.callbackNode===n?h_.bind(null,t):null}function Th(t,e){var n=ta;return t.current.memoizedState.isDehydrated&&(qi(t,e).flags|=256),t=Nc(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Ah(e)),t}function Ah(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function Pb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~Uf,e&=~fu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function Tg(t){if(Ie&6)throw Error($(327));zs();var e=gc(t,0);if(!(e&1))return nn(t,rt()),null;var n=Nc(t,e);if(t.tag!==0&&n===2){var r=Jd(t);r!==0&&(e=r,n=Th(t,r))}if(n===1)throw n=Ta,qi(t,0),Gr(t,e),nn(t,rt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,Xt,ur),nn(t,rt()),null}function $f(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(Ys=rt()+500,cu&&Ii())}}function Xi(t){Zr!==null&&Zr.tag===0&&!(Ie&6)&&zs();var e=Ie;Ie|=1;var n=bn.transition,r=Ne;try{if(bn.transition=null,Ne=1,t)return t()}finally{Ne=r,bn.transition=n,Ie=e,!(Ie&6)&&Ii()}}function Wf(){ln=Ps.current,qe(Ps)}function qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ab(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Sf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xc();break;case 3:Ks(),qe(en),qe(Vt),jf();break;case 5:Df(r);break;case 4:Ks();break;case 13:qe(Qe);break;case 19:qe(Qe);break;case 10:Cf(r.type._context);break;case 22:case 23:Wf()}n=n.return}if(_t=t,st=t=li(t.current,null),At=ln=e,ut=0,Ta=null,Uf=fu=Yi=0,Xt=ta=null,Bi!==null){for(e=0;e<Bi.length;e++)if(n=Bi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Bi=null}return t}function f_(t,e){do{var n=st;try{if(Af(),Yl.current=Rc,kc){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kc=!1}if(Qi=0,yt=ct=Xe=null,Zo=!1,ba=0,Ff.current=null,n===null||n.return===null){ut=1,Ta=e,st=null;break}e:{var s=t,o=n.return,c=n,u=e;if(e=At,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=c,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var R=fg(o);if(R!==null){R.flags&=-257,pg(R,o,c,s,e),R.mode&1&&hg(s,h,e),e=R,u=h;var j=e.updateQueue;if(j===null){var M=new Set;M.add(u),e.updateQueue=M}else j.add(u);break e}else{if(!(e&1)){hg(s,h,e),qf();break e}u=Error($(426))}}else if(Ge&&c.mode&1){var F=fg(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),pg(F,o,c,s,e),If(Qs(u,c));break e}}s=u=Qs(u,c),ut!==4&&(ut=2),ta===null?ta=[s]:ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var k=Yv(s,u,e);og(s,k);break e;case 1:c=u;var S=s.type,P=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(oi===null||!oi.has(P)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=Xv(s,c,e);og(s,V);break e}}s=s.return}while(s!==null)}g_(n)}catch(W){e=W,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function p_(){var t=Pc.current;return Pc.current=Rc,t===null?Rc:t}function qf(){(ut===0||ut===3||ut===2)&&(ut=4),_t===null||!(Yi&268435455)&&!(fu&268435455)||Gr(_t,At)}function Nc(t,e){var n=Ie;Ie|=2;var r=p_();(_t!==t||At!==e)&&(ur=null,qi(t,e));do try{Db();break}catch(i){f_(t,i)}while(!0);if(Af(),Ie=n,Pc.current=r,st!==null)throw Error($(261));return _t=null,At=0,ut}function Db(){for(;st!==null;)m_(st)}function jb(){for(;st!==null&&!iE();)m_(st)}function m_(t){var e=v_(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?g_(t):st=e,Ff.current=null}function g_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Tb(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,st=null;return}}else if(n=Ib(n,e,ln),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ut===0&&(ut=5)}function zi(t,e,n){var r=Ne,i=bn.transition;try{bn.transition=null,Ne=1,Nb(t,e,n,r)}finally{bn.transition=i,Ne=r}return null}function Nb(t,e,n,r){do zs();while(Zr!==null);if(Ie&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(pE(t,s),t===_t&&(st=_t=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,__(mc,function(){return zs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bn.transition,bn.transition=null;var o=Ne;Ne=1;var c=Ie;Ie|=4,Ff.current=null,Cb(t,n),u_(n,t),eb(ih),yc=!!rh,ih=rh=null,t.current=n,kb(n),sE(),Ie=c,Ne=o,bn.transition=s}else t.current=n;if(Ol&&(Ol=!1,Zr=t,jc=i),s=t.pendingLanes,s===0&&(oi=null),lE(n.stateNode),nn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dc)throw Dc=!1,t=Sh,Sh=null,t;return jc&1&&t.tag!==0&&zs(),s=t.pendingLanes,s&1?t===Ih?na++:(na=0,Ih=t):na=0,Ii(),null}function zs(){if(Zr!==null){var t=Y0(jc),e=bn.transition,n=Ne;try{if(bn.transition=null,Ne=16>t?16:t,Zr===null)var r=!1;else{if(t=Zr,Zr=null,jc=0,Ie&6)throw Error($(331));var i=Ie;for(Ie|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(X=h;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:ea(8,m,s)}var y=m.child;if(y!==null)y.return=m,X=y;else for(;X!==null;){m=X;var g=m.sibling,R=m.return;if(a_(m),m===h){X=null;break}if(g!==null){g.return=R,X=g;break}X=R}}}var j=s.alternate;if(j!==null){var M=j.child;if(M!==null){j.child=null;do{var F=M.sibling;M.sibling=null,M=F}while(M!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ea(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,X=k;break e}X=s.return}}var S=t.current;for(X=S;X!==null;){o=X;var P=o.child;if(o.subtreeFlags&2064&&P!==null)P.return=o,X=P;else e:for(o=S;X!==null;){if(c=X,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:hu(9,c)}}catch(W){tt(c,c.return,W)}if(c===o){X=null;break e}var V=c.sibling;if(V!==null){V.return=c.return,X=V;break e}X=c.return}}if(Ie=i,Ii(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(iu,t)}catch{}r=!0}return r}finally{Ne=n,bn.transition=e}}return!1}function Ag(t,e,n){e=Qs(n,e),e=Yv(t,e,1),t=si(t,e,1),e=$t(),t!==null&&(La(t,1,e),nn(t,e))}function tt(t,e,n){if(t.tag===3)Ag(t,t,n);else for(;e!==null;){if(e.tag===3){Ag(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=Qs(n,t),t=Xv(e,t,1),e=si(e,t,1),t=$t(),e!==null&&(La(e,1,t),nn(e,t));break}}e=e.return}}function Mb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(At&n)===n&&(ut===4||ut===3&&(At&130023424)===At&&500>rt()-Bf?qi(t,0):Uf|=n),nn(t,e)}function y_(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=$t();t=Sr(t,e),t!==null&&(La(t,e,n),nn(t,n))}function Ob(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y_(t,n)}function Lb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),y_(t,n)}var v_;v_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,Sb(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,Ge&&e.flags&1048576&&Ev(e,Sc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jl(t,e),t=e.pendingProps;var i=qs(e,Vt.current);Vs(e,n),i=Mf(null,e,r,t,i,n);var s=Of();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)?(s=!0,Ec(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rf(e),i.updater=du,e.stateNode=i,i._reactInternals=e,fh(e,r,t,n),e=gh(null,e,r,!0,s,n)):(e.tag=0,Ge&&s&&bf(e),Bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zb(r),t=Pn(r,t),i){case 0:e=mh(null,e,r,t,n);break e;case 1:e=yg(null,e,r,t,n);break e;case 11:e=mg(null,e,r,t,n);break e;case 14:e=gg(null,e,r,Pn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),mh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),yg(t,e,r,i,n);case 3:e:{if(t_(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Cv(t,e),Ac(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qs(Error($(423)),e),e=vg(t,e,r,n,i);break e}else if(r!==i){i=Qs(Error($(424)),e),e=vg(t,e,r,n,i);break e}else for(un=ii(e.stateNode.containerInfo.firstChild),hn=e,Ge=!0,jn=null,n=Tv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hs(),r===i){e=Ir(t,e,n);break e}Bt(t,e,r,n)}e=e.child}return e;case 5:return kv(e),t===null&&uh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sh(r,i)?o=null:s!==null&&sh(r,s)&&(e.flags|=32),e_(t,e),Bt(t,e,o,n),e.child;case 6:return t===null&&uh(e),null;case 13:return n_(t,e,n);case 4:return Pf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gs(e,null,r,n):Bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),mg(t,e,r,i,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Be(Ic,r._currentValue),r._currentValue=o,s!==null)if(zn(s.value,o)){if(s.children===i.children&&!en.current){e=Ir(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=vr(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),dh(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),dh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Vs(e,n),i=In(i),r=r(i),e.flags|=1,Bt(t,e,r,n),e.child;case 14:return r=e.type,i=Pn(r,e.pendingProps),i=Pn(r.type,i),gg(t,e,r,i,n);case 15:return Jv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Jl(t,e),e.tag=1,tn(r)?(t=!0,Ec(e)):t=!1,Vs(e,n),Qv(e,r,i),fh(e,r,i,n),gh(null,e,r,!0,t,n);case 19:return r_(t,e,n);case 22:return Zv(t,e,n)}throw Error($(156,e.tag))};function __(t,e){return H0(t,e)}function Vb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new Vb(t,e,n,r)}function Hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zb(t){if(typeof t=="function")return Hf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===df)return 11;if(t===hf)return 14}return 2}function li(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xs:return Hi(n.children,i,s,e);case uf:o=8,i|=8;break;case Ld:return t=En(12,n,e,i|2),t.elementType=Ld,t.lanes=s,t;case Vd:return t=En(13,n,e,i),t.elementType=Vd,t.lanes=s,t;case zd:return t=En(19,n,e,i),t.elementType=zd,t.lanes=s,t;case k0:return pu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A0:o=10;break e;case C0:o=9;break e;case df:o=11;break e;case hf:o=14;break e;case Wr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=En(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Hi(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function pu(t,e,n,r){return t=En(22,t,r,e),t.elementType=k0,t.lanes=n,t.stateNode={isHidden:!1},t}function xd(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Ed(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fb(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nd(0),this.expirationTimes=nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gf(t,e,n,r,i,s,o,c,u){return t=new Fb(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=En(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rf(s),t}function Ub(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function w_(t){if(!t)return gi;t=t._reactInternals;e:{if(os(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(tn(n))return wv(t,n,e)}return e}function x_(t,e,n,r,i,s,o,c,u){return t=Gf(n,r,!0,t,i,s,o,c,u),t.context=w_(null),n=t.current,r=$t(),i=ai(n),s=vr(r,i),s.callback=e??null,si(n,s,i),t.current.lanes=i,La(t,i,r),nn(t,r),t}function mu(t,e,n,r){var i=e.current,s=$t(),o=ai(i);return n=w_(n),e.context===null?e.context=n:e.pendingContext=n,e=vr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=si(i,e,o),t!==null&&(On(t,i,o,s),Ql(t,i,o)),o}function Mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kf(t,e){Cg(t,e),(t=t.alternate)&&Cg(t,e)}function Bb(){return null}var E_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qf(t){this._internalRoot=t}gu.prototype.render=Qf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));mu(t,e,null,null)};gu.prototype.unmount=Qf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xi(function(){mu(null,t,null,null)}),e[br]=null}};function gu(t){this._internalRoot=t}gu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hr.length&&e!==0&&e<Hr[n].priority;n++);Hr.splice(n,0,t),n===0&&tv(t)}};function Yf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kg(){}function $b(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Mc(o);s.call(h)}}var o=x_(e,r,t,0,null,!1,!1,"",kg);return t._reactRootContainer=o,t[br]=o.current,va(t.nodeType===8?t.parentNode:t),Xi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var h=Mc(u);c.call(h)}}var u=Gf(t,0,!1,null,null,!1,!1,"",kg);return t._reactRootContainer=u,t[br]=u.current,va(t.nodeType===8?t.parentNode:t),Xi(function(){mu(e,u,n,r)}),u}function vu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var c=i;i=function(){var u=Mc(o);c.call(u)}}mu(e,o,t,i)}else o=$b(n,e,t,i,r);return Mc(o)}X0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(mf(e,n|1),nn(e,rt()),!(Ie&6)&&(Ys=rt()+500,Ii()))}break;case 13:Xi(function(){var r=Sr(t,1);if(r!==null){var i=$t();On(r,t,1,i)}}),Kf(t,1)}};gf=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=$t();On(e,t,134217728,n)}Kf(t,134217728)}};J0=function(t){if(t.tag===13){var e=ai(t),n=Sr(t,e);if(n!==null){var r=$t();On(n,t,e,r)}Kf(t,e)}};Z0=function(){return Ne};ev=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};Qd=function(t,e,n){switch(e){case"input":if(Bd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lu(r);if(!i)throw Error($(90));P0(r),Bd(r,i)}}}break;case"textarea":j0(t,n);break;case"select":e=n.value,e!=null&&Ns(t,!!n.multiple,e,!1)}};F0=$f;U0=Xi;var Wb={usingClientEntryPoint:!1,Events:[za,Is,lu,V0,z0,$f]},Oo={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qb={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=W0(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Bb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{iu=Ll.inject(qb),Qn=Ll}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wb;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yf(e))throw Error($(200));return Ub(t,e,null,n)};pn.createRoot=function(t,e){if(!Yf(t))throw Error($(299));var n=!1,r="",i=E_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gf(t,1,!1,null,null,n,!1,r,i),t[br]=e.current,va(t.nodeType===8?t.parentNode:t),new Qf(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=W0(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return Xi(t)};pn.hydrate=function(t,e,n){if(!yu(e))throw Error($(200));return vu(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Yf(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=E_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=x_(e,null,t,1,n??null,i,!1,s,o),t[br]=e.current,va(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gu(e)};pn.render=function(t,e,n){if(!yu(e))throw Error($(200));return vu(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!yu(t))throw Error($(40));return t._reactRootContainer?(Xi(function(){vu(null,null,t,!1,function(){t._reactRootContainer=null,t[br]=null})}),!0):!1};pn.unstable_batchedUpdates=$f;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return vu(t,e,n,!1,r)};pn.version="18.3.1-next-f1338f8080-20240426";function b_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b_)}catch(t){console.error(t)}}b_(),b0.exports=pn;var Hb=b0.exports,Rg=Hb;Md.createRoot=Rg.createRoot,Md.hydrateRoot=Rg.hydrateRoot;const Gb="modulepreload",Kb=function(t){return"/"+t},Pg={},It=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Kb(u),u in Pg)return;Pg[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":Gb,h||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),h)return new Promise((g,R)=>{y.addEventListener("load",g),y.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};var Xs={},Qb=Object.defineProperty,Yb=Object.defineProperties,Xb=Object.getOwnPropertyDescriptors,Dg=Object.getOwnPropertySymbols,Jb=Object.prototype.hasOwnProperty,Zb=Object.prototype.propertyIsEnumerable,jg=(t,e,n)=>e in t?Qb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lo=(t,e)=>{for(var n in e||(e={}))Jb.call(e,n)&&jg(t,n,e[n]);if(Dg)for(var n of Dg(e))Zb.call(e,n)&&jg(t,n,e[n]);return t},eS=(t,e)=>Yb(t,Xb(e)),ge=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(h){i(h)}},o=u=>{try{c(n.throw(u))}catch(h){i(h)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())}),tS="6.0.2",nS=class{constructor(t){this.resend=t}create(t){return ge(this,arguments,function*(e,n={}){return yield this.resend.post("/api-keys",e,n)})}list(){return ge(this,null,function*(){return yield this.resend.get("/api-keys")})}remove(t){return ge(this,null,function*(){return yield this.resend.delete(`/api-keys/${t}`)})}},rS=class{constructor(t){this.resend=t}create(t){return ge(this,arguments,function*(e,n={}){return yield this.resend.post("/audiences",e,n)})}list(){return ge(this,null,function*(){return yield this.resend.get("/audiences")})}get(t){return ge(this,null,function*(){return yield this.resend.get(`/audiences/${t}`)})}remove(t){return ge(this,null,function*(){return yield this.resend.delete(`/audiences/${t}`)})}};function iS(t){return t==null?void 0:t.map(e=>({content:e.content,filename:e.filename,path:e.path,content_type:e.contentType,content_id:e.contentId}))}function S_(t){return{attachments:iS(t.attachments),bcc:t.bcc,cc:t.cc,from:t.from,headers:t.headers,html:t.html,reply_to:t.replyTo,scheduled_at:t.scheduledAt,subject:t.subject,tags:t.tags,text:t.text,to:t.to}}var sS=class{constructor(t){this.resend=t}send(t){return ge(this,arguments,function*(e,n={}){return this.create(e,n)})}create(t){return ge(this,arguments,function*(e,n={}){const r=[];for(const s of e){if(s.react){if(!this.renderAsync)try{const{renderAsync:o}=yield It(()=>import("./render_resend-BIHI7g3E.js"),[]);this.renderAsync=o}catch{throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}s.html=yield this.renderAsync(s.react),s.react=void 0}r.push(S_(s))}return yield this.resend.post("/emails/batch",r,n)})}},oS=class{constructor(t){this.resend=t}create(t){return ge(this,arguments,function*(e,n={}){if(e.react){if(!this.renderAsync)try{const{renderAsync:i}=yield It(()=>import("./render_resend-BIHI7g3E.js"),[]);this.renderAsync=i}catch{throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}e.html=yield this.renderAsync(e.react)}return yield this.resend.post("/broadcasts",{name:e.name,audience_id:e.audienceId,preview_text:e.previewText,from:e.from,html:e.html,reply_to:e.replyTo,subject:e.subject,text:e.text},n)})}send(t,e){return ge(this,null,function*(){return yield this.resend.post(`/broadcasts/${t}/send`,{scheduled_at:e==null?void 0:e.scheduledAt})})}list(){return ge(this,null,function*(){return yield this.resend.get("/broadcasts")})}get(t){return ge(this,null,function*(){return yield this.resend.get(`/broadcasts/${t}`)})}remove(t){return ge(this,null,function*(){return yield this.resend.delete(`/broadcasts/${t}`)})}update(t,e){return ge(this,null,function*(){return yield this.resend.patch(`/broadcasts/${t}`,{name:e.name,audience_id:e.audienceId,from:e.from,html:e.html,text:e.text,subject:e.subject,reply_to:e.replyTo,preview_text:e.previewText})})}},aS=class{constructor(t){this.resend=t}create(t){return ge(this,arguments,function*(e,n={}){return yield this.resend.post(`/audiences/${e.audienceId}/contacts`,{unsubscribed:e.unsubscribed,email:e.email,first_name:e.firstName,last_name:e.lastName},n)})}list(t){return ge(this,null,function*(){return yield this.resend.get(`/audiences/${t.audienceId}/contacts`)})}get(t){return ge(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.get(`/audiences/${t.audienceId}/contacts/${t!=null&&t.email?t==null?void 0:t.email:t==null?void 0:t.id}`)})}update(t){return ge(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.patch(`/audiences/${t.audienceId}/contacts/${t!=null&&t.email?t==null?void 0:t.email:t==null?void 0:t.id}`,{unsubscribed:t.unsubscribed,first_name:t.firstName,last_name:t.lastName})})}remove(t){return ge(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.delete(`/audiences/${t.audienceId}/contacts/${t!=null&&t.email?t==null?void 0:t.email:t==null?void 0:t.id}`)})}};function lS(t){return{name:t.name,region:t.region,custom_return_path:t.customReturnPath}}var cS=class{constructor(t){this.resend=t}create(t){return ge(this,arguments,function*(e,n={}){return yield this.resend.post("/domains",lS(e),n)})}list(){return ge(this,null,function*(){return yield this.resend.get("/domains")})}get(t){return ge(this,null,function*(){return yield this.resend.get(`/domains/${t}`)})}update(t){return ge(this,null,function*(){return yield this.resend.patch(`/domains/${t.id}`,{click_tracking:t.clickTracking,open_tracking:t.openTracking,tls:t.tls})})}remove(t){return ge(this,null,function*(){return yield this.resend.delete(`/domains/${t}`)})}verify(t){return ge(this,null,function*(){return yield this.resend.post(`/domains/${t}/verify`)})}},uS=class{constructor(t){this.resend=t}send(t){return ge(this,arguments,function*(e,n={}){return this.create(e,n)})}create(t){return ge(this,arguments,function*(e,n={}){if(e.react){if(!this.renderAsync)try{const{renderAsync:i}=yield It(()=>import("./render_resend-BIHI7g3E.js"),[]);this.renderAsync=i}catch{throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}e.html=yield this.renderAsync(e.react)}return yield this.resend.post("/emails",S_(e),n)})}get(t){return ge(this,null,function*(){return yield this.resend.get(`/emails/${t}`)})}update(t){return ge(this,null,function*(){return yield this.resend.patch(`/emails/${t.id}`,{scheduled_at:t.scheduledAt})})}cancel(t){return ge(this,null,function*(){return yield this.resend.post(`/emails/${t}/cancel`)})}},Ng="https://api.resend.com",Mg=`resend-node:${tS}`,dS=typeof process<"u"&&Xs&&Xs.RESEND_BASE_URL||Ng,hS=typeof process<"u"&&Xs&&Xs.RESEND_USER_AGENT||Mg,fS=class{constructor(t){if(this.key=t,this.apiKeys=new nS(this),this.audiences=new rS(this),this.batch=new sS(this),this.broadcasts=new oS(this),this.contacts=new aS(this),this.domains=new cS(this),this.emails=new uS(this),!t&&(typeof process<"u"&&Xs&&(this.key=Xs.RESEND_API_KEY),!this.key))throw new Error('Missing API key. Pass it to the constructor `new Resend("re_123")`');this.headers=new Headers({Authorization:`Bearer ${this.key}`,"User-Agent":hS,"Content-Type":"application/json"})}fetchRequest(t){return ge(this,arguments,function*(e,n={}){try{const r=yield fetch(`${dS}${e}`,n);if(!r.ok)try{const s=yield r.text();return{data:null,error:JSON.parse(s)}}catch(s){if(s instanceof SyntaxError)return{data:null,error:{name:"application_error",message:"Internal server error. We are unable to process your request right now, please try again later."}};const o={message:r.statusText,name:"application_error"};return s instanceof Error?{data:null,error:eS(Lo({},o),{message:s.message})}:{data:null,error:o}}return{data:yield r.json(),error:null}}catch{return{data:null,error:{name:"application_error",message:"Unable to fetch data. The request could not be resolved."}}}})}post(t,e){return ge(this,arguments,function*(n,r,i={}){const s=new Headers(this.headers);i.idempotencyKey&&s.set("Idempotency-Key",i.idempotencyKey);const o=Lo({method:"POST",headers:s,body:JSON.stringify(r)},i);return this.fetchRequest(n,o)})}get(t){return ge(this,arguments,function*(e,n={}){const r=Lo({method:"GET",headers:this.headers},n);return this.fetchRequest(e,r)})}put(t,e){return ge(this,arguments,function*(n,r,i={}){const s=Lo({method:"PUT",headers:this.headers,body:JSON.stringify(r)},i);return this.fetchRequest(n,s)})}patch(t,e){return ge(this,arguments,function*(n,r,i={}){const s=Lo({method:"PATCH",headers:this.headers,body:JSON.stringify(r)},i);return this.fetchRequest(n,s)})}delete(t,e){return ge(this,null,function*(){const n={method:"DELETE",headers:this.headers,body:JSON.stringify(e)};return this.fetchRequest(t,n)})}};const pS=()=>{};var Og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},T_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=s>>2,y=(s&3)<<4|c>>4;let g=(c&15)<<2|h>>6,R=h&63;u||(R=64,o||(g=64)),r.push(n[m],n[y],n[g],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||h==null||y==null)throw new gS;const g=s<<2|c>>4;if(r.push(g),h!==64){const R=c<<4&240|h>>2;if(r.push(R),y!==64){const j=h<<6&192|y;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yS=function(t){const e=I_(t);return T_.encodeByteArray(e,!0)},Oc=function(t){return yS(t).replace(/\./g,"")},A_=function(t){try{return T_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=()=>vS().__FIREBASE_DEFAULTS__,wS=()=>{if(typeof process>"u"||typeof Og>"u")return;const t=Og.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A_(t[1]);return e&&JSON.parse(e)},_u=()=>{try{return pS()||_S()||wS()||xS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C_=t=>{var e,n;return(n=(e=_u())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},ES=t=>{const e=C_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},k_=()=>{var t;return(t=_u())==null?void 0:t.config},R_=t=>{var e;return(e=_u())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Oc(JSON.stringify(n)),Oc(JSON.stringify(o)),""].join(".")}const ra={};function IS(){const t={prod:[],emulator:[]};for(const e of Object.keys(ra))ra[e]?t.emulator.push(e):t.prod.push(e);return t}function TS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Lg=!1;function D_(t,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||ra[t]===e||ra[t]||Lg)return;ra[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=IS().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,R){g.setAttribute("width","24"),g.setAttribute("id",R),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Lg=!0,o()},g}function m(g,R){g.setAttribute("id",R),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function y(){const g=TS(r),R=n("text"),j=document.getElementById(R)||document.createElement("span"),M=n("learnmore"),F=document.getElementById(M)||document.createElement("a"),k=n("preprendIcon"),S=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const P=g.element;c(P),m(F,M);const V=h();u(S,k),P.append(S,j,F,V),document.body.appendChild(P)}s?(j.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function CS(){var e;const t=(e=_u())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DS(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jS(){return!CS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NS(){try{return typeof indexedDB=="object"}catch{return!1}}function MS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="FirebaseError";class Pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OS,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ua.prototype.create)}}class Ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LS(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Pr(i,c,r)}}function LS(t,e){return t.replace(VS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VS=/\{\$([^}]+)}/g;function zS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ji(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Vg(s)&&Vg(o)){if(!Ji(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Wo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FS(t,e){const n=new US(t,e);return n.subscribe.bind(n)}class US{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BS(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bd),i.error===void 0&&(i.error=bd),i.complete===void 0&&(i.complete=bd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class Zi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qS(e))try{this.getOrInitializeService({instanceIdentifier:Fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fi){return this.instances.has(e)}getOptions(e=Fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fi){return this.component?this.component.multipleInstances?e:Fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WS(t){return t===Fi?void 0:t}function qS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $S(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const GS={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},KS=_e.INFO,QS={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},YS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=QS[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xf{constructor(e){this.name=e,this._logLevel=KS,this._logHandler=YS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const XS=(t,e)=>e.some(n=>t instanceof n);let zg,Fg;function JS(){return zg||(zg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZS(){return Fg||(Fg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j_=new WeakMap,Ch=new WeakMap,N_=new WeakMap,Sd=new WeakMap,Jf=new WeakMap;function eI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ci(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&j_.set(n,t)}).catch(()=>{}),Jf.set(e,t),e}function tI(t){if(Ch.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ch.set(t,e)}let kh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nI(t){kh=t(kh)}function rI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Id(this),e,...n);return N_.set(r,e.sort?e.sort():[e]),ci(r)}:ZS().includes(t)?function(...e){return t.apply(Id(this),e),ci(j_.get(this))}:function(...e){return ci(t.apply(Id(this),e))}}function iI(t){return typeof t=="function"?rI(t):(t instanceof IDBTransaction&&tI(t),XS(t,JS())?new Proxy(t,kh):t)}function ci(t){if(t instanceof IDBRequest)return eI(t);if(Sd.has(t))return Sd.get(t);const e=iI(t);return e!==t&&(Sd.set(t,e),Jf.set(e,t)),e}const Id=t=>Jf.get(t);function sI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=ci(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ci(o.result),u.oldVersion,u.newVersion,ci(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const oI=["get","getKey","getAll","getAllKeys","count"],aI=["put","add","delete","clear"],Td=new Map;function Ug(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Td.get(e))return Td.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oI.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return Td.set(e,s),s}nI(t=>({...t,get:(e,n,r)=>Ug(e,n)||t.get(e,n,r),has:(e,n)=>!!Ug(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rh="@firebase/app",Bg="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new Xf("@firebase/app"),uI="@firebase/app-compat",dI="@firebase/analytics-compat",hI="@firebase/analytics",fI="@firebase/app-check-compat",pI="@firebase/app-check",mI="@firebase/auth",gI="@firebase/auth-compat",yI="@firebase/database",vI="@firebase/data-connect",_I="@firebase/database-compat",wI="@firebase/functions",xI="@firebase/functions-compat",EI="@firebase/installations",bI="@firebase/installations-compat",SI="@firebase/messaging",II="@firebase/messaging-compat",TI="@firebase/performance",AI="@firebase/performance-compat",CI="@firebase/remote-config",kI="@firebase/remote-config-compat",RI="@firebase/storage",PI="@firebase/storage-compat",DI="@firebase/firestore",jI="@firebase/ai",NI="@firebase/firestore-compat",MI="firebase",OI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]",LI={[Rh]:"fire-core",[uI]:"fire-core-compat",[hI]:"fire-analytics",[dI]:"fire-analytics-compat",[pI]:"fire-app-check",[fI]:"fire-app-check-compat",[mI]:"fire-auth",[gI]:"fire-auth-compat",[yI]:"fire-rtdb",[vI]:"fire-data-connect",[_I]:"fire-rtdb-compat",[wI]:"fire-fn",[xI]:"fire-fn-compat",[EI]:"fire-iid",[bI]:"fire-iid-compat",[SI]:"fire-fcm",[II]:"fire-fcm-compat",[TI]:"fire-perf",[AI]:"fire-perf-compat",[CI]:"fire-rc",[kI]:"fire-rc-compat",[RI]:"fire-gcs",[PI]:"fire-gcs-compat",[DI]:"fire-fst",[NI]:"fire-fst-compat",[jI]:"fire-vertex","fire-js":"fire-js",[MI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,VI=new Map,Dh=new Map;function $g(t,e){try{t.container.addComponent(e)}catch(n){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Js(t){const e=t.name;if(Dh.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;Dh.set(e,t);for(const n of Lc.values())$g(n,t);for(const n of VI.values())$g(n,t);return!0}function Zf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Ua("app","Firebase",zI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=OI;function M_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ph,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ui.create("bad-app-name",{appName:String(i)});if(n||(n=k_()),!n)throw ui.create("no-options");const s=Lc.get(i);if(s){if(Ji(n,s.options)&&Ji(r,s.config))return s;throw ui.create("duplicate-app",{appName:i})}const o=new HS(i);for(const u of Dh.values())o.addComponent(u);const c=new FI(n,r,o);return Lc.set(i,c),c}function O_(t=Ph){const e=Lc.get(t);if(!e&&t===Ph&&k_())return M_();if(!e)throw ui.create("no-app",{appName:t});return e}function di(t,e,n){let r=LI[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(o.join(" "));return}Js(new Zi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebase-heartbeat-database",BI=1,Aa="firebase-heartbeat-store";let Ad=null;function L_(){return Ad||(Ad=sI(UI,BI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),Ad}async function $I(t){try{const n=(await L_()).transaction(Aa),r=await n.objectStore(Aa).get(V_(t));return await n.done,r}catch(e){if(e instanceof Pr)Tr.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(n.message)}}}async function Wg(t,e){try{const r=(await L_()).transaction(Aa,"readwrite");await r.objectStore(Aa).put(e,V_(t)),await r.done}catch(n){if(n instanceof Pr)Tr.warn(n.message);else{const r=ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tr.warn(r.message)}}}function V_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=1024,qI=30;class HI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>qI){const o=QI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qg(),{heartbeatsToSend:r,unsentEntries:i}=GI(this._heartbeatsCache.heartbeats),s=Oc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Tr.warn(n),""}}}function qg(){return new Date().toISOString().substring(0,10)}function GI(t,e=WI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NS()?MS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $I(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Hg(t){return Oc(JSON.stringify({version:2,heartbeats:t})).length}function QI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){Js(new Zi("platform-logger",e=>new lI(e),"PRIVATE")),Js(new Zi("heartbeat",e=>new HI(e),"PRIVATE")),di(Rh,Bg,t),di(Rh,Bg,"esm2020"),di("fire-js","")}YI("");function z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XI=z_,F_=new Ua("auth","Firebase",z_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Xf("@firebase/auth");function JI(t,...e){Vc.logLevel<=_e.WARN&&Vc.warn(`Auth (${co}): ${t}`,...e)}function nc(t,...e){Vc.logLevel<=_e.ERROR&&Vc.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw ep(t,...e)}function Xn(t,...e){return ep(t,...e)}function U_(t,e,n){const r={...XI(),[e]:n};return new Ua("auth","Firebase",r).create(e,{appName:t.name})}function _r(t){return U_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ep(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return F_.create(t,...e)}function ae(t,e,...n){if(!t)throw ep(e,...n)}function gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nc(e),new Error(e)}function Ar(t,e){t||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ZI(){return Gg()==="http:"||Gg()==="https:"}function Gg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZI()||RS()||"connection"in navigator)?navigator.onLine:!0}function tT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=AS()||PS()}get(){return eT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iT=new $a(3e4,6e4);function Dr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jr(t,e,n,r,i={}){return $_(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=Ba({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...s};return kS()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&lo(t.emulatorConfig.host)&&(h.credentials="include"),B_.fetch()(await W_(t,t.config.apiHost,n,c),h)})}async function $_(t,e,n){t._canInitEmulator=!1;const r={...nT,...e};try{const i=new oT(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Vl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Vl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Vl(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw U_(t,m,h);Fn(t,m)}}catch(i){if(i instanceof Pr)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function Wa(t,e,n,r,i={}){const s=await jr(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function W_(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?tp(t.config,i):`${t.config.apiScheme}://${i}`;return rT.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function sT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xn(this.auth,"network-request-failed")),iT.get())})}}function Vl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xn(t,e,r);return i.customData._tokenResponse=n,i}function Kg(t){return t!==void 0&&t.enterprise!==void 0}class aT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lT(t,e){return jr(t,"GET","/v2/recaptchaConfig",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t,e){return jr(t,"POST","/v1/accounts:delete",e)}async function zc(t,e){return jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uT(t,e=!1){const n=ht(t),r=await n.getIdToken(e),i=np(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ia(Cd(i.auth_time)),issuedAtTime:ia(Cd(i.iat)),expirationTime:ia(Cd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Cd(t){return Number(t)*1e3}function np(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nc("JWT malformed, contained fewer than 3 sections"),null;try{const i=A_(n);return i?JSON.parse(i):(nc("Failed to decode base64 JWT payload"),null)}catch(i){return nc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Qg(t){const e=np(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pr&&dT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t){var y;const e=t.auth,n=await t.getIdToken(),r=await Ca(t,zc(e,{idToken:n}));ae(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(y=i.providerUserInfo)!=null&&y.length?q_(i.providerUserInfo):[],o=pT(t.providerData,s),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Nh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function fT(t){const e=ht(t);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pT(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function q_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT(t,e){const n=await $_(t,{},async()=>{const r=Ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await W_(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&lo(t.emulatorConfig.host)&&(u.credentials="include"),B_.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gT(t,e){return jr(t,"POST","/v2/accounts:revokeToken",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=Qg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await mT(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Fs;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fs,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new hT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ca(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uT(this,e)}reload(){return fT(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await Ca(this,cT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:y,emailVerified:g,isAnonymous:R,providerData:j,stsTokenManager:M}=n;ae(y&&M,e,"internal-error");const F=Fs.fromJSON(this.name,M);ae(typeof y=="string",e,"internal-error"),Ur(r,e.name),Ur(i,e.name),ae(typeof g=="boolean",e,"internal-error"),ae(typeof R=="boolean",e,"internal-error"),Ur(s,e.name),Ur(o,e.name),Ur(c,e.name),Ur(u,e.name),Ur(h,e.name),Ur(m,e.name);const k=new Nn({uid:y,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:R,photoURL:o,phoneNumber:s,tenantId:c,stsTokenManager:F,createdAt:h,lastLoginAt:m});return j&&Array.isArray(j)&&(k.providerData=j.map(S=>({...S}))),u&&(k._redirectEventId=u),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Fs;i.updateFromServerResponse(n);const s=new Nn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?q_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Fs;c.updateFromIdToken(r);const u=new Nn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Nh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=new Map;function yr(t){Ar(t instanceof Function,"Expected a class definition");let e=Yg.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H_.type="NONE";const Xg=H_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t,e,n){return`firebase:${t}:${e}:${n}`}class Us{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=rc(this.userKey,i.apiKey,s),this.fullPersistenceKey=rc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zc(this.auth,{idToken:e}).catch(()=>{});return n?Nn._fromGetAccountInfoResponse(this.auth,n,e):null}return Nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Us(yr(Xg),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||yr(Xg);const o=rc(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(o);if(m){let y;if(typeof m=="string"){const g=await zc(e,{idToken:m}).catch(()=>{});if(!g)break;y=await Nn._fromGetAccountInfoResponse(e,g,m)}else y=Nn._fromJSON(e,m);h!==s&&(c=y),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Us(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Us(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J_(e))return"Blackberry";if(Z_(e))return"Webos";if(K_(e))return"Safari";if((e.includes("chrome/")||Q_(e))&&!e.includes("edge/"))return"Chrome";if(X_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function G_(t=zt()){return/firefox\//i.test(t)}function K_(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q_(t=zt()){return/crios\//i.test(t)}function Y_(t=zt()){return/iemobile/i.test(t)}function X_(t=zt()){return/android/i.test(t)}function J_(t=zt()){return/blackberry/i.test(t)}function Z_(t=zt()){return/webos/i.test(t)}function rp(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yT(t=zt()){var e;return rp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function vT(){return DS()&&document.documentMode===10}function ew(t=zt()){return rp(t)||X_(t)||Z_(t)||J_(t)||/windows phone/i.test(t)||Y_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t,e=[]){let n;switch(t){case"Browser":n=Jg(zt());break;case"Worker":n=`${Jg(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(t,e={}){return jr(t,"GET","/v2/passwordPolicy",Dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=6;class ET{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??xT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zg(this),this.idTokenSubscription=new Zg(this),this.beforeStateQueue=new _T(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Us.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zc(this,{idToken:e}),r=await Nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(_r(this));const n=e?ht(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wT(this),n=new ET(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Us.create(this,[yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&JI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ti(t){return ht(t)}class Zg{constructor(e){this.auth=e,this.observer=null,this.addObserver=FS(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ST(t){wu=t}function nw(t){return wu.loadJS(t)}function IT(){return wu.recaptchaEnterpriseScript}function TT(){return wu.gapiScript}function AT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class CT{constructor(){this.enterprise=new kT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class kT{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RT="recaptcha-enterprise",rw="NO_RECAPTCHA";class PT{constructor(e){this.type=RT,this.auth=Ti(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{lT(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new aT(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(s,o,c){const u=window.grecaptcha;Kg(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(rw)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CT().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(c=>{if(!n&&Kg(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=IT();u.length!==0&&(u+=c),nw(u).then(()=>{i(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function ey(t,e,n,r=!1,i=!1){const s=new PT(t);let o;if(i)o=rw;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Uc(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ey(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await ey(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){const n=Zf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ji(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function jT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NT(t,e,n){const r=Ti(t);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=iw(e),{host:o,port:c}=MT(e),u=c===null?"":`:${c}`,h={url:`${s}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(Ji(h,r.config.emulator)&&Ji(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,lo(o)?(P_(`${s}//${o}${u}`),D_("Auth",!0)):OT()}function iw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MT(t){const e=iw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ty(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:ty(o)}}}function ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function LT(t,e){return jr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VT(t,e){return Wa(t,"POST","/v1/accounts:signInWithPassword",Dr(t,e))}async function zT(t,e){return jr(t,"POST","/v1/accounts:sendOobCode",Dr(t,e))}async function FT(t,e){return zT(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}async function BT(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends ip{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ka(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ka(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uc(e,n,"signInWithPassword",VT);case"emailLink":return UT(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uc(e,r,"signUpPassword",LT);case"emailLink":return BT(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(t,e){return Wa(t,"POST","/v1/accounts:signInWithIdp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="http://localhost";class es extends ip{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new es(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bs(e,n)}buildRequest(){const e={requestUri:$T,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ba(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qT(t){const e=$o(Wo(t)).link,n=e?$o(Wo(e)).deep_link_id:null,r=$o(Wo(t)).deep_link_id;return(r?$o(Wo(r)).link:null)||r||n||e||t}class sp{constructor(e){const n=$o(Wo(e)),r=n.apiKey??null,i=n.oobCode??null,s=WT(n.mode??null);ae(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qT(e);try{return new sp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return ka._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sp.parseLink(n);return ae(r,"argument-error"),ka._fromEmailAndCode(e,r.code,r.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends sw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends qa{constructor(){super("facebook.com")}static credential(e){return es._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return es._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qr.credential(n,r)}catch{return null}}}Qr.GOOGLE_SIGN_IN_METHOD="google.com";Qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends qa{constructor(){super("github.com")}static credential(e){return es._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends qa{constructor(){super("twitter.com")}static credential(e,n){return es._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HT(t,e){return Wa(t,"POST","/v1/accounts:signUp",Dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Nn._fromIdTokenResponse(e,r,i),o=ny(r);return new ts({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ny(r);return new ts({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ny(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Pr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Bc(e,n,r,i)}}function ow(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bc._fromErrorAndOperation(t,s,e,r):s})}async function GT(t,e,n=!1){const r=await Ca(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(t,e,n=!1){const{auth:r}=t;if(xn(r.app))return Promise.reject(_r(r));const i="reauthenticate";try{const s=await Ca(t,ow(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=np(s.idToken);ae(o,r,"internal-error");const{sub:c}=o;return ae(t.uid===c,r,"user-mismatch"),ts._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(t,e,n=!1){if(xn(t.app))return Promise.reject(_r(t));const r="signIn",i=await ow(t,r,e),s=await ts._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function QT(t,e){return aw(Ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(t){const e=Ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YT(t,e,n){const r=Ti(t);await Uc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",FT)}async function XT(t,e,n){if(xn(t.app))return Promise.reject(_r(t));const r=Ti(t),o=await Uc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HT).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&lw(t),u}),c=await ts._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function JT(t,e,n){return xn(t.app)?Promise.reject(_r(t)):QT(ht(t),uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lw(t),r})}function ZT(t,e,n,r){return ht(t).onIdTokenChanged(e,n,r)}function eA(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function tA(t,e,n,r){return ht(t).onAuthStateChanged(e,n,r)}function nA(t){return ht(t).signOut()}const $c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($c,"1"),this.storage.removeItem($c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=1e3,iA=10;class uw extends cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);vT()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uw.type="LOCAL";const sA=uw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw extends cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dw.type="SESSION";const hw=dw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new xu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,s)),u=await oA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const h=op("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(y){const g=y;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(m),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function lA(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function cA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function dA(){return fw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="firebaseLocalStorageDb",hA=1,Wc="firebaseLocalStorage",mw="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eu(t,e){return t.transaction([Wc],e?"readwrite":"readonly").objectStore(Wc)}function fA(){const t=indexedDB.deleteDatabase(pw);return new Ha(t).toPromise()}function Mh(){const t=indexedDB.open(pw,hA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wc,{keyPath:mw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wc)?e(r):(r.close(),await fA(),e(await Mh()))})})}async function ry(t,e,n){const r=Eu(t,!0).put({[mw]:e,value:n});return new Ha(r).toPromise()}async function pA(t,e){const n=Eu(t,!1).get(e),r=await new Ha(n).toPromise();return r===void 0?null:r.value}function iy(t,e){const n=Eu(t,!0).delete(e);return new Ha(n).toPromise()}const mA=800,gA=3;class gw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xu._getInstance(dA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await cA(),!this.activeServiceWorker)return;this.sender=new aA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mh();return await ry(e,$c,"1"),await iy(e,$c),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ry(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Eu(i,!1).getAll();return new Ha(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gw.type="LOCAL";const yA=gw;new $a(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){return e?yr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends ip{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _A(t){return aw(t.auth,new ap(t),t.bypassAuthState)}function wA(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),KT(n,new ap(t),t.bypassAuthState)}async function xA(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),GT(n,new ap(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _A;case"linkViaPopup":case"linkViaRedirect":return xA;case"reauthViaPopup":case"reauthViaRedirect":return wA;default:Fn(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new $a(2e3,1e4);class Ds extends yw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EA.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="pendingRedirect",ic=new Map;class SA extends yw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ic.get(this.auth._key());if(!e){try{const r=await IA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ic.set(this.auth._key(),e)}return this.bypassAuthState||ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IA(t,e){const n=CA(e),r=AA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function TA(t,e){ic.set(t._key(),e)}function AA(t){return yr(t._redirectPersistence)}function CA(t){return rc(bA,t.config.apiKey,t.name)}async function kA(t,e,n=!1){if(xn(t.app))return Promise.reject(_r(t));const r=Ti(t),i=vA(r,e),o=await new SA(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=10*60*1e3;class PA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vw(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RA&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e={}){return jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MA=/^https?/;async function OA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jA(t);for(const n of e)try{if(LA(n))return}catch{}Fn(t,"unauthorized-domain")}function LA(t){const e=jh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!MA.test(n))return!1;if(NA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new $a(3e4,6e4);function oy(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zA(t){return new Promise((e,n)=>{var i,s,o;function r(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),n(Xn(t,"network-request-failed"))},timeout:VA.get()})}if((s=(i=Jn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Jn().gapi)!=null&&o.load)r();else{const c=AT("iframefcb");return Jn()[c]=()=>{gapi.load?r():n(Xn(t,"network-request-failed"))},nw(`${TT()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw sc=null,e})}let sc=null;function FA(t){return sc=sc||zA(t),sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new $a(5e3,15e3),BA="__/auth/iframe",$A="emulator/auth/iframe",WA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HA(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tp(e,$A):`https://${t.config.authDomain}/${BA}`,r={apiKey:e.apiKey,appName:t.name,v:co},i=qA.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ba(r).slice(1)}`}async function GA(t){const e=await FA(t),n=Jn().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:HA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WA,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Xn(t,"network-request-failed"),c=Jn().setTimeout(()=>{s(o)},UA.get());function u(){Jn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QA=500,YA=600,XA="_blank",JA="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZA(t,e,n,r=QA,i=YA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...KA,width:r.toString(),height:i.toString(),top:s,left:o},h=zt().toLowerCase();n&&(c=Q_(h)?XA:n),G_(h)&&(e=e||JA,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[R,j])=>`${g}${R}=${j},`,"");if(yT(h)&&c!=="_self")return eC(e||"",c),new ay(null);const y=window.open(e||"",c,m);ae(y,t,"popup-blocked");try{y.focus()}catch{}return new ay(y)}function eC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="__/auth/handler",nC="emulator/auth/handler",rC=encodeURIComponent("fac");async function ly(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:co,eventId:i};if(e instanceof sw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))o[m]=y}if(e instanceof qa){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),h=u?`#${rC}=${encodeURIComponent(u)}`:"";return`${iC(t)}?${Ba(c).slice(1)}${h}`}function iC({config:t}){return t.emulator?tp(t,nC):`https://${t.authDomain}/${tC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="webStorageSupport";class sC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hw,this._completeRedirectFn=kA,this._overrideRedirectResult=TA}async _openPopup(e,n,r,i){var o;Ar((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await ly(e,n,r,jh(),i);return ZA(e,s,op())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ly(e,n,r,jh(),i);return lA(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ar(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GA(e),r=new PA(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kd,{type:kd},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[kd];s!==void 0&&n(!!s),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ew()||K_()||rp()}}const oC=sC;var cy="@firebase/auth",uy="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cC(t){Js(new Zi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tw(t)},h=new bT(r,i,s,u);return jT(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Js(new Zi("auth-internal",e=>{const n=Ti(e.getProvider("auth").getImmediate());return(r=>new aC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(cy,uy,lC(t)),di(cy,uy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=5*60,dC=R_("authIdTokenMaxAge")||uC;let dy=null;const hC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dC)return;const i=n==null?void 0:n.token;dy!==i&&(dy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fC(t=O_()){const e=Zf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DT(t,{popupRedirectResolver:oC,persistence:[yA,sA,hw]}),r=R_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=hC(s.toString());eA(n,o,()=>o(n.currentUser)),ZT(n,c=>o(c))}}const i=C_("auth");return i&&NT(n,`http://${i}`),n}function pC(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ST({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Xn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",pC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cC("Browser");var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hi,_w;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function T(){}T.prototype=v.prototype,E.D=v.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(A,D,I){for(var C=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)C[ve-2]=arguments[ve];return v.prototype[D].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,T){T||(T=0);var A=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)A[D]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(D=0;16>D;++D)A[D]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=E.g[0],T=E.g[1],D=E.g[2];var I=E.g[3],C=v+(I^T&(D^I))+A[0]+3614090360&4294967295;v=T+(C<<7&4294967295|C>>>25),C=I+(D^v&(T^D))+A[1]+3905402710&4294967295,I=v+(C<<12&4294967295|C>>>20),C=D+(T^I&(v^T))+A[2]+606105819&4294967295,D=I+(C<<17&4294967295|C>>>15),C=T+(v^D&(I^v))+A[3]+3250441966&4294967295,T=D+(C<<22&4294967295|C>>>10),C=v+(I^T&(D^I))+A[4]+4118548399&4294967295,v=T+(C<<7&4294967295|C>>>25),C=I+(D^v&(T^D))+A[5]+1200080426&4294967295,I=v+(C<<12&4294967295|C>>>20),C=D+(T^I&(v^T))+A[6]+2821735955&4294967295,D=I+(C<<17&4294967295|C>>>15),C=T+(v^D&(I^v))+A[7]+4249261313&4294967295,T=D+(C<<22&4294967295|C>>>10),C=v+(I^T&(D^I))+A[8]+1770035416&4294967295,v=T+(C<<7&4294967295|C>>>25),C=I+(D^v&(T^D))+A[9]+2336552879&4294967295,I=v+(C<<12&4294967295|C>>>20),C=D+(T^I&(v^T))+A[10]+4294925233&4294967295,D=I+(C<<17&4294967295|C>>>15),C=T+(v^D&(I^v))+A[11]+2304563134&4294967295,T=D+(C<<22&4294967295|C>>>10),C=v+(I^T&(D^I))+A[12]+1804603682&4294967295,v=T+(C<<7&4294967295|C>>>25),C=I+(D^v&(T^D))+A[13]+4254626195&4294967295,I=v+(C<<12&4294967295|C>>>20),C=D+(T^I&(v^T))+A[14]+2792965006&4294967295,D=I+(C<<17&4294967295|C>>>15),C=T+(v^D&(I^v))+A[15]+1236535329&4294967295,T=D+(C<<22&4294967295|C>>>10),C=v+(D^I&(T^D))+A[1]+4129170786&4294967295,v=T+(C<<5&4294967295|C>>>27),C=I+(T^D&(v^T))+A[6]+3225465664&4294967295,I=v+(C<<9&4294967295|C>>>23),C=D+(v^T&(I^v))+A[11]+643717713&4294967295,D=I+(C<<14&4294967295|C>>>18),C=T+(I^v&(D^I))+A[0]+3921069994&4294967295,T=D+(C<<20&4294967295|C>>>12),C=v+(D^I&(T^D))+A[5]+3593408605&4294967295,v=T+(C<<5&4294967295|C>>>27),C=I+(T^D&(v^T))+A[10]+38016083&4294967295,I=v+(C<<9&4294967295|C>>>23),C=D+(v^T&(I^v))+A[15]+3634488961&4294967295,D=I+(C<<14&4294967295|C>>>18),C=T+(I^v&(D^I))+A[4]+3889429448&4294967295,T=D+(C<<20&4294967295|C>>>12),C=v+(D^I&(T^D))+A[9]+568446438&4294967295,v=T+(C<<5&4294967295|C>>>27),C=I+(T^D&(v^T))+A[14]+3275163606&4294967295,I=v+(C<<9&4294967295|C>>>23),C=D+(v^T&(I^v))+A[3]+4107603335&4294967295,D=I+(C<<14&4294967295|C>>>18),C=T+(I^v&(D^I))+A[8]+1163531501&4294967295,T=D+(C<<20&4294967295|C>>>12),C=v+(D^I&(T^D))+A[13]+2850285829&4294967295,v=T+(C<<5&4294967295|C>>>27),C=I+(T^D&(v^T))+A[2]+4243563512&4294967295,I=v+(C<<9&4294967295|C>>>23),C=D+(v^T&(I^v))+A[7]+1735328473&4294967295,D=I+(C<<14&4294967295|C>>>18),C=T+(I^v&(D^I))+A[12]+2368359562&4294967295,T=D+(C<<20&4294967295|C>>>12),C=v+(T^D^I)+A[5]+4294588738&4294967295,v=T+(C<<4&4294967295|C>>>28),C=I+(v^T^D)+A[8]+2272392833&4294967295,I=v+(C<<11&4294967295|C>>>21),C=D+(I^v^T)+A[11]+1839030562&4294967295,D=I+(C<<16&4294967295|C>>>16),C=T+(D^I^v)+A[14]+4259657740&4294967295,T=D+(C<<23&4294967295|C>>>9),C=v+(T^D^I)+A[1]+2763975236&4294967295,v=T+(C<<4&4294967295|C>>>28),C=I+(v^T^D)+A[4]+1272893353&4294967295,I=v+(C<<11&4294967295|C>>>21),C=D+(I^v^T)+A[7]+4139469664&4294967295,D=I+(C<<16&4294967295|C>>>16),C=T+(D^I^v)+A[10]+3200236656&4294967295,T=D+(C<<23&4294967295|C>>>9),C=v+(T^D^I)+A[13]+681279174&4294967295,v=T+(C<<4&4294967295|C>>>28),C=I+(v^T^D)+A[0]+3936430074&4294967295,I=v+(C<<11&4294967295|C>>>21),C=D+(I^v^T)+A[3]+3572445317&4294967295,D=I+(C<<16&4294967295|C>>>16),C=T+(D^I^v)+A[6]+76029189&4294967295,T=D+(C<<23&4294967295|C>>>9),C=v+(T^D^I)+A[9]+3654602809&4294967295,v=T+(C<<4&4294967295|C>>>28),C=I+(v^T^D)+A[12]+3873151461&4294967295,I=v+(C<<11&4294967295|C>>>21),C=D+(I^v^T)+A[15]+530742520&4294967295,D=I+(C<<16&4294967295|C>>>16),C=T+(D^I^v)+A[2]+3299628645&4294967295,T=D+(C<<23&4294967295|C>>>9),C=v+(D^(T|~I))+A[0]+4096336452&4294967295,v=T+(C<<6&4294967295|C>>>26),C=I+(T^(v|~D))+A[7]+1126891415&4294967295,I=v+(C<<10&4294967295|C>>>22),C=D+(v^(I|~T))+A[14]+2878612391&4294967295,D=I+(C<<15&4294967295|C>>>17),C=T+(I^(D|~v))+A[5]+4237533241&4294967295,T=D+(C<<21&4294967295|C>>>11),C=v+(D^(T|~I))+A[12]+1700485571&4294967295,v=T+(C<<6&4294967295|C>>>26),C=I+(T^(v|~D))+A[3]+2399980690&4294967295,I=v+(C<<10&4294967295|C>>>22),C=D+(v^(I|~T))+A[10]+4293915773&4294967295,D=I+(C<<15&4294967295|C>>>17),C=T+(I^(D|~v))+A[1]+2240044497&4294967295,T=D+(C<<21&4294967295|C>>>11),C=v+(D^(T|~I))+A[8]+1873313359&4294967295,v=T+(C<<6&4294967295|C>>>26),C=I+(T^(v|~D))+A[15]+4264355552&4294967295,I=v+(C<<10&4294967295|C>>>22),C=D+(v^(I|~T))+A[6]+2734768916&4294967295,D=I+(C<<15&4294967295|C>>>17),C=T+(I^(D|~v))+A[13]+1309151649&4294967295,T=D+(C<<21&4294967295|C>>>11),C=v+(D^(T|~I))+A[4]+4149444226&4294967295,v=T+(C<<6&4294967295|C>>>26),C=I+(T^(v|~D))+A[11]+3174756917&4294967295,I=v+(C<<10&4294967295|C>>>22),C=D+(v^(I|~T))+A[2]+718787259&4294967295,D=I+(C<<15&4294967295|C>>>17),C=T+(I^(D|~v))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+I&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var T=v-this.blockSize,A=this.B,D=this.h,I=0;I<v;){if(D==0)for(;I<=T;)i(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<v;)if(A[D++]=E.charCodeAt(I++),D==this.blockSize){i(this,A),D=0;break}}else for(;I<v;)if(A[D++]=E[I++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var T=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=T&255,T/=256;for(this.u(E),E=Array(16),v=T=0;4>v;++v)for(var A=0;32>A;A+=8)E[T++]=this.g[v]>>>A&255;return E};function s(E,v){var T=c;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=v(E)}function o(E,v){this.h=v;for(var T=[],A=!0,D=E.length-1;0<=D;D--){var I=E[D]|0;A&&I==v||(T[D]=I,A=!1)}this.g=T}var c={};function u(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return y;if(0>E)return F(h(-E));for(var v=[],T=1,A=0;E>=T;A++)v[A]=E/T|0,T*=4294967296;return new o(v,0)}function m(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return F(m(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(v,8)),A=y,D=0;D<E.length;D+=8){var I=Math.min(8,E.length-D),C=parseInt(E.substring(D,D+I),v);8>I?(I=h(Math.pow(v,I)),A=A.j(I).add(h(C))):(A=A.j(T),A=A.add(h(C)))}return A}var y=u(0),g=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(M(this))return-F(this).m();for(var E=0,v=1,T=0;T<this.g.length;T++){var A=this.i(T);E+=(0<=A?A:4294967296+A)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(j(this))return"0";if(M(this))return"-"+F(this).toString(E);for(var v=h(Math.pow(E,6)),T=this,A="";;){var D=V(T,v).g;T=k(T,D.j(v));var I=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=D,j(T))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function j(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function M(E){return E.h==-1}t.l=function(E){return E=k(this,E),M(E)?-1:j(E)?0:1};function F(E){for(var v=E.g.length,T=[],A=0;A<v;A++)T[A]=~E.g[A];return new o(T,~E.h).add(g)}t.abs=function(){return M(this)?F(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),T=[],A=0,D=0;D<=v;D++){var I=A+(this.i(D)&65535)+(E.i(D)&65535),C=(I>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);A=C>>>16,I&=65535,C&=65535,T[D]=C<<16|I}return new o(T,T[T.length-1]&-2147483648?-1:0)};function k(E,v){return E.add(F(v))}t.j=function(E){if(j(this)||j(E))return y;if(M(this))return M(E)?F(this).j(F(E)):F(F(this).j(E));if(M(E))return F(this.j(F(E)));if(0>this.l(R)&&0>E.l(R))return h(this.m()*E.m());for(var v=this.g.length+E.g.length,T=[],A=0;A<2*v;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<E.g.length;D++){var I=this.i(A)>>>16,C=this.i(A)&65535,ve=E.i(D)>>>16,kt=E.i(D)&65535;T[2*A+2*D]+=C*kt,S(T,2*A+2*D),T[2*A+2*D+1]+=I*kt,S(T,2*A+2*D+1),T[2*A+2*D+1]+=C*ve,S(T,2*A+2*D+1),T[2*A+2*D+2]+=I*ve,S(T,2*A+2*D+2)}for(A=0;A<v;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=v;A<2*v;A++)T[A]=0;return new o(T,0)};function S(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function P(E,v){this.g=E,this.h=v}function V(E,v){if(j(v))throw Error("division by zero");if(j(E))return new P(y,y);if(M(E))return v=V(F(E),v),new P(F(v.g),F(v.h));if(M(v))return v=V(E,F(v)),new P(F(v.g),v.h);if(30<E.g.length){if(M(E)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,A=v;0>=A.l(E);)T=W(T),A=W(A);var D=B(T,1),I=B(A,1);for(A=B(A,2),T=B(T,2);!j(A);){var C=I.add(A);0>=C.l(E)&&(D=D.add(T),I=C),A=B(A,1),T=B(T,1)}return v=k(E,D.j(v)),new P(D,v)}for(D=y;0<=E.l(v);){for(T=Math.max(1,Math.floor(E.m()/v.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=h(T),C=I.j(v);M(C)||0<C.l(E);)T-=A,I=h(T),C=I.j(v);j(I)&&(I=g),D=D.add(I),E=k(E,C)}return new P(D,E)}t.A=function(E){return V(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)&E.i(A);return new o(T,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)|E.i(A);return new o(T,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),T=[],A=0;A<v;A++)T[A]=this.i(A)^E.i(A);return new o(T,this.h^E.h)};function W(E){for(var v=E.g.length+1,T=[],A=0;A<v;A++)T[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(T,E.h)}function B(E,v){var T=v>>5;v%=32;for(var A=E.g.length-T,D=[],I=0;I<A;I++)D[I]=0<v?E.i(I+T)>>>v|E.i(I+T+1)<<32-v:E.i(I+T);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_w=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,hi=o}).apply(typeof hy<"u"?hy:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ww,qo,xw,oc,Oh,Ew,bw,Sw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var N=a[_];if(!(N in f))break e;f=f[N]}a=a[a.length-1],_=f[a],d=d(_),d!=_&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,_=!1,N={next:function(){if(!_&&f<a.length){var O=f++;return{value:d(O,a[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function m(a,d,f){return a.call.apply(a.bind,arguments)}function y(a,d,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),a.apply(d,N)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,g.apply(null,arguments)}function R(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function j(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,N,O){for(var q=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)q[Ve-2]=arguments[Ve];return d.prototype[N].apply(_,q)}}function M(a){const d=a.length;if(0<d){const f=Array(d);for(let _=0;_<d;_++)f[_]=a[_];return f}return[]}function F(a,d){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const N=a.length||0,O=_.length||0;a.length=N+O;for(let q=0;q<O;q++)a[N+q]=_[q]}else a.push(_)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function S(a){return/^[\s\xa0]*$/.test(a)}function P(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var W=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function B(a,d,f){for(const _ in a)d.call(f,a[_],_,a)}function E(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,d){let f,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(f in _)a[f]=_[f];for(let O=0;O<T.length;O++)f=T[O],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function D(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function I(a){c.setTimeout(()=>{throw a},0)}function C(){var a=se;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ve{constructor(){this.h=this.g=null}add(d,f){const _=kt.get();_.set(d,f),this.h?this.h.next=_:this.g=_,this.h=_}}var kt=new k(()=>new Mr,a=>a.reset());class Mr{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,Q=!1,se=new ve,ue=()=>{const a=c.Promise.resolve(void 0);Oe=()=>{a.then(Te)}};var Te=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){I(f)}var d=kt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Q=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function ft(a,d){if(je.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(W){e:{try{V(d.nodeName);var N=!0;break e}catch{}N=!1}N||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:rn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ft.aa.h.call(this)}}j(ft,je);var rn={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Gt="closure_listenable_"+(1e6*Math.random()|0),_o=0;function Or(a,d,f,_,N){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!_,this.ha=N,this.key=++_o,this.da=this.fa=!1}function sn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Bn(a){this.src=a,this.g={},this.h=0}Bn.prototype.add=function(a,d,f,_,N){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var q=L(a,d,_,N);return-1<q?(d=a[q],f||(d.fa=!1)):(d=new Or(d,this.src,O,!!_,N),d.fa=f,a.push(d)),d};function w(a,d){var f=d.type;if(f in a.g){var _=a.g[f],N=Array.prototype.indexOf.call(_,d,void 0),O;(O=0<=N)&&Array.prototype.splice.call(_,N,1),O&&(sn(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function L(a,d,f,_){for(var N=0;N<a.length;++N){var O=a[N];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==_)return N}return-1}var G="closure_lm_"+(1e6*Math.random()|0),oe={};function fe(a,d,f,_,N){if(Array.isArray(d)){for(var O=0;O<d.length;O++)fe(a,d[O],f,_,N);return null}return f=yn(f),a&&a[Gt]?a.K(d,f,h(_)?!!_.capture:!1,N):lt(a,d,f,!1,_,N)}function lt(a,d,f,_,N,O){if(!d)throw Error("Invalid event type");var q=h(N)?!!N.capture:!!N,Ve=An(a);if(Ve||(a[G]=Ve=new Bn(a)),f=Ve.add(d,f,_,q,O),f.proxy)return f;if(_=gn(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)xt||(N=q),N===void 0&&(N=!1),a.addEventListener(d.toString(),_,N);else if(a.attachEvent)a.attachEvent($n(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function gn(){function a(f){return d.call(a.src,a.listener,f)}const d=rr;return a}function on(a,d,f,_,N){if(Array.isArray(d))for(var O=0;O<d.length;O++)on(a,d[O],f,_,N);else _=h(_)?!!_.capture:!!_,f=yn(f),a&&a[Gt]?(a=a.i,d=String(d).toString(),d in a.g&&(O=a.g[d],f=L(O,f,_,N),-1<f&&(sn(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[d],a.h--)))):a&&(a=An(a))&&(d=a.g[d.toString()],a=-1,d&&(a=L(d,f,_,N)),(f=-1<a?d[a]:null)&&Ft(f))}function Ft(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Gt])w(d.i,a);else{var f=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(f,_,a.capture):d.detachEvent?d.detachEvent($n(f),_):d.addListener&&d.removeListener&&d.removeListener(_),(f=An(d))?(w(f,a),f.h==0&&(f.src=null,d[G]=null)):sn(a)}}}function $n(a){return a in oe?oe[a]:oe[a]="on"+a}function rr(a,d){if(a.da)a=!0;else{d=new ft(d,this);var f=a.listener,_=a.ha||a.src;a.fa&&Ft(a),a=f.call(_,d)}return a}function An(a){return a=a[G],a instanceof Bn?a:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(a){return typeof a=="function"?a:(a[ke]||(a[ke]=function(d){return a.handleEvent(d)}),a[ke])}function Ke(){Ee.call(this),this.i=new Bn(this),this.M=this,this.F=null}j(Ke,Ee),Ke.prototype[Gt]=!0,Ke.prototype.removeEventListener=function(a,d,f,_){on(this,a,d,f,_)};function ze(a,d){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new je(d,a);else if(d instanceof je)d.target=d.target||a;else{var N=d;d=new je(_,a),A(d,N)}if(N=!0,f)for(var O=f.length-1;0<=O;O--){var q=d.g=f[O];N=ir(q,_,!0,d)&&N}if(q=d.g=a,N=ir(q,_,!0,d)&&N,N=ir(q,_,!1,d)&&N,f)for(O=0;O<f.length;O++)q=d.g=f[O],N=ir(q,_,!1,d)&&N}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],_=0;_<f.length;_++)sn(f[_]);delete a.g[d],a.h--}}this.F=null},Ke.prototype.K=function(a,d,f,_){return this.i.add(String(a),d,!1,f,_)},Ke.prototype.L=function(a,d,f,_){return this.i.add(String(a),d,!0,f,_)};function ir(a,d,f,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var N=!0,O=0;O<d.length;++O){var q=d[O];if(q&&!q.da&&q.capture==f){var Ve=q.listener,bt=q.ha||q.src;q.fa&&w(a.i,q),N=Ve.call(bt,_)!==!1&&N}}return N&&!_.defaultPrevented}function Z(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Le(a){a.g=Z(()=>{a.g=null,a.i&&(a.i=!1,Le(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Ut extends Ee{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pt(a){Ee.call(this),this.h=a,this.g={}}j(pt,Ee);var vn=[];function cs(a){B(a.g,function(d,f){this.g.hasOwnProperty(f)&&Ft(d)},a),a.g={}}pt.prototype.N=function(){pt.aa.N.call(this),cs(this)},pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ki=c.JSON.stringify,Lr=c.JSON.parse,us=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ri(){}Ri.prototype.h=null;function nl(a){return a.h||(a.h=a.i())}function rl(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Di(){je.call(this,"d")}j(Di,je);function wo(){je.call(this,"c")}j(wo,je);var sr={},il=null;function ds(){return il=il||new Ke}sr.La="serverreachability";function sl(a){je.call(this,sr.La,a)}j(sl,je);function ji(a){const d=ds();ze(d,new sl(d))}sr.STAT_EVENT="statevent";function ol(a,d){je.call(this,sr.STAT_EVENT,a),this.stat=d}j(ol,je);function Et(a){const d=ds();ze(d,new ol(d,a))}sr.Ma="timingevent";function al(a,d){je.call(this,sr.Ma,a),this.size=d}j(al,je);function Ni(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function ll(a,d,f,_,N,O){a.info(function(){if(a.g)if(O)for(var q="",Ve=O.split("&"),bt=0;bt<Ve.length;bt++){var Ce=Ve[bt].split("=");if(1<Ce.length){var Rt=Ce[0];Ce=Ce[1];var Pt=Rt.split("_");q=2<=Pt.length&&Pt[1]=="type"?q+(Rt+"="+Ce+"&"):q+(Rt+"=redacted&")}}else q=null;else q=O;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+d+`
`+f+`
`+q})}function $u(a,d,f,_,N,O,q){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+d+`
`+f+`
`+O+" "+q})}function or(a,d,f,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+p(a,f)+(_?" "+_:"")})}function cl(a,d){a.info(function(){return"TIMEOUT: "+d})}Mi.prototype.info=function(){};function p(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return ki(f)}catch{return d}}var b={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},H={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},J;function te(){}j(te,Ri),te.prototype.g=function(){return new XMLHttpRequest},te.prototype.i=function(){return{}},J=new te;function me(a,d,f,_){this.j=a,this.i=d,this.l=f,this.R=_||1,this.U=new pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new be}function be(){this.i=null,this.g="",this.h=!1}var Re={},Me={};function Pe(a,d,f){a.L=1,a.v=hl(lr(d)),a.m=f,a.P=!0,He(a,null)}function He(a,d){a.F=Date.now(),ie(a),a.A=lr(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),em(f.i,"t",_),a.C=0,f=a.j.J,a.h=new be,a.g=vm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Ut(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,_=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(vn[0]=N.toString()),N=vn);for(var O=0;O<N.length;O++){var q=fe(f,N[O],_||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ji(),ll(a.i,a.u,a.A,a.l,a.R,a.m)}me.prototype.ca=function(a){a=a.target;const d=this.M;d&&cr(a)==3?d.j():this.Y(a)},me.prototype.Y=function(a){try{if(a==this.g)e:{const Pt=cr(this.g);var d=this.g.Ba();const ps=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||am(this.g)))){this.J||Pt!=4||d==7||(d==8||0>=ps?ji(3):ji(2)),mt(this);var f=this.g.Z();this.X=f;t:if(re(this)){var _=am(this.g);a="";var N=_.length,O=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),Wn(this);var q="";break t}this.h.i=new c.TextDecoder}for(d=0;d<N;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(O&&d==N-1)});_.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,$u(this.i,this.u,this.A,this.l,this.R,Pt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,bt=this.g;if((Ve=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Ve)){var Ce=Ve;break t}}Ce=null}if(f=Ce)or(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xo(this,f);else{this.o=!1,this.s=3,Et(12),ar(this),Wn(this);break e}}if(this.P){f=!0;let Cn;for(;!this.J&&this.C<q.length;)if(Cn=Ae(this,q),Cn==Me){Pt==4&&(this.s=4,Et(14),f=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==Re){this.s=4,Et(15),or(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else or(this.i,this.l,Cn,null),xo(this,Cn);if(re(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||q.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)or(this.i,this.l,q,"[Invalid Chunked Response]"),ar(this),Wn(this);else if(0<q.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Qu(Rt),Rt.M=!0,Et(11))}}else or(this.i,this.l,q,null),xo(this,q);Pt==4&&ar(this),this.o&&!this.J&&(Pt==4?pm(this.j,this):(this.o=!1,ie(this)))}else y1(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ar(this),Wn(this)}}}catch{}finally{}};function re(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Ae(a,d){var f=a.C,_=d.indexOf(`
`,f);return _==-1?Me:(f=Number(d.substring(f,_)),isNaN(f)?Re:(_+=1,_+f>d.length?Me:(d=d.slice(_,_+f),a.C=_+f,d)))}me.prototype.cancel=function(){this.J=!0,ar(this)};function ie(a){a.S=Date.now()+a.I,pe(a,a.I)}function pe(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ni(g(a.ba,a),d)}function mt(a){a.B&&(c.clearTimeout(a.B),a.B=null)}me.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(cl(this.i,this.A),this.L!=2&&(ji(),Et(17)),ar(this),this.s=2,Wn(this)):pe(this,this.S-a)};function Wn(a){a.j.G==0||a.J||pm(a.j,a)}function ar(a){mt(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,cs(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function xo(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Wu(f.h,a))){if(!a.K&&Wu(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)vl(f),gl(f);else break e;Ku(f),Et(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ni(g(f.Za,f),6e3));if(1>=qp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Li(f,11)}else if((a.K||f.g==a)&&vl(f),!S(d))for(N=f.Da.g.parse(d),d=0;d<N.length;d++){let Ce=N[d];if(f.T=Ce[0],Ce=Ce[1],f.G==2)if(Ce[0]=="c"){f.K=Ce[1],f.ia=Ce[2];const Rt=Ce[3];Rt!=null&&(f.la=Rt,f.j.info("VER="+f.la));const Pt=Ce[4];Pt!=null&&(f.Aa=Pt,f.j.info("SVER="+f.Aa));const ps=Ce[5];ps!=null&&typeof ps=="number"&&0<ps&&(_=1.5*ps,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Cn=a.g;if(Cn){const wl=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wl){var O=_.h;O.g||wl.indexOf("spdy")==-1&&wl.indexOf("quic")==-1&&wl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(qu(O,O.h),O.h=null))}if(_.D){const Yu=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yu&&(_.ya=Yu,$e(_.I,_.D,Yu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var q=a;if(_.qa=ym(_,_.J?_.ia:null,_.W),q.K){Hp(_.h,q);var Ve=q,bt=_.L;bt&&(Ve.I=bt),Ve.B&&(mt(Ve),ie(Ve)),_.g=q}else hm(_);0<f.i.length&&yl(f)}else Ce[0]!="stop"&&Ce[0]!="close"||Li(f,7);else f.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Li(f,7):Gu(f):Ce[0]!="noop"&&f.l&&f.l.ta(Ce),f.v=0)}}ji(4)}catch{}}var t1=class{constructor(a,d){this.g=a,this.map=d}};function $p(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function qp(a){return a.h?1:a.g?a.g.size:0}function Wu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function qu(a,d){a.g?a.g.add(d):a.h=d}function Hp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}$p.prototype.cancel=function(){if(this.i=Gp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Gp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return M(a.i)}function n1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,_=0;_<f;_++)d.push(a[_]);return d}d=[],f=0;for(_ in a)d[f++]=a[_];return d}function r1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const _ in a)d[f++]=_;return d}}}function Kp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=r1(a),_=n1(a),N=_.length,O=0;O<N;O++)d.call(void 0,_[O],f&&f[O],a)}var Qp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function i1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),N=null;if(0<=_){var O=a[f].substring(0,_);N=a[f].substring(_+1)}else O=a[f];d(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Oi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Oi){this.h=a.h,ul(this,a.j),this.o=a.o,this.g=a.g,dl(this,a.s),this.l=a.l;var d=a.i,f=new So;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Yp(this,f),this.m=a.m}else a&&(d=String(a).match(Qp))?(this.h=!1,ul(this,d[1]||"",!0),this.o=Eo(d[2]||""),this.g=Eo(d[3]||"",!0),dl(this,d[4]),this.l=Eo(d[5]||"",!0),Yp(this,d[6]||"",!0),this.m=Eo(d[7]||"")):(this.h=!1,this.i=new So(null,this.h))}Oi.prototype.toString=function(){var a=[],d=this.j;d&&a.push(bo(d,Xp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(bo(d,Xp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(bo(f,f.charAt(0)=="/"?a1:o1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",bo(f,c1)),a.join("")};function lr(a){return new Oi(a)}function ul(a,d,f){a.j=f?Eo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function dl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Yp(a,d,f){d instanceof So?(a.i=d,u1(a.i,a.h)):(f||(d=bo(d,l1)),a.i=new So(d,a.h))}function $e(a,d,f){a.i.set(d,f)}function hl(a){return $e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Eo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function bo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,s1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function s1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Xp=/[#\/\?@]/g,o1=/[#\?:]/g,a1=/[#\?]/g,l1=/[#\?@]/g,c1=/#/g;function So(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Vr(a){a.g||(a.g=new Map,a.h=0,a.i&&i1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=So.prototype,t.add=function(a,d){Vr(this),this.i=null,a=hs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Jp(a,d){Vr(a),d=hs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Zp(a,d){return Vr(a),d=hs(a,d),a.g.has(d)}t.forEach=function(a,d){Vr(this),this.g.forEach(function(f,_){f.forEach(function(N){a.call(d,N,_,this)},this)},this)},t.na=function(){Vr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let _=0;_<d.length;_++){const N=a[_];for(let O=0;O<N.length;O++)f.push(d[_])}return f},t.V=function(a){Vr(this);let d=[];if(typeof a=="string")Zp(this,a)&&(d=d.concat(this.g.get(hs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Vr(this),this.i=null,a=hs(this,a),Zp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function em(a,d,f){Jp(a,d),0<f.length&&(a.i=null,a.g.set(hs(a,d),M(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var _=d[f];const O=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var N=O;q[_]!==""&&(N+="="+encodeURIComponent(String(q[_]))),a.push(N)}}return this.i=a.join("&")};function hs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function u1(a,d){d&&!a.j&&(Vr(a),a.i=null,a.g.forEach(function(f,_){var N=_.toLowerCase();_!=N&&(Jp(this,_),em(this,N,f))},a)),a.j=d}function d1(a,d){const f=new Mi;if(c.Image){const _=new Image;_.onload=R(zr,f,"TestLoadImage: loaded",!0,d,_),_.onerror=R(zr,f,"TestLoadImage: error",!1,d,_),_.onabort=R(zr,f,"TestLoadImage: abort",!1,d,_),_.ontimeout=R(zr,f,"TestLoadImage: timeout",!1,d,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function h1(a,d){const f=new Mi,_=new AbortController,N=setTimeout(()=>{_.abort(),zr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(O=>{clearTimeout(N),O.ok?zr(f,"TestPingServer: ok",!0,d):zr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(N),zr(f,"TestPingServer: error",!1,d)})}function zr(a,d,f,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(f)}catch{}}function f1(){this.g=new us}function p1(a,d,f){const _=f||"";try{Kp(a,function(N,O){let q=N;h(N)&&(q=ki(N)),d.push(_+O+"="+encodeURIComponent(q))})}catch(N){throw d.push(_+"type="+encodeURIComponent("_badmap")),N}}function fl(a){this.l=a.Ub||null,this.j=a.eb||!1}j(fl,Ri),fl.prototype.g=function(){return new pl(this.l,this.j)},fl.prototype.i=function(a){return function(){return a}}({});function pl(a,d){Ke.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(pl,Ke),t=pl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,To(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function tm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Io(this):To(this),this.readyState==3&&tm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Io(this))},t.Qa=function(a){this.g&&(this.response=a,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(a){a.readyState=4,a.l=null,a.j=null,a.v=null,To(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function To(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function nm(a){let d="";return B(a,function(f,_){d+=_,d+=":",d+=f,d+=`\r
`}),d}function Hu(a,d,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=nm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):$e(a,d,f))}function et(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(et,Ke);var m1=/^https?$/i,g1=["POST","PUT"];t=et.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():J.g(),this.v=this.o?nl(this.o):nl(J),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){rm(this,O);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)f.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())f.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),N=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(g1,d,void 0))||_||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,q]of f)this.g.setRequestHeader(O,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{om(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){rm(this,O)}};function rm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,im(a),ml(a)}function im(a){a.A||(a.A=!0,ze(a,"complete"),ze(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ze(this,"complete"),ze(this,"abort"),ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ml(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sm(this):this.bb())},t.bb=function(){sm(this)};function sm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||cr(a)!=4||a.Z()!=2)){if(a.u&&cr(a)==4)Z(a.Ea,0,a);else if(ze(a,"readystatechange"),cr(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var _;if(_=q===0){var N=String(a.D).match(Qp)[1]||null;!N&&c.self&&c.self.location&&(N=c.self.location.protocol.slice(0,-1)),_=!m1.test(N?N.toLowerCase():"")}f=_}if(f)ze(a,"complete"),ze(a,"success");else{a.m=6;try{var O=2<cr(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",im(a)}}finally{ml(a)}}}}function ml(a,d){if(a.g){om(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ze(a,"ready");try{f.onreadystatechange=_}catch{}}}function om(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function cr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Lr(d)}};function am(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function y1(a){const d={};a=(a.g&&2<=cr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(S(a[_]))continue;var f=D(a[_]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=d[N]||[];d[N]=O,O.push(f)}E(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function lm(a){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ao("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ao("baseRetryDelayMs",5e3,a),this.cb=Ao("retryDelaySeedMs",1e4,a),this.Wa=Ao("forwardChannelMaxRetries",2,a),this.wa=Ao("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new $p(a&&a.concurrentRequestLimit),this.Da=new f1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lm.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,_){Et(0),this.W=a,this.H=d||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=ym(this,null,this.W),yl(this)};function Gu(a){if(cm(a),a.G==3){var d=a.U++,f=lr(a.I);if($e(f,"SID",a.K),$e(f,"RID",d),$e(f,"TYPE","terminate"),Co(a,f),d=new me(a,a.j,d),d.L=2,d.v=hl(lr(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=vm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ie(d)}gm(a)}function gl(a){a.g&&(Qu(a),a.g.cancel(),a.g=null)}function cm(a){gl(a),a.u&&(c.clearTimeout(a.u),a.u=null),vl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function yl(a){if(!Wp(a.h)&&!a.s){a.s=!0;var d=a.Ga;Oe||ue(),Q||(Oe(),Q=!0),se.add(d,a),a.B=0}}function v1(a,d){return qp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ni(g(a.Ga,a,d),mm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new me(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),A(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=dm(this,N,d),f=lr(this.I),$e(f,"RID",a),$e(f,"CVER",22),this.D&&$e(f,"X-HTTP-Session-Id",this.D),Co(this,f),O&&(this.O?d="headers="+encodeURIComponent(String(nm(O)))+"&"+d:this.m&&Hu(f,this.m,O)),qu(this.h,N),this.Ua&&$e(f,"TYPE","init"),this.P?($e(f,"$req",d),$e(f,"SID","null"),N.T=!0,Pe(N,f,null)):Pe(N,f,d),this.G=2}}else this.G==3&&(a?um(this,a):this.i.length==0||Wp(this.h)||um(this))};function um(a,d){var f;d?f=d.l:f=a.U++;const _=lr(a.I);$e(_,"SID",a.K),$e(_,"RID",f),$e(_,"AID",a.T),Co(a,_),a.m&&a.o&&Hu(_,a.m,a.o),f=new me(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=dm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),qu(a.h,f),Pe(f,_,d)}function Co(a,d){a.H&&B(a.H,function(f,_){$e(d,_,f)}),a.l&&Kp({},function(f,_){$e(d,_,f)})}function dm(a,d,f){f=Math.min(a.i.length,f);var _=a.l?g(a.l.Na,a.l,a):null;e:{var N=a.i;let O=-1;for(;;){const q=["count="+f];O==-1?0<f?(O=N[0].g,q.push("ofs="+O)):O=0:q.push("ofs="+O);let Ve=!0;for(let bt=0;bt<f;bt++){let Ce=N[bt].g;const Rt=N[bt].map;if(Ce-=O,0>Ce)O=Math.max(0,N[bt].g-100),Ve=!1;else try{p1(Rt,q,"req"+Ce+"_")}catch{_&&_(Rt)}}if(Ve){_=q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,_}function hm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Oe||ue(),Q||(Oe(),Q=!0),se.add(d,a),a.v=0}}function Ku(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ni(g(a.Fa,a),mm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,fm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ni(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),gl(this),fm(this))};function Qu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function fm(a){a.g=new me(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=lr(a.qa);$e(d,"RID","rpc"),$e(d,"SID",a.K),$e(d,"AID",a.T),$e(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&$e(d,"TO",a.ja),$e(d,"TYPE","xmlhttp"),Co(a,d),a.m&&a.o&&Hu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=hl(lr(d)),f.m=null,f.P=!0,He(f,a)}t.Za=function(){this.C!=null&&(this.C=null,gl(this),Ku(this),Et(19))};function vl(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function pm(a,d){var f=null;if(a.g==d){vl(a),Qu(a),a.g=null;var _=2}else if(Wu(a.h,d))f=d.D,Hp(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var N=a.B;_=ds(),ze(_,new al(_,f)),yl(a)}else hm(a);else if(N=d.s,N==3||N==0&&0<d.X||!(_==1&&v1(a,d)||_==2&&Ku(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),N){case 1:Li(a,5);break;case 4:Li(a,10);break;case 3:Li(a,6);break;default:Li(a,2)}}}function mm(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Li(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),_=a.Xa;const N=!_;_=new Oi(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ul(_,"https"),hl(_),N?d1(_.toString(),f):h1(_.toString(),f)}else Et(2);a.G=0,a.l&&a.l.sa(d),gm(a),cm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function gm(a){if(a.G=0,a.ka=[],a.l){const d=Gp(a.h);(d.length!=0||a.i.length!=0)&&(F(a.ka,d),F(a.ka,a.i),a.h.i.length=0,M(a.i),a.i.length=0),a.l.ra()}}function ym(a,d,f){var _=f instanceof Oi?lr(f):new Oi(f);if(_.g!="")d&&(_.g=d+"."+_.g),dl(_,_.s);else{var N=c.location;_=N.protocol,d=d?d+"."+N.hostname:N.hostname,N=+N.port;var O=new Oi(null);_&&ul(O,_),d&&(O.g=d),N&&dl(O,N),f&&(O.l=f),_=O}return f=a.D,d=a.ya,f&&d&&$e(_,f,d),$e(_,"VER",a.la),Co(a,_),_}function vm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new et(new fl({eb:f})):new et(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _m(){}t=_m.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _l(){}_l.prototype.g=function(a,d){return new an(a,d)};function an(a,d){Ke.call(this),this.g=new lm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!S(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!S(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new fs(this)}j(an,Ke),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Gu(this.g)},an.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ki(a),a=f);d.i.push(new t1(d.Ya++,a)),d.G==3&&yl(d)},an.prototype.N=function(){this.g.l=null,delete this.j,Gu(this.g),delete this.g,an.aa.N.call(this)};function wm(a){Di.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}j(wm,Di);function xm(){wo.call(this),this.status=1}j(xm,wo);function fs(a){this.g=a}j(fs,_m),fs.prototype.ua=function(){ze(this.g,"a")},fs.prototype.ta=function(a){ze(this.g,new wm(a))},fs.prototype.sa=function(a){ze(this.g,new xm)},fs.prototype.ra=function(){ze(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Sw=function(){return new _l},bw=function(){return ds()},Ew=sr,Oh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},b.NO_ERROR=0,b.TIMEOUT=8,b.HTTP_ERROR=6,oc=b,H.COMPLETE="complete",xw=H,rl.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,qo=rl,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,ww=et}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const fy="@firebase/firestore",py="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Xf("@firebase/firestore");function gs(){return ns.logLevel}function Y(t,...e){if(ns.logLevel<=_e.DEBUG){const n=e.map(lp);ns.debug(`Firestore (${ho}): ${t}`,...n)}}function Cr(t,...e){if(ns.logLevel<=_e.ERROR){const n=e.map(lp);ns.error(`Firestore (${ho}): ${t}`,...n)}}function rs(t,...e){if(ns.logLevel<=_e.WARN){const n=e.map(lp);ns.warn(`Firestore (${ho}): ${t}`,...n)}}function lp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Iw(t,r,n)}function Iw(t,e,n){let r=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cr(r),new Error(r)}function De(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Iw(e,i,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Aw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class mC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gC{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string",31837,{l:r}),new Tw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class yC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class my{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new my(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new my(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Lh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Rd(i)===Rd(s)?we(i,s):Rd(i)?1:-1}return we(t.length,e.length)}const xC=55296,EC=57343;function Rd(t){const e=t.charCodeAt(0);return e>=xC&&e<=EC}function Zs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="__name__";class Gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&le(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Gn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return we(e.length,n.length)}static compareSegments(e,n){const r=Gn.isNumericId(e),i=Gn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Gn.extractNumericId(e).compare(Gn.extractNumericId(n)):Lh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class Fe extends Gn{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const bC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Gn{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return bC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gy}static keyField(){return new vt([gy])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new K(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new K(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Fe.fromString(e))}static fromName(e){return new ne(Fe.fromString(e).popFirst(5))}static empty(){return new ne(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e,n){if(!n)throw new K(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kw(t,e,n,r){if(e===!0&&r===!0)throw new K(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yy(t){if(!ne.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vy(t){if(ne.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Su(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Su(t);throw new K(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ga(t,e){if(!Rw(t))throw new K(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new K(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=-62135596800,wy=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wy);return new Ue(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_y)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wy}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ga(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_y;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:at("string",Ue._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Ue(0,0))}static max(){return new de(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=-1;function SC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new yi(i,ne.empty(),e)}function IC(t){return new yi(t.readTime,t.key,Ra)}class yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yi(de.min(),ne.empty(),Ra)}static max(){return new yi(de.max(),ne.empty(),Ra)}}function TC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==AC)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(m=>{o[h]=m,++c,c===s&&r(o)},m=>i(m))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function kC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Iu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=-1;function Tu(t){return t==null}function qc(t){return t===0&&1/t==-1/0}function RC(t){return typeof t=="number"&&Number.isInteger(t)&&!qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="";function PC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xy(e)),e=DC(t.get(n),e);return xy(e)}function DC(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Pw:n+="";break;default:n+=s}}return n}function xy(t){return t+Pw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fl(this.root,e,this.comparator,!0)}}class Fl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=i??Tt.EMPTY,this.right=s??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new by(this.data.getIterator())}getIteratorFrom(e){return new by(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class by{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new dt(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jw("Invalid base64 string: "+s):s}}(e);return new wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const jC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=jC.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="server_timestamp",Mw="__type__",Ow="__previous_value__",Lw="__local_write_time__";function up(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Mw])==null?void 0:r.stringValue)===Nw}function Au(t){const e=t.mapValue.fields[Ow];return up(e)?Au(e):e}function Pa(t){const e=vi(t.mapValue.fields[Lw].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,i,s,o,c,u,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=m}}const Hc="(default)";class eo{constructor(e,n){this.projectId=e,this.database=n||Hc}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===Hc}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="__type__",MC="__max__",Ul={mapValue:{}},zw="__vector__",Gc="value";function wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?up(t)?4:LC(t)?9007199254740991:OC(t)?10:11:le(28295,{value:t})}function tr(t,e){if(t===e)return!0;const n=wi(t);if(n!==wi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vi(i.timestampValue),c=vi(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return _i(i.bytesValue).isEqual(_i(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nt(i.doubleValue),c=nt(s.doubleValue);return o===c?qc(o)===qc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Ey(o)!==Ey(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!tr(o[u],c[u])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function Da(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function to(t,e){if(t===e)return 0;const n=wi(t),r=wi(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=nt(s.integerValue||s.doubleValue),u=nt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Sy(t.timestampValue,e.timestampValue);case 4:return Sy(Pa(t),Pa(e));case 5:return Lh(t.stringValue,e.stringValue);case 6:return function(s,o){const c=_i(s),u=_i(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const m=we(c[h],u[h]);if(m!==0)return m}return we(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=we(nt(s.latitude),nt(o.latitude));return c!==0?c:we(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Iy(t.arrayValue,e.arrayValue);case 10:return function(s,o){var g,R,j,M;const c=s.fields||{},u=o.fields||{},h=(g=c[Gc])==null?void 0:g.arrayValue,m=(R=u[Gc])==null?void 0:R.arrayValue,y=we(((j=h==null?void 0:h.values)==null?void 0:j.length)||0,((M=m==null?void 0:m.values)==null?void 0:M.length)||0);return y!==0?y:Iy(h,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ul.mapValue&&o===Ul.mapValue)return 0;if(s===Ul.mapValue)return 1;if(o===Ul.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let y=0;y<u.length&&y<m.length;++y){const g=Lh(u[y],m[y]);if(g!==0)return g;const R=to(c[u[y]],h[m[y]]);if(R!==0)return R}return we(u.length,m.length)}(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function Sy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=vi(t),r=vi(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function Iy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=to(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function no(t){return Vh(t)}function Vh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Vh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Vh(n.fields[o])}`;return i+"}"}(t.mapValue):le(61005,{value:t})}function ac(t){switch(wi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Au(t);return e?16+ac(e):16;case 5:return 2*t.stringValue.length;case 6:return _i(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ac(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ai(r.fields,(s,o)=>{i+=s.length+ac(o)}),i}(t.mapValue);default:throw le(13486,{value:t})}}function Ty(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zh(t){return!!t&&"integerValue"in t}function dp(t){return!!t&&"arrayValue"in t}function Ay(t){return!!t&&"nullValue"in t}function Cy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lc(t){return!!t&&"mapValue"in t}function OC(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Vw])==null?void 0:r.stringValue)===zw}function sa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(t.arrayValue.values[n]);return e}return{...t}}function LC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===MC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=vt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=sa(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ai(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jt(sa(this.value))}}function Fw(t){const e=[];return Ai(t.fields,(n,r)=>{const i=new vt([n]);if(lc(r)){const s=Fw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Lt(e,0,de.min(),de.min(),de.min(),Jt.empty(),0)}static newFoundDocument(e,n,r,i){return new Lt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Lt(e,2,n,de.min(),de.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,de.min(),de.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.position=e,this.inclusive=n}}function ky(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=to(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ry(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function VC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{}class ot extends Uw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FC(e,n,r):n==="array-contains"?new $C(e,r):n==="in"?new WC(e,r):n==="not-in"?new qC(e,r):n==="array-contains-any"?new HC(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UC(e,r):new BC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(to(n,this.value)):n!==null&&wi(this.value)===wi(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends Uw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Un(e,n)}matches(e){return Bw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bw(t){return t.op==="and"}function $w(t){return zC(t)&&Bw(t)}function zC(t){for(const e of t.filters)if(e instanceof Un)return!1;return!0}function Fh(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+no(t.value);if($w(t))return t.filters.map(e=>Fh(e)).join(",");{const e=t.filters.map(n=>Fh(n)).join(",");return`${t.op}(${e})`}}function Ww(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&tr(r.value,i.value)}(t,e):t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&Ww(o,i.filters[c]),!0):!1}(t,e):void le(19439)}function qw(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`}(t):t instanceof Un?function(n){return n.op.toString()+" {"+n.getFilters().map(qw).join(" ,")+"}"}(t):"Filter"}class FC extends ot{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class UC extends ot{constructor(e,n){super(e,"in",n),this.keys=Hw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BC extends ot{constructor(e,n){super(e,"not-in",n),this.keys=Hw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class $C extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dp(n)&&Da(n.arrayValue,this.value)}}class WC extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class qC extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Da(this.value.arrayValue,n)}}class HC extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Te=null}}function Py(t,e=null,n=[],r=[],i=null,s=null,o=null){return new GC(t,e,n,r,i,s,o)}function hp(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>no(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>no(r)).join(",")),e.Te=n}return e.Te}function fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ww(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ry(t.startAt,e.startAt)&&Ry(t.endAt,e.endAt)}function Uh(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KC(t,e,n,r,i,s,o,c){return new mo(t,e,n,r,i,s,o,c)}function Cu(t){return new mo(t)}function Dy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Gw(t){return t.collectionGroup!==null}function oa(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new dt(vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ja(s,r))}),n.has(vt.keyField().canonicalString())||e.Ie.push(new ja(vt.keyField(),r))}return e.Ie}function Zn(t){const e=he(t);return e.Ee||(e.Ee=QC(e,oa(t))),e.Ee}function QC(t,e){if(t.limitType==="F")return Py(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ja(i.field,s)});const n=t.endAt?new Kc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kc(t.startAt.position,t.startAt.inclusive):null;return Py(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bh(t,e){const n=t.filters.concat([e]);return new mo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $h(t,e,n){return new mo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ku(t,e){return fp(Zn(t),Zn(e))&&t.limitType===e.limitType}function Kw(t){return`${hp(Zn(t))}|lt:${t.limitType}`}function ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qw(i)).join(", ")}]`),Tu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>no(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>no(i)).join(",")),`Target(${r})`}(Zn(t))}; limitType=${t.limitType})`}function Ru(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of oa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const h=ky(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,oa(r),i)||r.endAt&&!function(o,c,u){const h=ky(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,oa(r),i))}(t,e)}function YC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Qw(t){return(e,n)=>{let r=!1;for(const i of oa(t)){const s=XC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XC(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),h=c.data.field(s);return u!==null&&h!==null?to(u,h):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Dw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new Ze(ne.comparator);function kr(){return JC}const Yw=new Ze(ne.comparator);function Ho(...t){let e=Yw;for(const n of t)e=e.insert(n.key,n);return e}function Xw(t){let e=Yw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wi(){return aa()}function Jw(){return aa()}function aa(){return new as(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZC=new Ze(ne.comparator),ek=new dt(ne.comparator);function xe(...t){let e=ek;for(const n of t)e=e.add(n);return e}const tk=new dt(we);function nk(){return tk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function Zw(t){return{integerValue:""+t}}function rk(t,e){return RC(e)?Zw(e):pp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this._=void 0}}function ik(t,e,n){return t instanceof Qc?function(i,s){const o={fields:{[Mw]:{stringValue:Nw},[Lw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&up(s)&&(s=Au(s)),s&&(o.fields[Ow]=s),{mapValue:o}}(n,e):t instanceof Na?tx(t,e):t instanceof Ma?nx(t,e):function(i,s){const o=ex(i,s),c=jy(o)+jy(i.Ae);return zh(o)&&zh(i.Ae)?Zw(c):pp(i.serializer,c)}(t,e)}function sk(t,e,n){return t instanceof Na?tx(t,e):t instanceof Ma?nx(t,e):n}function ex(t,e){return t instanceof Yc?function(r){return zh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Qc extends Pu{}class Na extends Pu{constructor(e){super(),this.elements=e}}function tx(t,e){const n=rx(e);for(const r of t.elements)n.some(i=>tr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends Pu{constructor(e){super(),this.elements=e}}function nx(t,e){let n=rx(e);for(const r of t.elements)n=n.filter(i=>!tr(i,r));return{arrayValue:{values:n}}}class Yc extends Pu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jy(t){return nt(t.integerValue||t.doubleValue)}function rx(t){return dp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ok(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Na&&i instanceof Na||r instanceof Ma&&i instanceof Ma?Zs(r.elements,i.elements,tr):r instanceof Yc&&i instanceof Yc?tr(r.Ae,i.Ae):r instanceof Qc&&i instanceof Qc}(t.transform,e.transform)}class ak{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Du{}function ix(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mp(t.key,Sn.none()):new Ka(t.key,t.data,Sn.none());{const n=t.data,r=Jt.empty();let i=new dt(vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ci(t.key,r,new dn(i.toArray()),Sn.none())}}function lk(t,e,n){t instanceof Ka?function(i,s,o){const c=i.value.clone(),u=My(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ci?function(i,s,o){if(!cc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=My(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(sx(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function la(t,e,n,r){return t instanceof Ka?function(s,o,c,u){if(!cc(s.precondition,o))return c;const h=s.value.clone(),m=Oy(s.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ci?function(s,o,c,u){if(!cc(s.precondition,o))return c;const h=Oy(s.fieldTransforms,u,o),m=o.data;return m.setAll(sx(s)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,o,c){return cc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function ck(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ex(r.transform,i||null);s!=null&&(n===null&&(n=Jt.empty()),n.set(r.field,s))}return n||null}function Ny(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(s,o)=>ok(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends Du{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ci extends Du{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function My(t,e,n){const r=new Map;De(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,sk(o,c,n[i]))}return r}function Oy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ik(s,o,e))}return r}class mp extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uk extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Jw();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=ix(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(n,r)=>Ny(n,r))&&Zs(this.baseMutations,e.baseMutations,(n,r)=>Ny(n,r))}}class gp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return ZC}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new gp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,Se;function pk(t){switch(t){case z.OK:return le(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function ox(t){if(t===void 0)return Cr("GRPC error has no .code"),z.UNKNOWN;switch(t){case it.OK:return z.OK;case it.CANCELLED:return z.CANCELLED;case it.UNKNOWN:return z.UNKNOWN;case it.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case it.INTERNAL:return z.INTERNAL;case it.UNAVAILABLE:return z.UNAVAILABLE;case it.UNAUTHENTICATED:return z.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case it.NOT_FOUND:return z.NOT_FOUND;case it.ALREADY_EXISTS:return z.ALREADY_EXISTS;case it.PERMISSION_DENIED:return z.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case it.ABORTED:return z.ABORTED;case it.OUT_OF_RANGE:return z.OUT_OF_RANGE;case it.UNIMPLEMENTED:return z.UNIMPLEMENTED;case it.DATA_LOSS:return z.DATA_LOSS;default:return le(39323,{code:t})}}(Se=it||(it={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new hi([4294967295,4294967295],0);function Ly(t){const e=mk().encode(t),n=new _w;return n.update(e),new Uint8Array(n.digest())}function Vy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hi([n,r],0),new hi([i,s],0)]}class yp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Go(`Invalid padding: ${n}`);if(r<0)throw new Go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Go(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(hi.fromNumber(r)));return i.compare(gk)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ly(e),[r,i]=Vy(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new yp(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Ly(e),[r,i]=Vy(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ju(de.min(),i,new Ze(we),kr(),xe())}}class Qa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qa(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class ax{constructor(e,n){this.targetId=e,this.Ce=n}}class lx{constructor(e,n,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zy{constructor(){this.ve=0,this.Fe=Fy(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),r=xe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le(38017,{changeType:s})}}),new Qa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Fy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yk{constructor(e){this.Ge=e,this.ze=new Map,this.je=kr(),this.Je=Bl(),this.He=Bl(),this.Ye=new Ze(we)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Uh(s))if(r===0){const o=new ne(s.path);this.et(n,o,Lt.newNoDocument(o,de.min()))}else De(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=_i(r).toUint8Array()}catch(u){if(u instanceof jw)return rs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new yp(o,i,s)}catch(u){return rs(u instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const c=this.ot(o);if(c){if(s.current&&Uh(c.target)){const u=new ne(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Lt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=xe();this.He.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new ju(e,n,this.Ye,this.je,r);return this.je=kr(),this.Je=Bl(),this.He=Bl(),this.Ye=new Ze(we),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new zy,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new dt(we),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new dt(we),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zy),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bl(){return new Ze(ne.comparator)}function Fy(){return new Ze(ne.comparator)}const vk={asc:"ASCENDING",desc:"DESCENDING"},_k={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wk={and:"AND",or:"OR"};class xk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wh(t,e){return t.useProto3Json||Tu(e)?e:{value:e}}function Xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ek(t,e){return Xc(t,e.toTimestamp())}function er(t){return De(!!t,49232),de.fromTimestamp(function(n){const r=vi(n);return new Ue(r.seconds,r.nanos)}(t))}function vp(t,e){return qh(t,e).canonicalString()}function qh(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ux(t){const e=Fe.fromString(t);return De(mx(e),10190,{key:e.toString()}),e}function Hh(t,e){return vp(t.databaseId,e.path)}function Pd(t,e){const n=ux(e);if(n.get(1)!==t.databaseId.projectId)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(hx(n))}function dx(t,e){return vp(t.databaseId,e)}function bk(t){const e=ux(t);return e.length===4?Fe.emptyPath():hx(e)}function Gh(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hx(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Uy(t,e,n){return{name:Hh(t,e),fields:n.value.mapValue.fields}}function Sk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:le(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(De(m===void 0||typeof m=="string",58123),wt.fromBase64String(m||"")):(De(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),wt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const m=h.code===void 0?z.UNKNOWN:ox(h.code);return new K(m,h.message||"")}(o);n=new lx(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Pd(t,r.document.name),s=er(r.document.updateTime),o=r.document.createTime?er(r.document.createTime):de.min(),c=new Jt({mapValue:{fields:r.document.fields}}),u=Lt.newFoundDocument(i,s,o,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new uc(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Pd(t,r.document),s=r.readTime?er(r.readTime):de.min(),o=Lt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new uc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Pd(t,r.document),s=r.removedTargetIds||[];n=new uc([],s,i,null)}else{if(!("filter"in e))return le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fk(i,s),c=r.targetId;n=new ax(c,o)}}return n}function Ik(t,e){let n;if(e instanceof Ka)n={update:Uy(t,e.key,e.value)};else if(e instanceof mp)n={delete:Hh(t,e.key)};else if(e instanceof Ci)n={update:Uy(t,e.key,e.data),updateMask:Nk(e.fieldMask)};else{if(!(e instanceof uk))return le(16599,{Vt:e.type});n={verify:Hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof Qc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Yc)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw le(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Ek(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le(27497)}(t,e.precondition)),n}function Tk(t,e){return t&&t.length>0?(De(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?er(i.updateTime):er(s);return o.isEqual(de.min())&&(o=er(s)),new ak(o,i.transformResults||[])}(n,e))):[]}function Ak(t,e){return{documents:[dx(t,e.path)]}}function Ck(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dx(t,i);const s=function(h){if(h.length!==0)return px(Un.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:vs(g.field),direction:Pk(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Wh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function kk(t){let e=bk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=function(y){const g=fx(y);return g instanceof Un&&$w(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(y){return y.map(g=>function(j){return new ja(_s(j.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(y){let g;return g=typeof y=="object"?y.value:y,Tu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(y){const g=!!y.before,R=y.values||[];return new Kc(R,g)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const g=!y.before,R=y.values||[];return new Kc(R,g)}(n.endAt)),KC(e,i,o,s,c,"F",u,h)}function Rk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_s(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_s(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_s(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_s(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(_s(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Un.create(n.compositeFilter.filters.map(r=>fx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function Pk(t){return vk[t]}function Dk(t){return _k[t]}function jk(t){return wk[t]}function vs(t){return{fieldPath:t.canonicalString()}}function _s(t){return vt.fromServerFormat(t.fieldPath)}function px(t){return t instanceof ot?function(n){if(n.op==="=="){if(Cy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(Ay(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cy(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(Ay(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:Dk(n.op),value:n.value}}}(t):t instanceof Un?function(n){const r=n.getFilters().map(i=>px(i));return r.length===1?r[0]:{compositeFilter:{op:jk(n.op),filters:r}}}(t):le(54877,{filter:t})}function Nk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r,i,s=de.min(),o=de.min(),c=wt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.yt=e}}function Ok(t){const e=kk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.Cn=new Vk}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(yi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Vk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gx=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(gx,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="LruGarbageCollector",zk=1048576;function Wy([t,e],[n,r]){const i=we(t,n);return i===0?we(e,r):i}class Fk{constructor(e){this.Ir=e,this.buffer=new dt(Wy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Wy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Uk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y($y,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?Y($y,"Ignoring IndexedDB error during garbage collection: ",n):await fo(n)}await this.Vr(3e5)})}}class Bk{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Iu.ce);const r=new Fk(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(By)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),By):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,c,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,o=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(s=y,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(h=Date.now(),gs()<=_e.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${y} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:y})))}}function $k(t,e){return new Bk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.changes=new as(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&la(r.mutation,i,dn.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const i=Wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ho();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=kr();const o=aa(),c=function(){return aa()}();return n.forEach((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Ci)?s=s.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),la(m.mutation,h,m.mutation.getFieldMask(),Ue.now())):o.set(h.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>c.set(h,new qk(m,o.get(h)??null))),c))}recalculateAndSaveOverlays(e,n){const r=aa();let i=new Ze((o,c)=>o-c),s=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||dn.empty();m=c.applyToLocalView(h,m),r.set(u,m);const y=(i.get(c.batchId)||xe()).add(u);i=i.insert(c.batchId,y)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,m=u.value,y=Jw();m.forEach(g=>{if(!s.has(g)){const R=ix(n.get(g),r.get(g));R!==null&&y.set(g,R),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,y))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Wi());let c=Ra,u=s;return o.next(h=>U.forEach(h,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),s.get(m)?U.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,xe())).next(m=>({batchId:c,changes:Xw(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Ho();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ho();return this.indexManager.getCollectionParents(e,s).next(c=>U.forEach(c,u=>{const h=function(y,g){return new mo(g,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(m=>{m.forEach((y,g)=>{o=o.insert(y,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,Lt.newInvalidDocument(m)))});let c=Ho();return o.forEach((u,h)=>{const m=s.get(u);m!==void 0&&la(m.mutation,h,dn.empty(),Ue.now()),Ru(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:er(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Ok(i.bundledQuery),readTime:er(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.overlays=new Ze(ne.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Wi(),s=n.length+1,o=new ne(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ze((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=Wi(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=Wi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>c.set(h,m)),!(c.size()>=i)););return U.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hk(n,r));let s=this.qr.get(n);s===void 0&&(s=xe(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.Qr=new dt(gt.$r),this.Ur=new dt(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ne(new Fe([])),r=new gt(n,e),i=new gt(n,e+1);let s=xe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new gt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ne.comparator(e.key,n.key)||we(e.Yr,n.Yr)}static Kr(e,n){return we(e.Yr,n.Yr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dt(gt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dk(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new gt(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?cp:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const c=this.Xr(o.Yr);s.push(c)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(we);return n.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new gt(new ne(s),0);let c=new dt(we);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.Yr)),!0)},o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,i=>{const s=new gt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new gt(n,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.ri=e,this.docs=function(){return new Ze(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=kr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Lt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=kr();const o=n.path,c=new ne(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||TC(IC(m),r)<=0||(i.has(m.key)||Ru(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Jk(this)}getSize(e){return U.resolve(this.size)}}class Jk extends Wk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.persistence=e,this.si=new as(n=>hp(n),fp),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.oi=0,this._i=new _p,this.targetCount=0,this.ai=ro.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Iu(0),this.li=!1,this.li=!0,this.hi=new Qk,this.referenceDelegate=e(this),this.Pi=new Zk(this),this.indexManager=new Lk,this.remoteDocumentCache=function(i){return new Xk(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Mk(n),this.Ii=new Gk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Yk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new e2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class e2 extends CC{constructor(e){super(),this.currentSequenceNumber=e}}class wp{constructor(e){this.persistence=e,this.Ri=new _p,this.Vi=null}static mi(e){return new wp(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const i=ne.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jc{constructor(e,n){this.persistence=e,this.pi=new as(r=>PC(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=$k(this,n)}static mi(e,n){return new Jc(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ac(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=xe(),i=xe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return jS()?8:kC(zt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new t2;return this.Ss(e,n,o).next(c=>{if(s.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(gs()<=_e.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(gs()<=_e.DEBUG&&Y("QueryEngine","Query:",ys(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(gs()<=_e.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):U.resolve())}ys(e,n){if(Dy(n))return U.resolve(null);let r=Zn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$h(n,null,"F"),r=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=xe(...s);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,c);return this.Cs(n,h,o,u.readTime)?this.ys(e,$h(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return Dy(n)||i.isEqual(de.min())?U.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?U.resolve(null):(gs()<=_e.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ys(n)),this.vs(e,o,n,SC(i,Ra)).next(c=>c))})}Ds(e,n){let r=new dt(Qw(e));return n.forEach((i,s)=>{Ru(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return gs()<=_e.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ys(n)),this.ps.getDocumentsMatchingQuery(e,n,yi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="LocalStore",r2=3e8;class i2{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ze(we),this.xs=new as(s=>hp(s),fp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function s2(t,e,n,r){return new i2(t,e,n,r)}async function vx(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=xe();for(const h of i){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of s){c.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:c}))})})}function o2(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,h,m){const y=h.batch,g=y.keys();let R=U.resolve();return g.forEach(j=>{R=R.next(()=>m.getEntry(u,j)).next(M=>{const F=h.docVersions.get(j);De(F!==null,48541),M.version.compareTo(F)<0&&(y.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),m.addEntry(M)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(u,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=xe();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _x(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function a2(t,e){const n=he(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach((m,y)=>{const g=i.get(y);if(!g)return;c.push(n.Pi.removeMatchingKeys(s,m.removedDocuments,y).next(()=>n.Pi.addMatchingKeys(s,m.addedDocuments,y)));let R=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?R=R.withResumeToken(wt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):m.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(m.resumeToken,r)),i=i.insert(y,R),function(M,F,k){return M.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=r2?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,R,m)&&c.push(n.Pi.updateTargetData(s,R))});let u=kr(),h=xe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),c.push(l2(s,o,e.documentUpdates).next(m=>{u=m.ks,h=m.qs})),!r.isEqual(de.min())){const m=n.Pi.getLastRemoteSnapshotVersion(s).next(y=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(m)}return U.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=i,s))}function l2(t,e,n){let r=xe(),i=xe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=kr();return n.forEach((c,u)=>{const h=s.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Y(Ep,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function c2(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function u2(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Kh(t,e,n){const r=he(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!po(o))throw o;Y(Ep,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function qy(t,e,n){const r=he(t);let i=de.min(),s=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,m){const y=he(u),g=y.xs.get(m);return g!==void 0?U.resolve(y.Ms.get(g)):y.Pi.getTargetData(h,m)}(r,o,Zn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:xe())).next(c=>(d2(r,YC(e),c),{documents:c,Qs:s})))}function d2(t,e,n){let r=t.Os.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Hy{constructor(){this.activeTargetIds=nk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h2{constructor(){this.Mo=new Hy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="ConnectivityMonitor";class Ky{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(Gy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(Gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function Qh(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="RestConnection",p2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Hc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Qh(),c=this.zo(e,n.toUriEncodedString());Y(Dd,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:h}=new URL(c),m=lo(h);return this.Jo(e,c,u,r,m).then(y=>(Y(Dd,`Received RPC '${e}' ${o}: `,y),y),y=>{throw rs(Dd,`RPC '${e}' ${o} failed with error: `,y,"url: ",c,"request:",r),y})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=p2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class y2 extends m2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Qh();return new Promise((c,u)=>{const h=new ww;h.setWithCredentials(!0),h.listenOnce(xw.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case oc.NO_ERROR:const y=h.getResponseJson();Y(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),c(y);break;case oc.TIMEOUT:Y(Nt,`RPC '${e}' ${o} timed out`),u(new K(z.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:const g=h.getStatus();if(Y(Nt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const j=R==null?void 0:R.error;if(j&&j.status&&j.message){const M=function(k){const S=k.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(S)>=0?S:z.UNKNOWN}(j.status);u(new K(M,j.message))}else u(new K(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new K(z.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Y(Nt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(i);Y(Nt,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",m,r,15)})}T_(e,n,r){const i=Qh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Sw(),c=bw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=s.join("");Y(Nt,`Creating RPC '${e}' stream ${i}: ${m}`,u);const y=o.createWebChannel(m,u);this.I_(y);let g=!1,R=!1;const j=new g2({Yo:F=>{R?Y(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(g||(Y(Nt,`Opening RPC '${e}' stream ${i} transport.`),y.open(),g=!0),Y(Nt,`RPC '${e}' stream ${i} sending:`,F),y.send(F))},Zo:()=>y.close()}),M=(F,k,S)=>{F.listen(k,P=>{try{S(P)}catch(V){setTimeout(()=>{throw V},0)}})};return M(y,qo.EventType.OPEN,()=>{R||(Y(Nt,`RPC '${e}' stream ${i} transport opened.`),j.o_())}),M(y,qo.EventType.CLOSE,()=>{R||(R=!0,Y(Nt,`RPC '${e}' stream ${i} transport closed`),j.a_(),this.E_(y))}),M(y,qo.EventType.ERROR,F=>{R||(R=!0,rs(Nt,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),j.a_(new K(z.UNAVAILABLE,"The operation could not be completed")))}),M(y,qo.EventType.MESSAGE,F=>{var k;if(!R){const S=F.data[0];De(!!S,16349);const P=S,V=(P==null?void 0:P.error)||((k=P[0])==null?void 0:k.error);if(V){Y(Nt,`RPC '${e}' stream ${i} received error:`,V);const W=V.status;let B=function(T){const A=it[T];if(A!==void 0)return ox(A)}(W),E=V.message;B===void 0&&(B=z.INTERNAL,E="Unknown error status: "+W+" with message "+V.message),R=!0,j.a_(new K(B,E)),y.close()}else Y(Nt,`RPC '${e}' stream ${i} received:`,S),j.u_(S)}}),M(c,Ew.STAT_EVENT,F=>{F.stat===Oh.PROXY?Y(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===Oh.NOPROXY&&Y(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.__()},0),j}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){return new xk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="PersistentStream";class xx{constructor(e,n,r,i,s,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Cr(n.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new K(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(Qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(Qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v2 extends xx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Sk(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?er(o.readTime):de.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Gh(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=Uh(u)?{documents:Ak(s,u)}:{query:Ck(s,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=cx(s,o.resumeToken);const h=Wh(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(de.min())>0){c.readTime=Xc(s,o.snapshotVersion.toTimestamp());const h=Wh(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=Rk(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Gh(this.serializer),n.removeTarget=e,this.q_(n)}}class _2 extends xx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Tk(e.writeResults,e.commitTime),r=er(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Gh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ik(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{}class x2 extends w2{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,qh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(z.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,qh(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class E2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cr(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="RemoteStore";class b2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ls(this)&&(Y(is,"Restarting streams for network reachability change."),await async function(u){const h=he(u);h.Ea.add(4),await Ya(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Mu(h)}(this))})}),this.Ra=new E2(r,i)}}async function Mu(t){if(ls(t))for(const e of t.da)await e(!0)}async function Ya(t){for(const e of t.da)await e(!1)}function Ex(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Tp(n)?Ip(n):go(n).O_()&&Sp(n,e))}function bp(t,e){const n=he(t),r=go(n);n.Ia.delete(e),r.O_()&&bx(n,e),n.Ia.size===0&&(r.O_()?r.L_():ls(n)&&n.Ra.set("Unknown"))}function Sp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).Y_(e)}function bx(t,e){t.Va.Ue(e),go(t).Z_(e)}function Ip(t){t.Va=new yk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),go(t).start(),t.Ra.ua()}function Tp(t){return ls(t)&&!go(t).x_()&&t.Ia.size>0}function ls(t){return he(t).Ea.size===0}function Sx(t){t.Va=void 0}async function S2(t){t.Ra.set("Online")}async function I2(t){t.Ia.forEach((e,n)=>{Sp(t,e)})}async function T2(t,e){Sx(t),Tp(t)?(t.Ra.ha(e),Ip(t)):t.Ra.set("Unknown")}async function A2(t,e,n){if(t.Ra.set("Online"),e instanceof lx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(r){Y(is,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zc(t,r)}else if(e instanceof uc?t.Va.Ze(e):e instanceof ax?t.Va.st(e):t.Va.tt(e),!n.isEqual(de.min()))try{const r=await _x(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.Va.Tt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const m=s.Ia.get(u);if(!m)return;s.Ia.set(u,m.withResumeToken(wt.EMPTY_BYTE_STRING,m.snapshotVersion)),bx(s,u);const y=new ei(m.target,u,h,m.sequenceNumber);Sp(s,y)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Y(is,"Failed to raise snapshot:",r),await Zc(t,r)}}async function Zc(t,e,n){if(!po(e))throw e;t.Ea.add(1),await Ya(t),t.Ra.set("Offline"),n||(n=()=>_x(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(is,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Mu(t)})}function Ix(t,e){return e().catch(n=>Zc(t,n,e))}async function Ou(t){const e=he(t),n=xi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cp;for(;C2(e);)try{const i=await c2(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,k2(e,i)}catch(i){await Zc(e,i)}Tx(e)&&Ax(e)}function C2(t){return ls(t)&&t.Ta.length<10}function k2(t,e){t.Ta.push(e);const n=xi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Tx(t){return ls(t)&&!xi(t).x_()&&t.Ta.length>0}function Ax(t){xi(t).start()}async function R2(t){xi(t).ra()}async function P2(t){const e=xi(t);for(const n of t.Ta)e.ea(n.mutations)}async function D2(t,e,n){const r=t.Ta.shift(),i=gp.from(r,e,n);await Ix(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ou(t)}async function j2(t,e){e&&xi(t).X_&&await async function(r,i){if(function(o){return pk(o)&&o!==z.ABORTED}(i.code)){const s=r.Ta.shift();xi(r).B_(),await Ix(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ou(r)}}(t,e),Tx(t)&&Ax(t)}async function Yy(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),Y(is,"RemoteStore received new credentials");const r=ls(n);n.Ea.add(3),await Ya(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Mu(n)}async function N2(t,e){const n=he(t);e?(n.Ea.delete(2),await Mu(n)):e||(n.Ea.add(2),await Ya(n),n.Ra.set("Unknown"))}function go(t){return t.ma||(t.ma=function(n,r,i){const s=he(n);return s.sa(),new v2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:S2.bind(null,t),t_:I2.bind(null,t),r_:T2.bind(null,t),H_:A2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Tp(t)?Ip(t):t.Ra.set("Unknown")):(await t.ma.stop(),Sx(t))})),t.ma}function xi(t){return t.fa||(t.fa=function(n,r,i){const s=he(n);return s.sa(),new _2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:R2.bind(null,t),r_:j2.bind(null,t),ta:P2.bind(null,t),na:D2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ou(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(is,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new Ap(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cp(t,e){if(Cr("AsyncQueue",`${e}: ${t}`),po(t))return new K(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{static emptySet(e){return new $s(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.ga=new Ze(ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class io{constructor(e,n,r,i,s,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new io(e,n,$s.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class O2{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=he(n),s=i.queries;i.queries=Jy(),s.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new K(z.ABORTED,"Firestore shutting down"))}}function Jy(){return new as(t=>Kw(t),ku)}async function kp(t,e){const n=he(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new M2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=Cp(o,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Pp(n)}async function Rp(t,e){const n=he(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function L2(t,e){const n=he(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&Pp(n)}function V2(t,e,n){const r=he(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Pp(t){t.Ca.forEach(e=>{e.next()})}var Yh,Zy;(Zy=Yh||(Yh={})).Ma="default",Zy.Cache="cache";class Dp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.key=e}}class kx{constructor(e){this.key=e}}class z2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=Qw(e),this.tu=new $s(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Xy,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const g=i.get(m),R=Ru(this.query,y)?y:null,j=!!g&&this.mutatedKeys.has(g.key),M=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let F=!1;g&&R?g.data.isEqual(R.data)?j!==M&&(r.track({type:3,doc:R}),F=!0):this.su(g,R)||(r.track({type:2,doc:R}),F=!0,(u&&this.eu(R,u)>0||h&&this.eu(R,h)<0)&&(c=!0)):!g&&R?(r.track({type:0,doc:R}),F=!0):g&&!R&&(r.track({type:1,doc:g}),F=!0,(u||h)&&(c=!0)),F&&(R?(o=o.add(R),s=M?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,y)=>function(R,j){const M=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Rt:F})}};return M(R)-M(j)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new io(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new kx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Cx(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jp="SyncEngine";class F2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class U2{constructor(e){this.key=e,this.hu=!1}}class B2{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new as(c=>Kw(c),ku),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(ne.comparator),this.Au=new Map,this.Ru=new _p,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $2(t,e,n=!0){const r=Mx(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Rx(r,e,n,!0),i}async function W2(t,e){const n=Mx(t);await Rx(n,e,!0,!1)}async function Rx(t,e,n,r){const i=await u2(t.localStore,Zn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await q2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ex(t.remoteStore,i),c}async function q2(t,e,n,r,i){t.pu=(y,g,R)=>async function(M,F,k,S){let P=F.view.ru(k);P.Cs&&(P=await qy(M.localStore,F.query,!1).then(({documents:E})=>F.view.ru(E,P)));const V=S&&S.targetChanges.get(F.targetId),W=S&&S.targetMismatches.get(F.targetId)!=null,B=F.view.applyChanges(P,M.isPrimaryClient,V,W);return t0(M,F.targetId,B.au),B.snapshot}(t,y,g,R);const s=await qy(t.localStore,e,!0),o=new z2(e,s.Qs),c=o.ru(s.documents),u=Qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);t0(t,n,h.au);const m=new F2(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function H2(t,e,n){const r=he(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!ku(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bp(r.remoteStore,i.targetId),Xh(r,i.targetId)}).catch(fo)):(Xh(r,i.targetId),await Kh(r.localStore,i.targetId,!0))}async function G2(t,e){const n=he(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bp(n.remoteStore,r.targetId))}async function K2(t,e,n){const r=tR(t);try{const i=await function(o,c){const u=he(o),h=Ue.now(),m=c.reduce((R,j)=>R.add(j.key),xe());let y,g;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let j=kr(),M=xe();return u.Ns.getEntries(R,m).next(F=>{j=F,j.forEach((k,S)=>{S.isValidDocument()||(M=M.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,j)).next(F=>{y=F;const k=[];for(const S of c){const P=ck(S,y.get(S.key).overlayedDocument);P!=null&&k.push(new Ci(S.key,P,Fw(P.value.mapValue),Sn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,k,c)}).next(F=>{g=F;const k=F.applyToLocalDocumentSet(y,M);return u.documentOverlayCache.saveOverlays(R,F.batchId,k)})}).then(()=>({batchId:g.batchId,changes:Xw(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ze(we)),h=h.insert(c,u),o.Vu[o.currentUser.toKey()]=h}(r,i.batchId,n),await Xa(r,i.changes),await Ou(r.remoteStore)}catch(i){const s=Cp(i,"Failed to persist write");n.reject(s)}}async function Px(t,e){const n=he(t);try{const r=await a2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?De(o.hu,14607):i.removedDocuments.size>0&&(De(o.hu,42227),o.hu=!1))}),await Xa(n,r,e)}catch(r){await fo(r)}}function e0(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=he(o);u.onlineState=c;let h=!1;u.queries.forEach((m,y)=>{for(const g of y.Sa)g.va(c)&&(h=!0)}),h&&Pp(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Q2(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ze(ne.comparator);o=o.insert(s,Lt.newNoDocument(s,de.min()));const c=xe().add(s),u=new ju(de.min(),new Map,new Ze(we),o,c);await Px(r,u),r.du=r.du.remove(s),r.Au.delete(e),Np(r)}else await Kh(r.localStore,e,!1).then(()=>Xh(r,e,n)).catch(fo)}async function Y2(t,e){const n=he(t),r=e.batch.batchId;try{const i=await o2(n.localStore,e);jx(n,r,null),Dx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xa(n,i)}catch(i){await fo(i)}}async function X2(t,e,n){const r=he(t);try{const i=await function(o,c){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,c).next(y=>(De(y!==null,37113),m=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);jx(r,e,n),Dx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xa(r,i)}catch(i){await fo(i)}}function Dx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jx(t,e,n){const r=he(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Xh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Nx(t,r)})}function Nx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Np(t))}function t0(t,e,n){for(const r of n)r instanceof Cx?(t.Ru.addReference(r.key,e),J2(t,r)):r instanceof kx?(Y(jp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Nx(t,r.key)):le(19791,{wu:r})}function J2(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(jp,"New document in limbo: "+n),t.Eu.add(r),Np(t))}function Np(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ne(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new U2(n)),t.du=t.du.insert(n,r),Ex(t.remoteStore,new ei(Zn(Cu(n.path)),r,"TargetPurposeLimboResolution",Iu.ce))}}async function Xa(t,e,n){const r=he(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){i.push(h);const y=xp.As(u.targetId,h);s.push(y)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const m=he(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>U.forEach(h,g=>U.forEach(g.Es,R=>m.persistence.referenceDelegate.addReference(y,g.targetId,R)).next(()=>U.forEach(g.ds,R=>m.persistence.referenceDelegate.removeReference(y,g.targetId,R)))))}catch(y){if(!po(y))throw y;Y(Ep,"Failed to update sequence numbers: "+y)}for(const y of h){const g=y.targetId;if(!y.fromCache){const R=m.Ms.get(g),j=R.snapshotVersion,M=R.withLastLimboFreeSnapshotVersion(j);m.Ms=m.Ms.insert(g,M)}}}(r.localStore,s))}async function Z2(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){Y(jp,"User change. New user:",e.toKey());const r=await vx(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(c=>{c.forEach(u=>{u.reject(new K(z.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xa(n,r.Ls)}}function eR(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return xe().add(r.key);{let i=xe();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function Mx(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Px.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q2.bind(null,e),e.Pu.H_=L2.bind(null,e.eventManager),e.Pu.yu=V2.bind(null,e.eventManager),e}function tR(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X2.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return s2(this.persistence,new n2,e.initialUser,this.serializer)}Cu(e){return new yx(wp.mi,this.serializer)}Du(e){return new h2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class nR extends eu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){De(this.persistence.referenceDelegate instanceof Jc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Uk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new yx(r=>Jc.mi(r,n),this.serializer)}}class Jh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z2.bind(null,this.syncEngine),await N2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new O2}()}createDatastore(e){const n=Nu(e.databaseInfo.databaseId),r=function(s){return new y2(s)}(e.databaseInfo);return function(s,o,c,u){return new x2(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new b2(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>e0(this.syncEngine,n,0),function(){return Ky.v()?new Ky:new f2}())}createSyncEngine(e,n){return function(i,s,o,c,u,h,m){const y=new B2(i,s,o,c,u,h);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=he(i);Y(is,"RemoteStore shutting down."),s.Ea.add(5),await Ya(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Jh.provider={build:()=>new Jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="FirestoreClient";class rR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=bu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Y(Ei,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(Ei,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nd(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Ei,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function n0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iR(t);Y(Ei,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Yy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Yy(e.remoteStore,i)),t._onlineComponents=e}async function iR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Ei,"Using user provided OfflineComponentProvider");try{await Nd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;rs("Error using user provided cache. Falling back to memory cache: "+n),await Nd(t,new eu)}}else Y(Ei,"Using default OfflineComponentProvider"),await Nd(t,new nR(void 0));return t._offlineComponents}async function Ox(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Ei,"Using user provided OnlineComponentProvider"),await n0(t,t._uninitializedComponentsProvider._online)):(Y(Ei,"Using default OnlineComponentProvider"),await n0(t,new Jh))),t._onlineComponents}function sR(t){return Ox(t).then(e=>e.syncEngine)}async function tu(t){const e=await Ox(t),n=e.eventManager;return n.onListen=$2.bind(null,e.syncEngine),n.onUnlisten=H2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=W2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=G2.bind(null,e.syncEngine),n}function oR(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,h){const m=new Mp({next:g=>{m.Nu(),o.enqueueAndForget(()=>Rp(s,y));const R=g.docs.has(c);!R&&g.fromCache?h.reject(new K(z.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&g.fromCache&&u&&u.source==="server"?h.reject(new K(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),y=new Dp(Cu(c.path),m,{includeMetadataChanges:!0,qa:!0});return kp(s,y)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}function aR(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,h){const m=new Mp({next:g=>{m.Nu(),o.enqueueAndForget(()=>Rp(s,y)),g.fromCache&&u.source==="server"?h.reject(new K(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),y=new Dp(c,m,{includeMetadataChanges:!0,qa:!0});return kp(s,y)}(await tu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="firestore.googleapis.com",i0=!0;class s0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vx,this.ssl=i0}else this.host=e.host,this.ssl=e.ssl??i0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zk)throw new K(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Aw;switch(r.type){case"firstParty":return new vC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=r0.get(n);r&&(Y("ComponentProvider","Removing Datastore"),r0.delete(n),r.terminate())}(this),Promise.resolve()}}function zx(t,e,n,r={}){var h;t=Wt(t,Lu);const i=lo(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(P_(`https://${c}`),D_("Firestore",!0)),s.host!==Vx&&s.host!==c&&rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:c,ssl:i,emulatorOptions:r};if(!Ji(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=Mt.MOCK_USER;else{m=SS(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Mt(g)}t._authCredentials=new mC(new Tw(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nr(this.firestore,e,this._query)}}class Ye{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ga(n,Ye._jsonSchema))return new Ye(e,r||null,new ne(Fe.fromString(n.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:at("string",Ye._jsonSchemaVersion),referencePath:at("string")};class xr extends Nr{constructor(e,n,r){super(e,n,Cu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new ne(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function Rn(t,e,...n){if(t=ht(t),Cw("collection","path",e),t instanceof Lu){const r=Fe.fromString(e,...n);return vy(r),new xr(t,null,r)}{if(!(t instanceof Ye||t instanceof xr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return vy(r),new xr(t.firestore,null,r)}}function Yt(t,e,...n){if(t=ht(t),arguments.length===1&&(e=bu.newId()),Cw("doc","path",e),t instanceof Lu){const r=Fe.fromString(e,...n);return yy(r),new Ye(t,null,new ne(r))}{if(!(t instanceof Ye||t instanceof xr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return yy(r),new Ye(t.firestore,t instanceof xr?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="AsyncQueue";class a0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wx(this,"async_queue_retry"),this._c=()=>{const r=jd();r&&Y(o0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!po(e))throw e;Y(o0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Cr("INTERNAL UNHANDLED ERROR: ",l0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Ap.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&le(47125,{Pc:l0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function l0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class nr extends Lu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new a0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a0(e),this._firestoreClient=void 0,await e}}}function Fx(t,e){const n=typeof t=="object"?t:O_(),r=typeof t=="string"?t:Hc,i=Zf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ES("firestore");s&&zx(i,...s)}return i}function Ja(t){if(t._terminated)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lR(t),t._firestoreClient}function lR(t){var r,i,s;const e=t._freezeSettings(),n=function(c,u,h,m){return new NC(c,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Lx(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new rR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(wt.fromBase64String(e))}catch(n){throw new K(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cn(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ga(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:at("string",cn._jsonSchemaVersion),bytes:at("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ln._jsonSchemaVersion}}static fromJSON(e){if(Ga(e,Ln._jsonSchema))return new Ln(e.latitude,e.longitude)}}Ln._jsonSchemaVersion="firestore/geoPoint/1.0",Ln._jsonSchema={type:at("string",Ln._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ga(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vn(e.vectorValues);throw new K(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:at("string",Vn._jsonSchemaVersion),vectorValues:at("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=/^__.*__$/;class uR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ka(e,this.data,n,this.fieldTransforms)}}class Ux{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ci(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:t})}}class Op{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bx(this.Ac)&&cR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nu(e)}Cc(e,n,r,i=!1){return new Op({Ac:e,methodName:n,Dc:r,path:vt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zu(t){const e=t._freezeSettings(),n=Nu(t._databaseId);return new dR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $x(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Lp("Data must be an object, but it was:",o,r);const c=Wx(r,o);let u,h;if(s.merge)u=new dn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const y of s.mergeFields){const g=Zh(e,y,n);if(!o.contains(g))throw new K(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Hx(m,g)||m.push(g)}u=new dn(m),h=o.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=o.fieldTransforms;return new uR(new Jt(c),u,h)}class Fu extends Vu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}function hR(t,e,n,r){const i=t.Cc(1,e,n);Lp("Data must be an object, but it was:",i,r);const s=[],o=Jt.empty();Ai(r,(u,h)=>{const m=Vp(e,u,n);h=ht(h);const y=i.yc(m);if(h instanceof Fu)s.push(m);else{const g=el(h,y);g!=null&&(s.push(m),o.set(m,g))}});const c=new dn(s);return new Ux(o,c,i.fieldTransforms)}function fR(t,e,n,r,i,s){const o=t.Cc(1,e,n),c=[Zh(e,r,n)],u=[i];if(s.length%2!=0)throw new K(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)c.push(Zh(e,s[g])),u.push(s[g+1]);const h=[],m=Jt.empty();for(let g=c.length-1;g>=0;--g)if(!Hx(h,c[g])){const R=c[g];let j=u[g];j=ht(j);const M=o.yc(R);if(j instanceof Fu)h.push(R);else{const F=el(j,M);F!=null&&(h.push(R),m.set(R,F))}}const y=new dn(h);return new Ux(m,y,o.fieldTransforms)}function pR(t,e,n,r=!1){return el(n,t.Cc(r?4:3,e))}function el(t,e){if(qx(t=ht(t)))return Lp("Unsupported field value:",e,t),Wx(t,e);if(t instanceof Vu)return function(r,i){if(!Bx(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=el(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ue.fromDate(r);return{timestampValue:Xc(i.serializer,s)}}if(r instanceof Ue){const s=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xc(i.serializer,s)}}if(r instanceof Ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cn)return{bytesValue:cx(i.serializer,r._byteString)};if(r instanceof Ye){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vn)return function(o,c){return{mapValue:{fields:{[Vw]:{stringValue:zw},[Gc]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return pp(c.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Su(r)}`)}(t,e)}function Wx(t,e){const n={};return Dw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,(r,i)=>{const s=el(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Ln||t instanceof cn||t instanceof Ye||t instanceof Vu||t instanceof Vn)}function Lp(t,e,n){if(!qx(n)||!Rw(n)){const r=Su(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Zh(t,e,n){if((e=ht(e))instanceof Za)return e._internalPath;if(typeof e=="string")return Vp(t,e);throw nu("Field path arguments must be of type string or ",t,!1,void 0,n)}const mR=new RegExp("[~\\*/\\[\\]]");function Vp(t,e,n){if(e.search(mR)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Za(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new K(z.INVALID_ARGUMENT,c+t+u)}function Hx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Uu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gR extends Gx{data(){return super.data()}}function Uu(t,e){return typeof e=="string"?Vp(t,e):e instanceof Za?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class Fp extends zp{}function Br(t,e,...n){let r=[];e instanceof zp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof vo).length,c=s.filter(u=>u instanceof yo).length;if(o>1||o>0&&c>0)throw new K(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yo extends Fp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yo(e,n,r)}_apply(e){const n=this._parse(e);return Qx(e._query,n),new Nr(e.firestore,e.converter,Bh(e._query,n))}_parse(e){const n=zu(e.firestore);return function(s,o,c,u,h,m,y){let g;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new K(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){d0(y,m);const j=[];for(const M of y)j.push(u0(u,s,M));g={arrayValue:{values:j}}}else g=u0(u,s,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||d0(y,m),g=pR(c,o,y,m==="in"||m==="not-in");return ot.create(h,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dr(t,e,n){const r=e,i=Uu("where",t);return yo._create(i,r,n)}class vo extends zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vo(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)Qx(o,u),o=Bh(o,u)}(e._query,n),new Nr(e.firestore,e.converter,Bh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function yR(...t){return t.forEach(e=>vR("or",e)),vo._create("or",t)}class Bu extends Fp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Bu(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(s,o)}(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new mo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function dc(t,e="asc"){const n=e,r=Uu("orderBy",t);return Bu._create(r,n)}function u0(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new K(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&n.indexOf("/")!==-1)throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!ne.isDocumentKey(r))throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ty(t,new ne(r))}if(n instanceof Ye)return Ty(t,n._key);throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Su(n)}.`)}function d0(t,e){if(!Array.isArray(t)||t.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qx(t,e){const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function vR(t,e){if(!(e instanceof yo||e instanceof vo))throw new K(z.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Yx{convertValue(e,n="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ai(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Gc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>nt(o.doubleValue));return new Vn(n)}convertGeoPoint(e){return new Ln(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Au(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=vi(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);De(mx(r),9688,{name:e});const i=new eo(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||Cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class js{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fi extends Gx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Uu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",fi._jsonSchema={type:at("string",fi._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class ca extends fi{data(e={}){return super.data(e)}}class pi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new js(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ca(this._firestore,this._userDataWriter,r.key,r,new js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new ca(i._firestore,i._userDataWriter,c.doc.key,c.doc,new js(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new ca(i._firestore,i._userDataWriter,c.doc.key,c.doc,new js(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:_R(c.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _R(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){t=Wt(t,Ye);const e=Wt(t.firestore,nr);return oR(Ja(e),t._key).then(n=>Zx(e,t,n))}pi._jsonSchemaVersion="firestore/querySnapshot/1.0",pi._jsonSchema={type:at("string",pi._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class Up extends Yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function $r(t){t=Wt(t,Nr);const e=Wt(t.firestore,nr),n=Ja(e),r=new Up(e);return Kx(t._query),aR(n,t._query).then(i=>new pi(e,r,t,i))}function Jx(t,e,n){t=Wt(t,Ye);const r=Wt(t.firestore,nr),i=Xx(t.converter,e,n);return tl(r,[$x(zu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sn.none())])}function fr(t,e,n,...r){t=Wt(t,Ye);const i=Wt(t.firestore,nr),s=zu(i);let o;return o=typeof(e=ht(e))=="string"||e instanceof Za?fR(s,"updateDoc",t._key,e,n,r):hR(s,"updateDoc",t._key,e),tl(i,[o.toMutation(t._key,Sn.exists(!0))])}function tf(t){return tl(Wt(t.firestore,nr),[new mp(t._key,Sn.none())])}function Bp(t,e){const n=Wt(t.firestore,nr),r=Yt(t),i=Xx(t.converter,e);return tl(n,[$x(zu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function wR(t,...e){var u,h,m;t=ht(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||c0(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(c0(e[r])){const y=e[r];e[r]=(u=y.next)==null?void 0:u.bind(y),e[r+1]=(h=y.error)==null?void 0:h.bind(y),e[r+2]=(m=y.complete)==null?void 0:m.bind(y)}let s,o,c;if(t instanceof Ye)o=Wt(t.firestore,nr),c=Cu(t._key.path),s={next:y=>{e[r]&&e[r](Zx(o,t,y))},error:e[r+1],complete:e[r+2]};else{const y=Wt(t,Nr);o=Wt(y.firestore,nr),c=y._query;const g=new Up(o);s={next:R=>{e[r]&&e[r](new pi(o,g,y,R))},error:e[r+1],complete:e[r+2]},Kx(t._query)}return function(g,R,j,M){const F=new Mp(M),k=new Dp(R,F,j);return g.asyncQueue.enqueueAndForget(async()=>kp(await tu(g),k)),()=>{F.Nu(),g.asyncQueue.enqueueAndForget(async()=>Rp(await tu(g),k))}}(Ja(o),c,i,s)}function tl(t,e){return function(r,i){const s=new wr;return r.asyncQueue.enqueueAndForget(async()=>K2(await sR(r),i,s)),s.promise}(Ja(t),e)}function Zx(t,e,n){const r=n.docs.get(e._key),i=new Up(t);return new fi(t,i,e._key,r,new js(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ho=i})(co),Js(new Zi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new nr(new gC(r.getProvider("auth-internal")),new _C(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(h.options.projectId,m)}(o,i),o);return s={useFetchStreams:n,...s},c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),di(fy,py,e),di(fy,py,"esm2020")})();const Kt=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Yx,Bytes:cn,CollectionReference:xr,DocumentReference:Ye,DocumentSnapshot:fi,FieldPath:Za,FieldValue:Vu,Firestore:nr,FirestoreError:K,GeoPoint:Ln,Query:Nr,QueryCompositeFilterConstraint:vo,QueryConstraint:Fp,QueryDocumentSnapshot:ca,QueryFieldFilterConstraint:yo,QueryOrderByConstraint:Bu,QuerySnapshot:pi,SnapshotMetadata:js,Timestamp:Ue,VectorValue:Vn,_AutoId:bu,_ByteString:wt,_DatabaseId:eo,_DocumentKey:ne,_EmptyAuthCredentialsProvider:Aw,_FieldPath:vt,_cast:Wt,_logWarn:rs,_validateIsNotUsedTogether:kw,addDoc:Bp,collection:Rn,connectFirestoreEmulator:zx,deleteDoc:tf,doc:Yt,ensureFirestoreConfigured:Ja,executeWrite:tl,getDoc:ef,getDocs:$r,getFirestore:Fx,onSnapshot:wR,or:yR,orderBy:dc,query:Br,setDoc:Jx,updateDoc:fr,where:dr},Symbol.toStringTag,{value:"Module"}));var xR="firebase",ER="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(xR,ER,"app");const bR={apiKey:"AIzaSyDHDmKPSDZ6NqHdQw-gSXgkuk_MKa3CZbY",authDomain:"amorymiel-ddfaf.firebaseapp.com",projectId:"amorymiel-ddfaf",storageBucket:"amorymiel-ddfaf.firebasestorage.app",messagingSenderId:"86354568079",appId:"1:86354568079:web:7571369a1d391ab5d361fa",measurementId:"G-15KXQ1LM0B"},e1=M_(bR),Vo=fC(e1),ce=Fx(e1),SR={"Palo Santo":{elaboracion:"El Palo Santo es una madera sagrada que proviene del árbol Bursera graveolens, nativo de América del Sur. Se recolecta de forma sostenible de árboles que han muerto naturalmente, permitiendo que la madera se cure y desarrolle sus propiedades aromáticas y energéticas únicas durante el proceso de secado natural.",proposito:"El Palo Santo es reconocido por sus propiedades medicinales antirreumáticas, diuréticas, depurativas y antisépticas. Es ampliamente utilizado en prácticas de yoga, reiki y aromaterapia para limpiar y purificar ambientes, eliminar energías negativas y crear espacios de paz y armonía espiritual.",beneficios:"Purifica el aire y elimina bacterias, reduce el estrés y la ansiedad, facilita la meditación y la concentración, mejora la calidad del sueño, equilibra las emociones, fortalece el sistema inmunológico, y crea un ambiente propicio para la sanación espiritual y el bienestar general.",modoUso:"Enciende el Palo Santo con una vela, inclínalo en un ángulo de 45 grados y deja que se consuma durante 1-2 minutos. Apaga la llama y pasa el humo sagrado sobre tu cuerpo y por los espacios que desees purificar. El humo debe circular libremente para limpiar las energías negativas.",ingredientes:"100% Palo Santo (Bursera graveolens) de origen natural, sin aditivos químicos ni conservantes artificiales.",duracion:"Cada barra de Palo Santo puede durar entre 8-12 usos, dependiendo del tamaño y la frecuencia de uso.",cuidados:"Conservar en un lugar seco y fresco, alejado de la humedad. Mantener en su empaque original para preservar sus propiedades aromáticas."},"Velas De Miel":{elaboracion:"Nuestras velas de miel son elaboradas artesanalmente con cera de abeja 100% pura, recolectada de colmenas locales y sostenibles. El proceso incluye la filtración natural de la cera, el moldeado a mano y la consagración ritual para potenciar sus propiedades energéticas de abundancia y prosperidad.",proposito:"Diseñadas específicamente para rituales de abundancia, prosperidad y purificación energética. La cera de abeja natural emite iones negativos que purifican el aire y crean un ambiente propicio para la manifestación de deseos y la atracción de energías positivas.",beneficios:"Purifica el aire de toxinas y alérgenos, mejora la calidad del aire interior, emite iones negativos beneficiosos, crea un ambiente relajante y meditativo, potencia rituales de abundancia, y su aroma natural es relajante y terapéutico.",modoUso:"Enciende la vela en un lugar seguro y estable. Deja que se consuma completamente para activar sus propiedades energéticas. Ideal para usar durante meditaciones, rituales de abundancia o simplemente para crear un ambiente purificado en tu hogar.",ingredientes:"Cera de abeja 100% pura, mecha de algodón natural, sin parafina ni aditivos químicos.",duracion:"Tiempo de combustión: 8-12 horas, dependiendo del tamaño de la vela.",cuidados:"Mantener alejada de corrientes de aire, no mover mientras está encendida, y cortar la mecha a 1cm antes de cada uso para una combustión óptima."},"Miel Consagrada":{elaboracion:"Nuestra miel consagrada es recolectada de colmenas locales y purificadas, sometida a rituales sagrados de consagración bajo la luna llena. El proceso incluye la purificación energética, la bendición ritual y el almacenamiento en recipientes de cristal para preservar su pureza y propiedades energéticas.",proposito:"Especialmente consagrada para rituales de abundancia, prosperidad y manifestación. Su pureza energética la hace ideal para endulzar decretos, rituales de atracción y ceremonias de abundancia, potenciando la ley de atracción y la manifestación de deseos.",beneficios:"Potencia rituales de abundancia y prosperidad, endulza decretos y afirmaciones, atrae energías positivas y oportunidades, fortalece la conexión espiritual, y su pureza energética facilita la manifestación de deseos.",modoUso:"Consumir una cucharadita en ayunas con intención de abundancia, usar para endulzar decretos escritos, agregar a rituales de manifestación, o simplemente consumir con gratitud para atraer prosperidad.",ingredientes:"Miel de abeja 100% pura, sin pasteurizar, sin aditivos químicos ni conservantes artificiales.",duracion:"Conservar en refrigeración hasta 2 años, mantener en recipiente de cristal para preservar sus propiedades energéticas.",cuidados:"Mantener en lugar fresco y seco, alejado de la luz directa del sol, y usar utensilios de madera o cristal para preservar su pureza energética."},"Aceite Abrecaminos":{elaboracion:"Es un producto artesanal, elaborado con extracción de esencias naturales de las plantas. Cada botella es cuidadosamente preparada con ingredientes seleccionados para potenciar sus propiedades energéticas y espirituales.",proposito:"El aceite Abrecaminos, como su nombre lo indica, es un excelente producto para realizar nuestras afirmaciones y decretos, ayuda a suavizar las situaciones negativas y abrirte paso a lo positivo. Diseñado para superar obstáculos y atraer nuevas oportunidades.",beneficios:"Facilita la manifestación de deseos, ayuda a superar obstáculos y bloqueos, atrae nuevas oportunidades y caminos, potencia las afirmaciones y decretos, suaviza situaciones negativas, y abre puertas hacia experiencias positivas.",modoUso:"Con ayuda del gotero, aplica de 2 a 3 gotitas del Aceite Abrecaminos en tus manos, frótalo y mientras lo haces puedes repetir la oración o decreto de tu gusto. Úsalo en rituales de manifestación y meditación.",ingredientes:"Aceite base de oliva, esencias naturales de plantas sagradas, extractos botánicos seleccionados, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado para preservar sus propiedades.",cuidados:"Mantener alejado de la luz directa del sol, no exponer a temperaturas extremas, y usar con respeto y intención positiva."},"Aceite para Ungir":{elaboracion:"Es un producto artesanal, de grado espiritual ya que la palabra Ungido en hebreo significa Mesías. La base es el aceite de Oliva, Mirra, Canela entre otras plantas sagradas. Cada botella es consagrada con rituales especiales para potenciar sus propiedades espirituales.",proposito:"Hoy en día, se están volviendo a usar estos aceites de unción en los eventos de adoración y espirituales, para curar enfermedades y para santificar una muerte. Diseñado para momentos de profunda conexión espiritual y sanación.",beneficios:"Proporciona paz y calma en momentos difíciles, facilita la conexión espiritual profunda, ayuda en procesos de sanación emocional y física, potencia rituales de adoración, y brinda consuelo en momentos de transición.",modoUso:"La persona que aplique el Aceite debe encontrarse en un momento muy espiritual, ya que este requiere mucho respeto. Puesto que es un aceite elaborado con el fin de llevar paz y calma a quien lo necesita en momentos muy difíciles.",ingredientes:"Aceite de oliva virgen extra, mirra, canela, plantas sagradas seleccionadas, esencias consagradas, sin aditivos químicos.",duracion:"Conservar en lugar fresco y seco hasta 3 años. Mantener en recipiente de cristal para preservar su pureza espiritual.",cuidados:"Usar con reverencia y respeto, mantener en lugar sagrado, y aplicar solo en momentos de profunda intención espiritual."},"Shampoo Extracto de Miel":{elaboracion:"Es un Shampoo artesanal, elaborado con extracto natural de Miel para aportar brillo, suavidad y densidad a tu cabello. Cada botella es cuidadosamente preparada con ingredientes naturales seleccionados para el cuidado capilar.",proposito:"El Shampoo artesanal es un excelente auxiliar para el cuidado del cabello, aporta suavidad y brillo natural, al estar elaborado con ingredientes naturales asegura que tu cabello no sufra estrés a causa de los químicos.",beneficios:"Proporciona brillo natural y fortalece desde la raíz, suaviza y nutre el cabello profundamente, evita el estrés capilar causado por químicos, aporta densidad y volumen natural, y mantiene el cabello saludable con ingredientes naturales.",modoUso:"Unta el Shampoo en tus manos, y luego masajea tu cuero cabelludo con las yemas de tus dedos. Hazlo de forma suave, pero sin dejar ningún rincón de tu cuero cabelludo, y continúa con los movimientos hasta que consigas formar espuma.",ingredientes:"Extracto natural de miel, cera de abeja, glicerina, aceites naturales, agentes limpiadores suaves, libre de sulfatos y parabenos.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado para preservar sus propiedades.",cuidados:"Evitar contacto con los ojos, enjuagar completamente después del uso, y mantener alejado de la luz directa del sol."},"Loción Ellas y Ellos":{elaboracion:"Loción artesanal elaborada con ingredientes naturales seleccionados para el cuidado de la piel. Cada botella es preparada con amor y dedicación para brindar la mejor experiencia de cuidado personal.",proposito:"Diseñada para hidratar y nutrir la piel de manera natural, proporcionando suavidad y frescura duradera. Ideal para el uso diario en el cuidado personal.",beneficios:"Hidrata profundamente la piel, proporciona suavidad natural, refresca y revitaliza, nutre con ingredientes naturales, y mantiene la piel saludable y radiante.",modoUso:"Aplicar sobre la piel limpia y seca, masajear suavemente hasta su completa absorción. Usar diariamente para mejores resultados.",ingredientes:"Ingredientes naturales, extractos botánicos, aceites esenciales, glicerina natural, sin parabenos ni químicos agresivos.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Evitar contacto con los ojos, mantener alejado de la luz directa del sol, y usar solo para uso externo."},"Agua Florida":{elaboracion:"Agua de colonia artesanal elaborada con flores naturales y esencias puras. Cada botella es preparada con técnicas tradicionales para capturar la esencia de las flores más hermosas.",proposito:"Diseñada para perfumar y refrescar de manera natural, proporcionando una fragancia floral delicada y duradera que eleva el espíritu.",beneficios:"Proporciona fragancia floral natural, refresca y revitaliza, eleva el ánimo y la energía, hidrata ligeramente la piel, y crea una sensación de bienestar.",modoUso:"Aplicar sobre la piel limpia, especialmente en puntos de pulso como muñecas y cuello. Usar con moderación para una fragancia sutil y elegante.",ingredientes:"Agua destilada, esencias florales naturales, alcohol de grado cosmético, extractos de flores, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 3 años. Mantener el frasco bien cerrado para preservar la fragancia.",cuidados:"Evitar contacto con los ojos, mantener alejado de la luz directa del sol, y aplicar sobre piel sana."},"Exfoliante Abre Caminos":{elaboracion:"Exfoliante corporal artesanal elaborado con ingredientes naturales y cristales de sal marina. Cada envase es preparado con intención positiva para abrir caminos y eliminar obstáculos energéticos.",proposito:"Diseñado para exfoliar la piel mientras limpia energéticamente, ayudando a abrir caminos y eliminar bloqueos que impiden el flujo de energía positiva.",beneficios:"Exfolia suavemente la piel, elimina células muertas, limpia energéticamente, abre caminos y oportunidades, mejora la circulación, y deja la piel suave y renovada.",modoUso:"Aplicar sobre la piel húmeda, masajear suavemente en movimientos circulares, enfocándose en áreas de bloqueo energético, y enjuagar completamente.",ingredientes:"Sal marina natural, aceites esenciales, cristales energéticos, extractos botánicos, glicerina natural, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Evitar contacto con heridas abiertas, no usar en el rostro, y enjuagar completamente después del uso."},Sahumerios:{elaboracion:"Rollitos elaborados de salvia blanca deshidratada combinada con distintas hierbas. Éstas hierbas al quemarse desprenden su aroma que nos ayuda a bajar niveles de tensión, estrés, fatiga etc.",proposito:"En muchas ocasiones nos cargamos de estrés o de energías densas por cuestiones económicas, emocionales o físicas. En la terapia con aromas se tratan esos síntomas o malestares. Algunas hierbas como la Salvia, Romero, Lavanda, aparte de su aroma nos aportan esa energía positiva que nos permite equilibrar nuevamente nuestro espacio mental, físico y espiritual.",beneficios:"Purifica y limpia energéticamente, reduce niveles de tensión y estrés, equilibra el espacio mental y espiritual, aporta energía positiva, ayuda a relajar y calmar, y mejora el ambiente energético del hogar.",modoUso:"Con una velita encendida acercamos el rollito de sahumerio a la llama, esperamos hasta que se encienda bien la base del rollito. Con el humo vamos a pasar por nuestro cuerpo y de otras personas, en objetos y si se requiere por toda la casa o espacio a limpiar.",ingredientes:"Salvia blanca deshidratada, romero, lavanda, hierbas sagradas seleccionadas, sin aditivos químicos.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener en recipiente hermético.",cuidados:"Usar en espacios ventilados, mantener alejado de niños, y apagar completamente después del uso."},"Sal Negra":{elaboracion:"Es el resultado de la quema de hierbas sagradas mezclada con sal de grano, es una preparación para rituales esotéricos que ayuda a contrarrestar hechizos y maldiciones.",proposito:"Este poderoso ingrediente es utilizado en limpiezas energéticas, purificaciones, atrae la buena suerte, aleja los malos espíritus y en muchos casos se utiliza para exorcismos.",beneficios:"Protege contra energías negativas, atrae la buena suerte, aleja malos espíritus, purifica espacios energéticamente, fortalece rituales de protección, y equilibra el campo áurico.",modoUso:"Al iniciar tus rituales protege tu espacio y tu campo áurico con un círculo de Sal negra. Lava tus manos con una pizca de sal negra para retirar energía negativa.",ingredientes:"Sal de grano natural, hierbas sagradas quemadas, cenizas de plantas protectoras, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco indefinidamente. Mantener en recipiente de cristal oscuro.",cuidados:"Usar con respeto y intención positiva, mantener alejado de la luz directa del sol, y no ingerir."},"Polvo de Oro":{elaboracion:"Polvo de oro artesanal elaborado con ingredientes naturales y minerales seleccionados. Cada envase es preparado con intención positiva para atraer abundancia y prosperidad.",proposito:"Diseñado para rituales de abundancia, prosperidad y atracción de riqueza. El polvo de oro potencia las intenciones de abundancia y atrae oportunidades de crecimiento económico.",beneficios:"Atrae abundancia y prosperidad, potencia rituales de riqueza, mejora las oportunidades económicas, fortalece la confianza financiera, atrae suerte en negocios, y equilibra la energía de abundancia.",modoUso:"Aplicar en rituales de abundancia, espolvorear en espacios de trabajo, agregar a ofrendas de prosperidad, o usar en meditaciones de abundancia.",ingredientes:"Minerales naturales, polvo de oro cosmético, hierbas de abundancia, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar con intención positiva, mantener alejado de la humedad, y no ingerir."},"Baño Energético Abre Caminos":{elaboracion:"Baño energético artesanal elaborado con hierbas sagradas y minerales seleccionados. Cada envase es preparado con intención positiva para abrir caminos y eliminar obstáculos.",proposito:"Diseñado para limpieza energética profunda, apertura de caminos y eliminación de bloqueos. El baño energético limpia el aura y prepara el cuerpo para nuevas oportunidades.",beneficios:"Limpia energéticamente el aura, abre caminos y oportunidades, elimina bloqueos energéticos, purifica el cuerpo espiritual, atrae nuevas posibilidades, y equilibra la energía personal.",modoUso:"Agregar al agua del baño, sumergirse durante 20-30 minutos, visualizar la apertura de caminos, y enjuagar con agua limpia al finalizar.",ingredientes:"Hierbas sagradas, minerales energéticos, sal marina, aceites esenciales, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar en baño completo, evitar contacto con los ojos, y enjuagar completamente después del uso."},"Baño Energético Amor Propio":{elaboracion:"Baño energético artesanal elaborado con hierbas de amor y minerales seleccionados. Cada envase es preparado con intención positiva para fortalecer el amor propio y la autoestima.",proposito:"Diseñado para fortalecer el amor propio, mejorar la autoestima y conectar con la energía del amor. El baño energético nutre el corazón y fortalece la relación con uno mismo.",beneficios:"Fortalece el amor propio, mejora la autoestima, nutre el corazón emocional, atrae amor hacia uno mismo, equilibra la energía del chakra del corazón, y fortalece la confianza personal.",modoUso:"Agregar al agua del baño, sumergirse durante 20-30 minutos, meditar sobre el amor propio, y enjuagar con agua limpia al finalizar.",ingredientes:"Hierbas de amor, minerales del corazón, aceites esenciales de rosa, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar en baño completo, evitar contacto con los ojos, y enjuagar completamente después del uso."},"Baño Energético Amargo":{elaboracion:"Baño energético artesanal elaborado con hierbas amargas y minerales seleccionados. Cada envase es preparado con intención positiva para limpieza profunda y eliminación de energías negativas.",proposito:"Diseñado para limpieza energética profunda, eliminación de energías negativas y purificación del aura. El baño amargo limpia y purifica todos los niveles energéticos.",beneficios:"Elimina energías negativas, limpia profundamente el aura, purifica el campo energético, aleja malas energías, fortalece la protección personal, y equilibra la energía espiritual.",modoUso:"Agregar al agua del baño, sumergirse durante 20-30 minutos, visualizar la limpieza energética, y enjuagar con agua limpia al finalizar.",ingredientes:"Hierbas amargas, minerales purificadores, sal marina, aceites esenciales, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar en baño completo, evitar contacto con los ojos, y enjuagar completamente después del uso."},"Agua de Rosas":{elaboracion:"Agua de rosas artesanal elaborada con pétalos de rosa de la más alta calidad. Cada botella es preparada mediante destilación tradicional para preservar todas las propiedades naturales de la rosa.",proposito:"Diseñada para suavizar, hidratar y nutrir la piel de manera natural. El agua de rosas contiene vitaminas B, C y E que ayudan a combatir la oxidación y mantener la piel saludable.",beneficios:"Suaviza e hidrata la piel profundamente, combate la oxidación celular, es alcohol-free para pieles sensibles, cierra los poros naturalmente, limpia profundamente, elimina el exceso de grasa, y proporciona un aroma relajante.",modoUso:"Aplicar con un suave masaje después de la higiene facial, dejar actuar unos minutos, y continuar con otros productos de cuidado. Usar mañana y noche para mejores resultados.",ingredientes:"Pétalos de rosa destilados, agua purificada, vitaminas B, C y E, sin alcohol, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Evitar contacto con los ojos, mantener alejado de la luz directa del sol, y usar solo para uso externo."},"Shampoo Extracto de Romero":{elaboracion:"Shampoo artesanal elaborado con extracto natural de Romero para fortalecer el cabello. Cada botella es cuidadosamente preparada con ingredientes naturales seleccionados para el cuidado capilar.",proposito:"El Shampoo artesanal de Romero es un excelente auxiliar para el cuidado del cabello, ayuda a fortalecerlo desde la raíz, estimula el crecimiento y previene la caída. Al estar elaborado con ingredientes naturales, asegura que tu cabello no sufra estrés a causa de los químicos.",beneficios:"Fortalece el cabello desde la raíz, estimula el crecimiento capilar, previene la caída del cabello, aporta brillo natural y suavidad, nutre profundamente el cuero cabelludo, y protege el cabello de químicos agresivos.",modoUso:"Unta el Shampoo en tus manos, y luego masajea tu cuero cabelludo con las yemas de tus dedos. Hazlo de forma suave, pero sin dejar ningún rincón de tu cabeza sin masajear. Enjuaga con abundante agua.",ingredientes:"Extracto puro de romero, aceite de coco, glicerina vegetal, agua purificada, tensioactivos naturales derivados de plantas, sin sulfatos ni parabenos.",duracion:"Conservar en lugar fresco y seco hasta 1 año. Mantener el frasco bien cerrado para preservar sus propiedades.",cuidados:"Evitar el contacto con los ojos. En caso de irritación, suspender su uso. Mantener fuera del alcance de los niños."},"Loción Atrayente":{elaboracion:"Es un producto artesanal, elaborado con extracción de esencias naturales de las siete plantas de la Abundancia. Las plantas que más resaltan su aroma tan único son: canela, vainilla, clavo de olor, anís entre otras.",proposito:"La Loción Atrayente, como su nombre lo indica, atrae. ¿Qué atrae?... Todo lo bueno y positivo para tu vida; Amor, Salud, Dinero, y todo lo que más anhelas.",beneficios:"Atrae amor y relaciones positivas, atrae salud y bienestar, atrae dinero y prosperidad, mejora el ambiente energético, fortalece la confianza personal, y equilibra las energías del hogar.",modoUso:"Úsalo como tu loción de diario para atraer todo lo positivo. Lo puedes utilizar igual como ambientador en tu negocio para atraer a más clientes.",ingredientes:"Esencias naturales de canela, vainilla, clavo de olor, anís, plantas de abundancia, aceites esenciales, base hidratante natural, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Usar con intención positiva, mantener alejado de la luz directa del sol, y aplicar sobre piel sana."},"Brisa Áurica Bendición del Dinero":{elaboracion:"Es un producto artesanal, elaborado con extracción de esencias naturales de plantas energéticas. Las plantas que más resaltan su aroma son: Vainilla, Laurel, Canela, semillas de abundancia entre otras, elaborado para limpiar la energía del dinero.",proposito:"La Brisa Aurica es una herramienta de limpieza energética para el bienestar emocional y la protección de las malas vibras. Diseñada específicamente para limpiar y bendecir la energía del dinero y la prosperidad.",beneficios:"Limpia la energía del dinero, atrae prosperidad y abundancia, elimina energías negativas de espacios financieros, protege contra malas vibras, fortalece la confianza en asuntos económicos, y equilibra la energía de abundancia.",modoUso:"Agitar antes de usar. Aplicar en cajas registradoras, billeteras, dinero en efectivo, o espacios de trabajo para eliminar energías negativas y atraer prosperidad.",ingredientes:"Esencias naturales de vainilla, laurel, canela, semillas de abundancia, plantas energéticas, alcohol de grado cosmético, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Usar con intención positiva, mantener alejado de la luz directa del sol, y no ingerir."},"Mascarilla Capilar":{elaboracion:"Es una mascarilla capilar natural libre de sales, sulfatos y parabenos. Elaborada artesanalmente con ingredientes naturales seleccionados para proporcionar hidratación profunda y nutrición intensa al cabello.",proposito:"La mascarilla capilar aporta a tu cabello una hidratación profunda haciendo lucir un brillo intenso y muy sedoso. Diseñada para restaurar la salud capilar y proporcionar nutrición intensa.",beneficios:"Proporciona hidratación profunda, aporta brillo intenso y sedoso, nutre el cabello desde la raíz, fortalece las fibras capilares, reduce el frizz y las puntas abiertas, y mejora la textura general del cabello.",modoUso:"Al contrario de un acondicionador que se usa diario, la mascarilla capilar la debemos usar una vez por semana. Aplícala en todo tu cabello y espera un mínimo de 10 minutos antes de enjuagar.",ingredientes:"Aceites naturales hidratantes, extractos botánicos, proteínas capilares, vitaminas E y B5, sin sulfatos, parabenos ni sales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Evitar contacto con los ojos, enjuagar completamente después del uso, y mantener alejado de la luz directa del sol."},"Feromonas Damas y Caballeros":{elaboracion:"Las feromonas son sustancias químicas secretadas por el cuerpo y algunas plantas, principalmente producidas detrás de las orejas, cuello, pecho y axilas. La principal fuente vegetal es el Sándalo y estas feromonas, combinadas con otras esencias naturales, activan la atracción emocional.",proposito:"Las feromonas son una buena manera de entender por qué alguien puede ser sexualmente atractivo sin una razón clara. Ayudan a determinar la compatibilidad sexual, que es crucial para la atracción y el deseo.",beneficios:"Aumenta la atracción sexual natural, mejora la compatibilidad de pareja, fortalece la conexión emocional, potencia la confianza personal, atrae energías positivas en relaciones, y equilibra el campo energético personal.",modoUso:"Úsalo en la intimidad, aplicando detrás de las orejas, cuello, pecho y puntos de pulso. También puedes agregarlo a tu loción de diario para potenciar su efecto.",ingredientes:"Esencias naturales de sándalo, feromonas sintéticas de grado cosmético, aceites portadores naturales, extractos botánicos, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Usar con moderación, evitar contacto con los ojos, y aplicar solo en zonas recomendadas del cuerpo."}},IR=({user:t,onClose:e})=>{const[n,r]=ee.useState("overview"),[i,s]=ee.useState([]),[o,c]=ee.useState([]),[u,h]=ee.useState([]),[m,y]=ee.useState([]),[g,R]=ee.useState(!0),[j,M]=ee.useState({totalUsers:0,totalOrders:0,totalRevenue:0,activeUsers:0}),[F,k]=ee.useState(!1),[S,P]=ee.useState(!1),[V,W]=ee.useState(null),[B,E]=ee.useState({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,minStock:5,maxStock:100,activo:!0,imagen:""}),[v,T]=ee.useState(null),[A,D]=ee.useState(!1),I={A:{miel:"#D4A574",rosa:"#E8B4B8",verde:"#A8C09A",azul:"#B8D4E3"},B:{miel:"#C9A96E",rosa:"#E2A8AC",verde:"#9BB88A",azul:"#A8C8D8"}};ee.useEffect(()=>{t&&Oe()},[t]),ee.useEffect(()=>{if(t){const w=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),Oe()},3e4);return()=>clearInterval(w)}},[t]);const C=async(w,L)=>{try{const G=Br(Rn(ce,"orders"),dr("id","==",w)),oe=await $r(G);if(oe.empty)throw new Error("Order not found");const fe=oe.docs[0],lt=fe.data(),gn={status:L,timestamp:new Date,note:ve(L),updatedBy:"admin"},on=[...lt.statusHistory||[],gn];await fr(Yt(ce,"orders",fe.id),{status:L,updatedAt:new Date,statusHistory:on}),console.log(`Order ${w} status updated to ${L}`),Oe(),alert(`✅ Estado de la orden actualizado a: ${kt(L)}`)}catch(G){console.error("Error updating order status:",G),alert(`❌ Error actualizando estado: ${G.message}`)}},ve=w=>{switch(w){case"processing":return"Orden recibida y siendo preparada";case"shipped":return"Orden enviada con número de rastreo";case"delivered":return"Orden entregada exitosamente";case"cancelled":return"Orden cancelada";default:return"Estado actualizado"}},kt=w=>{switch(w){case"processing":return"En Proceso";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";case"completed":return"Completado";default:return w}},Mr=async()=>{try{const{collection:w,addDoc:L}=await It(async()=>{const{collection:oe,addDoc:fe}=await Promise.resolve().then(()=>Kt);return{collection:oe,addDoc:fe}},void 0),G={id:`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:"test-user-123",customerName:"Test Customer",customerEmail:"test@example.com",items:[{id:"test-product-1",nombre:"Palo Santo",precio:120,quantity:2},{id:"test-product-2",nombre:"Velas De Miel",precio:180,quantity:1}],total:420,shippingAddress:{fullName:"Test Customer",address:"123 Test Street",city:"Cancún",state:"Quintana Roo",zipCode:"77500",phone:"9981234567"},createdAt:new Date,updatedAt:new Date,status:"processing",trackingNumber:`AMY-${Date.now().toString().slice(-6)}-${Math.random().toString(36).substr(2,3).toUpperCase()}`,statusHistory:[{status:"processing",timestamp:new Date,note:"Orden de prueba creada",updatedBy:"admin"}]};await L(w(ce,"orders"),G),alert(`✅ Orden de prueba creada!

ID: ${G.id}
Tracking: ${G.trackingNumber}

Ahora puedes probar el sistema de rastreo.`),Oe()}catch(w){console.error("Error creating test order:",w),alert("❌ Error creando orden de prueba: "+w.message)}},Oe=async()=>{R(!0);try{console.log("Loading users from Firestore..."),console.log("Current user:",t),console.log("User email:",t==null?void 0:t.email),console.log("Is admin?",(t==null?void 0:t.email)==="admin@amorymiel.com");let w;try{const Z=Br(Rn(ce,"users"),dc("createdAt","desc"));w=await $r(Z)}catch(Z){console.log("OrderBy failed, trying without orderBy:",Z.message);const Le=Br(Rn(ce,"users"));w=await $r(Le)}console.log("Users snapshot:",w),console.log("Number of users found:",w.docs.length),console.log("Users snapshot empty?",w.empty);let L=[];w.empty?(console.log("No users found in Firestore"),L=[]):(L=w.docs.map(Z=>(console.log("User doc:",Z.id,Z.data()),{id:Z.id,...Z.data()})),console.log("Processed users data:",L)),s(L);let G;try{const Z=Br(Rn(ce,"orders"),dc("createdAt","desc"));G=await $r(Z)}catch(Z){console.log("Orders orderBy failed, trying without orderBy:",Z.message);const Le=Br(Rn(ce,"orders"));G=await $r(Le)}const oe=G.docs.map(Z=>({id:Z.id,...Z.data()}));c(oe);const fe=Br(Rn(ce,"products")),gn=(await $r(fe)).docs.map(Z=>({id:Z.id,...Z.data()})),on=gn.reduce((Z,Le)=>(Z.find(pt=>pt.nombre&&Le.nombre&&pt.nombre.toLowerCase().trim()===Le.nombre.toLowerCase().trim())?console.log(`Admin Dashboard: Removing duplicate: "${Le.nombre}" (ID: ${Le.id})`):Z.push(Le),Z),[]);console.log(`Admin Dashboard: Removed ${gn.length-on.length} duplicate products`);const Ft=on.map(Z=>({...Z,...SR[Z.nombre]||{}}));h(Ft),console.log("Loading cart items..."),console.log("Current user:",t),console.log("User email:",t==null?void 0:t.email),console.log("Is admin?",(t==null?void 0:t.email)==="admin@amorymiel.com");try{const Z=Br(Rn(ce,"cart_items"),dc("addedAt","desc"));console.log("Executing cart items query...");const Le=await $r(Z);console.log("Cart items query executed successfully"),console.log("Cart items snapshot:",Le),console.log("Cart items docs length:",Le.docs.length);const Ut=Le.docs.map(pt=>{const vn=pt.data();return console.log("Processing cart item:",pt.id,vn),{id:pt.id,...vn}});if(y(Ut),console.log("Cart items loaded successfully:",Ut.length),console.log("Cart items data:",Ut),Ut.length===0){console.log("No cart items found. Checking if collection exists...");try{const{addDoc:pt}=await It(async()=>{const{addDoc:Lr}=await Promise.resolve().then(()=>Kt);return{addDoc:Lr}},void 0),vn=await pt(Rn(ce,"cart_items"),{test:!0,timestamp:new Date,userId:"test-admin",status:"test"});console.log("Test document created successfully:",vn.id);const{deleteDoc:cs,doc:ki}=await It(async()=>{const{deleteDoc:Lr,doc:us}=await Promise.resolve().then(()=>Kt);return{deleteDoc:Lr,doc:us}},void 0);await cs(ki(ce,"cart_items",vn.id)),console.log("Test document deleted")}catch(pt){console.error("Error creating test document:",pt),console.error("This suggests a permission issue with cart_items collection")}}}catch(Z){console.error("Error loading cart items:",Z),console.error("Error details:",{code:Z.code,message:Z.message,stack:Z.stack})}const $n=m.filter(Z=>Z.status==="in_cart"),rr=m.filter(Z=>Z.status==="payment_initiated"),An=m.filter(Z=>{const Le=(new Date-new Date(Z.addedAt))/36e5;return Z.status==="in_cart"&&Le>24||Z.status==="abandoned"}),ke=m.filter(Z=>Z.status==="purchased");console.log("In cart items:",$n.length),console.log("Payment initiated items:",rr.length),console.log("Abandoned items (24h+ or payment abandoned):",An.length),console.log("Purchased items:",ke.length),console.log("Calculating stats..."),console.log("Users data length:",L.length),console.log("Orders data length:",oe.length);const yn=oe.filter(Z=>Z.status==="completed").reduce((Z,Le)=>Z+(Le.total||0),0),Ke=L.filter(Z=>{const Le=Z.lastLogin?new Date(Z.lastLogin):new Date(0),Ut=new Date;return Ut.setDate(Ut.getDate()-30),Le>Ut}).length,ze=oe.filter(Z=>Z.status==="completed"),ir={totalUsers:L.length,totalOrders:ze.length,totalRevenue:yn,activeUsers:Ke};console.log("New stats calculated:",ir),M(ir)}catch(w){console.error("Error loading dashboard data:",w)}finally{R(!1)}},Q=async w=>{if(window.confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{await tf(Yt(ce,"users",w)),Oe()}catch(L){console.error("Error deleting user:",L)}},se=async w=>{w.preventDefault(),k(!0);try{const L={...B,createdAt:new Date,updatedAt:new Date};if(L.imagen){const G=Math.round(L.imagen.length/1024);if(console.log(`Image size: ${G}KB (${Math.round(G/1024)}MB)`),L.imagen.length>5e6){alert(`La imagen es demasiado grande (${Math.round(G/1024)}MB). Por favor, usa una imagen más pequeña.`),k(!1);return}}await Bp(Rn(ce,"products"),L),E({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,activo:!0,imagen:"",elaboracion:"",proposito:"",beneficios:"",modoUso:"",ingredientes:"",duracion:"",cuidados:""}),Oe(),r("products"),alert("Producto agregado exitosamente!")}catch(L){console.error("Error adding product:",L),console.error("Error details:",L.message,L.code);let G="Error al agregar el producto. Inténtalo de nuevo.";L.code==="permission-denied"?G="No tienes permisos para agregar productos.":L.message.includes("image")&&(G="Error con la imagen. Intenta con una imagen más pequeña."),alert(G)}finally{k(!1)}},ue=async w=>{if(window.confirm("¿Estás seguro de que quieres eliminar este producto?"))try{await tf(Yt(ce,"products",w)),Oe(),alert("Producto eliminado exitosamente!")}catch(L){console.error("Error deleting product:",L),alert("Error al eliminar el producto. Inténtalo de nuevo.")}},Te=async w=>{try{alert(`📧 Recordatorio enviado a ${w.customerEmail}

Producto: ${w.productName}
Precio: $${w.productPrice}

El cliente recibirá un email recordatorio para completar su compra.`),await fr(Yt(ce,"cart_items",w.id),{status:"follow_up_sent",followUpSentAt:new Date}),Oe()}catch(L){console.error("Error sending follow-up email:",L),alert("Error al enviar el recordatorio por email")}},Ee=async()=>{try{const w=m.filter(oe=>{const fe=(new Date-new Date(oe.addedAt))/36e5;return oe.status==="in_cart"&&fe>24});if(w.length===0){alert("No hay carritos abandonados para enviar seguimiento.");return}if(!confirm(`¿Enviar emails de seguimiento a ${w.length} carritos abandonados?

Esto enviará un email recordatorio a cada cliente que agregó productos al carrito pero no completó la compra.`))return;let G=0;for(const oe of w)try{await fr(Yt(ce,"cart_items",oe.id),{status:"follow_up_sent",followUpSentAt:new Date}),G++,console.log(`Follow-up sent to ${oe.customerEmail} for ${oe.productName}`)}catch(fe){console.error(`Error sending follow-up to ${oe.customerEmail}:`,fe)}alert(`✅ Seguimiento completado!

Se enviaron ${G} emails de seguimiento a clientes con carritos abandonados.`),Oe()}catch(w){console.error("Error sending follow-up emails:",w),alert("Error enviando emails de seguimiento: "+w.message)}},je=async w=>{try{await fr(Yt(ce,"cart_items",w),{status:"purchased",purchasedAt:new Date}),alert("✅ Item marcado como comprado exitosamente"),Oe()}catch(L){console.error("Error marking as purchased:",L),alert("Error al marcar como comprado")}},xt=async()=>{try{console.log("Testing cart items access...");const{collection:w,query:L,getDocs:G,addDoc:oe,deleteDoc:fe,doc:lt}=await It(async()=>{const{collection:rr,query:An,getDocs:ke,addDoc:yn,deleteDoc:Ke,doc:ze}=await Promise.resolve().then(()=>Kt);return{collection:rr,query:An,getDocs:ke,addDoc:yn,deleteDoc:Ke,doc:ze}},void 0);console.log("Test 1: Reading from cart_items collection...");const gn=L(w(ce,"cart_items")),on=await G(gn);console.log("✅ Successfully read cart_items collection. Found",on.docs.length,"documents"),console.log("Test 2: Creating test document...");const Ft=await oe(w(ce,"cart_items"),{test:!0,timestamp:new Date,userId:"test-admin",status:"test"});console.log("✅ Successfully created test document with ID:",Ft.id),console.log("Test 3: Reading test document...");const $n=await G(L(w(ce,"cart_items")));console.log("✅ Successfully read test document. Total documents:",$n.docs.length),console.log("Test 4: Deleting test document..."),await fe(lt(ce,"cart_items",Ft.id)),console.log("✅ Successfully deleted test document"),alert(`✅ All tests passed!

Cart items access is working correctly.

Check console for detailed logs.`)}catch(w){console.error("❌ Test failed:",w),console.error("Error details:",{code:w.code,message:w.message,stack:w.stack}),alert("❌ Test failed: "+w.message+`

Check console for details.`)}},ft=async()=>{try{console.log("Creating test cart items...");const{collection:w,addDoc:L}=await It(async()=>{const{collection:oe,addDoc:fe}=await Promise.resolve().then(()=>Kt);return{collection:oe,addDoc:fe}},void 0),G=[{userId:"test-user-1",customerName:"María González",customerEmail:"maria.gonzalez@email.com",productId:"test-product-1",productName:"Shampoo Extracto de Miel",productPrice:140,quantity:2,addedAt:new Date(Date.now()-2*24*60*60*1e3),status:"in_cart"},{userId:"test-user-2",customerName:"Carlos Rodríguez",customerEmail:"carlos.rodriguez@email.com",productId:"test-product-2",productName:"Loción Atrayente",productPrice:180,quantity:1,addedAt:new Date(Date.now()-3*24*60*60*1e3),status:"in_cart"},{userId:"test-user-3",customerName:"Ana Martínez",customerEmail:"ana.martinez@email.com",productId:"test-product-3",productName:"Velas De Miel",productPrice:150,quantity:3,addedAt:new Date(Date.now()-1*24*60*60*1e3),status:"in_cart"},{userId:"test-user-4",customerName:"Luis Pérez",customerEmail:"luis.perez@email.com",productId:"test-product-4",productName:"Aceite Abrecaminos",productPrice:200,quantity:1,addedAt:new Date(Date.now()-5*24*60*60*1e3),status:"purchased"}];console.log("Test cart items to create:",G);for(const oe of G){const fe=await L(w(ce,"cart_items"),oe);console.log("Test cart item created successfully! Doc ID:",fe.id,"Data:",oe)}alert(`✅ Datos de prueba creados exitosamente!

Se crearon 4 elementos de carrito de prueba:
- 3 carritos abandonados (más de 24h)
- 1 carrito convertido (comprado)

Ahora puedes probar el sistema de seguimiento de carritos abandonados.`),console.log("Reloading dashboard data..."),Oe()}catch(w){console.error("Error creating test cart items:",w),console.error("Error details:",{code:w.code,message:w.message,stack:w.stack}),alert("Error creando datos de prueba: "+w.message)}},rn=w=>{console.log("Edit button clicked for product:",w),W(w.id),P(!0),r("add-product"),E({nombre:w.nombre||"",descripcion:w.descripcion||"",precio:w.precio||0,categoria:w.categoria||"",stock:w.stock||0,minStock:w.minStock||5,maxStock:w.maxStock||100,activo:w.activo!==!1,imagen:w.imagen||"",elaboracion:w.elaboracion||"",proposito:w.proposito||"",beneficios:w.beneficios||"",modoUso:w.modoUso||"",ingredientes:w.ingredientes||"",duracion:w.duracion||"",cuidados:w.cuidados||""}),console.log("Edit mode activated, switching to form tab")},Gt=async w=>{w.preventDefault(),k(!0);try{const L={...B,updatedAt:new Date};if(console.log("Updating product with data:",L),console.log("Product ID:",V),L.imagen){const G=Math.round(L.imagen.length/1024);if(console.log(`Image size: ${G}KB (${Math.round(G/1024)}MB)`),L.imagen.length>5e6){alert(`La imagen es demasiado grande (${Math.round(G/1024)}MB). Por favor, usa una imagen más pequeña.`),k(!1);return}}await fr(Yt(ce,"products",V),L),console.log("Product updated successfully"),E({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,minStock:5,maxStock:100,activo:!0,imagen:"",elaboracion:"",proposito:"",beneficios:"",modoUso:"",ingredientes:"",duracion:"",cuidados:""}),P(!1),W(null),Oe(),alert("Producto actualizado exitosamente!")}catch(L){console.error("Error updating product:",L),console.error("Error details:",L.message,L.code);let G="Error al actualizar el producto. Inténtalo de nuevo.";L.code==="permission-denied"?G="No tienes permisos para actualizar este producto.":L.code==="not-found"?G="El producto no fue encontrado.":L.message.includes("image")&&(G="Error con la imagen. Intenta con una imagen más pequeña."),alert(G)}finally{k(!1)}},_o=()=>{P(!1),W(null),E({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,minStock:5,maxStock:100,activo:!0,imagen:""})},Or=()=>{const w=u.filter(G=>{const oe=G.stock||0,fe=G.minStock||5;return oe<=fe&&oe>0}),L=u.filter(G=>(G.stock||0)===0);return L.length>0&&console.warn(`⚠️ ${L.length} productos sin stock:`,L.map(G=>G.nombre)),w.length>0&&console.warn(`⚠️ ${w.length} productos con stock bajo:`,w.map(G=>G.nombre)),{lowStockProducts:w,outOfStockProducts:L}},sn=w=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(w),Bn=w=>{if(!w)return"Nunca";try{return(w.toDate?w.toDate():new Date(w)).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(L){return console.error("Error formatting date:",L,w),"Fecha inválida"}};return g?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"1rem"},children:"Cargando Dashboard..."}),l.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #D4A574",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]})}):l.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:1e3,overflow:"auto"},children:[l.jsxs("div",{style:{background:"white",minHeight:"100vh",padding:window.innerWidth<=768?"1rem":"2rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:window.innerWidth<=768?"1rem":"2rem",paddingBottom:"1rem",borderBottom:"2px solid #D4A574",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsx("h1",{style:{color:"#D4A574",fontSize:window.innerWidth<=768?"1.5rem":"2rem",margin:0,fontFamily:"serif"},children:"🍯 Dashboard Amor y Miel"}),l.jsx("p",{style:{color:"#666",margin:"0.5rem 0 0 0"},children:"Panel de administración"})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[l.jsx("button",{onClick:Oe,style:{background:"transparent",color:"#D4A574",border:"2px solid #D4A574",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:"🔄 Actualizar"}),l.jsx("button",{onClick:e,style:{background:"#D4A574",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Cerrar Dashboard"})]})]}),l.jsx("div",{style:{display:"flex",gap:window.innerWidth<=768?"0.5rem":"1rem",marginBottom:window.innerWidth<=768?"1rem":"2rem",borderBottom:"1px solid #eee",overflowX:"auto",paddingBottom:"0.5rem"},children:[{id:"overview",label:"📊 Resumen",icon:"📊"},{id:"users",label:"👥 Usuarios",icon:"👥"},{id:"orders",label:"📦 Pedidos",icon:"📦"},{id:"cart-abandonment",label:"🛒 Carritos Abandonados",icon:"🛒"},{id:"products",label:"🛍️ Productos",icon:"🛍️"}].map(w=>l.jsx("button",{onClick:()=>r(w.id),style:{background:n===w.id?"#D4A574":"transparent",color:n===w.id?"white":"#666",border:"none",padding:window.innerWidth<=768?"0.5rem 1rem":"0.75rem 1.5rem",borderRadius:"25px 25px 0 0",cursor:"pointer",fontSize:window.innerWidth<=768?"0.8rem":"1rem",fontWeight:"bold",transition:"all 0.3s ease",whiteSpace:"nowrap",minWidth:window.innerWidth<=768?"auto":"120px"},children:w.label},w.id))}),n==="overview"&&l.jsxs("div",{children:[l.jsx("h2",{style:{color:"#D4A574",marginBottom:"1.5rem"},children:"Resumen General"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsxs("div",{style:{background:`linear-gradient(135deg, ${I.A.miel} 0%, ${I.B.miel} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"👥"}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:j.totalUsers}),l.jsx("div",{children:"Usuarios Totales"})]}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${I.A.rosa} 0%, ${I.B.rosa} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📦"}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:j.totalOrders}),l.jsx("div",{children:"Pedidos Totales"})]}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${I.A.verde} 0%, ${I.B.verde} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"💰"}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:sn(j.totalRevenue)}),l.jsx("div",{children:"Ingresos Totales"})]}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${I.A.azul} 0%, ${I.B.azul} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"🔥"}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:j.activeUsers}),l.jsx("div",{children:"Usuarios Activos (30 días)"})]})]}),(()=>{const{lowStockProducts:w,outOfStockProducts:L}=Or();return(w.length>0||L.length>0)&&l.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[l.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"⚠️ Alertas de Inventario"}),L.length>0&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsxs("h4",{style:{color:"#f44336",marginBottom:"0.5rem"},children:["Sin Stock (",L.length,")"]}),L.map(G=>l.jsxs("div",{style:{background:"#ffebee",padding:"0.5rem",borderRadius:"5px",marginBottom:"0.5rem",border:"1px solid #f44336"},children:[l.jsx("strong",{children:G.nombre})," - Stock: ",G.stock||0]},G.id))]}),w.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{style:{color:"#FF9800",marginBottom:"0.5rem"},children:["Stock Bajo (",w.length,")"]}),w.map(G=>l.jsxs("div",{style:{background:"#fff3e0",padding:"0.5rem",borderRadius:"5px",marginBottom:"0.5rem",border:"1px solid #FF9800"},children:[l.jsx("strong",{children:G.nombre})," - Stock: ",G.stock||0," (Mín: ",G.minStock||5,")"]},G.id))]})]})})(),l.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",padding:"1.5rem"},children:[l.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Pedidos Completados Recientes"}),l.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:o.filter(w=>w.status==="completed").slice(0,5).length>0?o.filter(w=>w.status==="completed").slice(0,5).map(w=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderBottom:"1px solid #f0f0f0",background:w.status==="completed"?"#f0f8f0":w.status==="pending"?"#fff8e1":"#f5f5f5"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{fontWeight:"bold"},children:["Pedido #",w.id.slice(-8)]}),l.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:[w.customerName," - ",sn(w.total)]})]}),l.jsx("div",{style:{background:w.status==="completed"?"#4CAF50":w.status==="pending"?"#FF9800":"#9E9E9E",color:"white",padding:"0.25rem 0.75rem",borderRadius:"15px",fontSize:"0.8rem"},children:w.status==="completed"?"Completado":w.status==="pending"?"Pendiente":"Cancelado"})]},w.id)):l.jsx("div",{style:{textAlign:"center",color:"#666",padding:"2rem",fontStyle:"italic"},children:"No hay pedidos completados aún"})})]})]}),n==="users"&&l.jsxs("div",{children:[l.jsx("h2",{style:{color:"#D4A574",marginBottom:"1.5rem"},children:"Gestión de Usuarios"}),l.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr auto",background:"#f8f9fa",padding:"1rem",fontWeight:"bold",borderBottom:"1px solid #eee"},children:[l.jsx("div",{children:"Nombre"}),l.jsx("div",{children:"Email"}),l.jsx("div",{children:"Registro"}),l.jsx("div",{children:"Último Login"}),l.jsx("div",{children:"Estado"}),l.jsx("div",{children:"Acciones"})]}),i.map(w=>l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr auto",padding:"1rem",borderBottom:"1px solid #f0f0f0",alignItems:"center"},children:[l.jsx("div",{children:w.name||"Sin nombre"}),l.jsx("div",{children:w.email}),l.jsx("div",{children:Bn(w.createdAt)}),l.jsx("div",{children:w.lastLogin?Bn(w.lastLogin):"Nunca"}),l.jsx("div",{style:{color:w.lastLogin&&new Date(w.lastLogin)>new Date(Date.now()-30*24*60*60*1e3)?"#4CAF50":"#9E9E9E"},children:w.lastLogin&&new Date(w.lastLogin)>new Date(Date.now()-30*24*60*60*1e3)?"Activo":"Inactivo"}),l.jsx("div",{children:l.jsx("button",{onClick:()=>Q(w.id),style:{background:"#f44336",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})})]},w.id))]})]}),n==="orders"&&l.jsxs("div",{children:[l.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("h2",{style:{color:"#D4A574",margin:0},children:"Gestión de Pedidos"}),l.jsx("button",{onClick:Mr,style:{padding:"0.5rem 1rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"🧪 Crear Orden de Prueba"})]}),l.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr auto",background:"#f8f9fa",padding:"1rem",fontWeight:"bold",borderBottom:"1px solid #eee"},children:[l.jsx("div",{children:"ID Pedido"}),l.jsx("div",{children:"Cliente"}),l.jsx("div",{children:"Total"}),l.jsx("div",{children:"Fecha"}),l.jsx("div",{children:"Estado"}),l.jsx("div",{children:"Productos"}),l.jsx("div",{children:"Acciones"})]}),o.map(w=>l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr auto",padding:"1rem",borderBottom:"1px solid #f0f0f0",alignItems:"center"},children:[l.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.9rem"},children:["#",w.id.slice(-8)]}),l.jsx("div",{children:w.customerName}),l.jsx("div",{style:{fontWeight:"bold"},children:sn(w.total)}),l.jsx("div",{children:Bn(w.createdAt)}),l.jsx("div",{children:l.jsxs("select",{value:w.status||"processing",onChange:L=>C(w.id,L.target.value),style:{padding:"0.25rem 0.5rem",borderRadius:"5px",border:"1px solid #ddd",fontSize:"0.8rem"},children:[l.jsx("option",{value:"processing",children:"En Proceso"}),l.jsx("option",{value:"shipped",children:"Enviado"}),l.jsx("option",{value:"delivered",children:"Entregado"}),l.jsx("option",{value:"cancelled",children:"Cancelado"})]})}),l.jsxs("div",{children:[w.items?w.items.length:0," productos"]}),l.jsx("div",{children:l.jsx("button",{onClick:()=>{T(w),D(!0)},style:{background:"#2196F3",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.8rem"},children:"Ver Detalles"})})]},w.id))]})]}),n==="cart-abandonment"&&l.jsxs("div",{children:[l.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("h2",{style:{color:"#D4A574",margin:0},children:"Carritos Abandonados"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{onClick:xt,style:{padding:"0.5rem 1rem",background:"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"🔍 Test Access"}),l.jsx("button",{onClick:Ee,style:{padding:"0.5rem 1rem",background:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"📧 Enviar Seguimiento"}),l.jsx("button",{onClick:ft,style:{padding:"0.5rem 1rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"🧪 Crear Datos de Prueba"})]})]}),l.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1.5rem",background:"#f8f9fa",borderBottom:"1px solid #eee"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#D4A574"},children:m.filter(w=>w.status==="in_cart").length}),l.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"En Carrito"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ff6b6b"},children:m.filter(w=>{const L=(new Date-new Date(w.addedAt))/36e5;return w.status==="in_cart"&&L>24||w.status==="abandoned"}).length}),l.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"Abandonados"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#51cf66"},children:m.filter(w=>w.status==="purchased").length}),l.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"Convertidos"})]})]}),l.jsx("div",{style:{padding:"1.5rem"},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:m.map(w=>{const L=(new Date-new Date(w.addedAt))/36e5,G=w.status==="in_cart"&&L>24;return l.jsxs("div",{style:{border:"1px solid #eee",borderRadius:"8px",padding:"1rem",background:G?"#fff5f5":"#f8f9fa"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"bold",color:"#333"},children:w.customerName}),l.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:w.customerEmail})]}),l.jsx("div",{style:{padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold",background:G?"#ff6b6b":w.status==="purchased"?"#51cf66":"#ffd43b",color:"white"},children:G?"ABANDONADO":w.status==="purchased"?"COMPRADO":"EN CARRITO"})]}),l.jsxs("div",{style:{marginBottom:"0.5rem"},children:[l.jsx("div",{style:{fontWeight:"600",color:"#333"},children:w.productName}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Cantidad: ",w.quantity," • Precio: $",w.productPrice]})]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginBottom:"0.5rem"},children:["Agregado: ",new Date(w.addedAt).toLocaleString()]}),G&&l.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[l.jsx("button",{onClick:()=>Te(w),style:{padding:"0.5rem 1rem",background:"#D4A574",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"📧 Enviar Recordatorio"}),l.jsx("button",{onClick:()=>je(w.id),style:{padding:"0.5rem 1rem",background:"#51cf66",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"✅ Marcar como Comprado"})]})]},w.id)})})})]})]}),n==="products"&&l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{color:"#D4A574",margin:0},children:"Gestión de Productos"}),l.jsx("button",{onClick:()=>{P(!1),W(null),E({nombre:"",descripcion:"",precio:"",categoria:"Productos",stock:"",stockMinimo:"",stockMaximo:"",estado:"Activo",imagen:""}),r("add-product")},style:{background:`linear-gradient(135deg, ${I.A.miel} 0%, ${I.B.miel} 100%)`,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem"},children:"➕ Agregar Producto"})]}),l.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 2fr 1fr 1fr 1fr 1fr 1fr auto",background:"linear-gradient(135deg, #D4A574 0%, #C9A96E 100%)",color:"white",padding:"1rem",fontWeight:"bold",borderBottom:"2px solid #B8860B",borderRadius:"8px 8px 0 0"},children:[l.jsx("div",{style:{textAlign:"center"},children:"🖼️ Imagen"}),l.jsx("div",{children:"📦 Producto"}),l.jsx("div",{children:"🏷️ Categoría"}),l.jsx("div",{children:"💰 Precio"}),l.jsx("div",{children:"📊 Stock"}),l.jsx("div",{children:"⚠️ Alerta"}),l.jsx("div",{children:"✅ Estado"}),l.jsx("div",{style:{textAlign:"center"},children:"⚙️ Acciones"})]}),u.map(w=>{var lt;const L=w.stock||0,G=w.minStock||5,oe=L<=G,fe=L===0;return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 2fr 1fr 1fr 1fr 1fr 1fr auto",padding:"1rem",borderBottom:"1px solid #f0f0f0",alignItems:"center",background:fe?"#ffebee":oe?"#fff3e0":"white"},children:[l.jsx("div",{style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("img",{src:w.imagen||"/images/products/default-product.png",alt:w.nombre,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"2px solid #f0f0f0"},onError:gn=>{gn.target.src="/images/products/default-product.png"}})}),l.jsxs("div",{style:{paddingLeft:"0.5rem"},children:[l.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem",fontSize:"1rem",color:"#333"},children:w.nombre}),l.jsxs("div",{style:{color:"#666",fontSize:"0.8rem",lineHeight:"1.3",marginBottom:"0.25rem"},children:[(lt=w.descripcion)==null?void 0:lt.substring(0,60),"..."]}),l.jsxs("div",{style:{fontSize:"0.7rem",color:"#999",fontStyle:"italic"},children:["ID: ",w.id]})]}),l.jsx("div",{style:{textAlign:"center"},children:l.jsx("span",{style:{background:"#E8B4B8",color:"#8B4513",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"500"},children:w.categoria||"Sin categoría"})}),l.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#D4A574",textAlign:"center"},children:sn(w.precio||0)}),l.jsxs("div",{style:{color:fe?"#f44336":oe?"#FF9800":"#4CAF50",fontWeight:"bold",textAlign:"center"},children:[l.jsxs("div",{style:{fontSize:"1rem"},children:[L," unidades"]}),w.minStock&&l.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.25rem"},children:["Mín: ",w.minStock]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[fe&&l.jsx("span",{style:{background:"#f44336",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:"⚠️ Sin Stock"}),oe&&!fe&&l.jsx("span",{style:{background:"#FF9800",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:"⚠️ Bajo Stock"}),!oe&&!fe&&l.jsx("span",{style:{background:"#4CAF50",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:"✅ OK"})]}),l.jsx("div",{style:{color:w.activo!==!1?"#4CAF50":"#f44336"},children:w.activo!==!1?"Activo":"Inactivo"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l.jsx("button",{onClick:()=>rn(w),style:{background:"#2196F3",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",marginRight:"0.5rem"},children:"Editar"}),l.jsx("button",{onClick:()=>ue(w.id),style:{background:"#f44336",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]})]},w.id)})]})]}),n==="add-product"&&l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{color:"#D4A574",margin:0},children:"Agregar Nuevo Producto"}),l.jsx("button",{onClick:()=>r("products"),style:{background:"transparent",color:"#D4A574",border:"2px solid #D4A574",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"← Volver a Productos"})]}),l.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",padding:"2rem",maxWidth:"800px"},children:[l.jsx("h3",{style:{marginBottom:"1.5rem",color:"#333"},children:S?"Editar Producto":"Agregar Nuevo Producto"}),l.jsxs("form",{onSubmit:S?Gt:se,children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Nombre del Producto *"}),l.jsx("input",{type:"text",required:!0,value:B.nombre,onChange:w=>E(L=>({...L,nombre:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Precio *"}),l.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:B.precio,onChange:w=>E(L=>({...L,precio:parseFloat(w.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Descripción *"}),l.jsx("textarea",{required:!0,value:B.descripcion,onChange:w=>E(L=>({...L,descripcion:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none",minHeight:"100px",resize:"vertical"}})]}),l.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"10px",border:"1px solid #eee"},children:[l.jsx("h4",{style:{color:"#D4A574",marginBottom:"1rem",fontSize:"1.1rem"},children:"📋 Información Detallada del Producto"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:"🧪 Elaboración"}),l.jsx("textarea",{value:B.elaboracion||"",onChange:w=>E(L=>({...L,elaboracion:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"0.9rem",outline:"none",minHeight:"80px",resize:"vertical"},placeholder:"Describe cómo se elabora el producto..."})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:"🎯 Propósito"}),l.jsx("textarea",{value:B.proposito||"",onChange:w=>E(L=>({...L,proposito:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"0.9rem",outline:"none",minHeight:"80px",resize:"vertical"},placeholder:"Explica para qué sirve el producto..."})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:"✨ Beneficios"}),l.jsx("textarea",{value:B.beneficios||"",onChange:w=>E(L=>({...L,beneficios:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"0.9rem",outline:"none",minHeight:"80px",resize:"vertical"},placeholder:"Lista los beneficios del producto..."})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:"📖 Modo de Uso"}),l.jsx("textarea",{value:B.modoUso||"",onChange:w=>E(L=>({...L,modoUso:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"0.9rem",outline:"none",minHeight:"80px",resize:"vertical"},placeholder:"Explica cómo usar el producto..."})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:"🌿 Ingredientes"}),l.jsx("textarea",{value:B.ingredientes||"",onChange:w=>E(L=>({...L,ingredientes:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"0.9rem",outline:"none",minHeight:"80px",resize:"vertical"},placeholder:"Lista los ingredientes del producto..."})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:"⏱️ Duración"}),l.jsx("textarea",{value:B.duracion||"",onChange:w=>E(L=>({...L,duracion:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"0.9rem",outline:"none",minHeight:"80px",resize:"vertical"},placeholder:"Especifica la duración del producto..."})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:"⚠️ Cuidados"}),l.jsx("textarea",{value:B.cuidados||"",onChange:w=>E(L=>({...L,cuidados:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"0.9rem",outline:"none",minHeight:"60px",resize:"vertical"},placeholder:"Menciona los cuidados especiales del producto..."})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Categoría *"}),l.jsxs("select",{required:!0,value:B.categoria,onChange:w=>E(L=>({...L,categoria:w.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"},children:[l.jsx("option",{value:"",children:"Seleccionar categoría"}),l.jsx("option",{value:"productos",children:"Productos"}),l.jsx("option",{value:"servicios",children:"Servicios"}),l.jsx("option",{value:"kids",children:"Productos para Niños"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Stock Actual *"}),l.jsx("input",{type:"number",required:!0,min:"0",value:B.stock,onChange:w=>E(L=>({...L,stock:parseInt(w.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Estado"}),l.jsxs("select",{value:B.activo?"activo":"inactivo",onChange:w=>E(L=>({...L,activo:w.target.value==="activo"})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"},children:[l.jsx("option",{value:"activo",children:"Activo"}),l.jsx("option",{value:"inactivo",children:"Inactivo"})]})]})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem",fontSize:"1.1rem"},children:"📦 Gestión de Inventario"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:["Stock Mínimo *",l.jsx("span",{style:{fontSize:"0.8rem",color:"#666",marginLeft:"0.5rem"},children:"(Alerta cuando baje de este número)"})]}),l.jsx("input",{type:"number",required:!0,min:"0",value:B.minStock,onChange:w=>E(L=>({...L,minStock:parseInt(w.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]}),l.jsxs("div",{children:[l.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:["Stock Máximo *",l.jsx("span",{style:{fontSize:"0.8rem",color:"#666",marginLeft:"0.5rem"},children:"(Capacidad máxima de almacén)"})]}),l.jsx("input",{type:"number",required:!0,min:"0",value:B.maxStock,onChange:w=>E(L=>({...L,maxStock:parseInt(w.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]})]})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"🖼️ Imagen del Producto"}),B.imagen&&l.jsx("div",{style:{marginBottom:"1rem",textAlign:"center"},children:l.jsx("img",{src:B.imagen,alt:"Preview",style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"12px",border:"2px solid #D4A574",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"},onError:w=>{w.target.style.display="none"}})}),l.jsx("input",{type:"url",value:B.imagen,onChange:w=>E(L=>({...L,imagen:w.target.value})),placeholder:"https://ejemplo.com/imagen.jpg",style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none",marginBottom:"0.5rem"}}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[l.jsx("button",{type:"button",onClick:()=>{const w=prompt("Ingresa la URL de la imagen:");w&&E(L=>({...L,imagen:w}))},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #D4A574 0%, #B8945F 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:w=>{w.target.style.transform="translateY(-1px)",w.target.style.boxShadow="0 4px 12px rgba(212, 165, 116, 0.4)"},onMouseLeave:w=>{w.target.style.transform="translateY(0)",w.target.style.boxShadow="none"},children:"📎 Pegar URL"}),l.jsx("button",{type:"button",onClick:()=>{const w=["/images/products/velas-de-miel-product.png","/images/products/locion-atrayente-product.png","/images/products/locion-palo-santo-product.png","/images/products/agua-florida-product.png","/images/products/brisa-bendicion-dinero-product.png","/images/products/brisa-prosperidad-product.png","/images/products/brisa-abundancia-product.png","/images/products/exfoliante-abrecaminos-product.png","/images/products/exfoliante-venus-product.png","/images/products/feromonas-naturales-product.png","/images/products/feromonas-damas-caballeros-product.png","/images/products/agua-micelar-product.png","/images/products/agua-de-rosas-product.png","/images/products/Aceite Abre Caminos.png","/images/products/aceite-para-ungir-product.png","/images/products/shampoo-artesanal-product.png","/images/products/shampoo-miel-product.png","/images/products/shampoo-romero-product.png","/images/products/mascarilla-capilar-product.png","/images/products/agua-de-luna-product.png","/images/products/Miel Consagrada.png","/images/products/sal-negra-product.png","/images/products/polvo-de-oro-product.png","/images/products/palo-santo-product.png","/images/products/sahumerios-product.png","/images/products/bano-amargo-product.png","/images/products/Bano Energetico Amor Propio.png","/images/products/Bano-Energetico.png","/images/products/Locion-Ellas-Ellos.png"],L=prompt(`Selecciona una imagen existente (1-${w.length}):

${w.map((oe,fe)=>`${fe+1}. ${oe.split("/").pop()}`).join(`
`)}`),G=parseInt(L)-1;G>=0&&G<w.length&&E(oe=>({...oe,imagen:w[G]}))},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #8EB080 0%, #6A9B6A 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:w=>{w.target.style.transform="translateY(-1px)",w.target.style.boxShadow="0 4px 12px rgba(142, 176, 128, 0.4)"},onMouseLeave:w=>{w.target.style.transform="translateY(0)",w.target.style.boxShadow="none"},children:"🖼️ Seleccionar Imagen"}),l.jsx("button",{type:"button",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=L=>{const G=L.target.files[0];if(G){const oe=new FileReader;oe.onload=fe=>{E(lt=>({...lt,imagen:fe.target.result}))},oe.readAsDataURL(G)}},w.click()},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #4A90E2 0%, #357ABD 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:w=>{w.target.style.transform="translateY(-1px)",w.target.style.boxShadow="0 4px 12px rgba(74, 144, 226, 0.4)"},onMouseLeave:w=>{w.target.style.transform="translateY(0)",w.target.style.boxShadow="none"},children:"📁 Subir Imagen"}),l.jsx("button",{type:"button",onClick:()=>E(w=>({...w,imagen:""})),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:w=>{w.target.style.transform="translateY(-1px)",w.target.style.boxShadow="0 4px 12px rgba(255, 107, 107, 0.4)"},onMouseLeave:w=>{w.target.style.transform="translateY(0)",w.target.style.boxShadow="none"},children:"🗑️ Limpiar"})]}),l.jsx("p",{style:{fontSize:"0.8rem",color:"#666",margin:"0.5rem 0 0 0",fontStyle:"italic"},children:"💡 Tip: Puedes pegar una URL de imagen o seleccionar una de las imágenes existentes"})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("button",{type:"button",onClick:()=>{E({nombre:"",descripcion:"",precio:"",categoria:"Productos",stock:"",stockMinimo:"",stockMaximo:"",estado:"Activo",imagen:""}),r("products")},style:{flex:1,padding:"0.75rem",background:"transparent",border:"2px solid #D4A574",color:"#D4A574",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:F,style:{flex:1,padding:"0.75rem",background:`linear-gradient(135deg, ${I.A.miel} 0%, ${I.B.miel} 100%)`,border:"none",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:F?"not-allowed":"pointer",opacity:F?.7:1},children:F?S?"Actualizando...":"Agregando...":S?"Actualizar Producto":"Agregar Producto"}),S&&l.jsx("button",{type:"button",onClick:_o,style:{background:"#6c757d",color:"white",border:"none",padding:"0.8rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",marginLeft:"1rem"},children:"Cancelar"})]})]})]})]}),A&&v&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"2rem",maxWidth:"800px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsxs("h2",{style:{color:"#D4A574",margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:["📦 Detalles del Pedido #",v.id.slice(-8)]}),l.jsx("button",{onClick:()=>D(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"✕"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Información del Pedido"}),l.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[l.jsxs("p",{children:[l.jsx("strong",{children:"ID:"})," ",v.id]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Cliente:"})," ",v.customerName]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",v.customerEmail]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total:"})," ",sn(v.total)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Fecha:"})," ",Bn(v.createdAt)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Estado:"}),l.jsx("span",{style:{background:v.status==="delivered"?"#4CAF50":v.status==="shipped"?"#2196F3":v.status==="processing"?"#FF9800":"#9E9E9E",color:"white",padding:"0.25rem 0.75rem",borderRadius:"15px",fontSize:"0.8rem",marginLeft:"0.5rem"},children:kt(v.status)})]}),v.trackingNumber&&l.jsxs("p",{children:[l.jsx("strong",{children:"Número de Rastreo:"}),l.jsx("span",{style:{fontFamily:"monospace",background:"#e3f2fd",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.9rem",marginLeft:"0.5rem"},children:v.trackingNumber})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Información de Envío"}),l.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:v.shippingAddress?l.jsxs(l.Fragment,{children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Nombre:"})," ",v.shippingAddress.fullName]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Dirección:"})," ",v.shippingAddress.address]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Ciudad:"})," ",v.shippingAddress.city]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Estado:"})," ",v.shippingAddress.state]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Código Postal:"})," ",v.shippingAddress.zipCode]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Teléfono:"})," ",v.shippingAddress.phone]}),v.shippingAddress.notes&&l.jsxs("p",{children:[l.jsx("strong",{children:"Notas:"})," ",v.shippingAddress.notes]})]}):l.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"No hay información de envío disponible"})})]})]}),v.statusHistory&&v.statusHistory.length>0&&l.jsxs("div",{style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Historial de Estado"}),l.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:v.statusHistory.map((w,L)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:L<v.statusHistory.length-1?"1rem":"0",paddingBottom:L<v.statusHistory.length-1?"1rem":"0",borderBottom:L<v.statusHistory.length-1?"1px solid #e9ecef":"none"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:w.status==="delivered"?"#4CAF50":w.status==="shipped"?"#2196F3":w.status==="processing"?"#FF9800":"#9E9E9E",marginRight:"1rem",flexShrink:0}}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:"#333",fontWeight:"500",fontSize:"0.9rem"},children:kt(w.status)}),l.jsx("div",{style:{color:"#666",fontSize:"0.8rem",marginTop:"0.25rem"},children:new Date(w.timestamp).toLocaleString("es-MX")}),w.note&&l.jsx("div",{style:{color:"#666",fontSize:"0.8rem",marginTop:"0.25rem",fontStyle:"italic"},children:w.note}),l.jsxs("div",{style:{color:"#999",fontSize:"0.7rem",marginTop:"0.25rem"},children:["Actualizado por: ",w.updatedBy]})]})]},L))})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Productos del Pedido"}),l.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:v.items&&v.items.length>0?v.items.map((w,L)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderBottom:"1px solid #eee",background:"white",borderRadius:"8px",marginBottom:"0.5rem"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:"bold"},children:w.nombre}),l.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Cantidad: ",w.quantity," × ",sn(w.precio)]})]}),l.jsx("div",{style:{fontWeight:"bold"},children:sn(w.precio*w.quantity)})]},L)):l.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"No hay productos en este pedido"})})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[l.jsx("button",{onClick:()=>D(!1),style:{flex:1,padding:"0.75rem",background:"transparent",border:"2px solid #D4A574",color:"#D4A574",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cerrar"}),l.jsx("button",{onClick:()=>{window.print()},style:{flex:1,padding:"0.75rem",background:`linear-gradient(135deg, ${I.A.miel} 0%, ${I.B.miel} 100%)`,border:"none",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"🖨️ Imprimir"})]})]})})]}),l.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},TR=({amount:t,orderId:e,items:n,customerInfo:r,onSuccess:i,onError:s,onCancel:o})=>{const[c,u]=ee.useState(!1),[h,m]=ee.useState(null);ee.useEffect(()=>{const g=document.createElement("script");return g.src="https://sdk.mercadopago.com/js/v2",g.async=!0,g.onload=()=>{console.log("Mercado Pago SDK loaded")},document.head.appendChild(g),()=>{const R=document.querySelector('script[src="https://sdk.mercadopago.com/js/v2"]');R&&document.head.removeChild(R)}},[]);const y=async()=>{try{u(!0),m(null),console.log("Creating preference via server function...");const g=await fetch("/.netlify/functions/create-preference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n,customerInfo:r,orderId:e})});if(!g.ok){const M=await g.json();throw new Error(`Error creating preference: ${M.message||g.statusText}`)}const{preferenceId:R,initPoint:j}=await g.json();console.log("Preference created successfully:",{preferenceId:R,initPoint:j}),window.location.href=j}catch(g){console.error("Error initializing payment:",g),m(g.message),u(!1),s&&s(g)}};return l.jsxs("div",{className:"mercadopago-checkout-container",children:[l.jsxs("div",{className:"payment-summary",children:[l.jsx("h3",{children:"Resumen del Pago"}),l.jsxs("div",{className:"order-details",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Orden:"})," ",e]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total:"})," $",t.toFixed(2)," MXN"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Cliente:"})," ",r.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",r.email]})]}),l.jsxs("div",{className:"items-list",children:[l.jsx("h4",{children:"Productos:"}),n.map((g,R)=>l.jsxs("div",{className:"item-row",children:[l.jsxs("span",{children:[g.nombre," x ",g.quantity]}),l.jsxs("span",{children:["$",(g.precio*g.quantity).toFixed(2)]})]},R))]})]}),h&&l.jsx("div",{className:"error-message",children:l.jsxs("p",{children:["❌ ",h]})}),l.jsxs("div",{className:"payment-actions",children:[l.jsx("button",{onClick:y,disabled:c,className:"btn-pay-mercadopago",children:c?"⏳ Procesando...":"💳 Pagar con Mercado Pago"}),l.jsx("button",{onClick:o,className:"btn-cancel",children:"Cancelar"})]}),l.jsx("div",{className:"mercadopago-checkout"}),l.jsx("style",{jsx:!0,children:`
        .mercadopago-checkout-container {
          max-width: 500px;
          margin: 0 auto;
          padding: 20px;
          background: white;
          border-radius: 10px;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .payment-summary {
          margin-bottom: 20px;
          padding: 15px;
          background: #f8f9fa;
          border-radius: 8px;
        }

        .payment-summary h3 {
          margin: 0 0 15px 0;
          color: #333;
          font-size: 1.2em;
        }

        .order-details p {
          margin: 5px 0;
          color: #666;
        }

        .items-list {
          margin-top: 15px;
        }

        .items-list h4 {
          margin: 0 0 10px 0;
          color: #333;
        }

        .item-row {
          display: flex;
          justify-content: space-between;
          padding: 5px 0;
          border-bottom: 1px solid #eee;
        }

        .item-row:last-child {
          border-bottom: none;
        }

        .error-message {
          background: #fee;
          color: #c33;
          padding: 10px;
          border-radius: 5px;
          margin: 10px 0;
        }

        .payment-actions {
          display: flex;
          gap: 10px;
          margin: 20px 0;
        }

        .btn-pay-mercadopago {
          flex: 1;
          background: #009ee3;
          color: white;
          border: none;
          padding: 15px 20px;
          border-radius: 8px;
          font-size: 16px;
          font-weight: bold;
          cursor: pointer;
          transition: background 0.3s;
        }

        .btn-pay-mercadopago:hover:not(:disabled) {
          background: #0088cc;
        }

        .btn-pay-mercadopago:disabled {
          background: #ccc;
          cursor: not-allowed;
        }

        .btn-cancel {
          background: #6c757d;
          color: white;
          border: none;
          padding: 15px 20px;
          border-radius: 8px;
          font-size: 16px;
          cursor: pointer;
          transition: background 0.3s;
        }

        .btn-cancel:hover {
          background: #5a6268;
        }

        .mercadopago-checkout {
          margin-top: 20px;
        }

        @media (max-width: 768px) {
          .mercadopago-checkout-container {
            margin: 10px;
            padding: 15px;
          }
          
          .payment-actions {
            flex-direction: column;
          }
        }
      `})]})},x={D:{miel:"#E0A73A",crema:"#FBF2DE",verde:"#628D6A",carbon:"#1A1714",fondo:"linear-gradient(135deg, #FBF2DE 0%, #FFFFFF 65%)"}},AR={"Velas De Miel":"/images/catalog/velasdemiel1.JPG","Loción Atrayente":"/images/catalog/locion-atrayente.JPG","Loción Palo Santo":"/images/catalog/locion-palo-santo.JPG","Agua Florida":"/images/catalog/agua-florida.JPG","Brisa Áurica Bendición del Dinero":"/images/catalog/brisa-aurica-bendicion-del-dinero.JPG","Brisa Áurica Prosperidad":"/images/catalog/brisa-aurica-prosperidad.JPG","Brisa Áurica Abundancia":"/images/catalog/brisa-aurica-abundancia.JPG","Exfoliante Abre Caminos":"/images/catalog/exfoliante-abrecaminos.JPG","Exfoliante Venus":"/images/catalog/exfoliante-venus.JPG","Feromonas Naturales":"/images/catalog/feromonas-naturales.JPG","Feromonas Damas y Caballeros":"/images/catalog/feromanas-damas-y-caballeros.JPG","Agua Micelar":"/images/catalog/agua-micelar.JPG","Agua de Rosas":"/images/catalog/agua-de-rosas1.JPG","Aceite Abre Caminos":"/images/catalog/aceite-abrecaminos.JPG","Aceite para Ungir":"/images/catalog/aceite-para-ungir.JPG","Shampoo Artesanal":"/images/catalog/shampoo-artesanal.JPG","Shampoo con Extracto de Miel":"/images/catalog/shampoo-con-extracto-de-miel.JPG","Shampoo con Extracto de Romero":"/images/catalog/shampoo-con-extracto-de-romero.JPG","Mascarilla Capilar":"/images/catalog/mascarilla-capilar.JPG","Agua de Luna":"/images/catalog/agua-de-luna.JPG","Miel Consagrada":"/images/catalog/miel-consagrada.JPG","Sal Negra":"/images/catalog/sal-negro.JPG","Polvo de Oro":"/images/catalog/polvo-de-oro.JPG","Palo Santo":"/images/catalog/palo-santo.JPG",Sahumerios:"/images/catalog/sahumerios.JPG","Baño Energético Amargo":"/images/catalog/bano-energetico-amargo.JPG","Baño Energético Amor Propio":"/images/catalog/bano-energetico-amor-propio.JPG","Baño Energético Abre Caminos":"/images/catalog/bano-energetico-abre-caminos.JPG","Loción Ellas y Ellos":"/images/catalog/locion-ellas-y-ellos.JPG","Shampoo Extracto de Miel":"/images/catalog/shampoo-extracto-miel.JPG","Shampoo Extracto de Romero":"/images/catalog/shampoo-extracto-romero.JPG"},CR={"Palo Santo":{elaboracion:"El Palo Santo es una madera sagrada que proviene del árbol Bursera graveolens, nativo de América del Sur. Se recolecta de forma sostenible de árboles que han muerto naturalmente, permitiendo que la madera se cure y desarrolle sus propiedades aromáticas y energéticas únicas durante el proceso de secado natural.",proposito:"El Palo Santo es reconocido por sus propiedades medicinales antirreumáticas, diuréticas, depurativas y antisépticas. Es ampliamente utilizado en prácticas de yoga, reiki y aromaterapia para limpiar y purificar ambientes, eliminar energías negativas y crear espacios de paz y armonía espiritual.",beneficios:"Purifica el aire y elimina bacterias, reduce el estrés y la ansiedad, facilita la meditación y la concentración, mejora la calidad del sueño, equilibra las emociones, fortalece el sistema inmunológico, y crea un ambiente propicio para la sanación espiritual y el bienestar general.",modoUso:"Enciende el Palo Santo con una vela, inclínalo en un ángulo de 45 grados y deja que se consuma durante 1-2 minutos. Apaga la llama y pasa el humo sagrado sobre tu cuerpo y por los espacios que desees purificar. El humo debe circular libremente para limpiar las energías negativas.",ingredientes:"100% Palo Santo (Bursera graveolens) de origen natural, sin aditivos químicos ni conservantes artificiales.",duracion:"Cada barra de Palo Santo puede durar entre 8-12 usos, dependiendo del tamaño y la frecuencia de uso.",cuidados:"Conservar en un lugar seco y fresco, alejado de la humedad. Mantener en su empaque original para preservar sus propiedades aromáticas."},"Velas De Miel":{elaboracion:"Nuestras velas de miel son elaboradas artesanalmente con cera de abeja 100% pura, recolectada de colmenas locales y sostenibles. El proceso incluye la filtración natural de la cera, el moldeado a mano y la consagración ritual para potenciar sus propiedades energéticas de abundancia y prosperidad.",proposito:"Diseñadas específicamente para rituales de abundancia, prosperidad y purificación energética. La cera de abeja natural emite iones negativos que purifican el aire y crean un ambiente propicio para la manifestación de deseos y la atracción de energías positivas.",beneficios:"Purifica el aire de toxinas y alérgenos, mejora la calidad del aire interior, emite iones negativos beneficiosos, crea un ambiente relajante y meditativo, potencia rituales de abundancia, y su aroma natural es relajante y terapéutico.",modoUso:"Enciende la vela en un lugar seguro y estable. Deja que se consuma completamente para activar sus propiedades energéticas. Ideal para usar durante meditaciones, rituales de abundancia o simplemente para crear un ambiente purificado en tu hogar.",ingredientes:"Cera de abeja 100% pura, mecha de algodón natural, sin parafina ni aditivos químicos.",duracion:"Tiempo de combustión: 8-12 horas, dependiendo del tamaño de la vela.",cuidados:"Mantener alejada de corrientes de aire, no mover mientras está encendida, y cortar la mecha a 1cm antes de cada uso para una combustión óptima."},"Miel Consagrada":{elaboracion:"Nuestra miel consagrada es recolectada de colmenas locales y purificadas, sometida a rituales sagrados de consagración bajo la luna llena. El proceso incluye la purificación energética, la bendición ritual y el almacenamiento en recipientes de cristal para preservar su pureza y propiedades energéticas.",proposito:"Especialmente consagrada para rituales de abundancia, prosperidad y manifestación. Su pureza energética la hace ideal para endulzar decretos, rituales de atracción y ceremonias de abundancia, potenciando la ley de atracción y la manifestación de deseos.",beneficios:"Potencia rituales de abundancia y prosperidad, endulza decretos y afirmaciones, atrae energías positivas y oportunidades, fortalece la conexión espiritual, y su pureza energética facilita la manifestación de deseos.",modoUso:"Consumir una cucharadita en ayunas con intención de abundancia, usar para endulzar decretos escritos, agregar a rituales de manifestación, o simplemente consumir con gratitud para atraer prosperidad.",ingredientes:"Miel de abeja 100% pura, sin pasteurizar, sin aditivos químicos ni conservantes artificiales.",duracion:"Conservar en refrigeración hasta 2 años, mantener en recipiente de cristal para preservar sus propiedades energéticas.",cuidados:"Mantener en lugar fresco y seco, alejado de la luz directa del sol, y usar utensilios de madera o cristal para preservar su pureza energética."},"Aceite Abrecaminos":{elaboracion:"Es un producto artesanal, elaborado con extracción de esencias naturales de las plantas. Cada botella es cuidadosamente preparada con ingredientes seleccionados para potenciar sus propiedades energéticas y espirituales.",proposito:"El aceite Abrecaminos, como su nombre lo indica, es un excelente producto para realizar nuestras afirmaciones y decretos, ayuda a suavizar las situaciones negativas y abrirte paso a lo positivo. Diseñado para superar obstáculos y atraer nuevas oportunidades.",beneficios:"Facilita la manifestación de deseos, ayuda a superar obstáculos y bloqueos, atrae nuevas oportunidades y caminos, potencia las afirmaciones y decretos, suaviza situaciones negativas, y abre puertas hacia experiencias positivas.",modoUso:"Con ayuda del gotero, aplica de 2 a 3 gotitas del Aceite Abrecaminos en tus manos, frótalo y mientras lo haces puedes repetir la oración o decreto de tu gusto. Úsalo en rituales de manifestación y meditación.",ingredientes:"Aceite base de oliva, esencias naturales de plantas sagradas, extractos botánicos seleccionados, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado para preservar sus propiedades.",cuidados:"Mantener alejado de la luz directa del sol, no exponer a temperaturas extremas, y usar con respeto y intención positiva."},"Aceite para Ungir":{elaboracion:"Es un producto artesanal, de grado espiritual ya que la palabra Ungido en hebreo significa Mesías. La base es el aceite de Oliva, Mirra, Canela entre otras plantas sagradas. Cada botella es consagrada con rituales especiales para potenciar sus propiedades espirituales.",proposito:"Hoy en día, se están volviendo a usar estos aceites de unción en los eventos de adoración y espirituales, para curar enfermedades y para santificar una muerte. Diseñado para momentos de profunda conexión espiritual y sanación.",beneficios:"Proporciona paz y calma en momentos difíciles, facilita la conexión espiritual profunda, ayuda en procesos de sanación emocional y física, potencia rituales de adoración, y brinda consuelo en momentos de transición.",modoUso:"La persona que aplique el Aceite debe encontrarse en un momento muy espiritual, ya que este requiere mucho respeto. Puesto que es un aceite elaborado con el fin de llevar paz y calma a quien lo necesita en momentos muy difíciles.",ingredientes:"Aceite de oliva virgen extra, mirra, canela, plantas sagradas seleccionadas, esencias consagradas, sin aditivos químicos.",duracion:"Conservar en lugar fresco y seco hasta 3 años. Mantener en recipiente de cristal para preservar su pureza espiritual.",cuidados:"Usar con reverencia y respeto, mantener en lugar sagrado, y aplicar solo en momentos de profunda intención espiritual."},"Shampoo Extracto de Miel":{elaboracion:"Es un Shampoo artesanal, elaborado con extracto natural de Miel para aportar brillo, suavidad y densidad a tu cabello. Cada botella es cuidadosamente preparada con ingredientes naturales seleccionados para el cuidado capilar.",proposito:"El Shampoo artesanal es un excelente auxiliar para el cuidado del cabello, aporta suavidad y brillo natural, al estar elaborado con ingredientes naturales asegura que tu cabello no sufra estrés a causa de los químicos.",beneficios:"Proporciona brillo natural y fortalece desde la raíz, suaviza y nutre el cabello profundamente, evita el estrés capilar causado por químicos, aporta densidad y volumen natural, y mantiene el cabello saludable con ingredientes naturales.",modoUso:"Unta el Shampoo en tus manos, y luego masajea tu cuero cabelludo con las yemas de tus dedos. Hazlo de forma suave, pero sin dejar ningún rincón de tu cuero cabelludo, y continúa con los movimientos hasta que consigas formar espuma.",ingredientes:"Extracto natural de miel, cera de abeja, glicerina, aceites naturales, agentes limpiadores suaves, libre de sulfatos y parabenos.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado para preservar sus propiedades.",cuidados:"Evitar contacto con los ojos, enjuagar completamente después del uso, y mantener alejado de la luz directa del sol."},"Loción Ellas y Ellos":{elaboracion:"Loción artesanal elaborada con ingredientes naturales seleccionados para el cuidado de la piel. Cada botella es preparada con amor y dedicación para brindar la mejor experiencia de cuidado personal.",proposito:"Diseñada para hidratar y nutrir la piel de manera natural, proporcionando suavidad y frescura duradera. Ideal para el uso diario en el cuidado personal.",beneficios:"Hidrata profundamente la piel, proporciona suavidad natural, refresca y revitaliza, nutre con ingredientes naturales, y mantiene la piel saludable y radiante.",modoUso:"Aplicar sobre la piel limpia y seca, masajear suavemente hasta su completa absorción. Usar diariamente para mejores resultados.",ingredientes:"Ingredientes naturales, extractos botánicos, aceites esenciales, glicerina natural, sin parabenos ni químicos agresivos.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Evitar contacto con los ojos, mantener alejado de la luz directa del sol, y usar solo para uso externo."},"Agua Florida":{elaboracion:"Agua de colonia artesanal elaborada con flores naturales y esencias puras. Cada botella es preparada con técnicas tradicionales para capturar la esencia de las flores más hermosas.",proposito:"Diseñada para perfumar y refrescar de manera natural, proporcionando una fragancia floral delicada y duradera que eleva el espíritu.",beneficios:"Proporciona fragancia floral natural, refresca y revitaliza, eleva el ánimo y la energía, hidrata ligeramente la piel, y crea una sensación de bienestar.",modoUso:"Aplicar sobre la piel limpia, especialmente en puntos de pulso como muñecas y cuello. Usar con moderación para una fragancia sutil y elegante.",ingredientes:"Agua destilada, esencias florales naturales, alcohol de grado cosmético, extractos de flores, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 3 años. Mantener el frasco bien cerrado para preservar la fragancia.",cuidados:"Evitar contacto con los ojos, mantener alejado de la luz directa del sol, y aplicar sobre piel sana."},"Exfoliante Abre Caminos":{elaboracion:"Exfoliante corporal artesanal elaborado con ingredientes naturales y cristales de sal marina. Cada envase es preparado con intención positiva para abrir caminos y eliminar obstáculos energéticos.",proposito:"Diseñado para exfoliar la piel mientras limpia energéticamente, ayudando a abrir caminos y eliminar bloqueos que impiden el flujo de energía positiva.",beneficios:"Exfolia suavemente la piel, elimina células muertas, limpia energéticamente, abre caminos y oportunidades, mejora la circulación, y deja la piel suave y renovada.",modoUso:"Aplicar sobre la piel húmeda, masajear suavemente en movimientos circulares, enfocándose en áreas de bloqueo energético, y enjuagar completamente.",ingredientes:"Sal marina natural, aceites esenciales, cristales energéticos, extractos botánicos, glicerina natural, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Evitar contacto con heridas abiertas, no usar en el rostro, y enjuagar completamente después del uso."},Sahumerios:{elaboracion:"Rollitos elaborados de salvia blanca deshidratada combinada con distintas hierbas. Éstas hierbas al quemarse desprenden su aroma que nos ayuda a bajar niveles de tensión, estrés, fatiga etc.",proposito:"En muchas ocasiones nos cargamos de estrés o de energías densas por cuestiones económicas, emocionales o físicas. En la terapia con aromas se tratan esos síntomas o malestares. Algunas hierbas como la Salvia, Romero, Lavanda, aparte de su aroma nos aportan esa energía positiva que nos permite equilibrar nuevamente nuestro espacio mental, físico y espiritual.",beneficios:"Purifica y limpia energéticamente, reduce niveles de tensión y estrés, equilibra el espacio mental y espiritual, aporta energía positiva, ayuda a relajar y calmar, y mejora el ambiente energético del hogar.",modoUso:"Con una velita encendida acercamos el rollito de sahumerio a la llama, esperamos hasta que se encienda bien la base del rollito. Con el humo vamos a pasar por nuestro cuerpo y de otras personas, en objetos y si se requiere por toda la casa o espacio a limpiar.",ingredientes:"Salvia blanca deshidratada, romero, lavanda, hierbas sagradas seleccionadas, sin aditivos químicos.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener en recipiente hermético.",cuidados:"Usar en espacios ventilados, mantener alejado de niños, y apagar completamente después del uso."},"Sal Negra":{elaboracion:"Es el resultado de la quema de hierbas sagradas mezclada con sal de grano, es una preparación para rituales esotéricos que ayuda a contrarrestar hechizos y maldiciones.",proposito:"Este poderoso ingrediente es utilizado en limpiezas energéticas, purificaciones, atrae la buena suerte, aleja los malos espíritus y en muchos casos se utiliza para exorcismos.",beneficios:"Protege contra energías negativas, atrae la buena suerte, aleja malos espíritus, purifica espacios energéticamente, fortalece rituales de protección, y equilibra el campo áurico.",modoUso:"Al iniciar tus rituales protege tu espacio y tu campo áurico con un círculo de Sal negra. Lava tus manos con una pizca de sal negra para retirar energía negativa.",ingredientes:"Sal de grano natural, hierbas sagradas quemadas, cenizas de plantas protectoras, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco indefinidamente. Mantener en recipiente de cristal oscuro.",cuidados:"Usar con respeto y intención positiva, mantener alejado de la luz directa del sol, y no ingerir."},"Polvo de Oro":{elaboracion:"Polvo de oro artesanal elaborado con ingredientes naturales y minerales seleccionados. Cada envase es preparado con intención positiva para atraer abundancia y prosperidad.",proposito:"Diseñado para rituales de abundancia, prosperidad y atracción de riqueza. El polvo de oro potencia las intenciones de abundancia y atrae oportunidades de crecimiento económico.",beneficios:"Atrae abundancia y prosperidad, potencia rituales de riqueza, mejora las oportunidades económicas, fortalece la confianza financiera, atrae suerte en negocios, y equilibra la energía de abundancia.",modoUso:"Aplicar en rituales de abundancia, espolvorear en espacios de trabajo, agregar a ofrendas de prosperidad, o usar en meditaciones de abundancia.",ingredientes:"Minerales naturales, polvo de oro cosmético, hierbas de abundancia, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar con intención positiva, mantener alejado de la humedad, y no ingerir."},"Baño Energético Abre Caminos":{elaboracion:"Baño energético artesanal elaborado con hierbas sagradas y minerales seleccionados. Cada envase es preparado con intención positiva para abrir caminos y eliminar obstáculos.",proposito:"Diseñado para limpieza energética profunda, apertura de caminos y eliminación de bloqueos. El baño energético limpia el aura y prepara el cuerpo para nuevas oportunidades.",beneficios:"Limpia energéticamente el aura, abre caminos y oportunidades, elimina bloqueos energéticos, purifica el cuerpo espiritual, atrae nuevas posibilidades, y equilibra la energía personal.",modoUso:"Agregar al agua del baño, sumergirse durante 20-30 minutos, visualizar la apertura de caminos, y enjuagar con agua limpia al finalizar.",ingredientes:"Hierbas sagradas, minerales energéticos, sal marina, aceites esenciales, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar en baño completo, evitar contacto con los ojos, y enjuagar completamente después del uso."},"Baño Energético Amor Propio":{elaboracion:"Baño energético artesanal elaborado con hierbas de amor y minerales seleccionados. Cada envase es preparado con intención positiva para fortalecer el amor propio y la autoestima.",proposito:"Diseñado para fortalecer el amor propio, mejorar la autoestima y conectar con la energía del amor. El baño energético nutre el corazón y fortalece la relación con uno mismo.",beneficios:"Fortalece el amor propio, mejora la autoestima, nutre el corazón emocional, atrae amor hacia uno mismo, equilibra la energía del chakra del corazón, y fortalece la confianza personal.",modoUso:"Agregar al agua del baño, sumergirse durante 20-30 minutos, meditar sobre el amor propio, y enjuagar con agua limpia al finalizar.",ingredientes:"Hierbas de amor, minerales del corazón, aceites esenciales de rosa, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar en baño completo, evitar contacto con los ojos, y enjuagar completamente después del uso."},"Baño Energético Amargo":{elaboracion:"Baño energético artesanal elaborado con hierbas amargas y minerales seleccionados. Cada envase es preparado con intención positiva para limpieza profunda y eliminación de energías negativas.",proposito:"Diseñado para limpieza energética profunda, eliminación de energías negativas y purificación del aura. El baño amargo limpia y purifica todos los niveles energéticos.",beneficios:"Elimina energías negativas, limpia profundamente el aura, purifica el campo energético, aleja malas energías, fortalece la protección personal, y equilibra la energía espiritual.",modoUso:"Agregar al agua del baño, sumergirse durante 20-30 minutos, visualizar la limpieza energética, y enjuagar con agua limpia al finalizar.",ingredientes:"Hierbas amargas, minerales purificadores, sal marina, aceites esenciales, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el envase bien cerrado.",cuidados:"Usar en baño completo, evitar contacto con los ojos, y enjuagar completamente después del uso."},"Agua de Rosas":{elaboracion:"Agua de rosas artesanal elaborada con pétalos de rosa de la más alta calidad. Cada botella es preparada mediante destilación tradicional para preservar todas las propiedades naturales de la rosa.",proposito:"Diseñada para suavizar, hidratar y nutrir la piel de manera natural. El agua de rosas contiene vitaminas B, C y E que ayudan a combatir la oxidación y mantener la piel saludable.",beneficios:"Suaviza e hidrata la piel profundamente, combate la oxidación celular, es alcohol-free para pieles sensibles, cierra los poros naturalmente, limpia profundamente, elimina el exceso de grasa, y proporciona un aroma relajante.",modoUso:"Aplicar con un suave masaje después de la higiene facial, dejar actuar unos minutos, y continuar con otros productos de cuidado. Usar mañana y noche para mejores resultados.",ingredientes:"Pétalos de rosa destilados, agua purificada, vitaminas B, C y E, sin alcohol, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Evitar contacto con los ojos, mantener alejado de la luz directa del sol, y usar solo para uso externo."},"Shampoo Extracto de Romero":{elaboracion:"Shampoo artesanal elaborado con extracto natural de Romero para fortalecer el cabello. Cada botella es cuidadosamente preparada con ingredientes naturales seleccionados para el cuidado capilar.",proposito:"El Shampoo artesanal de Romero es un excelente auxiliar para el cuidado del cabello, ayuda a fortalecerlo desde la raíz, estimula el crecimiento y previene la caída. Al estar elaborado con ingredientes naturales, asegura que tu cabello no sufra estrés a causa de los químicos.",beneficios:"Fortalece el cabello desde la raíz, estimula el crecimiento capilar, previene la caída del cabello, aporta brillo natural y suavidad, nutre profundamente el cuero cabelludo, y protege el cabello de químicos agresivos.",modoUso:"Unta el Shampoo en tus manos, y luego masajea tu cuero cabelludo con las yemas de tus dedos. Hazlo de forma suave, pero sin dejar ningún rincón de tu cabeza sin masajear. Enjuaga con abundante agua.",ingredientes:"Extracto puro de romero, aceite de coco, glicerina vegetal, agua purificada, tensioactivos naturales derivados de plantas, sin sulfatos ni parabenos.",duracion:"Conservar en lugar fresco y seco hasta 1 año. Mantener el frasco bien cerrado para preservar sus propiedades.",cuidados:"Evitar el contacto con los ojos. En caso de irritación, suspender su uso. Mantener fuera del alcance de los niños."},"Loción Atrayente":{elaboracion:"Es un producto artesanal, elaborado con extracción de esencias naturales de las siete plantas de la Abundancia. Las plantas que más resaltan su aroma tan único son: canela, vainilla, clavo de olor, anís entre otras.",proposito:"La Loción Atrayente, como su nombre lo indica, atrae. ¿Qué atrae?... Todo lo bueno y positivo para tu vida; Amor, Salud, Dinero, y todo lo que más anhelas.",beneficios:"Atrae amor y relaciones positivas, atrae salud y bienestar, atrae dinero y prosperidad, mejora el ambiente energético, fortalece la confianza personal, y equilibra las energías del hogar.",modoUso:"Úsalo como tu loción de diario para atraer todo lo positivo. Lo puedes utilizar igual como ambientador en tu negocio para atraer a más clientes.",ingredientes:"Esencias naturales de canela, vainilla, clavo de olor, anís, plantas de abundancia, aceites esenciales, base hidratante natural, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Usar con intención positiva, mantener alejado de la luz directa del sol, y aplicar sobre piel sana."},"Brisa Áurica Bendición del Dinero":{elaboracion:"Es un producto artesanal, elaborado con extracción de esencias naturales de plantas energéticas. Las plantas que más resaltan su aroma son: Vainilla, Laurel, Canela, semillas de abundancia entre otras, elaborado para limpiar la energía del dinero.",proposito:"La Brisa Aurica es una herramienta de limpieza energética para el bienestar emocional y la protección de las malas vibras. Diseñada específicamente para limpiar y bendecir la energía del dinero y la prosperidad.",beneficios:"Limpia la energía del dinero, atrae prosperidad y abundancia, elimina energías negativas de espacios financieros, protege contra malas vibras, fortalece la confianza en asuntos económicos, y equilibra la energía de abundancia.",modoUso:"Agitar antes de usar. Aplicar en cajas registradoras, billeteras, dinero en efectivo, o espacios de trabajo para eliminar energías negativas y atraer prosperidad.",ingredientes:"Esencias naturales de vainilla, laurel, canela, semillas de abundancia, plantas energéticas, alcohol de grado cosmético, intención positiva, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Usar con intención positiva, mantener alejado de la luz directa del sol, y no ingerir."},"Mascarilla Capilar":{elaboracion:"Es una mascarilla capilar natural libre de sales, sulfatos y parabenos. Elaborada artesanalmente con ingredientes naturales seleccionados para proporcionar hidratación profunda y nutrición intensa al cabello.",proposito:"La mascarilla capilar aporta a tu cabello una hidratación profunda haciendo lucir un brillo intenso y muy sedoso. Diseñada para restaurar la salud capilar y proporcionar nutrición intensa.",beneficios:"Proporciona hidratación profunda, aporta brillo intenso y sedoso, nutre el cabello desde la raíz, fortalece las fibras capilares, reduce el frizz y las puntas abiertas, y mejora la textura general del cabello.",modoUso:"Al contrario de un acondicionador que se usa diario, la mascarilla capilar la debemos usar una vez por semana. Aplícala en todo tu cabello y espera un mínimo de 10 minutos antes de enjuagar.",ingredientes:"Aceites naturales hidratantes, extractos botánicos, proteínas capilares, vitaminas E y B5, sin sulfatos, parabenos ni sales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Evitar contacto con los ojos, enjuagar completamente después del uso, y mantener alejado de la luz directa del sol."},"Feromonas Damas y Caballeros":{elaboracion:"Las feromonas son sustancias químicas secretadas por el cuerpo y algunas plantas, principalmente producidas detrás de las orejas, cuello, pecho y axilas. La principal fuente vegetal es el Sándalo y estas feromonas, combinadas con otras esencias naturales, activan la atracción emocional.",proposito:"Las feromonas son una buena manera de entender por qué alguien puede ser sexualmente atractivo sin una razón clara. Ayudan a determinar la compatibilidad sexual, que es crucial para la atracción y el deseo.",beneficios:"Aumenta la atracción sexual natural, mejora la compatibilidad de pareja, fortalece la conexión emocional, potencia la confianza personal, atrae energías positivas en relaciones, y equilibra el campo energético personal.",modoUso:"Úsalo en la intimidad, aplicando detrás de las orejas, cuello, pecho y puntos de pulso. También puedes agregarlo a tu loción de diario para potenciar su efecto.",ingredientes:"Esencias naturales de sándalo, feromonas sintéticas de grado cosmético, aceites portadores naturales, extractos botánicos, sin conservantes artificiales.",duracion:"Conservar en lugar fresco y seco hasta 2 años. Mantener el frasco bien cerrado.",cuidados:"Usar con moderación, evitar contacto con los ojos, y aplicar solo en zonas recomendadas del cuerpo."}},kR=["Todos","Velas","Lociones","Brisas Áuricas","Exfoliantes","Feromonas","Faciales","Aceites","Shampoo","Cabello","Energéticos","Miel","Protección","Rituales","Sahumerios","Baños Energéticos","Servicios"];function RR(){var or,cl;const[t,e]=ee.useState([]),[n,r]=ee.useState(!1),[i,s]=ee.useState(""),[o,c]=ee.useState("Todos"),[u,h]=ee.useState([]),[m,y]=ee.useState([]),[g,R]=ee.useState([]),[j,M]=ee.useState([]),[F,k]=ee.useState(null),[S,P]=ee.useState(!1),[V,W]=ee.useState(!1),[B,E]=ee.useState(""),[v,T]=ee.useState(!1),[A,D]=ee.useState(""),[I,C]=ee.useState(null),[ve,kt]=ee.useState(null),[Mr,Oe]=ee.useState([]),[Q,se]=ee.useState([]),[ue,Te]=ee.useState(!1),[Ee,je]=ee.useState("login"),[xt,ft]=ee.useState(""),[rn,Gt]=ee.useState(!1),[_o,Or]=ee.useState(!1),[sn,Bn]=ee.useState(!1),w=async()=>{try{if(!ce){console.log("Firebase db not initialized, using empty arrays");return}console.log("Loading products from Firestore..."),console.log("User authentication status:",I?"Logged in":"Not logged in"),console.log("Firebase db object:",ce);const{collection:p,query:b,getDocs:H}=await It(async()=>{const{collection:re,query:Ae,getDocs:ie}=await Promise.resolve().then(()=>Kt);return{collection:re,query:Ae,getDocs:ie}},void 0),J=b(p(ce,"products"));console.log("About to call getDocs...");const te=await H(J);console.log("getDocs completed, snapshot:",te);const me=te.docs.map(re=>({id:re.id,...re.data()}));console.log("All products loaded from Firestore:",me.length),console.log("Products data:",me);const be=me.reduce((re,Ae)=>(re.find(pe=>pe.nombre&&Ae.nombre&&pe.nombre.toLowerCase().trim()===Ae.nombre.toLowerCase().trim())?console.log(`Removing duplicate: "${Ae.nombre}" (ID: ${Ae.id})`):re.push(Ae),re),[]);console.log(`Removed ${me.length-be.length} duplicate products`),console.log("Unique products after deduplication:",be.map(re=>re.nombre));const Re=be.filter(re=>re.categoria&&!["Servicios","servicios"].includes(re.categoria)&&!re.categoria.toLowerCase().includes("kids")&&!re.categoria.toLowerCase().includes("niños")),Me=be.filter(re=>re.categoria&&["Servicios","servicios"].includes(re.categoria));console.log("Services found:",Me.map(re=>re.nombre));const Pe=be.filter(re=>re.categoria&&(re.categoria.toLowerCase().includes("kids")||re.categoria.toLowerCase().includes("niños"))&&!["Servicios","servicios"].includes(re.categoria)),He=be.filter(re=>re.categoria&&(re.categoria.toLowerCase().includes("kids")||re.categoria.toLowerCase().includes("niños"))&&["Servicios","servicios"].includes(re.categoria));console.log("Separated products:",{regular:Re.length,services:Me.length,kidsProducts:Pe.length,kidsServices:He.length}),console.log("Kids Products:",Pe.map(re=>`${re.nombre} (${re.categoria})`)),console.log("Kids Services:",He.map(re=>`${re.nombre} (${re.categoria})`)),h(Re),y(Me),R(Pe),M(He)}catch(p){console.error("Error loading products from Firestore:",p),console.error("Error details:",{code:p.code,message:p.message,stack:p.stack}),console.log("Firestore failed, keeping empty arrays"),h([]),y([]),R([]),M([])}};ee.useEffect(()=>{w()},[]),ee.useEffect(()=>{t.length>0?r(!0):r(!1)},[t.length]),ee.useEffect(()=>{const p=new URLSearchParams(window.location.search),b=p.get("payment"),H=p.get("order_id");b&&H&&(L(b,H),window.history.replaceState({},document.title,window.location.pathname))},[]);const L=async(p,b)=>{try{p==="success"?(await ll({id:b,shippingAddress:fe}),e([]),alert("✅ ¡Pago confirmado! Tu orden ha sido procesada exitosamente.")):p==="failure"?(await Di(b),alert("❌ El pago no pudo ser procesado. Por favor, inténtalo de nuevo.")):p==="pending"&&alert("⏳ Tu pago está siendo procesado. Te notificaremos cuando esté confirmado.")}catch(H){console.error("Error handling payment return:",H),alert("Error procesando el pago. Por favor, contacta soporte.")}};ee.useEffect(()=>{if(!ce){console.log("Firebase db not initialized, skipping real-time listener");return}(async()=>{console.log("Setting up real-time listener for products...");const{collection:b,query:H,onSnapshot:J}=await It(async()=>{const{collection:be,query:Re,onSnapshot:Me}=await Promise.resolve().then(()=>Kt);return{collection:be,query:Re,onSnapshot:Me}},void 0),te=H(b(ce,"products")),me=J(te,be=>{console.log("Products updated in Firestore, refreshing homepage...");const Re=be.docs.map(ie=>({id:ie.id,...ie.data()})),Me=Re.reduce((ie,pe)=>(ie.find(Wn=>Wn.nombre&&pe.nombre&&Wn.nombre.toLowerCase().trim()===pe.nombre.toLowerCase().trim())?console.log(`Removing duplicate: "${pe.nombre}" (ID: ${pe.id})`):ie.push(pe),ie),[]);console.log(`Removed ${Re.length-Me.length} duplicate products`),console.log("Unique products after deduplication:",Me.map(ie=>ie.nombre));const Pe=Me.filter(ie=>ie.categoria&&!["Servicios","servicios"].includes(ie.categoria)&&!ie.categoria.toLowerCase().includes("kids")&&!ie.categoria.toLowerCase().includes("niños")),He=Me.filter(ie=>ie.categoria&&["Servicios","servicios"].includes(ie.categoria));console.log("Services found:",He.map(ie=>ie.nombre));const re=Me.filter(ie=>ie.categoria&&(ie.categoria.toLowerCase().includes("kids")||ie.categoria.toLowerCase().includes("niños"))&&!["Servicios","servicios"].includes(ie.categoria)),Ae=Me.filter(ie=>ie.categoria&&(ie.categoria.toLowerCase().includes("kids")||ie.categoria.toLowerCase().includes("niños"))&&["Servicios","servicios"].includes(ie.categoria));console.log("Kids Products:",re.map(ie=>`${ie.nombre} (${ie.categoria})`)),console.log("Kids Services:",Ae.map(ie=>`${ie.nombre} (${ie.categoria})`)),h(Pe),y(He),R(re),M(Ae)},be=>{console.error("Error in products listener:",be)});return()=>me()})()},[]);const[G,oe]=ee.useState(!1),[fe,lt]=ee.useState({fullName:"",address:"",city:"",state:"",zipCode:"",phone:"",notes:""}),[gn,on]=ee.useState(!1),[Ft,$n]=ee.useState(""),[rr,An]=ee.useState(""),[ke,yn]=ee.useState(null),[Ke,ze]=ee.useState(""),[ir,Z]=ee.useState(!1),Le=new fS("re_T8PmbfXN_PKf26mPZa8MY1sBmJd52nYJE");ee.useEffect(()=>{(async()=>{try{console.log("🧪 Testing Resend connection..."),console.log("🧪 API Key:","re_T8PmbfXN_PKf26mPZa8MY1sBmJd52nYJE"),console.log("🧪 Resend object created:",!!Le)}catch(b){console.error("🧪 Resend connection test failed:",b)}})()},[]),[...new Set(u.map(p=>p.categoria))];const Ut=u.filter(p=>{const b=i===""||p.nombre.toLowerCase().includes(i.toLowerCase())||p.descripcion.toLowerCase().includes(i.toLowerCase())||p.tags.some(J=>J.toLowerCase().includes(i.toLowerCase())),H=o==="Todos"||p.categoria===o;return b&&H}),pt=p=>{s(p.target.value)},vn=async p=>{if(!I){Te(!0),je("login");return}const b=p.stock||0,H=t.find(te=>te.id===p.id),J=H?H.quantity:0;if(b===0){alert("❌ Este producto está agotado y no está disponible para la venta.");return}if(J>=b){alert(`❌ No hay suficiente stock disponible. Solo quedan ${b} unidades.`);return}e(te=>te.find(be=>be.id===p.id)?te.map(be=>be.id===p.id?{...be,quantity:be.quantity+1}:be):[...te,{...p,quantity:1}]),await cs(p)},cs=async p=>{try{if(!I||!I.uid){console.log("No user or UID, skipping cart tracking");return}console.log("Tracking cart addition for product:",p.nombre),console.log("User:",I.email,"UID:",I.uid);const b={userId:I.uid,customerName:(ve==null?void 0:ve.name)||I.email||"Cliente",customerEmail:I.email||"no-email@example.com",productId:p.id,productName:p.nombre,productPrice:p.precio,quantity:1,addedAt:new Date,status:"in_cart"};console.log("Cart item to save:",b);const{collection:H,addDoc:J}=await It(async()=>{const{collection:Ae,addDoc:ie}=await Promise.resolve().then(()=>Kt);return{collection:Ae,addDoc:ie}},void 0),te=await J(H(ce,"cart_items"),b);console.log("Cart addition tracked successfully! Doc ID:",te.id);const{getDoc:me}=await It(async()=>{const{getDoc:Ae}=await Promise.resolve().then(()=>Kt);return{getDoc:Ae}},void 0),be=await me(te);console.log("Verification - saved item:",be.exists()?be.data():"NOT FOUND"),console.log("Cart item saved:",b);const{query:Re,where:Me,getDocs:Pe}=await It(async()=>{const{query:Ae,where:ie,getDocs:pe}=await Promise.resolve().then(()=>Kt);return{query:Ae,where:ie,getDocs:pe}},void 0),He=Re(H(ce,"cart_items"),Me("userId","==",I.uid)),re=await Pe(He);console.log("🔍 Immediate query test - found items:",re.docs.length),re.docs.length>0&&console.log("🔍 Items found:",re.docs.map(Ae=>({id:Ae.id,...Ae.data()})))}catch(b){console.error("Error tracking cart addition:",b),console.error("Error details:",{code:b.code,message:b.message,stack:b.stack})}},ki=async()=>{try{if(!I||I.email!=="admin@amorymiel.com"){console.log("User not authenticated or not admin:",I==null?void 0:I.email);return}console.log("Ensuring admin permissions for:",I.email,I.uid);const{doc:p,setDoc:b}=await It(async()=>{const{doc:te,setDoc:me}=await Promise.resolve().then(()=>Kt);return{doc:te,setDoc:me}},void 0),H=p(ce,"users",I.uid),J={uid:I.uid,email:I.email,name:"Administrador",isAdmin:!0,role:"admin",createdAt:new Date,updatedAt:new Date};console.log("Setting admin data:",J),await b(H,J,{merge:!0}),console.log("✅ Admin permissions ensured in Firestore"),kt(J),Or(!0),alert("✅ Permisos de administrador configurados correctamente")}catch(p){console.error("❌ Error ensuring admin permissions:",p),console.error("Error details:",{code:p.code,message:p.message,stack:p.stack}),alert("Error setting admin permissions: "+p.message)}},Lr=p=>{e(b=>b.filter(H=>H.id!==p))},us=(p,b)=>{if(b<=0){Lr(p);return}e(H=>H.map(J=>J.id===p?{...J,quantity:b}:J))},Ri=()=>t.reduce((p,b)=>p+b.precio*b.quantity,0),nl=async()=>{if(!I){Te(!0),je("login");return}if(t.length===0){alert("Tu carrito está vacío. Agrega productos antes de proceder al pago.");return}oe(!0)},rl=async()=>{if(!I){alert("Por favor, inicia sesión para continuar con el pago");return}if(t.length===0){alert("Tu carrito está vacío");return}try{await Pi(),oe(!1),Z(!0)}catch(p){console.error("Error processing payment:",p),alert("Error al procesar el pago. Por favor, inténtalo de nuevo.")}},Pi=async()=>{try{const{collection:p,query:b,getDocs:H,updateDoc:J,doc:te}=await It(async()=>{const{collection:Re,query:Me,getDocs:Pe,updateDoc:He,doc:re}=await Promise.resolve().then(()=>Kt);return{collection:Re,query:Me,getDocs:Pe,updateDoc:He,doc:re}},void 0),me=b(p(ce,"cart_items"),dr("userId","==",I.uid),dr("status","==","in_cart")),be=await H(me);for(const Re of be.docs)await J(te(ce,"cart_items",Re.id),{status:"payment_initiated",paymentInitiatedAt:new Date}),console.log("Cart item marked as payment initiated:",Re.id)}catch(p){console.error("Error marking cart items as payment initiated:",p)}},Di=async p=>{try{console.log("🛒 markPaymentAsAbandoned called for orderId:",p),console.log("👤 User:",I==null?void 0:I.email,"UID:",I==null?void 0:I.uid);const{collection:b,query:H,getDocs:J,updateDoc:te,doc:me}=await It(async()=>{const{collection:pe,query:mt,getDocs:Wn,updateDoc:ar,doc:xo}=await Promise.resolve().then(()=>Kt);return{collection:pe,query:mt,getDocs:Wn,updateDoc:ar,doc:xo}},void 0),be=H(b(ce,"cart_items"),dr("userId","==",I.uid),dr("status","==","payment_initiated")),Re=await J(be);console.log("📦 Found cart items with payment_initiated status:",Re.docs.length),Re.docs.length>0&&console.log("📦 Payment initiated items:",Re.docs.map(pe=>({id:pe.id,...pe.data()})));const Me=H(b(ce,"cart_items"),dr("userId","==",I.uid),dr("status","==","in_cart")),Pe=await J(Me);console.log("🛍️ Found cart items with in_cart status:",Pe.docs.length),Pe.docs.length>0&&console.log("🛍️ In cart items:",Pe.docs.map(pe=>({id:pe.id,...pe.data()})));const He=H(b(ce,"cart_items"),dr("userId","==",I.uid)),re=await J(He);console.log("🔍 ALL cart items for user:",re.docs.length),re.docs.length>0&&console.log("🔍 All items:",re.docs.map(pe=>({id:pe.id,...pe.data()})));const Ae=[];let ie=0;for(const pe of Re.docs){const mt=pe.data();Ae.push(mt),ie+=mt.productPrice*mt.quantity,await te(me(ce,"cart_items",pe.id),{status:"abandoned",abandonedAt:new Date,orderId:p}),console.log("Cart item marked as abandoned:",pe.id)}for(const pe of Pe.docs){const mt=pe.data();Ae.push(mt),ie+=mt.productPrice*mt.quantity,await te(me(ce,"cart_items",pe.id),{status:"abandoned",abandonedAt:new Date,orderId:p}),console.log("Cart item marked as abandoned:",pe.id)}if(Ae.length===0&&t.length>0){console.log("🛒 No Firestore items found, using current cart items");for(const pe of t){const mt={productName:pe.nombre||pe.name,productPrice:pe.precio||pe.price,quantity:pe.quantity||1,customerName:(ve==null?void 0:ve.name)||I.email||"Cliente",customerEmail:I.email};Ae.push(mt),ie+=mt.productPrice*mt.quantity}console.log("🛒 Using current cart items:",Ae)}if(console.log("📧 Total abandoned items:",Ae.length),console.log("💰 Cart total:",ie),Ae.length>0&&I){const pe=(ve==null?void 0:ve.name)||I.email||"Cliente";console.log("📤 Sending cart abandonment email to:",I.email),await il(I.email,pe,Ae,ie)}else console.log("❌ No items to send abandonment email for")}catch(b){console.error("Error marking payment as abandoned:",b)}},wo=async p=>{p.preventDefault(),W(!0),E("");const b=new FormData(p.target),H={from_name:b.get("name"),from_email:b.get("email"),from_phone:b.get("phone"),message:b.get("message"),name:b.get("name"),email:b.get("email")};try{const J=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Contact Us - Amor y Miel</title>
        </head>
        <body style="margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f8f9fa;">
            <div style="max-width: 600px; margin: 0 auto; background-color: #ffffff;">
                <!-- Header -->
                <div style="background: linear-gradient(135deg, #d4a574 0%, #c9a876 100%); padding: 30px 20px; text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 10px;">🍯</div>
                    <h1 style="color: #ffffff; margin: 0; font-size: 28px; font-weight: bold;">Amor y Miel</h1>
                    <h2 style="color: #ffffff; margin: 10px 0 0 0; font-size: 20px; font-weight: normal;">Nuevo Mensaje de Contacto</h2>
                </div>

                <!-- Main Content -->
                <div style="padding: 30px 20px;">
                    <p style="color: #333333; font-size: 16px; line-height: 1.6; margin: 0 0 20px 0;">
                        ¡Hola! 👋
                    </p>
                    
                    <p style="color: #333333; font-size: 16px; line-height: 1.6; margin: 0 0 20px 0;">
                        Has recibido un nuevo mensaje a través del formulario de contacto de tu sitio web.
                    </p>

                    <!-- Contact Details -->
                    <div style="background-color: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0;">
                        <h3 style="color: #333333; margin: 0 0 15px 0; font-size: 18px;">📋 Detalles del Contacto</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <strong style="color: #d4a574; font-size: 14px;">👤 NOMBRE:</strong>
                            <p style="color: #333333; font-size: 16px; margin: 5px 0 0 0; font-weight: 500;">${H.name}</p>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong style="color: #d4a574; font-size: 14px;">📧 EMAIL:</strong>
                            <p style="color: #333333; font-size: 16px; margin: 5px 0 0 0;">
                                <a href="mailto:${H.email}" style="color: #d4a574; text-decoration: none;">${H.email}</a>
                            </p>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong style="color: #d4a574; font-size: 14px;">📅 FECHA:</strong>
                            <p style="color: #333333; font-size: 16px; margin: 5px 0 0 0;">${new Date().toLocaleString("es-MX")}</p>
                        </div>
                    </div>

                    <!-- Message Content -->
                    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%); border: 2px solid #4CAF50; border-radius: 8px; padding: 20px; margin: 20px 0;">
                        <h3 style="color: #2e7d32; margin: 0 0 15px 0; font-size: 18px;">💬 MENSAJE</h3>
                        <div style="background-color: #ffffff; border-radius: 6px; padding: 15px; border-left: 4px solid #4CAF50;">
                            <p style="color: #333333; font-size: 16px; line-height: 1.6; margin: 0; white-space: pre-wrap;">${H.message}</p>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div style="background-color: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0;">
                        <h3 style="color: #333333; margin: 0 0 15px 0; font-size: 18px;">⚡ Acciones Rápidas</h3>
                        
                        <div style="text-align: center; margin: 20px 0;">
                            <a href="mailto:${H.email}?subject=Re: Tu consulta en Amor y Miel&body=Hola ${H.name},%0D%0A%0D%0AGracias por contactarnos.%0D%0A%0D%0A" 
                               style="display: inline-block; background: linear-gradient(135deg, #d4a574 0%, #c9a876 100%); color: #ffffff; text-decoration: none; padding: 12px 25px; border-radius: 25px; font-size: 14px; font-weight: bold; margin: 5px; box-shadow: 0 4px 8px rgba(212, 165, 116, 0.3);">
                                📧 Responder por Email
                            </a>
                        </div>
                        
                        <div style="text-align: center; margin: 20px 0;">
                            <a href="https://wa.me/529991320209?text=Hola%20${H.name},%20vi%20tu%20mensaje%20en%20nuestro%20sitio%20web" 
                               style="display: inline-block; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: #ffffff; text-decoration: none; padding: 12px 25px; border-radius: 25px; font-size: 14px; font-weight: bold; margin: 5px; box-shadow: 0 4px 8px rgba(37, 211, 102, 0.3);">
                                💬 Responder por WhatsApp
                            </a>
                        </div>
                    </div>

                    <!-- Footer Info -->
                    <div style="background-color: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center;">
                        <p style="color: #666666; font-size: 14px; margin: 0 0 10px 0;">
                            <strong>💡 Tip:</strong> Responde dentro de las primeras 24 horas para una mejor experiencia del cliente
                        </p>
                        <p style="color: #999999; font-size: 12px; margin: 0;">
                            Este mensaje fue enviado desde el formulario de contacto de tu sitio web
                        </p>
                    </div>
                </div>

                <!-- Footer -->
                <div style="background-color: #f8f9fa; padding: 20px; text-align: center; border-top: 1px solid #e9ecef;">
                    <p style="color: #666666; font-size: 12px; margin: 0 0 10px 0;">
                        Amor y Miel - Productos artesanales de miel
                    </p>
                    <p style="color: #999999; font-size: 11px; margin: 0;">
                        <a href="https://amorymiel.com" style="color: #d4a574; text-decoration: none;">Visitar Sitio Web</a> | 
                        <a href="https://amorymiel.com/contacto" style="color: #d4a574; text-decoration: none;">Contacto</a>
                    </p>
                </div>
            </div>
        </body>
        </html>
      `;await Le.emails.send({from:"Amor y Miel <noreply@amorymiel.com>",to:"info@amorymiel.com",subject:`Nuevo mensaje de contacto de ${H.name}`,html:J}),E("¡Mensaje enviado exitosamente! Te contactaremos pronto."),p.target.reset()}catch(J){console.error("Error sending email:",J),E("Error al enviar el mensaje. Por favor, inténtalo de nuevo.")}finally{W(!1)}},sr=async p=>{p.preventDefault(),T(!0),D("");const b=p.target.email.value;`${b}${new Date().toLocaleDateString()}`;try{await Le.emails.send({from:"Amor y Miel <noreply@amorymiel.com>",to:"info@amorymiel.com",subject:`New newsletter subscriber: ${b}`,html:`<h2>New Newsletter Subscriber</h2><p><strong>Email:</strong> ${b}</p>`}),D("¡Te has suscrito exitosamente! Recibirás nuestros tips de bienestar."),p.target.reset()}catch(H){console.error("Error sending newsletter subscription:",H),D("Error al suscribirse. Por favor, inténtalo de nuevo.")}finally{T(!1)}},il=async(p,b,H,J)=>{try{console.log("📧 sendCartAbandonmentEmail called"),console.log("📧 User email:",p),console.log("📧 User name:",b),console.log("📧 Cart items:",H),console.log("📧 Cart total:",J);const te=H.map(Pe=>`${Pe.productName||Pe.nombre} x ${Pe.quantity}`).join(", "),me=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(J),be=`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Cart Abandonment - Amor y Miel</title>
        </head>
        <body style="margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f8f9fa;">
            <div style="max-width: 600px; margin: 0 auto; background-color: #ffffff;">
                <div style="background: linear-gradient(135deg, #d4a574 0%, #c9a876 100%); padding: 30px 20px; text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 10px;">🍯</div>
                    <h1 style="color: #ffffff; margin: 0; font-size: 28px; font-weight: bold;">Amor y Miel</h1>
                    <h2 style="color: #ffffff; margin: 10px 0 0 0; font-size: 20px; font-weight: normal;">¿Olvidaste algo en tu carrito?</h2>
                </div>
                <div style="padding: 30px 20px;">
                    <p style="color: #333333; font-size: 16px; line-height: 1.6; margin: 0 0 20px 0;">
                        ¡Hola ${b}! 👋
                    </p>
                    <p style="color: #333333; font-size: 16px; line-height: 1.6; margin: 0 0 20px 0;">
                        Notamos que agregaste algunos productos a tu carrito pero no completaste la compra. 
                        ¡No te preocupes! Tus productos siguen esperándote. 🛒
                    </p>
                    <div style="background-color: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0;">
                        <h3 style="color: #333333; margin: 0 0 15px 0; font-size: 18px;">🛍️ Productos en tu carrito:</h3>
                        <p style="color: #666666; font-size: 14px; margin: 0 0 10px 0;">${te}</p>
                        <p style="color: #333333; font-size: 16px; font-weight: bold; margin: 0;">
                            Total: ${me}
                        </p>
                    </div>
                    <div style="text-align: center; margin: 30px 0;">
                        <a href="https://amorymiel.com" style="display: inline-block; background: linear-gradient(135deg, #d4a574 0%, #c9a876 100%); color: #ffffff; text-decoration: none; padding: 15px 30px; border-radius: 25px; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(212, 165, 116, 0.3);">
                            🛒 Completar Compra
                        </a>
                    </div>
                    <p style="color: #666666; font-size: 14px; line-height: 1.6; margin: 20px 0 0 0;">
                        Si tienes alguna pregunta, no dudes en contactarnos. ¡Estamos aquí para ayudarte! 💝
                    </p>
                </div>
                <div style="background-color: #f8f9fa; padding: 20px; text-align: center; border-top: 1px solid #e9ecef;">
                    <p style="color: #666666; font-size: 12px; margin: 0 0 10px 0;">
                        Amor y Miel - Productos artesanales de miel
                    </p>
                </div>
            </div>
        </body>
        </html>
      `;console.log("🚀🚀🚀 FORCE DEPLOYMENT - NEW CODE IS HERE - Attempting to send email via Resend API directly...");let Re;try{Re=await fetch("https://api.resend.com/emails",{method:"POST",headers:{Authorization:"Bearer re_T8PmbfXN_PKf26mPZa8MY1sBmJd52nYJE","Content-Type":"application/json"},body:JSON.stringify({from:"Amor y Miel <noreply@amorymiel.com>",to:[p],subject:"¿Olvidaste algo en tu carrito? 🛒",html:be})})}catch{console.log("❌ Direct API call failed due to CORS, trying alternative approach...");const He=new FormData;He.append("to",p),He.append("subject","¿Olvidaste algo en tu carrito? 🛒"),He.append("html",be),Re=await fetch("/api/send-email",{method:"POST",body:He})}const Me=await Re.json();return Re.ok?(console.log("✅ Cart abandonment email sent successfully!",Me),!0):(console.error("❌ Resend API error:",Me),!1)}catch(te){return console.error("❌ Error sending cart abandonment email:",te),!1}},ds=async(p,b,H)=>{try{const J={to_email:p,customer_name:b,order_id:H.id,order_total:new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(H.total),order_items:H.items.map(te=>`${te.nombre} x${te.quantity}`).join(", "),tracking_number:H.trackingNumber,order_date:new Date(H.createdAt).toLocaleDateString("es-MX"),estimated_delivery:new Date(Date.now()+2592e5).toLocaleDateString("es-MX")};await Le.emails.send({from:"Amor y Miel <noreply@amorymiel.com>",to:p,subject:`Order Confirmed #${H.id}!`,html:`<h1>Order Confirmed!</h1><p>Hello ${b}, your order ${H.id} has been confirmed!</p>`}),console.log("Order confirmation email sent to:",p)}catch(J){console.error("Error sending order confirmation email:",J)}},sl=async(p,b,H)=>{try{console.log("Creating user account for:",p);const te=(await XT(Vo,p,b)).user;console.log("User created with UID:",te.uid);const me={uid:te.uid,email:p,name:H,createdAt:new Date,wishlist:[],orderHistory:[],preferences:{newsletter:!0,notifications:!0}};console.log("Saving user data to Firestore:",me),await Jx(Yt(ce,"users",te.uid),me),console.log("User data saved successfully to Firestore"),ft("¡Cuenta creada exitosamente!"),Te(!1)}catch(J){console.error("Error creating account:",J),ft("Error al crear cuenta: "+J.message)}},ji=async(p,b)=>{try{const J=(await JT(Vo,p,b)).user;await fr(Yt(ce,"users",J.uid),{lastLogin:new Date}),ft("¡Inicio de sesión exitoso!"),Te(!1)}catch(H){ft("Error al iniciar sesión: "+H.message)}},ol=async()=>{try{await nA(Vo),C(null),kt(null),Oe([]),se([])}catch(p){console.error("Error signing out:",p)}},Et=async p=>{try{await YT(Vo,p),ft("Se ha enviado un enlace de recuperación a tu email.")}catch(b){ft("Error al enviar email de recuperación: "+b.message)}};ee.useEffect(()=>{const p=tA(Vo,async b=>{if(b)if(C(b),b.email==="admin@amorymiel.com")Or(!0),await ki();else{const J=await ef(Yt(ce,"users",b.uid));if(J.exists()){const te=J.data();kt(te),Oe(te.wishlist||[]),se(te.orderHistory||[]),Or(te.isAdmin===!0)}}else C(null),kt(null),Oe([]),se([]),Or(!1)});return()=>p()},[]);const al=async p=>{if(!I)return;const b=[...Q,p];se(b),await fr(Yt(ce,"users",I.uid),{orderHistory:b})},Ni=async p=>{try{for(const b of p){const H=Yt(ce,"products",b.id),J=await ef(H);if(J.exists()){const te=J.data(),me=Math.max(0,(te.stock||0)-b.quantity);await fr(H,{stock:me,lastUpdated:new Date}),console.log(`Reduced stock for ${b.nombre}: ${te.stock} → ${me}`)}else console.warn(`Product ${b.id} not found in Firestore`)}}catch(b){throw console.error("Error reducing stock:",b),b}},Mi=()=>{const p="AMY",b=Date.now().toString().slice(-6),H=Math.random().toString(36).substr(2,3).toUpperCase();return`${p}-${b}-${H}`},ll=async p=>{try{if(!I||!I.uid)throw new Error("User not authenticated");const b=`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,H=Mi(),J=new Date,te={...p,id:b,userId:I.uid,customerName:(ve==null?void 0:ve.name)||I.email||"Cliente",customerEmail:I.email||"no-email@example.com",items:t,total:Ri(),shippingAddress:fe,createdAt:J,updatedAt:J,status:"processing",trackingNumber:H,statusHistory:[{status:"processing",timestamp:J,note:"Orden recibida y siendo preparada",updatedBy:"system"}]};console.log("Creating order:",te),console.log("Attempting to save order to Firestore..."),await Bp(Rn(ce,"orders"),te),console.log("Order saved to Firestore successfully"),console.log("Attempting to add order to user history..."),await al(te),console.log("Order added to user history successfully"),console.log("Attempting to reduce stock for order items..."),await Ni(t),console.log("Stock reduced successfully"),e([]),console.log("Cart cleared");try{await ds(I.email,(ve==null?void 0:ve.name)||I.email,te),console.log("Order confirmation email sent")}catch(me){console.warn("Failed to send order confirmation email:",me)}return te}catch(b){throw console.error("Error creating order:",b),b}},$u=async()=>{if(!Ft.trim()&&!rr.trim()){ze("Por favor ingresa el ID de la orden, número de rastreo o tu email");return}try{ze("");const{collection:p,query:b,getDocs:H,or:J,where:te}=await It(async()=>{const{collection:Pe,query:He,getDocs:re,or:Ae,where:ie}=await Promise.resolve().then(()=>Kt);return{collection:Pe,query:He,getDocs:re,or:Ae,where:ie}},void 0);let me;Ft.trim()?me=b(p(ce,"orders"),J(te("id","==",Ft.trim()),te("trackingNumber","==",Ft.trim()))):me=b(p(ce,"orders"),te("customerEmail","==",rr.trim()));const be=await H(me);if(be.empty){ze("No se encontró ninguna orden con los datos proporcionados"),yn(null);return}const Re=be.docs.map(Pe=>({id:Pe.id,...Pe.data()})),Me=Ft.trim()?Re[0]:Re.sort((Pe,He)=>He.createdAt-Pe.createdAt)[0];yn(Me),console.log("Order found:",Me)}catch(p){console.error("Error tracking order:",p),ze("Error al buscar la orden. Por favor, inténtalo de nuevo."),yn(null)}};return l.jsxs("div",{style:{background:x.D.fondo,minHeight:"100vh"},children:[l.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),l.jsx("header",{style:{background:"#FBF2DE",boxShadow:"0 2px 20px rgba(0,0,0,0.08)",position:"sticky",top:0,zIndex:100,padding:window.innerWidth<=768?"0.5rem 0":"1rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:window.innerWidth<=768?"0.5rem":"1rem"},children:[l.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:l.jsx("img",{src:"/images/logo/amorymiellogo.png",alt:"Amor y Miel",style:{height:window.innerWidth<=768?"60px":"80px"}})}),l.jsxs("nav",{style:{display:window.innerWidth<=768?"none":"flex",gap:"2rem",alignItems:"center",flexWrap:"wrap"},children:[l.jsx("a",{href:"#inicio",style:{color:x.D.carbon,textDecoration:"none"},children:"Inicio"}),l.jsx("a",{href:"#productos",style:{color:x.D.carbon,textDecoration:"none"},children:"Productos"}),l.jsx("a",{href:"#servicios",style:{color:x.D.carbon,textDecoration:"none"},children:"Servicios"}),l.jsx("a",{href:"#kids",style:{color:x.D.carbon,textDecoration:"none"},children:"Para Niños"}),l.jsx("a",{href:"#quienes-somos",style:{color:x.D.carbon,textDecoration:"none"},children:"Quiénes somos"}),l.jsx("a",{href:"#contacto",style:{color:x.D.carbon,textDecoration:"none"},children:"Contacto"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.5rem":"1rem",flexWrap:"wrap"},children:[l.jsx("input",{type:"text",placeholder:"Buscar productos...",value:i,onChange:pt,style:{padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",border:`2px solid ${x.D.crema}`,borderRadius:"25px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",width:window.innerWidth<=768?"150px":"200px",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>{p.target.style.borderColor=x.D.miel},onBlur:p=>{p.target.style.borderColor=x.D.crema}}),I?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.5rem":"1rem",flexWrap:"wrap"},children:[l.jsxs("span",{style:{color:x.D.carbon,fontSize:"0.9rem"},children:["¡Hola, ",(ve==null?void 0:ve.name)||I.email,"!"]}),_o&&l.jsx("button",{onClick:()=>Gt(!0),style:{background:`linear-gradient(135deg, ${x.D.verde} 0%, #8EB080 100%)`,color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",transition:"all 0.3s ease",fontWeight:"bold"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.2)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="none"},children:"🛠️ Admin Dashboard"}),l.jsx("button",{onClick:()=>on(!0),style:{background:`linear-gradient(135deg, ${x.D.verde} 0%, #8EB080 100%)`,color:"white",border:"none",padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",borderRadius:"20px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",cursor:"pointer",transition:"all 0.3s ease",fontWeight:"bold",boxShadow:"0 2px 8px rgba(98, 141, 106, 0.3)"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 4px 12px rgba(98, 141, 106, 0.4)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="0 2px 8px rgba(98, 141, 106, 0.3)"},children:"📦 Rastrear Orden"}),l.jsx("button",{onClick:ol,style:{background:"transparent",border:`2px solid ${x.D.miel}`,color:x.D.miel,padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",borderRadius:"20px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.background=x.D.miel,p.target.style.color="white"},onMouseLeave:p=>{p.target.style.background="transparent",p.target.style.color=x.D.miel},children:"Cerrar Sesión"})]}):l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.5rem":"1rem",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>on(!0),style:{background:`linear-gradient(135deg, ${x.D.verde} 0%, #8EB080 100%)`,color:"white",border:"none",padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",borderRadius:"20px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",cursor:"pointer",transition:"all 0.3s ease",fontWeight:"bold",boxShadow:"0 2px 8px rgba(98, 141, 106, 0.3)"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 4px 12px rgba(98, 141, 106, 0.4)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="0 2px 8px rgba(98, 141, 106, 0.3)"},children:"📦 Rastrear Orden"}),l.jsx("button",{onClick:()=>{Te(!0),je("login")},style:{background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",borderRadius:"20px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 4px 15px rgba(224, 167, 58, 0.3)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="none"},children:"Iniciar Sesión"})]}),l.jsxs("div",{onClick:()=>r(!0),style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.3rem":"0.5rem",cursor:"pointer",padding:window.innerWidth<=768?"0.4rem 0.6rem":"0.5rem 0.8rem",borderRadius:"8px",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,border:"none",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(224, 167, 58, 0.3)"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 4px 12px rgba(224, 167, 58, 0.4)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 8px rgba(224, 167, 58, 0.3)"},children:[l.jsx("span",{style:{fontSize:"20px"},children:"🛍️"}),l.jsx("span",{style:{color:"white",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"600"},children:I?`Carrito (${t.length})`:"Inicia sesión para comprar"})]})]})]})}),l.jsx("section",{id:"inicio",style:{background:"linear-gradient(135deg, #FBF2DE 0%, #FFFFFF 65%)",padding:"1rem 0",minHeight:"60vh",display:"flex",alignItems:"center"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:window.innerWidth<=768?"1rem":"2rem",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("h1",{style:{fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:"bold",color:x.D.carbon,margin:"0 0 1.5rem 0",lineHeight:"1.2"},children:["Cuidado natural, artesanal y"," ",l.jsx("span",{style:{color:x.D.miel},children:"con amor."})]}),l.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",color:"#666",margin:"0 0 2rem 0",lineHeight:"1.6"},children:"Productos y rituales holísticos inspirados en la miel, las plantas y la energía del bienestar."}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:[l.jsx("button",{style:{background:x.D.miel,color:"white",border:"none",padding:"1rem 2rem",borderRadius:"25px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"600"},onClick:()=>document.getElementById("productos").scrollIntoView({behavior:"smooth"}),children:"Ver productos"}),l.jsx("button",{style:{background:"transparent",color:x.D.miel,border:`2px solid ${x.D.miel}`,padding:"1rem 2rem",borderRadius:"25px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"600"},onClick:()=>document.getElementById("servicios").scrollIntoView({behavior:"smooth"}),children:"+ Ver servicios"})]}),l.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:"🌿"}),l.jsx("span",{style:{color:x.D.carbon,fontSize:"0.9rem"},children:"100% natural"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:"💰"}),l.jsx("span",{style:{color:x.D.carbon,fontSize:"0.9rem"},children:"Precios justos"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:"❤️"}),l.jsx("span",{style:{color:x.D.carbon,fontSize:"0.9rem"},children:"Hecho con amor"})]})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"center"},children:l.jsx("div",{style:{background:"white",borderRadius:"20px",padding:"1rem",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",maxWidth:"750px"},children:l.jsx("img",{src:"/images/catalog/Lucid_Origin_Stunning_3D_rendered_lifestyle_image_featuring_la_0.jpg",alt:"Productos Amor y Miel",style:{width:"100%",height:"auto",borderRadius:"15px",objectFit:"cover"},onError:p=>{p.target.src="/images/logo/amorymiellogo.png"}})})})]})}),l.jsx("section",{style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem 0",borderBottom:`1px solid ${x.D.crema}`},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[l.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:x.D.carbon,fontSize:"1.5rem",fontWeight:"600"},children:"Categorías"}),l.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.95rem"},children:"Explora nuestros productos por categoría"})]}),l.jsx("div",{style:{display:"flex",gap:"0.8rem",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},children:kR.map(p=>l.jsx("button",{onClick:()=>c(p),style:{background:o===p?`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`:"white",color:o===p?"white":x.D.carbon,border:o===p?"none":`2px solid ${x.D.crema}`,padding:"0.7rem 1.5rem",borderRadius:"30px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",transition:"all 0.3s ease",boxShadow:o===p?"0 4px 15px rgba(212, 165, 116, 0.3)":"0 2px 8px rgba(0,0,0,0.05)",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:b=>{o!==p&&(b.target.style.borderColor=x.D.miel,b.target.style.transform="translateY(-2px)",b.target.style.boxShadow="0 4px 12px rgba(212, 165, 116, 0.2)")},onMouseLeave:b=>{o!==p&&(b.target.style.borderColor=x.D.crema,b.target.style.transform="translateY(0)",b.target.style.boxShadow="0 2px 8px rgba(0,0,0,0.05)")},children:p},p))}),l.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem"},children:l.jsxs("span",{style:{color:"#666",fontSize:"0.9rem",fontWeight:"500"},children:[Ut.length," ",Ut.length===1?"producto":"productos",o!=="Todos"&&` en ${o.toLowerCase()}`]})})]})}),l.jsx("section",{id:"productos",style:{padding:"1rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{color:x.D.carbon,margin:"0 0 0.5rem 0",fontSize:"3rem",fontWeight:"700",letterSpacing:"-0.02em"},children:"Nuestros Productos"}),l.jsx("div",{style:{width:"80px",height:"4px",background:`linear-gradient(90deg, ${x.D.miel} 0%, #d4a574 100%)`,margin:"0 auto",borderRadius:"2px"}}),l.jsx("p",{style:{color:"#666",fontSize:"1.1rem",margin:"1rem 0 0 0",fontWeight:"400"},children:"Productos artesanales elaborados con amor y consagrados para tu bienestar"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2.5rem)"},children:Ut.map(p=>l.jsxs("div",{style:{background:"linear-gradient(145deg, #ffffff 0%, #fefefe 100%)",borderRadius:"24px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",border:`2px solid ${x.D.crema}`,borderTop:`4px solid ${x.D.miel}`,position:"relative",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",backdropFilter:"blur(10px)"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-12px) scale(1.02)",b.currentTarget.style.boxShadow="0 20px 60px rgba(212, 165, 116, 0.15), 0 8px 24px rgba(0,0,0,0.08)",b.currentTarget.style.borderColor=x.D.miel,b.currentTarget.style.borderTopColor="#b8945f"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0) scale(1)",b.currentTarget.style.boxShadow="0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",b.currentTarget.style.borderColor=x.D.crema,b.currentTarget.style.borderTopColor=x.D.miel},children:[l.jsxs("div",{style:{position:"relative",overflow:"hidden"},children:[l.jsx("img",{src:p.imagen,alt:p.nombre,style:{width:"100%",height:"350px",objectFit:"cover",transition:"transform 0.4s ease"},onError:b=>{b.target.src="/images/logo/amorymiellogo.png"}}),l.jsx("div",{style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)",backdropFilter:"blur(15px)",padding:"0.5rem 1rem",borderRadius:"25px",border:`2px solid ${x.D.miel}`,boxShadow:"0 4px 15px rgba(212, 165, 116, 0.2)"},children:l.jsx("span",{style:{color:x.D.miel,fontSize:"0.7rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:p.categoria})})]}),l.jsxs("div",{style:{padding:"clamp(1.5rem, 3vw, 2.5rem)",background:"linear-gradient(180deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,1) 100%)"},children:[l.jsx("h3",{style:{margin:"0 0 1rem 0",color:x.D.carbon,fontSize:"clamp(1.2rem, 3vw, 1.5rem)",fontWeight:"700",lineHeight:"1.3",letterSpacing:"-0.02em"},children:p.nombre}),l.jsx("p",{style:{color:"#666",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",margin:"0 0 1.5rem 0",lineHeight:"1.6",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:p.descripcion}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[l.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"700",color:x.D.miel,lineHeight:"1"},children:["$",p.precio]}),l.jsx("span",{style:{fontSize:"0.8rem",color:"#999",fontWeight:"500"},children:p.moneda})]}),l.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:window.innerWidth<=768?"0.5rem":"0.8rem",alignItems:"stretch",marginTop:"auto",marginBottom:"0.5rem"},children:[l.jsx("button",{onClick:()=>k(p),style:{background:"transparent",color:x.D.miel,border:`2px solid ${x.D.miel}`,padding:window.innerWidth<=768?"0.7rem 1rem":"0.6rem 1rem",borderRadius:"25px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.85rem":"0.8rem",fontWeight:"600",transition:"all 0.3s ease",flex:window.innerWidth<=768?"1":"0 0 auto",minWidth:window.innerWidth<=768?"auto":"90px",height:window.innerWidth<=768?"44px":"36px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:b=>{b.target.style.background=x.D.miel,b.target.style.color="white",b.target.style.transform="translateY(-2px)",b.target.style.boxShadow="0 4px 12px rgba(224, 167, 58, 0.3)"},onMouseLeave:b=>{b.target.style.background="transparent",b.target.style.color=x.D.miel,b.target.style.transform="translateY(0)",b.target.style.boxShadow="none"},children:"Ver más"}),l.jsx("button",{onClick:()=>vn(p),style:{background:(p.stock||0)===0?"#cccccc":`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:(p.stock||0)===0?"#666666":"white",border:"none",padding:window.innerWidth<=768?"0.7rem 1rem":"0.6rem 1rem",borderRadius:"25px",cursor:(p.stock||0)===0?"not-allowed":"pointer",fontSize:window.innerWidth<=768?"0.85rem":"0.8rem",fontWeight:"600",transition:"all 0.3s ease",flex:window.innerWidth<=768?"1":"0 0 auto",minWidth:window.innerWidth<=768?"auto":"110px",height:window.innerWidth<=768?"44px":"36px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:(p.stock||0)===0?"none":"0 3px 12px rgba(212, 165, 116, 0.3)"},onMouseEnter:b=>{b.target.style.transform="translateY(-2px)",b.target.style.boxShadow="0 6px 20px rgba(224, 167, 58, 0.4)"},onMouseLeave:b=>{b.target.style.transform="translateY(0)",b.target.style.boxShadow="0 4px 15px rgba(224, 167, 58, 0.3)"},children:(()=>{const H=(p.stock||0)===0;return I?H?"Sin Stock":"Agregar":"Inicia sesión"})()})]}),l.jsx("div",{style:{position:"absolute",bottom:"0.5rem",right:"0.5rem",zIndex:10},children:(()=>{const b=p.stock||0,H=p.minStock||5,J=b===0,te=b<=H&&b>0;return J?l.jsx("span",{style:{background:"#f44336",color:"white",padding:window.innerWidth<=768?"0.2rem 0.4rem":"0.15rem 0.4rem",borderRadius:"8px",fontSize:window.innerWidth<=768?"0.65rem":"0.6rem",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"0.2rem",whiteSpace:"nowrap",minWidth:"fit-content",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:"❌ Sin Stock"}):te?l.jsxs("span",{style:{background:"#FF9800",color:"white",padding:window.innerWidth<=768?"0.2rem 0.4rem":"0.15rem 0.4rem",borderRadius:"8px",fontSize:window.innerWidth<=768?"0.65rem":"0.6rem",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"0.2rem",whiteSpace:"nowrap",minWidth:"fit-content",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:["⚠️ Solo ",b," disponibles"]}):l.jsxs("span",{style:{background:"#4CAF50",color:"white",padding:window.innerWidth<=768?"0.2rem 0.4rem":"0.15rem 0.4rem",borderRadius:"8px",fontSize:window.innerWidth<=768?"0.65rem":"0.6rem",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"0.2rem",whiteSpace:"nowrap",minWidth:"fit-content",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:["✅ En Stock (",b,")"]})})()})]})]})]},p.id))})]})}),l.jsx("section",{id:"servicios",style:{background:"white",padding:"1.5rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsx("h2",{style:{textAlign:"center",color:x.D.carbon,marginBottom:"1.5rem",fontSize:"clamp(2rem, 5vw, 2.5rem)",fontWeight:"700"},children:"Nuestros Servicios"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2rem)"},children:m.map(p=>l.jsxs("div",{style:{background:"white",borderRadius:"15px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",border:`2px solid ${x.D.crema}`},children:[l.jsx("img",{src:p.imagen,alt:p.nombre,style:{width:"100%",height:"350px",objectFit:"cover"},onError:b=>{b.target.src="/images/logo/amorymiellogo.png"}}),l.jsxs("div",{style:{padding:"1.5rem"},children:[l.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:x.D.carbon},children:p.nombre}),l.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:[p.duracion," • ",p.modalidad]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"bold",color:x.D.miel},children:["$",p.precio," ",p.moneda]}),l.jsx("a",{href:p.bookingLink,target:"_blank",rel:"noopener noreferrer",style:{background:x.D.verde,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",textDecoration:"none"},children:"Agendar"})]})]})]},p.id))})]})}),l.jsx("section",{id:"kids",style:{background:"linear-gradient(135deg, #fff8e1 0%, #f3e5ab 100%)",padding:"4rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:x.D.carbon,margin:"0 0 1rem 0"},children:"🌟 Para los Pequeños 🌟"}),l.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Productos y servicios especialmente diseñados para el bienestar y desarrollo integral de los niños"})]}),l.jsxs("div",{style:{marginBottom:"4rem"},children:[l.jsx("h3",{style:{fontSize:"2rem",fontWeight:"600",color:x.D.miel,textAlign:"center",margin:"0 0 2rem 0"},children:"Productos para Niños"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2.5rem)"},children:g.map(p=>l.jsxs("div",{style:{background:"linear-gradient(145deg, #ffffff 0%, #fefefe 100%)",borderRadius:"24px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",border:`2px solid ${x.D.crema}`,borderTop:"4px solid #ffd54f",position:"relative",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-8px)",b.currentTarget.style.boxShadow="0 20px 40px rgba(0,0,0,0.12), 0 8px 16px rgba(0,0,0,0.08)",b.currentTarget.style.borderColor="#ffd54f"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",b.currentTarget.style.borderColor=x.D.crema},children:[l.jsx("div",{style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)",backdropFilter:"blur(15px)",padding:"0.5rem 1rem",borderRadius:"25px",border:"2px solid #ffd54f",boxShadow:"0 4px 15px rgba(255, 213, 79, 0.2)"},children:l.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px",color:x.D.miel},children:p.categoria.toUpperCase()})}),l.jsx("img",{src:p.imagen,alt:p.nombre,style:{width:"100%",height:"350px",objectFit:"cover"},onError:b=>{b.target.src="/images/logo/amorymiellogo.png"}}),l.jsxs("div",{style:{padding:"clamp(1.5rem, 3vw, 2.5rem)",background:"linear-gradient(180deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,1) 100%)"},children:[l.jsx("h3",{style:{fontSize:"clamp(1.2rem, 3vw, 1.5rem)",fontWeight:"700",color:x.D.carbon,margin:"0 0 0.8rem 0",lineHeight:"1.3"},children:p.nombre}),l.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:"0 0 1.2rem 0",lineHeight:"1.5"},children:p.descripcion}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:"1.2rem"},children:[l.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"700",color:x.D.miel,lineHeight:"1"},children:["$",p.precio]}),l.jsx("span",{style:{fontSize:"0.8rem",color:"#999",fontWeight:"500"},children:p.moneda})]}),l.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:window.innerWidth<=768?"0.5rem":"0.6rem",alignItems:"stretch",marginTop:"auto"},children:[l.jsx("button",{onClick:()=>k(p),style:{background:"transparent",color:x.D.miel,border:`2px solid ${x.D.miel}`,padding:window.innerWidth<=768?"0.7rem 1rem":"0.6rem 1rem",borderRadius:"25px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.85rem":"0.8rem",fontWeight:"600",transition:"all 0.3s ease",flex:window.innerWidth<=768?"1":"0 0 auto",minWidth:window.innerWidth<=768?"auto":"90px",height:window.innerWidth<=768?"44px":"36px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:b=>{b.target.style.background=x.D.miel,b.target.style.color="white",b.target.style.transform="translateY(-2px)",b.target.style.boxShadow="0 4px 12px rgba(224, 167, 58, 0.3)"},onMouseLeave:b=>{b.target.style.background="transparent",b.target.style.color=x.D.miel,b.target.style.transform="translateY(0)",b.target.style.boxShadow="none"},children:"Ver más"}),l.jsx("button",{onClick:()=>vn(p),style:{background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:window.innerWidth<=768?"0.7rem 1rem":"0.6rem 1rem",borderRadius:"25px",cursor:"pointer",fontSize:window.innerWidth<=768?"0.85rem":"0.8rem",fontWeight:"600",transition:"all 0.3s ease",flex:window.innerWidth<=768?"1":"0 0 auto",minWidth:window.innerWidth<=768?"auto":"110px",height:window.innerWidth<=768?"44px":"36px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 3px 12px rgba(212, 165, 116, 0.3)"},onMouseEnter:b=>{b.target.style.transform="translateY(-2px)",b.target.style.boxShadow="0 6px 20px rgba(212, 165, 116, 0.4)"},onMouseLeave:b=>{b.target.style.transform="translateY(0)",b.target.style.boxShadow="0 3px 12px rgba(212, 165, 116, 0.3)"},children:I?"Agregar al Carrito":"Inicia sesión para comprar"})]})]})]},p.id))})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"2rem",fontWeight:"600",color:x.D.miel,textAlign:"center",margin:"0 0 2rem 0"},children:"Servicios para Niños"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2rem)"},children:j.map(p=>l.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",border:"2px solid #ffd54f",transition:"all 0.3s ease"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-5px)",b.currentTarget.style.boxShadow="0 15px 40px rgba(0,0,0,0.15)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 10px 30px rgba(0,0,0,0.1)"},children:[l.jsx("img",{src:p.imagen,alt:p.nombre,style:{width:"100%",height:"350px",objectFit:"cover"},onError:b=>{b.target.src="/images/logo/amorymiellogo.png"}}),l.jsxs("div",{style:{padding:"1.5rem"},children:[l.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:x.D.carbon},children:p.nombre}),l.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:[p.duracion," • ",p.modalidad]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"bold",color:x.D.miel},children:["$",p.precio," ",p.moneda]}),l.jsx("a",{href:p.bookingLink,target:"_blank",rel:"noopener noreferrer",style:{background:"#ffd54f",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",textDecoration:"none",transition:"all 0.3s ease"},onMouseEnter:b=>{b.target.style.background="#ffc107",b.target.style.transform="translateY(-2px)"},onMouseLeave:b=>{b.target.style.background="#ffd54f",b.target.style.transform="translateY(0)"},children:"Agendar"})]})]})]},p.id))})]})]})}),l.jsx("section",{id:"quienes-somos",style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"4rem 0"},children:l.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"3rem",alignItems:"center"},children:[l.jsx("div",{style:{textAlign:"center"},children:l.jsx("img",{src:"/images/about/quiensomos.jpg",alt:"Amor y Miel - Quiénes Somos",style:{width:"100%",maxWidth:"500px",height:"auto",borderRadius:"20px",boxShadow:"0 15px 40px rgba(0,0,0,0.1)",border:`3px solid ${x.D.miel}`},onError:p=>{p.target.src="/images/logo/amorymiellogo.png"}})}),l.jsxs("div",{style:{padding:"0 1rem"},children:[l.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:x.D.carbon,margin:"0 0 1.5rem 0",lineHeight:"1.2"},children:"Quiénes Somos"}),l.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.08)",border:`2px solid ${x.D.crema}`},children:[l.jsxs("p",{style:{fontSize:"1.1rem",lineHeight:"1.7",color:"#555",margin:"0 0 1.5rem 0"},children:["En ",l.jsx("strong",{style:{color:x.D.miel},children:"Amor y Miel"}),", creemos en el poder transformador de la naturaleza y la energía del amor. Somos una marca artesanal dedicada a crear productos y servicios holísticos que nutren el cuerpo, la mente y el alma."]}),l.jsxs("p",{style:{fontSize:"1.1rem",lineHeight:"1.7",color:"#555",margin:"0 0 1.5rem 0"},children:["Cada producto es elaborado con ",l.jsx("strong",{style:{color:x.D.miel},children:"ingredientes naturales"})," cuidadosamente seleccionados y consagrados bajo rituales de amor y sanación. Nuestros servicios holísticos están diseñados para acompañarte en tu camino hacia el bienestar integral."]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginTop:"2rem"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"🌿"}),l.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:x.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:"100% Natural"}),l.jsx("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:"Ingredientes puros y orgánicos"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"💝"}),l.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:x.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:"Hecho con Amor"}),l.jsx("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:"Cada producto es consagrado"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"✨"}),l.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:x.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:"Energía Positiva"}),l.jsx("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:"Rituales de sanación holística"})]})]}),l.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:l.jsx("a",{href:"#contacto",style:{background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",padding:"1rem 2rem",borderRadius:"30px",textDecoration:"none",fontSize:"1rem",fontWeight:"600",display:"inline-block",boxShadow:"0 5px 15px rgba(212, 165, 116, 0.3)",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 8px 25px rgba(212, 165, 116, 0.4)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="0 5px 15px rgba(212, 165, 116, 0.3)"},children:"Conoce Nuestra Historia"})})]})]})]})})}),l.jsx("section",{style:{background:"white",padding:"4rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:x.D.carbon,margin:"0 0 1rem 0"},children:"🚚 Información de Envíos"}),l.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Entregamos nuestros productos con amor y cuidado a toda la República Mexicana"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:window.innerWidth<=768?"1rem":"2rem"},children:[l.jsxs("div",{style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${x.D.crema}`,textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"📦"}),l.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:x.D.carbon,margin:"0 0 1rem 0"},children:"Envíos Nacionales"}),l.jsx("p",{style:{color:"#666",lineHeight:"1.6",margin:"0 0 1rem 0"},children:"Realizamos envíos a toda la República Mexicana"}),l.jsx("p",{style:{color:x.D.miel,fontWeight:"600",fontSize:"1.1rem",margin:"0"},children:"3-7 días hábiles"})]}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${x.D.crema}`,textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"💰"}),l.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:x.D.carbon,margin:"0 0 1rem 0"},children:"Costo de Envío"}),l.jsx("p",{style:{color:"#666",lineHeight:"1.6",margin:"0 0 1rem 0"},children:"Envío gratuito en compras mayores a $500 MXN"}),l.jsx("p",{style:{color:x.D.miel,fontWeight:"600",fontSize:"1.1rem",margin:"0"},children:"$80 MXN (compras menores)"})]}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${x.D.crema}`,textAlign:"center"},children:[l.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🛡️"}),l.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:x.D.carbon,margin:"0 0 1rem 0"},children:"Empaque Seguro"}),l.jsx("p",{style:{color:"#666",lineHeight:"1.6",margin:"0 0 1rem 0"},children:"Todos nuestros productos son empacados con cuidado y protección"}),l.jsx("p",{style:{color:x.D.miel,fontWeight:"600",fontSize:"1.1rem",margin:"0"},children:"100% protegido"})]})]}),l.jsxs("div",{style:{background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,padding:"2rem",borderRadius:"20px",marginTop:"2rem",textAlign:"center"},children:[l.jsx("h3",{style:{color:"white",fontSize:"1.5rem",fontWeight:"600",margin:"0 0 1rem 0"},children:"📞 ¿Necesitas ayuda con tu envío?"}),l.jsx("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem",margin:"0 0 1rem 0"},children:"Contáctanos por WhatsApp para consultas sobre envíos y seguimiento"}),l.jsx("a",{href:"https://wa.me/529991320209?text=Hola,%20tengo%20una%20consulta%20sobre%20envíos",target:"_blank",rel:"noopener noreferrer",style:{background:"white",color:x.D.miel,padding:"1rem 2rem",borderRadius:"30px",textDecoration:"none",fontWeight:"600",fontSize:"1.1rem",display:"inline-block",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 8px 25px rgba(0,0,0,0.15)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="none"},children:"Contactar por WhatsApp"})]})]})}),l.jsx("section",{style:{background:"white",padding:"4rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:x.D.carbon,margin:"0 0 1rem 0"},children:"💬 Lo Que Dicen Nuestros Clientes"}),l.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Testimonios reales de personas que han transformado su bienestar con nuestros productos"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"2rem"},children:[{name:"María González",text:"Los productos de Amor y Miel han transformado mi rutina de autocuidado. El Kit de Bienestar Completo es perfecto para relajarme después del trabajo.",rating:5},{name:"Carlos Rodríguez",text:"La Sonoterapia fue una experiencia increíble. Me ayudó a reducir el estrés y encontrar paz interior. Definitivamente lo recomiendo.",rating:5},{name:"Ana Martínez",text:"Las velas de miel tienen un aroma delicioso y crean un ambiente muy relajante. Mi familia y yo las usamos todas las noches.",rating:5},{name:"Laura Fernández",text:"Los baños energéticos son mágicos. Me ayudaron a limpiar mi energía y sentirme renovada. El servicio al cliente es excepcional.",rating:5},{name:"Roberto Silva",text:"La Numerología me abrió los ojos a muchas cosas. Los productos son de excelente calidad y el ambiente es muy relajante.",rating:5},{name:"Carmen Ruiz",text:"Mi hija ama los productos para niños. Son suaves, naturales y realmente funcionan. Recomiendo Amor y Miel a todas las mamás.",rating:5}].map((p,b)=>l.jsxs("div",{style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${x.D.crema}`,boxShadow:"0 8px 25px rgba(0,0,0,0.08)"},children:[l.jsx("div",{style:{marginBottom:"1rem"},children:[...Array(p.rating)].map((H,J)=>l.jsx("span",{style:{color:"#ffd700",fontSize:"1.2rem"},children:"⭐"},J))}),l.jsxs("p",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#555",margin:"0 0 1.5rem 0",fontStyle:"italic"},children:['"',p.text,'"']}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1.2rem"},children:p.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0",color:x.D.carbon,fontSize:"1.1rem",fontWeight:"600"},children:p.name}),l.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.9rem"},children:"Cliente Verificado"})]})]})]},b))})]})}),l.jsx("section",{style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"4rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:x.D.carbon,margin:"0 0 1rem 0"},children:"❓ Preguntas Frecuentes"}),l.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Resolvemos las dudas más comunes sobre nuestros productos y servicios"})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(500px, 1fr))",gap:"1.5rem"},children:[{question:"¿Los productos son 100% naturales?",answer:"Sí, todos nuestros productos están elaborados con ingredientes 100% naturales y orgánicos. No utilizamos químicos dañinos ni conservantes artificiales."},{question:"¿Cómo puedo agendar una cita para servicios?",answer:"Puedes agendar tu cita directamente a través de WhatsApp al +52 999 132 0209 o haciendo clic en el botón 'Agendar' de cada servicio."},{question:"¿Hacen envíos a toda la república?",answer:"Sí, realizamos envíos a toda la República Mexicana. Los tiempos de entrega varían según la ubicación, generalmente de 3 a 7 días hábiles."},{question:"¿Los productos tienen garantía?",answer:"Ofrecemos garantía de satisfacción. Si no estás completamente satisfecho con tu compra, puedes devolver el producto en un plazo de 15 días."},{question:"¿Puedo usar los productos si estoy embarazada?",answer:"Recomendamos consultar con tu médico antes de usar cualquier producto durante el embarazo. Algunos ingredientes pueden no ser recomendables en esta etapa."},{question:"¿Cómo debo conservar los productos?",answer:"Mantén los productos en un lugar fresco, seco y alejado de la luz directa del sol. Esto asegura que mantengan sus propiedades por más tiempo."}].map((p,b)=>l.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"15px",border:`2px solid ${x.D.crema}`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)"},children:[l.jsx("h3",{style:{margin:"0 0 1rem 0",color:x.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:p.question}),l.jsx("p",{style:{margin:"0",color:"#555",lineHeight:"1.6",fontSize:"0.95rem"},children:p.answer})]},b))})]})}),l.jsx("section",{style:{background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,padding:"4rem 0"},children:l.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"0 1rem",textAlign:"center"},children:[l.jsx("h2",{style:{fontSize:"clamp(2rem, 4vw, 2.8rem)",fontWeight:"700",color:"white",margin:"0 0 1rem 0"},children:"📧 Mantente Conectado"}),l.jsx("p",{style:{fontSize:"1.2rem",color:"rgba(255,255,255,0.9)",margin:"0 0 2rem 0",lineHeight:"1.6"},children:"Recibe tips de bienestar, ofertas especiales y novedades directamente en tu correo"}),l.jsxs("form",{onSubmit:sr,style:{display:"flex",gap:"1rem",maxWidth:"500px",margin:"0 auto",flexWrap:"wrap",justifyContent:"center"},children:[l.jsx("input",{type:"email",name:"email",placeholder:"Tu correo electrónico",required:!0,style:{flex:"1",minWidth:"250px",padding:"1rem 1.5rem",borderRadius:"30px",border:"none",fontSize:"1rem",outline:"none",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"}}),l.jsx("button",{type:"submit",disabled:v,style:{background:v?"#ccc":"white",color:x.D.miel,border:"none",padding:"1rem 2rem",borderRadius:"30px",fontSize:"1rem",fontWeight:"600",cursor:v?"not-allowed":"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",transition:"all 0.3s ease",opacity:v?.7:1},onMouseEnter:p=>{v||(p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.15)")},onMouseLeave:p=>{v||(p.target.style.transform="translateY(0)",p.target.style.boxShadow="0 4px 15px rgba(0,0,0,0.1)")},children:v?l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{marginRight:"0.5rem"},children:"⏳"}),"Suscribiendo..."]}):"Suscribirse"})]}),A&&l.jsx("div",{style:{padding:"1rem",margin:"1rem auto 0 auto",maxWidth:"500px",borderRadius:"10px",backgroundColor:A.includes("exitosamente")?"rgba(212, 237, 218, 0.9)":"rgba(248, 215, 218, 0.9)",color:A.includes("exitosamente")?"#155724":"#721c24",border:`1px solid ${A.includes("exitosamente")?"rgba(195, 230, 203, 0.8)":"rgba(245, 198, 203, 0.8)"}`,textAlign:"center",fontWeight:"500"},children:A}),l.jsx("p",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.8)",margin:"1.5rem 0 0 0"},children:"No compartimos tu información. Puedes cancelar tu suscripción en cualquier momento."})]})}),l.jsx("section",{id:"contacto",style:{background:"white",padding:"4rem 0"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[l.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:x.D.carbon,margin:"0 0 1rem 0"},children:"📞 Contáctanos"}),l.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Estamos aquí para ayudarte en tu camino hacia el bienestar integral"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:window.innerWidth<=768?"2rem":"3rem"},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:x.D.miel,margin:"0 0 1.5rem 0"},children:"Información de Contacto"}),l.jsxs("div",{style:{marginBottom:"2rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem"},children:"📱"}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0",color:x.D.carbon},children:"WhatsApp"}),l.jsx("p",{style:{margin:"0",color:"#666"},children:"+52 999 132 0209"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem"},children:"📧"}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0",color:x.D.carbon},children:"Email"}),l.jsx("p",{style:{margin:"0",color:"#666"},children:"info@amorymiel.com"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem"},children:"🕒"}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0",color:x.D.carbon},children:"Horarios"}),l.jsx("p",{style:{margin:"0",color:"#666"},children:"Lunes a Sábado: 9:00 AM - 7:00 PM"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[l.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem",flexShrink:0},children:"📍"}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:x.D.carbon},children:"Dirección de Tienda Física"}),l.jsxs("div",{style:{color:"#666",lineHeight:"1.5"},children:[l.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:"600"},children:"Gestalt del Caribe"}),l.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Calle Yaxcopoil M2 SM59, Edificio 9,"}),l.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Local 217 Centro Comercial Cancún Maya,"}),l.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Cancún, Q. Roo. CP 77515"})]})]})]}),l.jsxs("div",{style:{marginTop:"2rem"},children:[l.jsx("h4",{style:{margin:"0 0 1rem 0",color:x.D.carbon},children:"📍 Encuéntranos en el Mapa"}),l.jsx("div",{style:{width:"100%",height:"300px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.1)",border:`2px solid ${x.D.miel}`,background:"#f8f9fa"},children:l.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3720.123456789!2d-86.8515!3d21.1619!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f4c2b123456789%3A0x123456789abcdef!2sCentro%20Comercial%20Canc%C3%BAn%20Maya!5e0!3m2!1ses!2smx!4v1234567890123!5m2!1ses!2smx",width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Ubicación de Amor y Miel - Gestalt del Caribe"})}),l.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",color:"#666",fontSize:"0.9rem"},children:[l.jsxs("p",{style:{margin:"0"},children:[l.jsx("strong",{children:"📍 Gestalt del Caribe"}),l.jsx("br",{}),"Centro Comercial Cancún Maya, Local 217",l.jsx("br",{}),"Cancún, Quintana Roo, México"]}),l.jsx("a",{href:"https://maps.google.com/?q=Centro+Comercial+Cancún+Maya,+Cancún,+Q.Roo",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"0.5rem",padding:"0.5rem 1rem",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",textDecoration:"none",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 6px 15px rgba(212, 165, 116, 0.4)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="none"},children:"🗺️ Abrir en Google Maps"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 1rem 0",color:x.D.carbon},children:"Síguenos"}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("a",{href:"https://www.instagram.com/_amor_y_miel_/reels",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"45px",height:"45px",borderRadius:"50%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",textDecoration:"none",fontSize:"1.2rem",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 6px 15px rgba(212, 165, 116, 0.4)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="none"},children:"📷"}),l.jsx("a",{href:"https://www.facebook.com/p/Amor-y-Miel-100089698655453/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"45px",height:"45px",borderRadius:"50%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",textDecoration:"none",fontSize:"1.2rem",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 6px 15px rgba(212, 165, 116, 0.4)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="none"},children:"📘"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:x.D.miel,margin:"0 0 1.5rem 0"},children:"Envíanos un Mensaje"}),l.jsxs("form",{onSubmit:wo,style:{background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${x.D.crema}`},children:[l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"name",required:!0,style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${x.D.crema}`,fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>{p.target.style.borderColor=x.D.miel},onBlur:p=>{p.target.style.borderColor=x.D.crema}})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Correo Electrónico"}),l.jsx("input",{type:"email",name:"email",required:!0,style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${x.D.crema}`,fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>{p.target.style.borderColor=x.D.miel},onBlur:p=>{p.target.style.borderColor=x.D.crema}})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Asunto"}),l.jsxs("select",{style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${x.D.crema}`,fontSize:"1rem",outline:"none",background:"white"},children:[l.jsx("option",{children:"Consulta sobre productos"}),l.jsx("option",{children:"Agendar servicio"}),l.jsx("option",{children:"Información general"}),l.jsx("option",{children:"Soporte técnico"}),l.jsx("option",{children:"Otro"})]})]}),l.jsxs("div",{style:{marginBottom:"2rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Mensaje"}),l.jsx("textarea",{name:"message",required:!0,rows:"4",style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${x.D.crema}`,fontSize:"1rem",outline:"none",resize:"vertical",transition:"border-color 0.3s ease"},onFocus:p=>{p.target.style.borderColor=x.D.miel},onBlur:p=>{p.target.style.borderColor=x.D.crema}})]}),B&&l.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",borderRadius:"10px",backgroundColor:B.includes("exitosamente")?"#d4edda":"#f8d7da",color:B.includes("exitosamente")?"#155724":"#721c24",border:`1px solid ${B.includes("exitosamente")?"#c3e6cb":"#f5c6cb"}`,textAlign:"center",fontWeight:"500"},children:B}),l.jsx("button",{type:"submit",disabled:V,style:{width:"100%",background:V?"#ccc":`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"1rem 2rem",borderRadius:"30px",fontSize:"1rem",fontWeight:"600",cursor:V?"not-allowed":"pointer",boxShadow:"0 4px 15px rgba(212, 165, 116, 0.3)",transition:"all 0.3s ease",opacity:V?.7:1},onMouseEnter:p=>{V||(p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 8px 25px rgba(212, 165, 116, 0.4)")},onMouseLeave:p=>{V||(p.target.style.transform="translateY(0)",p.target.style.boxShadow="0 4px 15px rgba(212, 165, 116, 0.3)")},children:V?l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{marginRight:"0.5rem"},children:"⏳"}),"Enviando..."]}):"Enviar Mensaje"})]})]})]})]})}),l.jsx("footer",{style:{background:x.D.carbon,color:"white",padding:"3rem 0 1rem 0",marginTop:"3rem"},children:l.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"clamp(1.5rem, 4vw, 2rem)",marginBottom:"2rem"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[l.jsx("img",{src:"/images/logo/amorymiellogo.png",alt:"Amor y Miel",style:{height:"40px"}}),l.jsx("h3",{style:{margin:0},children:"Amor y Miel"})]}),l.jsx("p",{style:{color:"#ccc",lineHeight:"1.6"},children:"Productos holísticos artesanales para el bienestar espiritual y físico. Cuidado natural, artesanal y con amor."})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Productos"}),l.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Velas"})}),l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Lociones"})}),l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Aceites"})}),l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Baños Energéticos"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Servicios"}),l.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Sonoterapia"})}),l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Ceremonia de Cacao"})}),l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Numerología"})}),l.jsx("li",{style:{marginBottom:"0.5rem"},children:l.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Tarot Angelical"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Contacto"}),l.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"📱 WhatsApp: +52 999 132 0209"}),l.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"📧 Email: info@amorymiel.com"}),l.jsxs("div",{style:{color:"#ccc",margin:"0 0 1rem 0",lineHeight:"1.4"},children:[l.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:"600"},children:"📍 Gestalt del Caribe"}),l.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Calle Yaxcopoil M2 SM59, Edificio 9,"}),l.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Local 217 Centro Comercial Cancún Maya,"}),l.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Cancún, Q. Roo. CP 77515"})]}),l.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Métodos de Pago"}),l.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"💳 Mercado Pago"}),l.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"🏦 Transferencia bancaria"}),l.jsx("p",{style:{color:"#ccc",margin:"0 0 1rem 0"},children:"💰 Pago en efectivo"}),l.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Síguenos"}),l.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[l.jsxs("a",{href:"https://www.instagram.com/_amor_y_miel_/reels",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",textDecoration:"none",transition:"color 0.3s ease"},onMouseEnter:p=>p.target.style.color="#E0A73A",onMouseLeave:p=>p.target.style.color="#ccc",children:[l.jsx("span",{style:{fontSize:"1.2rem"},children:"📷"}),l.jsx("span",{children:"Instagram"})]}),l.jsxs("a",{href:"https://www.facebook.com/p/Amor-y-Miel-100089698655453/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",textDecoration:"none",transition:"color 0.3s ease"},onMouseEnter:p=>p.target.style.color="#E0A73A",onMouseLeave:p=>p.target.style.color="#ccc",children:[l.jsx("span",{style:{fontSize:"1.2rem"},children:"📘"}),l.jsx("span",{children:"Facebook"})]})]})]})]}),l.jsx("div",{style:{borderTop:"1px solid #444",paddingTop:"1rem",textAlign:"center"},children:l.jsx("p",{style:{color:"#ccc",margin:0},children:"© 2024 Amor y Miel. Todos los derechos reservados. Hecho con ❤️ en México."})})]})}),F&&(()=>{const p={...F,...CR[F.nombre]||{}};return l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:window.innerWidth<=768?"1rem":"2rem"},children:l.jsxs("div",{style:{background:"white",borderRadius:"20px",maxWidth:"1200px",width:"100%",maxHeight:"100vh",overflow:"auto",position:"relative"},children:[l.jsx("button",{onClick:()=>k(null),style:{position:"absolute",top:"1rem",right:"1rem",background:"#ff4444",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:"pointer",fontSize:"1.2rem",zIndex:1001},children:"✕"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"1fr 1fr",gap:window.innerWidth<=768?"1rem":"1.5rem",padding:window.innerWidth<=768?"1rem":"1.5rem",height:"100%",maxHeight:"100vh",overflow:"hidden"},children:[l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",minHeight:window.innerWidth<=768?"300px":"500px"},children:l.jsx("img",{src:AR[p.nombre]||p.imagen,alt:p.nombre,style:{width:"100%",height:"100%",maxHeight:window.innerWidth<=768?"500px":"700px",objectFit:"contain",borderRadius:"15px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},onError:b=>{b.target.src="/images/logo/amorymiellogo.png"}})}),l.jsxs("div",{style:{height:"100%",overflow:"auto",display:"flex",flexDirection:"column"},children:[l.jsx("div",{style:{marginBottom:"0.75rem"},children:l.jsx("span",{style:{background:x.D.miel,color:"white",padding:"0.25rem 0.75rem",borderRadius:"15px",fontSize:"0.8rem",fontWeight:"600"},children:p.categoria})}),l.jsx("h2",{style:{fontSize:"1.4rem",fontWeight:"bold",color:x.D.carbon,margin:"0 0 0.5rem 0"},children:p.nombre}),l.jsx("p",{style:{fontSize:"0.85rem",color:"#666",margin:"0 0 0.75rem 0",lineHeight:"1.4"},children:p.descripcion}),l.jsxs("div",{style:{marginBottom:"0.75rem",background:"linear-gradient(145deg, #fafafa 0%, #f5f5f5 100%)",borderRadius:"12px",padding:"1rem",border:`2px solid ${x.D.crema}`,flex:1,overflow:"auto"},children:[p.elaboracion&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("h4",{style:{color:x.D.miel,margin:"0 0 0.5rem 0",fontSize:"0.9rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.4rem"},children:"🧪 Elaboración"}),l.jsx("p",{style:{color:"#555",fontSize:"0.8rem",margin:0,lineHeight:"1.5",background:"white",padding:"0.75rem",borderRadius:"8px",border:`1px solid ${x.D.crema}`},children:p.elaboracion})]}),p.proposito&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("h4",{style:{color:x.D.miel,margin:"0 0 0.5rem 0",fontSize:"0.9rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.4rem"},children:"🎯 Propósito"}),l.jsx("p",{style:{color:"#555",fontSize:"0.8rem",margin:0,lineHeight:"1.5",background:"white",padding:"0.75rem",borderRadius:"8px",border:`1px solid ${x.D.crema}`},children:p.proposito})]}),p.beneficios&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("h4",{style:{color:x.D.miel,margin:"0 0 0.5rem 0",fontSize:"0.9rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.4rem"},children:"✨ Beneficios"}),l.jsx("p",{style:{color:"#555",fontSize:"0.8rem",margin:0,lineHeight:"1.5",background:"white",padding:"0.75rem",borderRadius:"8px",border:`1px solid ${x.D.crema}`},children:p.beneficios})]}),p.modoUso&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("h4",{style:{color:x.D.miel,margin:"0 0 0.5rem 0",fontSize:"0.9rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.4rem"},children:"📖 Modo de Uso"}),l.jsx("p",{style:{color:"#555",fontSize:"0.8rem",margin:0,lineHeight:"1.5",background:"white",padding:"0.75rem",borderRadius:"8px",border:`1px solid ${x.D.crema}`},children:p.modoUso})]}),p.ingredientes&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("h4",{style:{color:x.D.miel,margin:"0 0 0.5rem 0",fontSize:"0.9rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.4rem"},children:"🌿 Ingredientes"}),l.jsx("p",{style:{color:"#555",fontSize:"0.8rem",margin:0,lineHeight:"1.5",background:"white",padding:"0.75rem",borderRadius:"8px",border:`1px solid ${x.D.crema}`},children:p.ingredientes})]}),p.duracion&&l.jsxs("div",{style:{marginBottom:"0.75rem"},children:[l.jsx("h4",{style:{color:x.D.miel,margin:"0 0 0.5rem 0",fontSize:"0.9rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.4rem"},children:"⏱️ Duración"}),l.jsx("p",{style:{color:"#555",fontSize:"0.8rem",margin:0,lineHeight:"1.5",background:"white",padding:"0.75rem",borderRadius:"8px",border:`1px solid ${x.D.crema}`},children:p.duracion})]}),p.cuidados&&l.jsxs("div",{style:{marginBottom:"0.5rem"},children:[l.jsx("h4",{style:{color:x.D.carbon,margin:"0 0 0.4rem 0",fontSize:"0.85rem",fontWeight:"600"},children:"⚠️ Cuidados"}),l.jsx("p",{style:{color:"#666",fontSize:"0.75rem",margin:0,lineHeight:"1.4"},children:p.cuidados})]})]}),l.jsxs("div",{style:{borderTop:"1px solid #eee",paddingTop:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[l.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"bold",color:x.D.miel},children:["$",p.precio," ",p.moneda]}),l.jsxs("div",{style:{display:"flex",gap:"0.8rem",flexWrap:"wrap",flexDirection:window.innerWidth<=768?"column":"row"},children:[l.jsx("button",{onClick:()=>{vn(p),k(null)},style:{background:x.D.miel,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",flex:"1",minWidth:"120px"},children:I?"Agregar al Carrito":"Inicia sesión para comprar"}),l.jsxs("button",{onClick:()=>{const b=`https://link.mercadopago.com.mx/amorymiel?amount=${F.precio}`;window.open(b,"_blank")},style:{background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"0.8rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"700",flex:"1",minWidth:"120px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem",boxShadow:"0 4px 15px rgba(224, 167, 58, 0.3)",transition:"all 0.3s ease"},onMouseEnter:b=>{b.target.style.transform="translateY(-2px)",b.target.style.boxShadow="0 8px 25px rgba(224, 167, 58, 0.4)",b.target.style.background="linear-gradient(135deg, #f0b854 0%, #e0a73a 100%)"},onMouseLeave:b=>{b.target.style.transform="translateY(0)",b.target.style.boxShadow="0 4px 15px rgba(224, 167, 58, 0.3)",b.target.style.background=`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`},children:[l.jsx("span",{style:{fontSize:"1rem"},children:"💳"}),l.jsx("span",{style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Pagar Ahora"})]})]})]})]})]})]})})})(),n&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)",zIndex:999,cursor:"pointer"},onClick:()=>r(!1)}),l.jsxs("div",{style:{position:"fixed",top:"0",right:"0",width:window.innerWidth<=768?"100%":"400px",height:"100vh",background:"white",boxShadow:window.innerWidth<=768?"0 0 30px rgba(0,0,0,0.15)":"-10px 0 30px rgba(0,0,0,0.15)",zIndex:1e3,display:"flex",flexDirection:"column",transform:n?"translateX(0)":"translateX(100%)",transition:"transform 0.3s ease-in-out"},children:[l.jsx("div",{style:{padding:window.innerWidth<=768?"1rem 1rem 0.5rem":"2rem 1.5rem 1rem",borderBottom:`1px solid ${x.D.crema}`,background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[l.jsxs("h3",{style:{margin:"0",color:x.D.carbon,fontSize:window.innerWidth<=768?"1.2rem":"1.5rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:["🛍️ Carrito (",t.length,")"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("button",{onClick:()=>r(!1),style:{background:"transparent",border:"none",color:x.D.carbon,cursor:"pointer",padding:"0.5rem",borderRadius:"8px",fontSize:"1.2rem",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:p=>{p.target.style.backgroundColor="rgba(0,0,0,0.1)",p.target.style.transform="scale(1.1)"},onMouseLeave:p=>{p.target.style.backgroundColor="transparent",p.target.style.transform="scale(1)"},title:"Cerrar carrito",children:"✕"}),l.jsx("button",{onClick:()=>{e([]),r(!1)},style:{background:"transparent",border:"none",color:x.D.carbon,cursor:"pointer",padding:"0.5rem",borderRadius:"8px",fontSize:"1.2rem",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:p=>{p.target.style.backgroundColor="rgba(255,0,0,0.1)",p.target.style.transform="scale(1.1)"},onMouseLeave:p=>{p.target.style.backgroundColor="transparent",p.target.style.transform="scale(1)"},title:"Vaciar carrito",children:"🗑️"})]})]})}),l.jsx("div",{style:{flex:"1",overflowY:"auto",padding:window.innerWidth<=768?"0.5rem 1rem":"1rem 1.5rem"},children:t.map(p=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.5rem":"1rem",padding:window.innerWidth<=768?"0.8rem":"1rem",marginBottom:window.innerWidth<=768?"0.8rem":"1rem",background:"white",borderRadius:"15px",border:`1px solid ${x.D.crema}`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)",transition:"all 0.3s ease"},children:[l.jsx("img",{src:p.imagen,alt:p.nombre,style:{width:window.innerWidth<=768?"50px":"60px",height:window.innerWidth<=768?"50px":"60px",objectFit:"cover",borderRadius:"10px",border:`1px solid ${x.D.crema}`},onError:b=>b.target.src="/images/logo/amorymiellogo.png"}),l.jsxs("div",{style:{flex:"1"},children:[l.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:window.innerWidth<=768?"0.85rem":"0.95rem",color:x.D.carbon,fontWeight:"600",lineHeight:"1.3"},children:p.nombre}),l.jsxs("p",{style:{margin:"0 0 0.5rem 0",fontSize:window.innerWidth<=768?"0.75rem":"0.85rem",color:x.D.miel,fontWeight:"600"},children:["$",p.precio," MXN"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("button",{onClick:()=>us(p.id,p.quantity-1),style:{background:x.D.crema,border:"none",borderRadius:"6px",width:window.innerWidth<=768?"24px":"28px",height:window.innerWidth<=768?"24px":"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",color:x.D.carbon,transition:"all 0.3s ease"},onMouseEnter:b=>b.target.style.background=x.D.miel,onMouseLeave:b=>b.target.style.background=x.D.crema,children:"−"}),l.jsx("span",{style:{minWidth:window.innerWidth<=768?"25px":"30px",textAlign:"center",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"600",color:x.D.carbon},children:p.quantity}),l.jsx("button",{onClick:()=>us(p.id,p.quantity+1),style:{background:x.D.crema,border:"none",borderRadius:"6px",width:window.innerWidth<=768?"24px":"28px",height:window.innerWidth<=768?"24px":"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",color:x.D.carbon,transition:"all 0.3s ease"},onMouseEnter:b=>b.target.style.background=x.D.miel,onMouseLeave:b=>b.target.style.background=x.D.crema,children:"+"})]})]}),l.jsx("button",{onClick:()=>Lr(p.id),style:{background:"transparent",border:"none",color:"#ff4444",cursor:"pointer",padding:"0.5rem",borderRadius:"8px",fontSize:"1.2rem",transition:"all 0.3s ease"},onMouseEnter:b=>{b.target.style.backgroundColor="rgba(255, 68, 68, 0.1)",b.target.style.transform="scale(1.1)"},onMouseLeave:b=>{b.target.style.backgroundColor="transparent",b.target.style.transform="scale(1)"},children:"✕"})]},p.id))}),l.jsxs("div",{style:{padding:"1.5rem",borderTop:`1px solid ${x.D.crema}`,background:`linear-gradient(135deg, ${x.D.crema} 0%, #f8f5f0 100%)`},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[l.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600",color:x.D.carbon},children:"Total:"}),l.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"700",color:x.D.miel},children:["$",Ri()," MXN"]})]}),l.jsx("button",{onClick:nl,style:{width:"100%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"1.2rem 1.5rem",borderRadius:"20px",fontSize:"1.1rem",fontWeight:"700",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 8px 25px rgba(224, 167, 58, 0.4), 0 4px 12px rgba(224, 167, 58, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.8rem",position:"relative",overflow:"hidden"},onMouseEnter:p=>{p.target.style.transform="translateY(-3px) scale(1.02)",p.target.style.boxShadow="0 15px 35px rgba(224, 167, 58, 0.5), 0 8px 20px rgba(224, 167, 58, 0.3)",p.target.style.background="linear-gradient(135deg, #f0b854 0%, #e0a73a 100%)"},onMouseLeave:p=>{p.target.style.transform="translateY(0) scale(1)",p.target.style.boxShadow="0 8px 25px rgba(224, 167, 58, 0.4), 0 4px 12px rgba(224, 167, 58, 0.2)",p.target.style.background=`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`},children:S?l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{fontSize:"1.3rem",animation:"spin 1s linear infinite"},children:"⏳"}),l.jsx("span",{style:{textShadow:"0 2px 4px rgba(0,0,0,0.2)",letterSpacing:"0.5px"},children:"Procesando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{fontSize:"1.3rem",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:"💳"}),l.jsx("span",{style:{textShadow:"0 2px 4px rgba(0,0,0,0.2)",letterSpacing:"0.5px"},children:"Pagar con Mercado Pago"})]})})]})]})]}),ue&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"20px",maxWidth:"400px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:x.D.carbon,margin:0},children:Ee==="login"?"Iniciar Sesión":"Crear Cuenta"}),l.jsx("button",{onClick:()=>Te(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"×"})]}),xt&&l.jsx("div",{style:{padding:"0.8rem",marginBottom:"1rem",borderRadius:"8px",backgroundColor:xt.includes("exitosamente")?"#d4edda":"#f8d7da",color:xt.includes("exitosamente")?"#155724":"#721c24",border:`1px solid ${xt.includes("exitosamente")?"#c3e6cb":"#f5c6cb"}`,textAlign:"center",fontSize:"0.9rem"},children:xt}),l.jsxs("form",{onSubmit:async p=>{p.preventDefault();const b=new FormData(p.target),H=b.get("email"),J=b.get("password"),te=b.get("name");Ee==="login"?await ji(H,J):await sl(H,J,te)},children:[Ee==="register"&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"name",required:!0,style:{width:"100%",padding:"0.8rem",borderRadius:"8px",border:`2px solid ${x.D.crema}`,fontSize:"1rem",outline:"none"}})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Correo Electrónico"}),l.jsx("input",{type:"email",name:"email",required:!0,style:{width:"100%",padding:"0.8rem",borderRadius:"8px",border:`2px solid ${x.D.crema}`,fontSize:"1rem",outline:"none"}})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",required:!0,style:{width:"100%",padding:"0.8rem",borderRadius:"8px",border:`2px solid ${x.D.crema}`,fontSize:"1rem",outline:"none"}})]}),l.jsx("button",{type:"submit",style:{width:"100%",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"1rem",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:Ee==="login"?"Iniciar Sesión":"Crear Cuenta"})]}),l.jsx("div",{style:{textAlign:"center"},children:Ee==="login"?l.jsxs(l.Fragment,{children:[l.jsxs("p",{style:{color:"#666",margin:"0 0 1rem 0"},children:["¿No tienes cuenta?"," ",l.jsx("button",{onClick:()=>je("register"),style:{background:"none",border:"none",color:x.D.miel,cursor:"pointer",textDecoration:"underline"},children:"Crear cuenta"})]}),l.jsx("button",{onClick:()=>{const p=prompt("Ingresa tu email para recuperar contraseña:");p&&Et(p)},style:{background:"none",border:"none",color:x.D.miel,cursor:"pointer",textDecoration:"underline",fontSize:"0.9rem"},children:"¿Olvidaste tu contraseña?"})]}):l.jsxs("p",{style:{color:"#666",margin:0},children:["¿Ya tienes cuenta?"," ",l.jsx("button",{onClick:()=>je("login"),style:{background:"none",border:"none",color:x.D.miel,cursor:"pointer",textDecoration:"underline"},children:"Iniciar sesión"})]})})]})}),G&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{color:x.D.miel,margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:"📦 Información de Envío"}),l.jsx("button",{onClick:()=>oe(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"✕"})]}),l.jsxs("form",{onSubmit:p=>{p.preventDefault(),rl()},children:[l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Nombre Completo *"}),l.jsx("input",{type:"text",required:!0,value:fe.fullName,onChange:p=>lt(b=>({...b,fullName:p.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Dirección Completa *"}),l.jsx("textarea",{required:!0,value:fe.address,onChange:p=>lt(b=>({...b,address:p.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",minHeight:"80px",resize:"vertical"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Ciudad *"}),l.jsx("input",{type:"text",required:!0,value:fe.city,onChange:p=>lt(b=>({...b,city:p.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]}),l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Estado *"}),l.jsx("input",{type:"text",required:!0,value:fe.state,onChange:p=>lt(b=>({...b,state:p.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Código Postal *"}),l.jsx("input",{type:"text",required:!0,value:fe.zipCode,onChange:p=>lt(b=>({...b,zipCode:p.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]}),l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Teléfono *"}),l.jsx("input",{type:"tel",required:!0,value:fe.phone,onChange:p=>lt(b=>({...b,phone:p.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"Notas de Envío (Opcional)"}),l.jsx("textarea",{value:fe.notes,onChange:p=>lt(b=>({...b,notes:p.target.value})),placeholder:"Instrucciones especiales para la entrega...",style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",minHeight:"60px",resize:"vertical"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("button",{type:"button",onClick:async()=>{if(oe(!1),t.length>0){const p=`abandoned_${Date.now()}`;console.log("🚫 User cancelled payment - triggering cart abandonment"),await Di(p)}},style:{flex:1,padding:"0.75rem",background:"transparent",border:`2px solid ${x.D.miel}`,color:x.D.miel,borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.background=x.D.miel,p.target.style.color="white"},onMouseLeave:p=>{p.target.style.background="transparent",p.target.style.color=x.D.miel},children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:S,style:{flex:1,padding:"0.75rem",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,border:"none",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:S?"not-allowed":"pointer",opacity:S?.7:1,transition:"all 0.3s ease"},children:S?"Procesando...":"Continuar al Pago"})]})]})]})}),ir&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"2rem",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{color:x.D.miel,margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:"💳 Pago Seguro con Mercado Pago"}),l.jsx("button",{onClick:async()=>{if(Z(!1),t.length>0){const p=`abandoned_${Date.now()}`;console.log("🚫 User closed payment modal - triggering cart abandonment"),await Di(p)}},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"✕"})]}),l.jsx(TR,{amount:Ri(),orderId:`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,items:t,customerInfo:{name:(ve==null?void 0:ve.name)||(I==null?void 0:I.email)||"Cliente",email:(I==null?void 0:I.email)||"no-email@example.com",phone:fe.phone||""},onSuccess:async p=>{console.log("Payment successful:",p);try{await ll({id:p.external_reference,shippingAddress:fe}),e([]),Z(!1),alert("✅ ¡Pago confirmado! Tu orden ha sido procesada exitosamente.")}catch(b){console.error("Error creating order after payment:",b),alert("Error al crear la orden. Por favor, contacta soporte.")}},onError:p=>{console.error("Payment error:",p),alert("Error al procesar el pago. Por favor, inténtalo de nuevo.")},onCancel:()=>{Z(!1)}})]})}),gn&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"2rem",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsx("h2",{style:{color:x.D.miel,margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:"📦 Rastrear Orden"}),l.jsx("button",{onClick:()=>{on(!1),yn(null),ze(""),$n(""),An("")},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"✕"})]}),ke?l.jsxs("div",{children:[l.jsxs("div",{style:{background:x.D.crema,padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[l.jsxs("h3",{style:{color:x.D.carbon,margin:"0 0 0.5rem 0",fontSize:"1.1rem"},children:["Orden #",ke.id]}),l.jsxs("p",{style:{color:x.D.carbon,margin:"0 0 0.5rem 0",fontSize:"0.9rem"},children:["Cliente: ",ke.customerName]}),l.jsxs("p",{style:{color:x.D.carbon,margin:"0 0 0.5rem 0",fontSize:"0.9rem"},children:["Email: ",ke.customerEmail]}),l.jsxs("p",{style:{color:x.D.carbon,margin:"0 0 0.5rem 0",fontSize:"0.9rem"},children:["Total: $",ke.total]}),l.jsxs("p",{style:{color:x.D.carbon,margin:"0 0 0.5rem 0",fontSize:"0.9rem"},children:["Número de Rastreo: ",l.jsx("strong",{children:ke.trackingNumber})]}),l.jsxs("p",{style:{color:x.D.carbon,margin:"0",fontSize:"0.9rem"},children:["Fecha: ",new Date(ke.createdAt).toLocaleDateString("es-MX")]})]}),l.jsx("div",{style:{marginBottom:"1.5rem"},children:l.jsxs("h4",{style:{color:x.D.carbon,margin:"0 0 1rem 0",fontSize:"1rem"},children:["Estado Actual:",l.jsx("span",{style:{color:ke.status==="delivered"?"#28a745":ke.status==="shipped"?"#007bff":ke.status==="processing"?"#ffc107":"#dc3545",marginLeft:"0.5rem",textTransform:"uppercase",fontWeight:"bold"},children:ke.status==="processing"?"En Proceso":ke.status==="shipped"?"Enviado":ke.status==="delivered"?"Entregado":ke.status==="cancelled"?"Cancelado":ke.status})]})}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("h4",{style:{color:x.D.carbon,margin:"0 0 1rem 0",fontSize:"1rem"},children:"Historial de Estado"}),l.jsx("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"1rem"},children:(or=ke.statusHistory)==null?void 0:or.map((p,b)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:b<ke.statusHistory.length-1?"1rem":"0",paddingBottom:b<ke.statusHistory.length-1?"1rem":"0",borderBottom:b<ke.statusHistory.length-1?"1px solid #e9ecef":"none"},children:[l.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:p.status==="delivered"?"#28a745":p.status==="shipped"?"#007bff":p.status==="processing"?"#ffc107":"#dc3545",marginRight:"1rem",flexShrink:0}}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:x.D.carbon,fontWeight:"500",fontSize:"0.9rem"},children:p.status==="processing"?"En Proceso":p.status==="shipped"?"Enviado":p.status==="delivered"?"Entregado":p.status==="cancelled"?"Cancelado":p.status}),l.jsx("div",{style:{color:"#666",fontSize:window.innerWidth<=768?"0.85rem":"0.8rem",marginTop:"0.25rem"},children:new Date(p.timestamp).toLocaleString("es-MX")}),p.note&&l.jsx("div",{style:{color:"#666",fontSize:window.innerWidth<=768?"0.85rem":"0.8rem",marginTop:"0.25rem",fontStyle:"italic"},children:p.note})]})]},b))})]}),l.jsxs("div",{style:{marginBottom:"1.5rem"},children:[l.jsx("h4",{style:{color:x.D.carbon,margin:"0 0 1rem 0",fontSize:"1rem"},children:"Productos"}),l.jsx("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"1rem"},children:(cl=ke.items)==null?void 0:cl.map((p,b)=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:b<ke.items.length-1?"0.5rem":"0",paddingBottom:b<ke.items.length-1?"0.5rem":"0",borderBottom:b<ke.items.length-1?"1px solid #e9ecef":"none"},children:[l.jsxs("span",{style:{color:x.D.carbon,fontSize:"0.9rem"},children:[p.nombre," x",p.quantity]}),l.jsxs("span",{style:{color:x.D.carbon,fontWeight:"500",fontSize:"0.9rem"},children:["$",p.precio*p.quantity]})]},b))})]}),l.jsx("button",{onClick:()=>{yn(null),ze(""),$n(""),An("")},style:{width:"100%",padding:"0.75rem",background:"transparent",border:`2px solid ${x.D.miel}`,color:x.D.miel,borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.background=x.D.miel,p.target.style.color="white"},onMouseLeave:p=>{p.target.style.background="transparent",p.target.style.color=x.D.miel},children:"🔍 Rastrear Otra Orden"})]}):l.jsxs("div",{children:[l.jsx("p",{style:{color:x.D.carbon,marginBottom:"1.5rem",fontSize:"1rem"},children:"Ingresa tu ID de orden o email para rastrear tu pedido"}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"ID de Orden"}),l.jsx("input",{type:"text",value:Ft,onChange:p=>$n(p.target.value),placeholder:"Ej: order_123456789 o AMY-123456-ABC",style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.D.carbon,fontWeight:"500"},children:"O Email"}),l.jsx("input",{type:"email",value:rr,onChange:p=>An(p.target.value),placeholder:"tu@email.com",style:{width:"100%",padding:"0.75rem",border:`2px solid ${x.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:p=>p.target.style.borderColor=x.D.miel,onBlur:p=>p.target.style.borderColor=x.D.crema})]}),Ke&&l.jsx("div",{style:{background:"#fee",color:"#c33",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:Ke}),l.jsx("button",{onClick:$u,style:{width:"100%",padding:"0.75rem",background:`linear-gradient(135deg, ${x.D.miel} 0%, #d4a574 100%)`,border:"none",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:p=>{p.target.style.transform="translateY(-2px)",p.target.style.boxShadow="0 5px 15px rgba(0,0,0,0.2)"},onMouseLeave:p=>{p.target.style.transform="translateY(0)",p.target.style.boxShadow="none"},children:"🔍 Rastrear Orden"})]})]})}),rn&&l.jsx(IR,{user:I,onClose:()=>Gt(!1)})]})}Md.createRoot(document.getElementById("root")).render(l.jsx(M1.StrictMode,{children:l.jsx(RR,{})}));
