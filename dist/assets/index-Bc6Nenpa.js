(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function SE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r0={exports:{}},Lc={},i0={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ma=Symbol.for("react.element"),TE=Symbol.for("react.portal"),IE=Symbol.for("react.fragment"),AE=Symbol.for("react.strict_mode"),CE=Symbol.for("react.profiler"),bE=Symbol.for("react.provider"),kE=Symbol.for("react.context"),RE=Symbol.for("react.forward_ref"),PE=Symbol.for("react.suspense"),DE=Symbol.for("react.memo"),NE=Symbol.for("react.lazy"),mm=Symbol.iterator;function jE(t){return t===null||typeof t!="object"?null:(t=mm&&t[mm]||t["@@iterator"],typeof t=="function"?t:null)}var s0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o0=Object.assign,a0={};function Fs(t,e,n){this.props=t,this.context=e,this.refs=a0,this.updater=n||s0}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l0(){}l0.prototype=Fs.prototype;function Uh(t,e,n){this.props=t,this.context=e,this.refs=a0,this.updater=n||s0}var Bh=Uh.prototype=new l0;Bh.constructor=Uh;o0(Bh,Fs.prototype);Bh.isPureReactComponent=!0;var gm=Array.isArray,c0=Object.prototype.hasOwnProperty,Wh={current:null},u0={key:!0,ref:!0,__self:!0,__source:!0};function d0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)c0.call(e,r)&&!u0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ma,type:t,key:s,ref:o,props:i,_owner:Wh.current}}function VE(t,e){return{$$typeof:ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $h(t){return typeof t=="object"&&t!==null&&t.$$typeof===ma}function LE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ym=/\/+/g;function Lu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LE(""+t.key):e.toString(36)}function Sl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ma:case TE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Lu(o,0):r,gm(i)?(n="",t!=null&&(n=t.replace(ym,"$&/")+"/"),Sl(i,e,n,"",function(h){return h})):i!=null&&($h(i)&&(i=VE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ym,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",gm(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Lu(s,l);o+=Sl(s,e,n,u,i)}else if(u=jE(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Lu(s,l++),o+=Sl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xa(t,e,n){if(t==null)return t;var r=[],i=0;return Sl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ME(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},Tl={transition:null},OE={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Tl,ReactCurrentOwner:Wh};function h0(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Xa,forEach:function(t,e,n){Xa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xa(t,function(){e++}),e},toArray:function(t){return Xa(t,function(e){return e})||[]},only:function(t){if(!$h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Fs;ce.Fragment=IE;ce.Profiler=CE;ce.PureComponent=Uh;ce.StrictMode=AE;ce.Suspense=PE;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OE;ce.act=h0;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=o0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)c0.call(e,u)&&!u0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ma,type:t.type,key:i,ref:s,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:kE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bE,_context:t},t.Consumer=t};ce.createElement=d0;ce.createFactory=function(t){var e=d0.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:RE,render:t}};ce.isValidElement=$h;ce.lazy=function(t){return{$$typeof:NE,_payload:{_status:-1,_result:t},_init:ME}};ce.memo=function(t,e){return{$$typeof:DE,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Tl.transition;Tl.transition={};try{t()}finally{Tl.transition=e}};ce.unstable_act=h0;ce.useCallback=function(t,e){return Lt.current.useCallback(t,e)};ce.useContext=function(t){return Lt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Lt.current.useEffect(t,e)};ce.useId=function(){return Lt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Lt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};ce.useRef=function(t){return Lt.current.useRef(t)};ce.useState=function(t){return Lt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Lt.current.useTransition()};ce.version="18.3.1";i0.exports=ce;var ie=i0.exports;const FE=SE(ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE=ie,UE=Symbol.for("react.element"),BE=Symbol.for("react.fragment"),WE=Object.prototype.hasOwnProperty,$E=zE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qE={key:!0,ref:!0,__self:!0,__source:!0};function f0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WE.call(e,r)&&!qE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:UE,type:t,key:s,ref:o,props:i,_owner:$E.current}}Lc.Fragment=BE;Lc.jsx=f0;Lc.jsxs=f0;r0.exports=Lc;var c=r0.exports,wd={},p0={exports:{}},en={},m0={exports:{}},g0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,X){var Z=H.length;H.push(X);e:for(;0<Z;){var ve=Z-1>>>1,fe=H[ve];if(0<i(fe,X))H[ve]=X,H[Z]=fe,Z=ve;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],Z=H.pop();if(Z!==X){H[0]=Z;e:for(var ve=0,fe=H.length,_e=fe>>>1;ve<_e;){var Qe=2*(ve+1)-1,at=H[Qe],C=Qe+1,U=H[C];if(0>i(at,Z))C<fe&&0>i(U,at)?(H[ve]=U,H[C]=Z,ve=C):(H[ve]=at,H[Qe]=Z,ve=Qe);else if(C<fe&&0>i(U,Z))H[ve]=U,H[C]=Z,ve=C;else break e}}return X}function i(H,X){var Z=H.sortIndex-X.sortIndex;return Z!==0?Z:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,g=null,y=3,k=!1,N=!1,V=!1,F=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=H)r(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function M(H){if(V=!1,b(H),!N)if(n(u)!==null)N=!0,gr($);else{var X=n(h);X!==null&&kt(M,X.startTime-H)}}function $(H,X){N=!1,V&&(V=!1,A(_),_=-1),k=!0;var Z=y;try{for(b(X),g=n(u);g!==null&&(!(g.expirationTime>X)||H&&!R());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,y=g.priorityLevel;var fe=ve(g.expirationTime<=X);X=t.unstable_now(),typeof fe=="function"?g.callback=fe:g===n(u)&&r(u),b(X)}else r(u);g=n(u)}if(g!==null)var _e=!0;else{var Qe=n(h);Qe!==null&&kt(M,Qe.startTime-X),_e=!1}return _e}finally{g=null,y=Z,k=!1}}var B=!1,w=null,_=-1,x=5,S=-1;function R(){return!(t.unstable_now()-S<x)}function D(){if(w!==null){var H=t.unstable_now();S=H;var X=!0;try{X=w(!0,H)}finally{X?I():(B=!1,w=null)}}else B=!1}var I;if(typeof E=="function")I=function(){E(D)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Ht=bt.port2;bt.port1.onmessage=D,I=function(){Ht.postMessage(null)}}else I=function(){F(D,0)};function gr(H){w=H,B||(B=!0,I())}function kt(H,X){_=F(function(){H(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){N||k||(N=!0,gr($))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var Z=y;y=X;try{return H()}finally{y=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=y;y=H;try{return X()}finally{y=Z}},t.unstable_scheduleCallback=function(H,X,Z){var ve=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ve+Z:ve):Z=ve,H){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Z+fe,H={id:p++,callback:X,priorityLevel:H,startTime:Z,expirationTime:fe,sortIndex:-1},Z>ve?(H.sortIndex=Z,e(h,H),n(u)===null&&H===n(h)&&(V?(A(_),_=-1):V=!0,kt(M,Z-ve))):(H.sortIndex=fe,e(u,H),N||k||(N=!0,gr($))),H},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(H){var X=y;return function(){var Z=y;y=X;try{return H.apply(this,arguments)}finally{y=Z}}}})(g0);m0.exports=g0;var HE=m0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE=ie,Zt=HE;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y0=new Set,Wo={};function ji(t,e){Is(t,e),Is(t+"Capture",e)}function Is(t,e){for(Wo[t]=e,t=0;t<e.length;t++)y0.add(e[t])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ed=Object.prototype.hasOwnProperty,KE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vm={},_m={};function QE(t){return Ed.call(_m,t)?!0:Ed.call(vm,t)?!1:KE.test(t)?_m[t]=!0:(vm[t]=!0,!1)}function YE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JE(t,e,n,r){if(e===null||typeof e>"u"||YE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var qh=/[\-:]([a-z])/g;function Hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qh,Hh);mt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qh,Hh);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qh,Hh);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gh(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JE(e,n,i,r)&&(n=null),r||i===null?QE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=GE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Za=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),Kh=Symbol.for("react.strict_mode"),xd=Symbol.for("react.profiler"),v0=Symbol.for("react.provider"),_0=Symbol.for("react.context"),Qh=Symbol.for("react.forward_ref"),Sd=Symbol.for("react.suspense"),Td=Symbol.for("react.suspense_list"),Yh=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),w0=Symbol.for("react.offscreen"),wm=Symbol.iterator;function ao(t){return t===null||typeof t!="object"?null:(t=wm&&t[wm]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Mu;function go(t){if(Mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mu=e&&e[1]||""}return`
`+Mu+t}var Ou=!1;function Fu(t,e){if(!t||Ou)return"";Ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ou=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?go(t):""}function XE(t){switch(t.tag){case 5:return go(t.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return t=Fu(t.type,!1),t;case 11:return t=Fu(t.type.render,!1),t;case 1:return t=Fu(t.type,!0),t;default:return""}}function Id(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case xd:return"Profiler";case Kh:return"StrictMode";case Sd:return"Suspense";case Td:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _0:return(t.displayName||"Context")+".Consumer";case v0:return(t._context.displayName||"Context")+".Provider";case Qh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yh:return e=t.displayName||null,e!==null?e:Id(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return Id(t(e))}catch{}}return null}function ZE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Id(e);case 8:return e===Kh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ex(t){var e=E0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function el(t){t._valueTracker||(t._valueTracker=ex(t))}function x0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=E0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ad(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Em(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S0(t,e){e=e.checked,e!=null&&Gh(t,"checked",e,!1)}function Cd(t,e){S0(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bd(t,e.type,n):e.hasOwnProperty("defaultValue")&&bd(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bd(t,e,n){(e!=="number"||ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yo=Array.isArray;function ms(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(yo(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function T0(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tl,A0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tl=tl||document.createElement("div"),tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tx=["Webkit","ms","Moz","O"];Object.keys(Co).forEach(function(t){tx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Co[e]=Co[t]})});function C0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Co.hasOwnProperty(t)&&Co[t]?(""+e).trim():e+"px"}function b0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=C0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nx=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pd(t,e){if(e){if(nx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Dd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nd=null;function Jh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jd=null,gs=null,ys=null;function Im(t){if(t=va(t)){if(typeof jd!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Uc(e),jd(t.stateNode,t.type,e))}}function k0(t){gs?ys?ys.push(t):ys=[t]:gs=t}function R0(){if(gs){var t=gs,e=ys;if(ys=gs=null,Im(t),e)for(t=0;t<e.length;t++)Im(e[t])}}function P0(t,e){return t(e)}function D0(){}var zu=!1;function N0(t,e,n){if(zu)return t(e,n);zu=!0;try{return P0(t,e,n)}finally{zu=!1,(gs!==null||ys!==null)&&(D0(),R0())}}function qo(t,e){var n=t.stateNode;if(n===null)return null;var r=Uc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Vd=!1;if(rr)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Vd=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Vd=!1}function rx(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var bo=!1,Hl=null,Gl=!1,Ld=null,ix={onError:function(t){bo=!0,Hl=t}};function sx(t,e,n,r,i,s,o,l,u){bo=!1,Hl=null,rx.apply(ix,arguments)}function ox(t,e,n,r,i,s,o,l,u){if(sx.apply(this,arguments),bo){if(bo){var h=Hl;bo=!1,Hl=null}else throw Error(W(198));Gl||(Gl=!0,Ld=h)}}function Vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Am(t){if(Vi(t)!==t)throw Error(W(188))}function ax(t){var e=t.alternate;if(!e){if(e=Vi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Am(i),t;if(s===r)return Am(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function V0(t){return t=ax(t),t!==null?L0(t):null}function L0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=L0(t);if(e!==null)return e;t=t.sibling}return null}var M0=Zt.unstable_scheduleCallback,Cm=Zt.unstable_cancelCallback,lx=Zt.unstable_shouldYield,cx=Zt.unstable_requestPaint,We=Zt.unstable_now,ux=Zt.unstable_getCurrentPriorityLevel,Xh=Zt.unstable_ImmediatePriority,O0=Zt.unstable_UserBlockingPriority,Kl=Zt.unstable_NormalPriority,dx=Zt.unstable_LowPriority,F0=Zt.unstable_IdlePriority,Mc=null,Nn=null;function hx(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Mc,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:mx,fx=Math.log,px=Math.LN2;function mx(t){return t>>>=0,t===0?32:31-(fx(t)/px|0)|0}var nl=64,rl=4194304;function vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=vo(l):(s&=o,s!==0&&(r=vo(s)))}else o=n&~i,o!==0?r=vo(o):s!==0&&(r=vo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),i=1<<n,r|=t[n],e&=~i;return r}function gx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=gx(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Md(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z0(){var t=nl;return nl<<=1,!(nl&4194240)&&(nl=64),t}function Uu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function vx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Zh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function U0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B0,ef,W0,$0,q0,Od=!1,il=[],jr=null,Vr=null,Lr=null,Ho=new Map,Go=new Map,Ir=[],_x="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bm(t,e){switch(t){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":Ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(e.pointerId)}}function co(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=va(e),e!==null&&ef(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wx(t,e,n,r,i){switch(e){case"focusin":return jr=co(jr,t,e,n,r,i),!0;case"dragenter":return Vr=co(Vr,t,e,n,r,i),!0;case"mouseover":return Lr=co(Lr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ho.set(s,co(Ho.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Go.set(s,co(Go.get(s)||null,t,e,n,r,i)),!0}return!1}function H0(t){var e=gi(t.target);if(e!==null){var n=Vi(e);if(n!==null){if(e=n.tag,e===13){if(e=j0(n),e!==null){t.blockedOn=e,q0(t.priority,function(){W0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nd=r,n.target.dispatchEvent(r),Nd=null}else return e=va(n),e!==null&&ef(e),t.blockedOn=n,!1;e.shift()}return!0}function km(t,e,n){Il(t)&&n.delete(e)}function Ex(){Od=!1,jr!==null&&Il(jr)&&(jr=null),Vr!==null&&Il(Vr)&&(Vr=null),Lr!==null&&Il(Lr)&&(Lr=null),Ho.forEach(km),Go.forEach(km)}function uo(t,e){t.blockedOn===e&&(t.blockedOn=null,Od||(Od=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,Ex)))}function Ko(t){function e(i){return uo(i,t)}if(0<il.length){uo(il[0],t);for(var n=1;n<il.length;n++){var r=il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jr!==null&&uo(jr,t),Vr!==null&&uo(Vr,t),Lr!==null&&uo(Lr,t),Ho.forEach(e),Go.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)H0(n),n.blockedOn===null&&Ir.shift()}var vs=dr.ReactCurrentBatchConfig,Yl=!0;function xx(t,e,n,r){var i=Ee,s=vs.transition;vs.transition=null;try{Ee=1,tf(t,e,n,r)}finally{Ee=i,vs.transition=s}}function Sx(t,e,n,r){var i=Ee,s=vs.transition;vs.transition=null;try{Ee=4,tf(t,e,n,r)}finally{Ee=i,vs.transition=s}}function tf(t,e,n,r){if(Yl){var i=Fd(t,e,n,r);if(i===null)Ju(t,e,r,Jl,n),bm(t,r);else if(wx(i,t,e,n,r))r.stopPropagation();else if(bm(t,r),e&4&&-1<_x.indexOf(t)){for(;i!==null;){var s=va(i);if(s!==null&&B0(s),s=Fd(t,e,n,r),s===null&&Ju(t,e,r,Jl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ju(t,e,r,null,n)}}var Jl=null;function Fd(t,e,n,r){if(Jl=null,t=Jh(r),t=gi(t),t!==null)if(e=Vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jl=t,null}function G0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ux()){case Xh:return 1;case O0:return 4;case Kl:case dx:return 16;case F0:return 536870912;default:return 16}default:return 16}}var Pr=null,nf=null,Al=null;function K0(){if(Al)return Al;var t,e=nf,n=e.length,r,i="value"in Pr?Pr.value:Pr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Al=i.slice(t,1<r?1-r:void 0)}function Cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sl(){return!0}function Rm(){return!1}function tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sl:Rm,this.isPropagationStopped=Rm,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=tn(zs),ya=Me({},zs,{view:0,detail:0}),Tx=tn(ya),Bu,Wu,ho,Oc=Me({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ho&&(ho&&t.type==="mousemove"?(Bu=t.screenX-ho.screenX,Wu=t.screenY-ho.screenY):Wu=Bu=0,ho=t),Bu)},movementY:function(t){return"movementY"in t?t.movementY:Wu}}),Pm=tn(Oc),Ix=Me({},Oc,{dataTransfer:0}),Ax=tn(Ix),Cx=Me({},ya,{relatedTarget:0}),$u=tn(Cx),bx=Me({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),kx=tn(bx),Rx=Me({},zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Px=tn(Rx),Dx=Me({},zs,{data:0}),Dm=tn(Dx),Nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vx[t])?!!e[t]:!1}function sf(){return Lx}var Mx=Me({},ya,{key:function(t){if(t.key){var e=Nx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sf,charCode:function(t){return t.type==="keypress"?Cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ox=tn(Mx),Fx=Me({},Oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=tn(Fx),zx=Me({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sf}),Ux=tn(zx),Bx=Me({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wx=tn(Bx),$x=Me({},Oc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qx=tn($x),Hx=[9,13,27,32],of=rr&&"CompositionEvent"in window,ko=null;rr&&"documentMode"in document&&(ko=document.documentMode);var Gx=rr&&"TextEvent"in window&&!ko,Q0=rr&&(!of||ko&&8<ko&&11>=ko),jm=" ",Vm=!1;function Y0(t,e){switch(t){case"keyup":return Hx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function Kx(t,e){switch(t){case"compositionend":return J0(e);case"keypress":return e.which!==32?null:(Vm=!0,jm);case"textInput":return t=e.data,t===jm&&Vm?null:t;default:return null}}function Qx(t,e){if(ns)return t==="compositionend"||!of&&Y0(t,e)?(t=K0(),Al=nf=Pr=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Q0&&e.locale!=="ko"?null:e.data;default:return null}}var Yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yx[t.type]:e==="textarea"}function X0(t,e,n,r){k0(r),e=Xl(e,"onChange"),0<e.length&&(n=new rf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ro=null,Qo=null;function Jx(t){cv(t,0)}function Fc(t){var e=ss(t);if(x0(e))return t}function Xx(t,e){if(t==="change")return e}var Z0=!1;if(rr){var qu;if(rr){var Hu="oninput"in document;if(!Hu){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),Hu=typeof Mm.oninput=="function"}qu=Hu}else qu=!1;Z0=qu&&(!document.documentMode||9<document.documentMode)}function Om(){Ro&&(Ro.detachEvent("onpropertychange",ev),Qo=Ro=null)}function ev(t){if(t.propertyName==="value"&&Fc(Qo)){var e=[];X0(e,Qo,t,Jh(t)),N0(Jx,e)}}function Zx(t,e,n){t==="focusin"?(Om(),Ro=e,Qo=n,Ro.attachEvent("onpropertychange",ev)):t==="focusout"&&Om()}function eS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fc(Qo)}function tS(t,e){if(t==="click")return Fc(e)}function nS(t,e){if(t==="input"||t==="change")return Fc(e)}function rS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:rS;function Yo(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ed.call(e,i)||!An(t[i],e[i]))return!1}return!0}function Fm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zm(t,e){var n=Fm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fm(n)}}function tv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nv(){for(var t=window,e=ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ql(t.document)}return e}function af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iS(t){var e=nv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tv(n.ownerDocument.documentElement,n)){if(r!==null&&af(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zm(n,s);var o=zm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sS=rr&&"documentMode"in document&&11>=document.documentMode,rs=null,zd=null,Po=null,Ud=!1;function Um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ud||rs==null||rs!==ql(r)||(r=rs,"selectionStart"in r&&af(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Po&&Yo(Po,r)||(Po=r,r=Xl(zd,"onSelect"),0<r.length&&(e=new rf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rs)))}function ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var is={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionend:ol("Transition","TransitionEnd")},Gu={},rv={};rr&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function zc(t){if(Gu[t])return Gu[t];if(!is[t])return t;var e=is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rv)return Gu[t]=e[n];return t}var iv=zc("animationend"),sv=zc("animationiteration"),ov=zc("animationstart"),av=zc("transitionend"),lv=new Map,Bm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){lv.set(t,e),ji(e,[t])}for(var Ku=0;Ku<Bm.length;Ku++){var Qu=Bm[Ku],oS=Qu.toLowerCase(),aS=Qu[0].toUpperCase()+Qu.slice(1);ni(oS,"on"+aS)}ni(iv,"onAnimationEnd");ni(sv,"onAnimationIteration");ni(ov,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(av,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lS=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function Wm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ox(r,e,void 0,t),t.currentTarget=null}function cv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Wm(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Wm(i,l,h),s=u}}}if(Gl)throw t=Ld,Gl=!1,Ld=null,t}function ke(t,e){var n=e[Hd];n===void 0&&(n=e[Hd]=new Set);var r=t+"__bubble";n.has(r)||(uv(e,t,2,!1),n.add(r))}function Yu(t,e,n){var r=0;e&&(r|=4),uv(n,t,r,e)}var al="_reactListening"+Math.random().toString(36).slice(2);function Jo(t){if(!t[al]){t[al]=!0,y0.forEach(function(n){n!=="selectionchange"&&(lS.has(n)||Yu(n,!1,t),Yu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[al]||(e[al]=!0,Yu("selectionchange",!1,e))}}function uv(t,e,n,r){switch(G0(e)){case 1:var i=xx;break;case 4:i=Sx;break;default:i=tf}n=i.bind(null,e,n,t),i=void 0,!Vd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ju(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=gi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}N0(function(){var h=s,p=Jh(n),g=[];e:{var y=lv.get(t);if(y!==void 0){var k=rf,N=t;switch(t){case"keypress":if(Cl(n)===0)break e;case"keydown":case"keyup":k=Ox;break;case"focusin":N="focus",k=$u;break;case"focusout":N="blur",k=$u;break;case"beforeblur":case"afterblur":k=$u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Ax;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=Ux;break;case iv:case sv:case ov:k=kx;break;case av:k=Wx;break;case"scroll":k=Tx;break;case"wheel":k=qx;break;case"copy":case"cut":case"paste":k=Px;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Nm}var V=(e&4)!==0,F=!V&&t==="scroll",A=V?y!==null?y+"Capture":null:y;V=[];for(var E=h,b;E!==null;){b=E;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,A!==null&&(M=qo(E,A),M!=null&&V.push(Xo(E,M,b)))),F)break;E=E.return}0<V.length&&(y=new k(y,N,null,n,p),g.push({event:y,listeners:V}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",y&&n!==Nd&&(N=n.relatedTarget||n.fromElement)&&(gi(N)||N[ir]))break e;if((k||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,k?(N=n.relatedTarget||n.toElement,k=h,N=N?gi(N):null,N!==null&&(F=Vi(N),N!==F||N.tag!==5&&N.tag!==6)&&(N=null)):(k=null,N=h),k!==N)){if(V=Pm,M="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(V=Nm,M="onPointerLeave",A="onPointerEnter",E="pointer"),F=k==null?y:ss(k),b=N==null?y:ss(N),y=new V(M,E+"leave",k,n,p),y.target=F,y.relatedTarget=b,M=null,gi(p)===h&&(V=new V(A,E+"enter",N,n,p),V.target=b,V.relatedTarget=F,M=V),F=M,k&&N)t:{for(V=k,A=N,E=0,b=V;b;b=Gi(b))E++;for(b=0,M=A;M;M=Gi(M))b++;for(;0<E-b;)V=Gi(V),E--;for(;0<b-E;)A=Gi(A),b--;for(;E--;){if(V===A||A!==null&&V===A.alternate)break t;V=Gi(V),A=Gi(A)}V=null}else V=null;k!==null&&$m(g,y,k,V,!1),N!==null&&F!==null&&$m(g,F,N,V,!0)}}e:{if(y=h?ss(h):window,k=y.nodeName&&y.nodeName.toLowerCase(),k==="select"||k==="input"&&y.type==="file")var $=Xx;else if(Lm(y))if(Z0)$=nS;else{$=eS;var B=Zx}else(k=y.nodeName)&&k.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&($=tS);if($&&($=$(t,h))){X0(g,$,n,p);break e}B&&B(t,y,h),t==="focusout"&&(B=y._wrapperState)&&B.controlled&&y.type==="number"&&bd(y,"number",y.value)}switch(B=h?ss(h):window,t){case"focusin":(Lm(B)||B.contentEditable==="true")&&(rs=B,zd=h,Po=null);break;case"focusout":Po=zd=rs=null;break;case"mousedown":Ud=!0;break;case"contextmenu":case"mouseup":case"dragend":Ud=!1,Um(g,n,p);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":Um(g,n,p)}var w;if(of)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ns?Y0(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Q0&&n.locale!=="ko"&&(ns||_!=="onCompositionStart"?_==="onCompositionEnd"&&ns&&(w=K0()):(Pr=p,nf="value"in Pr?Pr.value:Pr.textContent,ns=!0)),B=Xl(h,_),0<B.length&&(_=new Dm(_,t,null,n,p),g.push({event:_,listeners:B}),w?_.data=w:(w=J0(n),w!==null&&(_.data=w)))),(w=Gx?Kx(t,n):Qx(t,n))&&(h=Xl(h,"onBeforeInput"),0<h.length&&(p=new Dm("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=w))}cv(g,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qo(t,n),s!=null&&r.unshift(Xo(t,s,i)),s=qo(t,e),s!=null&&r.push(Xo(t,s,i))),t=t.return}return r}function Gi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $m(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=qo(n,s),u!=null&&o.unshift(Xo(n,u,l))):i||(u=qo(n,s),u!=null&&o.push(Xo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cS=/\r\n?/g,uS=/\u0000|\uFFFD/g;function qm(t){return(typeof t=="string"?t:""+t).replace(cS,`
`).replace(uS,"")}function ll(t,e,n){if(e=qm(e),qm(t)!==e&&n)throw Error(W(425))}function Zl(){}var Bd=null,Wd=null;function $d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qd=typeof setTimeout=="function"?setTimeout:void 0,dS=typeof clearTimeout=="function"?clearTimeout:void 0,Hm=typeof Promise=="function"?Promise:void 0,hS=typeof queueMicrotask=="function"?queueMicrotask:typeof Hm<"u"?function(t){return Hm.resolve(null).then(t).catch(fS)}:qd;function fS(t){setTimeout(function(){throw t})}function Xu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ko(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ko(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Us,Zo="__reactProps$"+Us,ir="__reactContainer$"+Us,Hd="__reactEvents$"+Us,pS="__reactListeners$"+Us,mS="__reactHandles$"+Us;function gi(t){var e=t[Dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ir]||n[Dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gm(t);t!==null;){if(n=t[Dn])return n;t=Gm(t)}return e}t=n,n=t.parentNode}return null}function va(t){return t=t[Dn]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Uc(t){return t[Zo]||null}var Gd=[],os=-1;function ri(t){return{current:t}}function Re(t){0>os||(t.current=Gd[os],Gd[os]=null,os--)}function Ce(t,e){os++,Gd[os]=t.current,t.current=e}var Qr={},At=ri(Qr),Wt=ri(!1),xi=Qr;function As(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function ec(){Re(Wt),Re(At)}function Km(t,e,n){if(At.current!==Qr)throw Error(W(168));Ce(At,e),Ce(Wt,n)}function dv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,ZE(t)||"Unknown",i));return Me({},n,r)}function tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,xi=At.current,Ce(At,t),Ce(Wt,Wt.current),!0}function Qm(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=dv(t,e,xi),r.__reactInternalMemoizedMergedChildContext=t,Re(Wt),Re(At),Ce(At,t)):Re(Wt),Ce(Wt,n)}var Kn=null,Bc=!1,Zu=!1;function hv(t){Kn===null?Kn=[t]:Kn.push(t)}function gS(t){Bc=!0,hv(t)}function ii(){if(!Zu&&Kn!==null){Zu=!0;var t=0,e=Ee;try{var n=Kn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,Bc=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),M0(Xh,ii),i}finally{Ee=e,Zu=!1}}return null}var as=[],ls=0,nc=null,rc=0,sn=[],on=0,Si=null,Qn=1,Yn="";function fi(t,e){as[ls++]=rc,as[ls++]=nc,nc=t,rc=e}function fv(t,e,n){sn[on++]=Qn,sn[on++]=Yn,sn[on++]=Si,Si=t;var r=Qn;t=Yn;var i=32-xn(r)-1;r&=~(1<<i),n+=1;var s=32-xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qn=1<<32-xn(e)+i|n<<i|r,Yn=s+t}else Qn=1<<s|n<<i|r,Yn=t}function lf(t){t.return!==null&&(fi(t,1),fv(t,1,0))}function cf(t){for(;t===nc;)nc=as[--ls],as[ls]=null,rc=as[--ls],as[ls]=null;for(;t===Si;)Si=sn[--on],sn[on]=null,Yn=sn[--on],sn[on]=null,Qn=sn[--on],sn[on]=null}var Xt=null,Yt=null,De=!1,wn=null;function pv(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ym(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Si!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Yt=null,!0):!1;default:return!1}}function Kd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qd(t){if(De){var e=Yt;if(e){var n=e;if(!Ym(t,e)){if(Kd(t))throw Error(W(418));e=Mr(n.nextSibling);var r=Xt;e&&Ym(t,e)?pv(r,n):(t.flags=t.flags&-4097|2,De=!1,Xt=t)}}else{if(Kd(t))throw Error(W(418));t.flags=t.flags&-4097|2,De=!1,Xt=t}}}function Jm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function cl(t){if(t!==Xt)return!1;if(!De)return Jm(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$d(t.type,t.memoizedProps)),e&&(e=Yt)){if(Kd(t))throw mv(),Error(W(418));for(;e;)pv(t,e),e=Mr(e.nextSibling)}if(Jm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yt=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Xt?Mr(t.stateNode.nextSibling):null;return!0}function mv(){for(var t=Yt;t;)t=Mr(t.nextSibling)}function Cs(){Yt=Xt=null,De=!1}function uf(t){wn===null?wn=[t]:wn.push(t)}var yS=dr.ReactCurrentBatchConfig;function fo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function ul(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xm(t){var e=t._init;return e(t._payload)}function gv(t){function e(A,E){if(t){var b=A.deletions;b===null?(A.deletions=[E],A.flags|=16):b.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function r(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function i(A,E){return A=Ur(A,E),A.index=0,A.sibling=null,A}function s(A,E,b){return A.index=b,t?(b=A.alternate,b!==null?(b=b.index,b<E?(A.flags|=2,E):b):(A.flags|=2,E)):(A.flags|=1048576,E)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,E,b,M){return E===null||E.tag!==6?(E=od(b,A.mode,M),E.return=A,E):(E=i(E,b),E.return=A,E)}function u(A,E,b,M){var $=b.type;return $===ts?p(A,E,b.props.children,M,b.key):E!==null&&(E.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Sr&&Xm($)===E.type)?(M=i(E,b.props),M.ref=fo(A,E,b),M.return=A,M):(M=jl(b.type,b.key,b.props,null,A.mode,M),M.ref=fo(A,E,b),M.return=A,M)}function h(A,E,b,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=ad(b,A.mode,M),E.return=A,E):(E=i(E,b.children||[]),E.return=A,E)}function p(A,E,b,M,$){return E===null||E.tag!==7?(E=Ei(b,A.mode,M,$),E.return=A,E):(E=i(E,b),E.return=A,E)}function g(A,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=od(""+E,A.mode,b),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Za:return b=jl(E.type,E.key,E.props,null,A.mode,b),b.ref=fo(A,null,E),b.return=A,b;case es:return E=ad(E,A.mode,b),E.return=A,E;case Sr:var M=E._init;return g(A,M(E._payload),b)}if(yo(E)||ao(E))return E=Ei(E,A.mode,b,null),E.return=A,E;ul(A,E)}return null}function y(A,E,b,M){var $=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return $!==null?null:l(A,E,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Za:return b.key===$?u(A,E,b,M):null;case es:return b.key===$?h(A,E,b,M):null;case Sr:return $=b._init,y(A,E,$(b._payload),M)}if(yo(b)||ao(b))return $!==null?null:p(A,E,b,M,null);ul(A,b)}return null}function k(A,E,b,M,$){if(typeof M=="string"&&M!==""||typeof M=="number")return A=A.get(b)||null,l(E,A,""+M,$);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Za:return A=A.get(M.key===null?b:M.key)||null,u(E,A,M,$);case es:return A=A.get(M.key===null?b:M.key)||null,h(E,A,M,$);case Sr:var B=M._init;return k(A,E,b,B(M._payload),$)}if(yo(M)||ao(M))return A=A.get(b)||null,p(E,A,M,$,null);ul(E,M)}return null}function N(A,E,b,M){for(var $=null,B=null,w=E,_=E=0,x=null;w!==null&&_<b.length;_++){w.index>_?(x=w,w=null):x=w.sibling;var S=y(A,w,b[_],M);if(S===null){w===null&&(w=x);break}t&&w&&S.alternate===null&&e(A,w),E=s(S,E,_),B===null?$=S:B.sibling=S,B=S,w=x}if(_===b.length)return n(A,w),De&&fi(A,_),$;if(w===null){for(;_<b.length;_++)w=g(A,b[_],M),w!==null&&(E=s(w,E,_),B===null?$=w:B.sibling=w,B=w);return De&&fi(A,_),$}for(w=r(A,w);_<b.length;_++)x=k(w,A,_,b[_],M),x!==null&&(t&&x.alternate!==null&&w.delete(x.key===null?_:x.key),E=s(x,E,_),B===null?$=x:B.sibling=x,B=x);return t&&w.forEach(function(R){return e(A,R)}),De&&fi(A,_),$}function V(A,E,b,M){var $=ao(b);if(typeof $!="function")throw Error(W(150));if(b=$.call(b),b==null)throw Error(W(151));for(var B=$=null,w=E,_=E=0,x=null,S=b.next();w!==null&&!S.done;_++,S=b.next()){w.index>_?(x=w,w=null):x=w.sibling;var R=y(A,w,S.value,M);if(R===null){w===null&&(w=x);break}t&&w&&R.alternate===null&&e(A,w),E=s(R,E,_),B===null?$=R:B.sibling=R,B=R,w=x}if(S.done)return n(A,w),De&&fi(A,_),$;if(w===null){for(;!S.done;_++,S=b.next())S=g(A,S.value,M),S!==null&&(E=s(S,E,_),B===null?$=S:B.sibling=S,B=S);return De&&fi(A,_),$}for(w=r(A,w);!S.done;_++,S=b.next())S=k(w,A,_,S.value,M),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?_:S.key),E=s(S,E,_),B===null?$=S:B.sibling=S,B=S);return t&&w.forEach(function(D){return e(A,D)}),De&&fi(A,_),$}function F(A,E,b,M){if(typeof b=="object"&&b!==null&&b.type===ts&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Za:e:{for(var $=b.key,B=E;B!==null;){if(B.key===$){if($=b.type,$===ts){if(B.tag===7){n(A,B.sibling),E=i(B,b.props.children),E.return=A,A=E;break e}}else if(B.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Sr&&Xm($)===B.type){n(A,B.sibling),E=i(B,b.props),E.ref=fo(A,B,b),E.return=A,A=E;break e}n(A,B);break}else e(A,B);B=B.sibling}b.type===ts?(E=Ei(b.props.children,A.mode,M,b.key),E.return=A,A=E):(M=jl(b.type,b.key,b.props,null,A.mode,M),M.ref=fo(A,E,b),M.return=A,A=M)}return o(A);case es:e:{for(B=b.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(A,E.sibling),E=i(E,b.children||[]),E.return=A,A=E;break e}else{n(A,E);break}else e(A,E);E=E.sibling}E=ad(b,A.mode,M),E.return=A,A=E}return o(A);case Sr:return B=b._init,F(A,E,B(b._payload),M)}if(yo(b))return N(A,E,b,M);if(ao(b))return V(A,E,b,M);ul(A,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(n(A,E.sibling),E=i(E,b),E.return=A,A=E):(n(A,E),E=od(b,A.mode,M),E.return=A,A=E),o(A)):n(A,E)}return F}var bs=gv(!0),yv=gv(!1),ic=ri(null),sc=null,cs=null,df=null;function hf(){df=cs=sc=null}function ff(t){var e=ic.current;Re(ic),t._currentValue=e}function Yd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _s(t,e){sc=t,df=cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(df!==t)if(t={context:t,memoizedValue:e,next:null},cs===null){if(sc===null)throw Error(W(308));cs=t,sc.dependencies={lanes:0,firstContext:t}}else cs=cs.next=t;return e}var yi=null;function pf(t){yi===null?yi=[t]:yi.push(t)}function vv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pf(e)):(n.next=i.next,i.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function mf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _v(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sr(t,n)}return i=r.interleaved,i===null?(e.next=e,pf(r)):(e.next=i.next,i.next=e),r.interleaved=e,sr(t,n)}function bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zh(t,n)}}function Zm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oc(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;o=0,p=h=u=null,l=s;do{var y=l.lane,k=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,V=l;switch(y=e,k=n,V.tag){case 1:if(N=V.payload,typeof N=="function"){g=N.call(k,g,y);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=V.payload,y=typeof N=="function"?N.call(k,g,y):N,y==null)break e;g=Me({},g,y);break e;case 2:Tr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else k={eventTime:k,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=k,u=g):p=p.next=k,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(u=g),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ii|=o,t.lanes=o,t.memoizedState=g}}function eg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var _a={},jn=ri(_a),ea=ri(_a),ta=ri(_a);function vi(t){if(t===_a)throw Error(W(174));return t}function gf(t,e){switch(Ce(ta,e),Ce(ea,t),Ce(jn,_a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rd(e,t)}Re(jn),Ce(jn,e)}function ks(){Re(jn),Re(ea),Re(ta)}function wv(t){vi(ta.current);var e=vi(jn.current),n=Rd(e,t.type);e!==n&&(Ce(ea,t),Ce(jn,n))}function yf(t){ea.current===t&&(Re(jn),Re(ea))}var je=ri(0);function ac(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ed=[];function vf(){for(var t=0;t<ed.length;t++)ed[t]._workInProgressVersionPrimary=null;ed.length=0}var kl=dr.ReactCurrentDispatcher,td=dr.ReactCurrentBatchConfig,Ti=0,Le=null,Xe=null,rt=null,lc=!1,Do=!1,na=0,vS=0;function wt(){throw Error(W(321))}function _f(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function wf(t,e,n,r,i,s){if(Ti=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kl.current=t===null||t.memoizedState===null?xS:SS,t=n(r,i),Do){s=0;do{if(Do=!1,na=0,25<=s)throw Error(W(301));s+=1,rt=Xe=null,e.updateQueue=null,kl.current=TS,t=n(r,i)}while(Do)}if(kl.current=cc,e=Xe!==null&&Xe.next!==null,Ti=0,rt=Xe=Le=null,lc=!1,e)throw Error(W(300));return t}function Ef(){var t=na!==0;return na=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Le.memoizedState=rt=t:rt=rt.next=t,rt}function fn(){if(Xe===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=rt===null?Le.memoizedState:rt.next;if(e!==null)rt=e,Xe=t;else{if(t===null)throw Error(W(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},rt===null?Le.memoizedState=rt=t:rt=rt.next=t}return rt}function ra(t,e){return typeof e=="function"?e(t):e}function nd(t){var e=fn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((Ti&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,Le.lanes|=p,Ii|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,An(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,Ii|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rd(t){var e=fn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);An(s,e.memoizedState)||(Bt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ev(){}function xv(t,e){var n=Le,r=fn(),i=e(),s=!An(r.memoizedState,i);if(s&&(r.memoizedState=i,Bt=!0),r=r.queue,xf(Iv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,ia(9,Tv.bind(null,n,r,i,e),void 0,null),st===null)throw Error(W(349));Ti&30||Sv(n,e,i)}return i}function Sv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tv(t,e,n,r){e.value=n,e.getSnapshot=r,Av(e)&&Cv(t)}function Iv(t,e,n){return n(function(){Av(e)&&Cv(t)})}function Av(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function Cv(t){var e=sr(t,1);e!==null&&Sn(e,t,1,-1)}function tg(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:t},e.queue=t,t=t.dispatch=ES.bind(null,Le,t),[e.memoizedState,t]}function ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bv(){return fn().memoizedState}function Rl(t,e,n,r){var i=Rn();Le.flags|=t,i.memoizedState=ia(1|e,n,void 0,r===void 0?null:r)}function Wc(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var o=Xe.memoizedState;if(s=o.destroy,r!==null&&_f(r,o.deps)){i.memoizedState=ia(e,n,s,r);return}}Le.flags|=t,i.memoizedState=ia(1|e,n,s,r)}function ng(t,e){return Rl(8390656,8,t,e)}function xf(t,e){return Wc(2048,8,t,e)}function kv(t,e){return Wc(4,2,t,e)}function Rv(t,e){return Wc(4,4,t,e)}function Pv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dv(t,e,n){return n=n!=null?n.concat([t]):null,Wc(4,4,Pv.bind(null,e,t),n)}function Sf(){}function Nv(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_f(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jv(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_f(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vv(t,e,n){return Ti&21?(An(n,e)||(n=z0(),Le.lanes|=n,Ii|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function _S(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=td.transition;td.transition={};try{t(!1),e()}finally{Ee=n,td.transition=r}}function Lv(){return fn().memoizedState}function wS(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mv(t))Ov(e,n);else if(n=vv(t,e,n,r),n!==null){var i=jt();Sn(n,t,r,i),Fv(n,e,r)}}function ES(t,e,n){var r=zr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mv(t))Ov(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,An(l,o)){var u=e.interleaved;u===null?(i.next=i,pf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=vv(t,e,i,r),n!==null&&(i=jt(),Sn(n,t,r,i),Fv(n,e,r))}}function Mv(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Ov(t,e){Do=lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zh(t,n)}}var cc={readContext:hn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},xS={readContext:hn,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:ng,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rl(4194308,4,Pv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rl(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wS.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:tg,useDebugValue:Sf,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=tg(!1),e=t[0];return t=_S.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=Rn();if(De){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),st===null)throw Error(W(349));Ti&30||Sv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ng(Iv.bind(null,r,s,t),[t]),r.flags|=2048,ia(9,Tv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rn(),e=st.identifierPrefix;if(De){var n=Yn,r=Qn;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=na++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},SS={readContext:hn,useCallback:Nv,useContext:hn,useEffect:xf,useImperativeHandle:Dv,useInsertionEffect:kv,useLayoutEffect:Rv,useMemo:jv,useReducer:nd,useRef:bv,useState:function(){return nd(ra)},useDebugValue:Sf,useDeferredValue:function(t){var e=fn();return Vv(e,Xe.memoizedState,t)},useTransition:function(){var t=nd(ra)[0],e=fn().memoizedState;return[t,e]},useMutableSource:Ev,useSyncExternalStore:xv,useId:Lv,unstable_isNewReconciler:!1},TS={readContext:hn,useCallback:Nv,useContext:hn,useEffect:xf,useImperativeHandle:Dv,useInsertionEffect:kv,useLayoutEffect:Rv,useMemo:jv,useReducer:rd,useRef:bv,useState:function(){return rd(ra)},useDebugValue:Sf,useDeferredValue:function(t){var e=fn();return Xe===null?e.memoizedState=t:Vv(e,Xe.memoizedState,t)},useTransition:function(){var t=rd(ra)[0],e=fn().memoizedState;return[t,e]},useMutableSource:Ev,useSyncExternalStore:xv,useId:Lv,unstable_isNewReconciler:!1};function vn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $c={isMounted:function(t){return(t=t._reactInternals)?Vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=zr(t),s=Zn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(Sn(e,t,i,r),bl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=zr(t),s=Zn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(Sn(e,t,i,r),bl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=zr(t),i=Zn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(Sn(e,t,r,n),bl(e,t,r))}};function rg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Yo(n,r)||!Yo(i,s):!0}function zv(t,e,n){var r=!1,i=Qr,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=$t(e)?xi:At.current,r=e.contextTypes,s=(r=r!=null)?As(t,i):Qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$c,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ig(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$c.enqueueReplaceState(e,e.state,null)}function Xd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},mf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=$t(e)?xi:At.current,i.context=As(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$c.enqueueReplaceState(i,i.state,null),oc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Rs(t,e){try{var n="",r=e;do n+=XE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function id(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IS=typeof WeakMap=="function"?WeakMap:Map;function Uv(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dc||(dc=!0,ch=r),Zd(t,e)},n}function Bv(t,e,n){n=Zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zd(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=FS.bind(null,t,e,n),e.then(t,t))}function og(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ag(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var AS=dr.ReactCurrentOwner,Bt=!1;function Nt(t,e,n,r){e.child=t===null?yv(e,null,n,r):bs(e,t.child,n,r)}function lg(t,e,n,r,i){n=n.render;var s=e.ref;return _s(e,i),r=wf(t,e,n,r,s,i),n=Ef(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(De&&n&&lf(e),e.flags|=1,Nt(t,e,r,i),e.child)}function cg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Wv(t,e,s,r,i)):(t=jl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yo,n(o,r)&&t.ref===e.ref)return or(t,e,i)}return e.flags|=1,t=Ur(s,r),t.ref=e.ref,t.return=e,e.child=t}function Wv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Yo(s,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,or(t,e,i)}return eh(t,e,n,r,i)}function $v(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ds,Kt),Kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(ds,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(ds,Kt),Kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(ds,Kt),Kt|=r;return Nt(t,e,i,n),e.child}function qv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eh(t,e,n,r,i){var s=$t(n)?xi:At.current;return s=As(e,s),_s(e,i),n=wf(t,e,n,r,s,i),r=Ef(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(De&&r&&lf(e),e.flags|=1,Nt(t,e,n,i),e.child)}function ug(t,e,n,r,i){if($t(n)){var s=!0;tc(e)}else s=!1;if(_s(e,i),e.stateNode===null)Pl(t,e),zv(e,n,r),Xd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=hn(h):(h=$t(n)?xi:At.current,h=As(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&ig(e,o,r,h),Tr=!1;var y=e.memoizedState;o.state=y,oc(e,r,o,i),u=e.memoizedState,l!==r||y!==u||Wt.current||Tr?(typeof p=="function"&&(Jd(e,n,p,r),u=e.memoizedState),(l=Tr||rg(e,n,l,r,y,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_v(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:vn(e.type,l),o.props=h,g=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hn(u):(u=$t(n)?xi:At.current,u=As(e,u));var k=n.getDerivedStateFromProps;(p=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||y!==u)&&ig(e,o,r,u),Tr=!1,y=e.memoizedState,o.state=y,oc(e,r,o,i);var N=e.memoizedState;l!==g||y!==N||Wt.current||Tr?(typeof k=="function"&&(Jd(e,n,k,r),N=e.memoizedState),(h=Tr||rg(e,n,h,r,y,N,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return th(t,e,n,r,s,i)}function th(t,e,n,r,i,s){qv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Qm(e,n,!1),or(t,e,s);r=e.stateNode,AS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bs(e,t.child,null,s),e.child=bs(e,null,l,s)):Nt(t,e,l,s),e.memoizedState=r.state,i&&Qm(e,n,!0),e.child}function Hv(t){var e=t.stateNode;e.pendingContext?Km(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Km(t,e.context,!1),gf(t,e.containerInfo)}function dg(t,e,n,r,i){return Cs(),uf(i),e.flags|=256,Nt(t,e,n,r),e.child}var nh={dehydrated:null,treeContext:null,retryLane:0};function rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gv(t,e,n){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(je,i&1),t===null)return Qd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gc(o,r,0,null),t=Ei(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rh(n),e.memoizedState=nh,t):Tf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return CS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ur(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ur(l,s):(s=Ei(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?rh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=nh,r}return s=t.child,t=s.sibling,r=Ur(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tf(t,e){return e=Gc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dl(t,e,n,r){return r!==null&&uf(r),bs(e,t.child,null,n),t=Tf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=id(Error(W(422))),dl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Gc({mode:"visible",children:r.children},i,0,null),s=Ei(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bs(e,t.child,null,o),e.child.memoizedState=rh(o),e.memoizedState=nh,s);if(!(e.mode&1))return dl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(W(419)),r=id(s,r,void 0),dl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Bt||l){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sr(t,i),Sn(r,t,i,-1))}return Rf(),r=id(Error(W(421))),dl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yt=Mr(i.nextSibling),Xt=e,De=!0,wn=null,t!==null&&(sn[on++]=Qn,sn[on++]=Yn,sn[on++]=Si,Qn=t.id,Yn=t.overflow,Si=e),e=Tf(e,r.children),e.flags|=4096,e)}function hg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yd(t.return,e,n)}function sd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Kv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hg(t,n,e);else if(t.tag===19)hg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ac(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ac(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sd(e,!0,n,null,s);break;case"together":sd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ii|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bS(t,e,n){switch(e.tag){case 3:Hv(e),Cs();break;case 5:wv(e);break;case 1:$t(e.type)&&tc(e);break;case 4:gf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(ic,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?Gv(t,e,n):(Ce(je,je.current&1),t=or(t,e,n),t!==null?t.sibling:null);Ce(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Kv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,$v(t,e,n)}return or(t,e,n)}var Qv,ih,Yv,Jv;Qv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ih=function(){};Yv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vi(jn.current);var s=null;switch(n){case"input":i=Ad(t,i),r=Ad(t,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=kd(t,i),r=kd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zl)}Pd(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Wo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ke("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Jv=function(t,e,n,r){n!==r&&(e.flags|=4)};function po(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kS(t,e,n){var r=e.pendingProps;switch(cf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return $t(e.type)&&ec(),Et(e),null;case 3:return r=e.stateNode,ks(),Re(Wt),Re(At),vf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(hh(wn),wn=null))),ih(t,e),Et(e),null;case 5:yf(e);var i=vi(ta.current);if(n=e.type,t!==null&&e.stateNode!=null)Yv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Et(e),null}if(t=vi(jn.current),cl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Dn]=e,r[Zo]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<_o.length;i++)ke(_o[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Em(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":Sm(r,s),ke("invalid",r)}Pd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ll(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ll(r.textContent,l,t),i=["children",""+l]):Wo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":el(r),xm(r,s,!0);break;case"textarea":el(r),Tm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Dn]=e,t[Zo]=r,Qv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dd(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<_o.length;i++)ke(_o[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":Em(t,r),i=Ad(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Sm(t,r),i=kd(t,r),ke("invalid",t);break;default:i=r}Pd(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?b0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&A0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$o(t,u):typeof u=="number"&&$o(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ke("scroll",t):u!=null&&Gh(t,s,u,o))}switch(n){case"input":el(t),xm(t,r,!1);break;case"textarea":el(t),Tm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ms(t,!!r.multiple,s,!1):r.defaultValue!=null&&ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)Jv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=vi(ta.current),vi(jn.current),cl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Dn]=e,(s=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ll(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dn]=e,e.stateNode=r}return Et(e),null;case 13:if(Re(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Yt!==null&&e.mode&1&&!(e.flags&128))mv(),Cs(),e.flags|=98560,s=!1;else if(s=cl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Dn]=e}else Cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else wn!==null&&(hh(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Ze===0&&(Ze=3):Rf())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return ks(),ih(t,e),t===null&&Jo(e.stateNode.containerInfo),Et(e),null;case 10:return ff(e.type._context),Et(e),null;case 17:return $t(e.type)&&ec(),Et(e),null;case 19:if(Re(je),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)po(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ac(t),o!==null){for(e.flags|=128,po(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>Ps&&(e.flags|=128,r=!0,po(s,!1),e.lanes=4194304)}else{if(!r)if(t=ac(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),po(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!De)return Et(e),null}else 2*We()-s.renderingStartTime>Ps&&n!==1073741824&&(e.flags|=128,r=!0,po(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=je.current,Ce(je,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return kf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function RS(t,e){switch(cf(e),e.tag){case 1:return $t(e.type)&&ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ks(),Re(Wt),Re(At),vf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yf(e),null;case 13:if(Re(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(je),null;case 4:return ks(),null;case 10:return ff(e.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var hl=!1,Tt=!1,PS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function sh(t,e,n){try{n()}catch(r){ze(t,e,r)}}var fg=!1;function DS(t,e){if(Bd=Yl,t=nv(),af(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,g=t,y=null;t:for(;;){for(var k;g!==n||i!==0&&g.nodeType!==3||(l=o+i),g!==s||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(k=g.firstChild)!==null;)y=g,g=k;for(;;){if(g===t)break t;if(y===n&&++h===i&&(l=o),y===s&&++p===r&&(u=o),(k=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=k}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wd={focusedElem:t,selectionRange:n},Yl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var V=N.memoizedProps,F=N.memoizedState,A=e.stateNode,E=A.getSnapshotBeforeUpdate(e.elementType===e.type?V:vn(e.type,V),F);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(M){ze(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return N=fg,fg=!1,N}function No(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sh(e,n,s)}i=i.next}while(i!==r)}}function qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xv(t){var e=t.alternate;e!==null&&(t.alternate=null,Xv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dn],delete e[Zo],delete e[Hd],delete e[pS],delete e[mS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zv(t){return t.tag===5||t.tag===3||t.tag===4}function pg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zl));else if(r!==4&&(t=t.child,t!==null))for(ah(t,e,n),t=t.sibling;t!==null;)ah(t,e,n),t=t.sibling}function lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lh(t,e,n),t=t.sibling;t!==null;)lh(t,e,n),t=t.sibling}var dt=null,_n=!1;function Er(t,e,n){for(n=n.child;n!==null;)e_(t,e,n),n=n.sibling}function e_(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Mc,n)}catch{}switch(n.tag){case 5:Tt||us(n,e);case 6:var r=dt,i=_n;dt=null,Er(t,e,n),dt=r,_n=i,dt!==null&&(_n?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(_n?(t=dt,n=n.stateNode,t.nodeType===8?Xu(t.parentNode,n):t.nodeType===1&&Xu(t,n),Ko(t)):Xu(dt,n.stateNode));break;case 4:r=dt,i=_n,dt=n.stateNode.containerInfo,_n=!0,Er(t,e,n),dt=r,_n=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sh(n,e,o),i=i.next}while(i!==r)}Er(t,e,n);break;case 1:if(!Tt&&(us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ze(n,e,l)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,Er(t,e,n),Tt=r):Er(t,e,n);break;default:Er(t,e,n)}}function mg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PS),e.forEach(function(r){var i=US.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:dt=l.stateNode,_n=!1;break e;case 3:dt=l.stateNode.containerInfo,_n=!0;break e;case 4:dt=l.stateNode.containerInfo,_n=!0;break e}l=l.return}if(dt===null)throw Error(W(160));e_(s,o,i),dt=null,_n=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){ze(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t_(e,t),e=e.sibling}function t_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),kn(t),r&4){try{No(3,t,t.return),qc(3,t)}catch(V){ze(t,t.return,V)}try{No(5,t,t.return)}catch(V){ze(t,t.return,V)}}break;case 1:yn(e,t),kn(t),r&512&&n!==null&&us(n,n.return);break;case 5:if(yn(e,t),kn(t),r&512&&n!==null&&us(n,n.return),t.flags&32){var i=t.stateNode;try{$o(i,"")}catch(V){ze(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&S0(i,s),Dd(l,o);var h=Dd(l,s);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?b0(i,g):p==="dangerouslySetInnerHTML"?A0(i,g):p==="children"?$o(i,g):Gh(i,p,g,h)}switch(l){case"input":Cd(i,s);break;case"textarea":T0(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?ms(i,!!s.multiple,k,!1):y!==!!s.multiple&&(s.defaultValue!=null?ms(i,!!s.multiple,s.defaultValue,!0):ms(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zo]=s}catch(V){ze(t,t.return,V)}}break;case 6:if(yn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){ze(t,t.return,V)}}break;case 3:if(yn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(e.containerInfo)}catch(V){ze(t,t.return,V)}break;case 4:yn(e,t),kn(t);break;case 13:yn(e,t),kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Cf=We())),r&4&&mg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(h=Tt)||p,yn(e,t),Tt=h):yn(e,t),kn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(g=Q=p;Q!==null;){switch(y=Q,k=y.child,y.tag){case 0:case 11:case 14:case 15:No(4,y,y.return);break;case 1:us(y,y.return);var N=y.stateNode;if(typeof N.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(V){ze(r,n,V)}}break;case 5:us(y,y.return);break;case 22:if(y.memoizedState!==null){yg(g);continue}}k!==null?(k.return=y,Q=k):yg(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=C0("display",o))}catch(V){ze(t,t.return,V)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(V){ze(t,t.return,V)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:yn(e,t),kn(t),r&4&&mg(t);break;case 21:break;default:yn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zv(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($o(i,""),r.flags&=-33);var s=pg(t);lh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=pg(t);ah(t,l,o);break;default:throw Error(W(161))}}catch(u){ze(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NS(t,e,n){Q=t,n_(t)}function n_(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Tt;l=hl;var h=Tt;if(hl=o,(Tt=u)&&!h)for(Q=i;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?vg(i):u!==null?(u.return=o,Q=u):vg(i);for(;s!==null;)Q=s,n_(s),s=s.sibling;Q=i,hl=l,Tt=h}gg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):gg(t)}}function gg(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&eg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}eg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Ko(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Tt||e.flags&512&&oh(e)}catch(y){ze(e,e.return,y)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function yg(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function vg(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qc(4,e)}catch(u){ze(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ze(e,i,u)}}var s=e.return;try{oh(e)}catch(u){ze(e,s,u)}break;case 5:var o=e.return;try{oh(e)}catch(u){ze(e,o,u)}}}catch(u){ze(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var jS=Math.ceil,uc=dr.ReactCurrentDispatcher,If=dr.ReactCurrentOwner,un=dr.ReactCurrentBatchConfig,ge=0,st=null,He=null,pt=0,Kt=0,ds=ri(0),Ze=0,sa=null,Ii=0,Hc=0,Af=0,jo=null,zt=null,Cf=0,Ps=1/0,Gn=null,dc=!1,ch=null,Fr=null,fl=!1,Dr=null,hc=0,Vo=0,uh=null,Dl=-1,Nl=0;function jt(){return ge&6?We():Dl!==-1?Dl:Dl=We()}function zr(t){return t.mode&1?ge&2&&pt!==0?pt&-pt:yS.transition!==null?(Nl===0&&(Nl=z0()),Nl):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:G0(t.type)),t):1}function Sn(t,e,n,r){if(50<Vo)throw Vo=0,uh=null,Error(W(185));ga(t,n,r),(!(ge&2)||t!==st)&&(t===st&&(!(ge&2)&&(Hc|=n),Ze===4&&Ar(t,pt)),qt(t,r),n===1&&ge===0&&!(e.mode&1)&&(Ps=We()+500,Bc&&ii()))}function qt(t,e){var n=t.callbackNode;yx(t,e);var r=Ql(t,t===st?pt:0);if(r===0)n!==null&&Cm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cm(n),e===1)t.tag===0?gS(_g.bind(null,t)):hv(_g.bind(null,t)),hS(function(){!(ge&6)&&ii()}),n=null;else{switch(U0(r)){case 1:n=Xh;break;case 4:n=O0;break;case 16:n=Kl;break;case 536870912:n=F0;break;default:n=Kl}n=u_(n,r_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r_(t,e){if(Dl=-1,Nl=0,ge&6)throw Error(W(327));var n=t.callbackNode;if(ws()&&t.callbackNode!==n)return null;var r=Ql(t,t===st?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fc(t,r);else{e=r;var i=ge;ge|=2;var s=s_();(st!==t||pt!==e)&&(Gn=null,Ps=We()+500,wi(t,e));do try{MS();break}catch(l){i_(t,l)}while(!0);hf(),uc.current=s,ge=i,He!==null?e=0:(st=null,pt=0,e=Ze)}if(e!==0){if(e===2&&(i=Md(t),i!==0&&(r=i,e=dh(t,i))),e===1)throw n=sa,wi(t,0),Ar(t,r),qt(t,We()),n;if(e===6)Ar(t,r);else{if(i=t.current.alternate,!(r&30)&&!VS(i)&&(e=fc(t,r),e===2&&(s=Md(t),s!==0&&(r=s,e=dh(t,s))),e===1))throw n=sa,wi(t,0),Ar(t,r),qt(t,We()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:pi(t,zt,Gn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=Cf+500-We(),10<e)){if(Ql(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qd(pi.bind(null,t,zt,Gn),e);break}pi(t,zt,Gn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jS(r/1960))-r,10<r){t.timeoutHandle=qd(pi.bind(null,t,zt,Gn),r);break}pi(t,zt,Gn);break;case 5:pi(t,zt,Gn);break;default:throw Error(W(329))}}}return qt(t,We()),t.callbackNode===n?r_.bind(null,t):null}function dh(t,e){var n=jo;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=fc(t,e),t!==2&&(e=zt,zt=n,e!==null&&hh(e)),t}function hh(t){zt===null?zt=t:zt.push.apply(zt,t)}function VS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!An(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Af,e&=~Hc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function _g(t){if(ge&6)throw Error(W(327));ws();var e=Ql(t,0);if(!(e&1))return qt(t,We()),null;var n=fc(t,e);if(t.tag!==0&&n===2){var r=Md(t);r!==0&&(e=r,n=dh(t,r))}if(n===1)throw n=sa,wi(t,0),Ar(t,e),qt(t,We()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pi(t,zt,Gn),qt(t,We()),null}function bf(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Ps=We()+500,Bc&&ii())}}function Ai(t){Dr!==null&&Dr.tag===0&&!(ge&6)&&ws();var e=ge;ge|=1;var n=un.transition,r=Ee;try{if(un.transition=null,Ee=1,t)return t()}finally{Ee=r,un.transition=n,ge=e,!(ge&6)&&ii()}}function kf(){Kt=ds.current,Re(ds)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dS(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(cf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ec();break;case 3:ks(),Re(Wt),Re(At),vf();break;case 5:yf(r);break;case 4:ks();break;case 13:Re(je);break;case 19:Re(je);break;case 10:ff(r.type._context);break;case 22:case 23:kf()}n=n.return}if(st=t,He=t=Ur(t.current,null),pt=Kt=e,Ze=0,sa=null,Af=Hc=Ii=0,zt=jo=null,yi!==null){for(e=0;e<yi.length;e++)if(n=yi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}yi=null}return t}function i_(t,e){do{var n=He;try{if(hf(),kl.current=cc,lc){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}lc=!1}if(Ti=0,rt=Xe=Le=null,Do=!1,na=0,If.current=null,n===null||n.return===null){Ze=1,sa=e,He=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=pt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var k=og(o);if(k!==null){k.flags&=-257,ag(k,o,l,s,e),k.mode&1&&sg(s,h,e),e=k,u=h;var N=e.updateQueue;if(N===null){var V=new Set;V.add(u),e.updateQueue=V}else N.add(u);break e}else{if(!(e&1)){sg(s,h,e),Rf();break e}u=Error(W(426))}}else if(De&&l.mode&1){var F=og(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),ag(F,o,l,s,e),uf(Rs(u,l));break e}}s=u=Rs(u,l),Ze!==4&&(Ze=2),jo===null?jo=[s]:jo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=Uv(s,u,e);Zm(s,A);break e;case 1:l=u;var E=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fr===null||!Fr.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Bv(s,l,e);Zm(s,M);break e}}s=s.return}while(s!==null)}a_(n)}catch($){e=$,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function s_(){var t=uc.current;return uc.current=cc,t===null?cc:t}function Rf(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),st===null||!(Ii&268435455)&&!(Hc&268435455)||Ar(st,pt)}function fc(t,e){var n=ge;ge|=2;var r=s_();(st!==t||pt!==e)&&(Gn=null,wi(t,e));do try{LS();break}catch(i){i_(t,i)}while(!0);if(hf(),ge=n,uc.current=r,He!==null)throw Error(W(261));return st=null,pt=0,Ze}function LS(){for(;He!==null;)o_(He)}function MS(){for(;He!==null&&!lx();)o_(He)}function o_(t){var e=c_(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?a_(t):He=e,If.current=null}function a_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RS(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,He=null;return}}else if(n=kS(n,e,Kt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ze===0&&(Ze=5)}function pi(t,e,n){var r=Ee,i=un.transition;try{un.transition=null,Ee=1,OS(t,e,n,r)}finally{un.transition=i,Ee=r}return null}function OS(t,e,n,r){do ws();while(Dr!==null);if(ge&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(vx(t,s),t===st&&(He=st=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fl||(fl=!0,u_(Kl,function(){return ws(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=un.transition,un.transition=null;var o=Ee;Ee=1;var l=ge;ge|=4,If.current=null,DS(t,n),t_(n,t),iS(Wd),Yl=!!Bd,Wd=Bd=null,t.current=n,NS(n),cx(),ge=l,Ee=o,un.transition=s}else t.current=n;if(fl&&(fl=!1,Dr=t,hc=i),s=t.pendingLanes,s===0&&(Fr=null),hx(n.stateNode),qt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(dc)throw dc=!1,t=ch,ch=null,t;return hc&1&&t.tag!==0&&ws(),s=t.pendingLanes,s&1?t===uh?Vo++:(Vo=0,uh=t):Vo=0,ii(),null}function ws(){if(Dr!==null){var t=U0(hc),e=un.transition,n=Ee;try{if(un.transition=null,Ee=16>t?16:t,Dr===null)var r=!1;else{if(t=Dr,Dr=null,hc=0,ge&6)throw Error(W(331));var i=ge;for(ge|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:No(8,p,s)}var g=p.child;if(g!==null)g.return=p,Q=g;else for(;Q!==null;){p=Q;var y=p.sibling,k=p.return;if(Xv(p),p===h){Q=null;break}if(y!==null){y.return=k,Q=y;break}Q=k}}}var N=s.alternate;if(N!==null){var V=N.child;if(V!==null){N.child=null;do{var F=V.sibling;V.sibling=null,V=F}while(V!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:No(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,Q=A;break e}Q=s.return}}var E=t.current;for(Q=E;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=E;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qc(9,l)}}catch($){ze(l,l.return,$)}if(l===o){Q=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Q=M;break e}Q=l.return}}if(ge=i,ii(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Mc,t)}catch{}r=!0}return r}finally{Ee=n,un.transition=e}}return!1}function wg(t,e,n){e=Rs(n,e),e=Uv(t,e,1),t=Or(t,e,1),e=jt(),t!==null&&(ga(t,1,e),qt(t,e))}function ze(t,e,n){if(t.tag===3)wg(t,t,n);else for(;e!==null;){if(e.tag===3){wg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Rs(n,t),t=Bv(e,t,1),e=Or(e,t,1),t=jt(),e!==null&&(ga(e,1,t),qt(e,t));break}}e=e.return}}function FS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(pt&n)===n&&(Ze===4||Ze===3&&(pt&130023424)===pt&&500>We()-Cf?wi(t,0):Af|=n),qt(t,e)}function l_(t,e){e===0&&(t.mode&1?(e=rl,rl<<=1,!(rl&130023424)&&(rl=4194304)):e=1);var n=jt();t=sr(t,e),t!==null&&(ga(t,e,n),qt(t,n))}function zS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),l_(t,n)}function US(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),l_(t,n)}var c_;c_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,bS(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,De&&e.flags&1048576&&fv(e,rc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pl(t,e),t=e.pendingProps;var i=As(e,At.current);_s(e,n),i=wf(null,e,r,t,i,n);var s=Ef();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(s=!0,tc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mf(e),i.updater=$c,e.stateNode=i,i._reactInternals=e,Xd(e,r,t,n),e=th(null,e,r,!0,s,n)):(e.tag=0,De&&s&&lf(e),Nt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WS(r),t=vn(r,t),i){case 0:e=eh(null,e,r,t,n);break e;case 1:e=ug(null,e,r,t,n);break e;case 11:e=lg(null,e,r,t,n);break e;case 14:e=cg(null,e,r,vn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),eh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),ug(t,e,r,i,n);case 3:e:{if(Hv(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_v(t,e),oc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Rs(Error(W(423)),e),e=dg(t,e,r,n,i);break e}else if(r!==i){i=Rs(Error(W(424)),e),e=dg(t,e,r,n,i);break e}else for(Yt=Mr(e.stateNode.containerInfo.firstChild),Xt=e,De=!0,wn=null,n=yv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),r===i){e=or(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return wv(e),t===null&&Qd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,$d(r,i)?o=null:s!==null&&$d(r,s)&&(e.flags|=32),qv(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&Qd(e),null;case 13:return Gv(t,e,n);case 4:return gf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bs(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),lg(t,e,r,i,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(ic,r._currentValue),r._currentValue=o,s!==null)if(An(s.value,o)){if(s.children===i.children&&!Wt.current){e=or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Zn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Yd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Yd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_s(e,n),i=hn(i),r=r(i),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,i=vn(r,e.pendingProps),i=vn(r.type,i),cg(t,e,r,i,n);case 15:return Wv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Pl(t,e),e.tag=1,$t(r)?(t=!0,tc(e)):t=!1,_s(e,n),zv(e,r,i),Xd(e,r,i,n),th(null,e,r,!0,t,n);case 19:return Kv(t,e,n);case 22:return $v(t,e,n)}throw Error(W(156,e.tag))};function u_(t,e){return M0(t,e)}function BS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new BS(t,e,n,r)}function Pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WS(t){if(typeof t=="function")return Pf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qh)return 11;if(t===Yh)return 14}return 2}function Ur(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ts:return Ei(n.children,i,s,e);case Kh:o=8,i|=8;break;case xd:return t=cn(12,n,e,i|2),t.elementType=xd,t.lanes=s,t;case Sd:return t=cn(13,n,e,i),t.elementType=Sd,t.lanes=s,t;case Td:return t=cn(19,n,e,i),t.elementType=Td,t.lanes=s,t;case w0:return Gc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case v0:o=10;break e;case _0:o=9;break e;case Qh:o=11;break e;case Yh:o=14;break e;case Sr:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ei(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function Gc(t,e,n,r){return t=cn(22,t,r,e),t.elementType=w0,t.lanes=n,t.stateNode={isHidden:!1},t}function od(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function ad(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $S(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Df(t,e,n,r,i,s,o,l,u){return t=new $S(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mf(s),t}function qS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function d_(t){if(!t)return Qr;t=t._reactInternals;e:{if(Vi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if($t(n))return dv(t,n,e)}return e}function h_(t,e,n,r,i,s,o,l,u){return t=Df(n,r,!0,t,i,s,o,l,u),t.context=d_(null),n=t.current,r=jt(),i=zr(n),s=Zn(r,i),s.callback=e??null,Or(n,s,i),t.current.lanes=i,ga(t,i,r),qt(t,r),t}function Kc(t,e,n,r){var i=e.current,s=jt(),o=zr(i);return n=d_(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,o),t!==null&&(Sn(t,i,o,s),bl(t,i,o)),o}function pc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Eg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nf(t,e){Eg(t,e),(t=t.alternate)&&Eg(t,e)}function HS(){return null}var f_=typeof reportError=="function"?reportError:function(t){console.error(t)};function jf(t){this._internalRoot=t}Qc.prototype.render=jf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Kc(t,e,null,null)};Qc.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ai(function(){Kc(null,t,null,null)}),e[ir]=null}};function Qc(t){this._internalRoot=t}Qc.prototype.unstable_scheduleHydration=function(t){if(t){var e=$0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&H0(t)}};function Vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xg(){}function GS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=pc(o);s.call(h)}}var o=h_(e,r,t,0,null,!1,!1,"",xg);return t._reactRootContainer=o,t[ir]=o.current,Jo(t.nodeType===8?t.parentNode:t),Ai(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=pc(u);l.call(h)}}var u=Df(t,0,!1,null,null,!1,!1,"",xg);return t._reactRootContainer=u,t[ir]=u.current,Jo(t.nodeType===8?t.parentNode:t),Ai(function(){Kc(e,u,n,r)}),u}function Jc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=pc(o);l.call(u)}}Kc(e,o,t,i)}else o=GS(n,e,t,i,r);return pc(o)}B0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vo(e.pendingLanes);n!==0&&(Zh(e,n|1),qt(e,We()),!(ge&6)&&(Ps=We()+500,ii()))}break;case 13:Ai(function(){var r=sr(t,1);if(r!==null){var i=jt();Sn(r,t,1,i)}}),Nf(t,1)}};ef=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=jt();Sn(e,t,134217728,n)}Nf(t,134217728)}};W0=function(t){if(t.tag===13){var e=zr(t),n=sr(t,e);if(n!==null){var r=jt();Sn(n,t,e,r)}Nf(t,e)}};$0=function(){return Ee};q0=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};jd=function(t,e,n){switch(e){case"input":if(Cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Uc(r);if(!i)throw Error(W(90));x0(r),Cd(r,i)}}}break;case"textarea":T0(t,n);break;case"select":e=n.value,e!=null&&ms(t,!!n.multiple,e,!1)}};P0=bf;D0=Ai;var KS={usingClientEntryPoint:!1,Events:[va,ss,Uc,k0,R0,bf]},mo={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QS={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V0(t),t===null?null:t.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||HS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Mc=pl.inject(QS),Nn=pl}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KS;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vf(e))throw Error(W(200));return qS(t,e,null,n)};en.createRoot=function(t,e){if(!Vf(t))throw Error(W(299));var n=!1,r="",i=f_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Df(t,1,!1,null,null,n,!1,r,i),t[ir]=e.current,Jo(t.nodeType===8?t.parentNode:t),new jf(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=V0(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return Ai(t)};en.hydrate=function(t,e,n){if(!Yc(e))throw Error(W(200));return Jc(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!Vf(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=f_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=h_(e,null,t,1,n??null,i,!1,s,o),t[ir]=e.current,Jo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qc(e)};en.render=function(t,e,n){if(!Yc(e))throw Error(W(200));return Jc(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!Yc(t))throw Error(W(40));return t._reactRootContainer?(Ai(function(){Jc(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1};en.unstable_batchedUpdates=bf;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yc(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Jc(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function p_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p_)}catch(t){console.error(t)}}p_(),p0.exports=en;var YS=p0.exports,Sg=YS;wd.createRoot=Sg.createRoot,wd.hydrateRoot=Sg.hydrateRoot;const JS="modulepreload",XS=function(t){return"/"+t},Tg={},ml=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=XS(u),u in Tg)return;Tg[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":JS,h||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((y,k)=>{g.addEventListener("load",y),g.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};class wa{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const ZS=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},ft={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:ZS()},Lf=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},eT=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Lf(t);ft.publicKey=n.publicKey,ft.blockHeadless=n.blockHeadless,ft.storageProvider=n.storageProvider,ft.blockList=n.blockList,ft.limitRate=n.limitRate,ft.origin=n.origin||e},m_=async(t,e,n={})=>{const r=await fetch(ft.origin+t,{method:"POST",headers:n,body:e}),i=await r.text(),s=new wa(r.status,i);if(r.ok)return s;throw s},g_=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},tT=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},y_=t=>t.webdriver||!t.languages||t.languages.length===0,v_=()=>new wa(451,"Unavailable For Headless Browser"),nT=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},rT=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},iT=(t,e)=>t instanceof FormData?t.get(e):t[e],__=(t,e)=>{if(rT(t))return!1;nT(t.list,t.watchVariable);const n=iT(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},w_=()=>new wa(403,"Forbidden"),sT=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},oT=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},E_=async(t,e,n)=>{if(!e.throttle||!n)return!1;sT(e.throttle,e.id);const r=e.id||t;return await oT(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},x_=()=>new wa(429,"Too Many Requests"),aT=async(t,e,n,r)=>{const i=Lf(r),s=i.publicKey||ft.publicKey,o=i.blockHeadless||ft.blockHeadless,l=i.storageProvider||ft.storageProvider,u={...ft.blockList,...i.blockList},h={...ft.limitRate,...i.limitRate};return o&&y_(navigator)?Promise.reject(v_()):(g_(s,t,e),tT(n),n&&__(u,n)?Promise.reject(w_()):await E_(location.pathname,h,l)?Promise.reject(x_()):m_("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},lT=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},cT=t=>typeof t=="string"?document.querySelector(t):t,uT=async(t,e,n,r)=>{const i=Lf(r),s=i.publicKey||ft.publicKey,o=i.blockHeadless||ft.blockHeadless,l=ft.storageProvider||i.storageProvider,u={...ft.blockList,...i.blockList},h={...ft.limitRate,...i.limitRate};if(o&&y_(navigator))return Promise.reject(v_());const p=cT(n);g_(s,t,e),lT(p);const g=new FormData(p);return __(u,g)?Promise.reject(w_()):await E_(location.pathname,h,l)?Promise.reject(x_()):(g.append("lib_version","4.4.1"),g.append("service_id",t),g.append("template_id",e),g.append("user_id",s),m_("/api/v1.0/email/send-form",g))},Ig={init:eT,send:aT,sendForm:uT,EmailJSResponseStatus:wa},dT=()=>{};var Ag={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},T_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,g=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,k=h&63;u||(k=64,o||(y=64)),r.push(n[p],n[g],n[y],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||g==null)throw new fT;const y=s<<2|l>>4;if(r.push(y),h!==64){const k=l<<4&240|h>>2;if(r.push(k),g!==64){const N=h<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pT=function(t){const e=S_(t);return T_.encodeByteArray(e,!0)},mc=function(t){return pT(t).replace(/\./g,"")},I_=function(t){try{return T_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=()=>mT().__FIREBASE_DEFAULTS__,yT=()=>{if(typeof process>"u"||typeof Ag>"u")return;const t=Ag.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&I_(t[1]);return e&&JSON.parse(e)},Xc=()=>{try{return dT()||gT()||yT()||vT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},A_=t=>{var e,n;return(n=(e=Xc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},_T=t=>{const e=A_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},C_=()=>{var t;return(t=Xc())==null?void 0:t.config},b_=t=>{var e;return(e=Xc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[mc(JSON.stringify(n)),mc(JSON.stringify(o)),""].join(".")}const Lo={};function xT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Lo))Lo[e]?t.emulator.push(e):t.prod.push(e);return t}function ST(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Cg=!1;function R_(t,e){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||Lo[t]===e||Lo[t]||Cg)return;Lo[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=xT().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,k){y.setAttribute("width","24"),y.setAttribute("id",k),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Cg=!0,o()},y}function p(y,k){y.setAttribute("id",k),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=ST(r),k=n("text"),N=document.getElementById(k)||document.createElement("span"),V=n("learnmore"),F=document.getElementById(V)||document.createElement("a"),A=n("preprendIcon"),E=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const b=y.element;l(b),p(F,V);const M=h();u(E,A),b.append(E,N,F,M),document.body.appendChild(b)}s?(N.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function IT(){var e;const t=(e=Xc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kT(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RT(){return!IT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PT(){try{return typeof indexedDB=="object"}catch{return!1}}function DT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NT,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ea.prototype.create)}}class Ea{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jT(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new hr(i,l,r)}}function jT(t,e){return t.replace(VT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VT=/\{\$([^}]+)}/g;function LT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(bg(s)&&bg(o)){if(!Ci(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Eo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MT(t,e){const n=new OT(t,e);return n.subscribe.bind(n)}class OT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ld),i.error===void 0&&(i.error=ld),i.complete===void 0&&(i.complete=ld);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class bi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BT(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UT(t){return t===mi?void 0:t}function BT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const $T={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},qT=ue.INFO,HT={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},GT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=HT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mf{constructor(e){this.name=e,this._logLevel=qT,this._logHandler=GT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$T[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const KT=(t,e)=>e.some(n=>t instanceof n);let kg,Rg;function QT(){return kg||(kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YT(){return Rg||(Rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P_=new WeakMap,fh=new WeakMap,D_=new WeakMap,cd=new WeakMap,Of=new WeakMap;function JT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Br(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&P_.set(n,t)}).catch(()=>{}),Of.set(e,t),e}function XT(t){if(fh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fh.set(t,e)}let ph={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZT(t){ph=t(ph)}function eI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ud(this),e,...n);return D_.set(r,e.sort?e.sort():[e]),Br(r)}:YT().includes(t)?function(...e){return t.apply(ud(this),e),Br(P_.get(this))}:function(...e){return Br(t.apply(ud(this),e))}}function tI(t){return typeof t=="function"?eI(t):(t instanceof IDBTransaction&&XT(t),KT(t,QT())?new Proxy(t,ph):t)}function Br(t){if(t instanceof IDBRequest)return JT(t);if(cd.has(t))return cd.get(t);const e=tI(t);return e!==t&&(cd.set(t,e),Of.set(e,t)),e}const ud=t=>Of.get(t);function nI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Br(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Br(o.result),u.oldVersion,u.newVersion,Br(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const rI=["get","getKey","getAll","getAllKeys","count"],iI=["put","add","delete","clear"],dd=new Map;function Pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dd.get(e))return dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=iI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rI.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return dd.set(e,s),s}ZT(t=>({...t,get:(e,n,r)=>Pg(e,n)||t.get(e,n,r),has:(e,n)=>!!Pg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mh="@firebase/app",Dg="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Mf("@firebase/app"),aI="@firebase/app-compat",lI="@firebase/analytics-compat",cI="@firebase/analytics",uI="@firebase/app-check-compat",dI="@firebase/app-check",hI="@firebase/auth",fI="@firebase/auth-compat",pI="@firebase/database",mI="@firebase/data-connect",gI="@firebase/database-compat",yI="@firebase/functions",vI="@firebase/functions-compat",_I="@firebase/installations",wI="@firebase/installations-compat",EI="@firebase/messaging",xI="@firebase/messaging-compat",SI="@firebase/performance",TI="@firebase/performance-compat",II="@firebase/remote-config",AI="@firebase/remote-config-compat",CI="@firebase/storage",bI="@firebase/storage-compat",kI="@firebase/firestore",RI="@firebase/ai",PI="@firebase/firestore-compat",DI="firebase",NI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="[DEFAULT]",jI={[mh]:"fire-core",[aI]:"fire-core-compat",[cI]:"fire-analytics",[lI]:"fire-analytics-compat",[dI]:"fire-app-check",[uI]:"fire-app-check-compat",[hI]:"fire-auth",[fI]:"fire-auth-compat",[pI]:"fire-rtdb",[mI]:"fire-data-connect",[gI]:"fire-rtdb-compat",[yI]:"fire-fn",[vI]:"fire-fn-compat",[_I]:"fire-iid",[wI]:"fire-iid-compat",[EI]:"fire-fcm",[xI]:"fire-fcm-compat",[SI]:"fire-perf",[TI]:"fire-perf-compat",[II]:"fire-rc",[AI]:"fire-rc-compat",[CI]:"fire-gcs",[bI]:"fire-gcs-compat",[kI]:"fire-fst",[PI]:"fire-fst-compat",[RI]:"fire-vertex","fire-js":"fire-js",[DI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Map,VI=new Map,yh=new Map;function Ng(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ds(t){const e=t.name;if(yh.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;yh.set(e,t);for(const n of gc.values())Ng(n,t);for(const n of VI.values())Ng(n,t);return!0}function Ff(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ln(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new Ea("app","Firebase",LI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=NI;function N_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:gh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Wr.create("bad-app-name",{appName:String(i)});if(n||(n=C_()),!n)throw Wr.create("no-options");const s=gc.get(i);if(s){if(Ci(n,s.options)&&Ci(r,s.config))return s;throw Wr.create("duplicate-app",{appName:i})}const o=new WT(i);for(const u of yh.values())o.addComponent(u);const l=new MI(n,r,o);return gc.set(i,l),l}function j_(t=gh){const e=gc.get(t);if(!e&&t===gh&&C_())return N_();if(!e)throw Wr.create("no-app",{appName:t});return e}function $r(t,e,n){let r=jI[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(o.join(" "));return}Ds(new bi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="firebase-heartbeat-database",FI=1,oa="firebase-heartbeat-store";let hd=null;function V_(){return hd||(hd=nI(OI,FI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wr.create("idb-open",{originalErrorMessage:t.message})})),hd}async function zI(t){try{const n=(await V_()).transaction(oa),r=await n.objectStore(oa).get(L_(t));return await n.done,r}catch(e){if(e instanceof hr)ar.warn(e.message);else{const n=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function jg(t,e){try{const r=(await V_()).transaction(oa,"readwrite");await r.objectStore(oa).put(e,L_(t)),await r.done}catch(n){if(n instanceof hr)ar.warn(n.message);else{const r=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(r.message)}}}function L_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=1024,BI=30;class WI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>BI){const o=HI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vg(),{heartbeatsToSend:r,unsentEntries:i}=$I(this._heartbeatsCache.heartbeats),s=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ar.warn(n),""}}}function Vg(){return new Date().toISOString().substring(0,10)}function $I(t,e=UI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Lg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Lg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PT()?DT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Lg(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}function HI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){Ds(new bi("platform-logger",e=>new sI(e),"PRIVATE")),Ds(new bi("heartbeat",e=>new WI(e),"PRIVATE")),$r(mh,Dg,t),$r(mh,Dg,"esm2020"),$r("fire-js","")}GI("");function M_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KI=M_,O_=new Ea("auth","Firebase",M_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Mf("@firebase/auth");function QI(t,...e){yc.logLevel<=ue.WARN&&yc.warn(`Auth (${Ws}): ${t}`,...e)}function Vl(t,...e){yc.logLevel<=ue.ERROR&&yc.error(`Auth (${Ws}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,...e){throw zf(t,...e)}function Vn(t,...e){return zf(t,...e)}function F_(t,e,n){const r={...KI(),[e]:n};return new Ea("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return F_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return O_.create(t,...e)}function te(t,e,...n){if(!t)throw zf(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vl(e),new Error(e)}function lr(t,e){t||Jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YI(){return Mg()==="http:"||Mg()==="https:"}function Mg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YI()||CT()||"connection"in navigator)?navigator.onLine:!0}function XI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=TT()||bT()}get(){return JI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tA=new Sa(3e4,6e4);function fr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function pr(t,e,n,r,i={}){return U_(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=xa({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...s};return AT()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(h.credentials="include"),z_.fetch()(await B_(t,t.config.apiHost,n,l),h)})}async function U_(t,e,n){t._canInitEmulator=!1;const r={...ZI,...e};try{const i=new rA(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw gl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw gl(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw F_(t,p,h);Cn(t,p)}}catch(i){if(i instanceof hr)throw i;Cn(t,"network-request-failed",{message:String(i)})}}async function Ta(t,e,n,r,i={}){const s=await pr(t,e,n,r,i);return"mfaPendingCredential"in s&&Cn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function B_(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Uf(t.config,i):`${t.config.apiScheme}://${i}`;return eA.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function nA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vn(this.auth,"network-request-failed")),tA.get())})}}function gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vn(t,e,r);return i.customData._tokenResponse=n,i}function Og(t){return t!==void 0&&t.enterprise!==void 0}class iA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sA(t,e){return pr(t,"GET","/v2/recaptchaConfig",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(t,e){return pr(t,"POST","/v1/accounts:delete",e)}async function vc(t,e){return pr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aA(t,e=!1){const n=tt(t),r=await n.getIdToken(e),i=Bf(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Mo(fd(i.auth_time)),issuedAtTime:Mo(fd(i.iat)),expirationTime:Mo(fd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function fd(t){return Number(t)*1e3}function Bf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vl("JWT malformed, contained fewer than 3 sections"),null;try{const i=I_(n);return i?JSON.parse(i):(Vl("Failed to decode base64 JWT payload"),null)}catch(i){return Vl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Fg(t){const e=Bf(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&lA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mo(this.lastLoginAt),this.creationTime=Mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(t){var g;const e=t.auth,n=await t.getIdToken(),r=await aa(t,vc(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(g=i.providerUserInfo)!=null&&g.length?W_(i.providerUserInfo):[],o=dA(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=l?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _h(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function uA(t){const e=tt(t);await _c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function W_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t,e){const n=await U_(t,{},async()=>{const r=xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await B_(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(u.credentials="include"),z_.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fA(t,e){return pr(t,"POST","/v2/accounts:revokeToken",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Fg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await hA(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Es;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Es,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class En{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new cA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _h(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await aa(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aA(this,e)}reload(){return uA(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new En({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _c(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await aa(this,oA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:k,providerData:N,stsTokenManager:V}=n;te(g&&V,e,"internal-error");const F=Es.fromJSON(this.name,V);te(typeof g=="string",e,"internal-error"),xr(r,e.name),xr(i,e.name),te(typeof y=="boolean",e,"internal-error"),te(typeof k=="boolean",e,"internal-error"),xr(s,e.name),xr(o,e.name),xr(l,e.name),xr(u,e.name),xr(h,e.name),xr(p,e.name);const A=new En({uid:g,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:k,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:F,createdAt:h,lastLoginAt:p});return N&&Array.isArray(N)&&(A.providerData=N.map(E=>({...E}))),u&&(A._redirectEventId=u),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Es;i.updateFromServerResponse(n);const s=new En({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _c(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?W_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Es;l.updateFromIdToken(r);const u=new En({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _h(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new Map;function Xn(t){lr(t instanceof Function,"Expected a class definition");let e=zg.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$_.type="NONE";const Ug=$_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e,n){return`firebase:${t}:${e}:${n}`}class xs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ll(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ll("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vc(this.auth,{idToken:e}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xs(Xn(Ug),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Xn(Ug);const o=Ll(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){let g;if(typeof p=="string"){const y=await vc(e,{idToken:p}).catch(()=>{});if(!y)break;g=await En._fromGetAccountInfoResponse(e,y,p)}else g=En._fromJSON(e,p);h!==s&&(l=g),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new xs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new xs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y_(e))return"Blackberry";if(J_(e))return"Webos";if(H_(e))return"Safari";if((e.includes("chrome/")||G_(e))&&!e.includes("edge/"))return"Chrome";if(Q_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function q_(t=Ct()){return/firefox\//i.test(t)}function H_(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G_(t=Ct()){return/crios\//i.test(t)}function K_(t=Ct()){return/iemobile/i.test(t)}function Q_(t=Ct()){return/android/i.test(t)}function Y_(t=Ct()){return/blackberry/i.test(t)}function J_(t=Ct()){return/webos/i.test(t)}function Wf(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pA(t=Ct()){var e;return Wf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mA(){return kT()&&document.documentMode===10}function X_(t=Ct()){return Wf(t)||Q_(t)||J_(t)||Y_(t)||/windows phone/i.test(t)||K_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e=[]){let n;switch(t){case"Browser":n=Bg(Ct());break;case"Worker":n=`${Bg(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ws}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e={}){return pr(t,"GET","/v2/passwordPolicy",fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=6;class _A{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wg(this),this.idTokenSubscription=new Wg(this),this.beforeStateQueue=new gA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await xs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vc(this,{idToken:e}),r=await En._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _c(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(er(this));const n=e?tt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yA(this),n=new _A(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ea("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await xs.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&QI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function si(t){return tt(t)}class Wg{constructor(e){this.auth=e,this.observer=null,this.addObserver=MT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EA(t){Zc=t}function ew(t){return Zc.loadJS(t)}function xA(){return Zc.recaptchaEnterpriseScript}function SA(){return Zc.gapiScript}function TA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class IA{constructor(){this.enterprise=new AA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class AA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const CA="recaptcha-enterprise",tw="NO_RECAPTCHA";class bA{constructor(e){this.type=CA,this.auth=si(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{sA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new iA(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;Og(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(tw)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IA().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Og(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xA();u.length!==0&&(u+=l),ew(u).then(()=>{i(l,s,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function $g(t,e,n,r=!1,i=!1){const s=new bA(t);let o;if(i)o=tw;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function wc(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $g(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await $g(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e){const n=Ff(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ci(s,e??{}))return i;Cn(i,"already-initialized")}return n.initialize({options:e})}function RA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PA(t,e,n){const r=si(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=nw(e),{host:o,port:l}=DA(e),u=l===null?"":`:${l}`,h={url:`${s}//${o}${u}/`},p=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Ci(h,r.config.emulator)&&Ci(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Bs(o)?(k_(`${s}//${o}${u}`),R_("Auth",!0)):NA()}function nw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DA(t){const e=nw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:qg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:qg(o)}}}function qg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}async function jA(t,e){return pr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e){return Ta(t,"POST","/v1/accounts:signInWithPassword",fr(t,e))}async function LA(t,e){return pr(t,"POST","/v1/accounts:sendOobCode",fr(t,e))}async function MA(t,e){return LA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t,e){return Ta(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}async function FA(t,e){return Ta(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends $f{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new la(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new la(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wc(e,n,"signInWithPassword",VA);case"emailLink":return OA(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wc(e,r,"signUpPassword",jA);case"emailLink":return FA(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(t,e){return Ta(t,"POST","/v1/accounts:signInWithIdp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="http://localhost";class ki extends $f{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ki(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ss(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ss(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ss(e,n)}buildRequest(){const e={requestUri:zA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BA(t){const e=wo(Eo(t)).link,n=e?wo(Eo(e)).deep_link_id:null,r=wo(Eo(t)).deep_link_id;return(r?wo(Eo(r)).link:null)||r||n||e||t}class qf{constructor(e){const n=wo(Eo(e)),r=n.apiKey??null,i=n.oobCode??null,s=UA(n.mode??null);te(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=BA(e);try{return new qf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.providerId=$s.PROVIDER_ID}static credential(e,n){return la._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qf.parseLink(n);return te(r,"argument-error"),la._fromEmailAndCode(e,r.code,r.tenantId)}}$s.PROVIDER_ID="password";$s.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$s.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends rw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ia{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ki._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return br.credential(n,r)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ia{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Ia{constructor(){super("twitter.com")}static credential(e,n){return ki._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.TWITTER_SIGN_IN_METHOD="twitter.com";Rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e){return Ta(t,"POST","/v1/accounts:signUp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await En._fromIdTokenResponse(e,r,i),o=Hg(r);return new Ri({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Hg(r);return new Ri({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Hg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends hr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ec(e,n,r,i)}}function iw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(t,s,e,r):s})}async function $A(t,e,n=!1){const r=await aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ri._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e,n=!1){const{auth:r}=t;if(ln(r.app))return Promise.reject(er(r));const i="reauthenticate";try{const s=await aa(t,iw(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=Bf(s.idToken);te(o,r,"internal-error");const{sub:l}=o;return te(t.uid===l,r,"user-mismatch"),Ri._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Cn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sw(t,e,n=!1){if(ln(t.app))return Promise.reject(er(t));const r="signIn",i=await iw(t,r,e),s=await Ri._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function HA(t,e){return sw(si(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ow(t){const e=si(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GA(t,e,n){const r=si(t);await wc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",MA)}async function Gg(t,e,n){if(ln(t.app))return Promise.reject(er(t));const r=si(t),o=await wc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ow(t),u}),l=await Ri._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function KA(t,e,n){return ln(t.app)?Promise.reject(er(t)):HA(tt(t),$s.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ow(t),r})}function QA(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function YA(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function JA(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function XA(t){return tt(t).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=1e3,eC=10;class lw extends aw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);mA()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,eC):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lw.type="LOCAL";const tC=lw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends aw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cw.type="SESSION";const uw=cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new eu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),u=await nC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const h=Hf("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function iC(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function sC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function aC(){return dw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firebaseLocalStorageDb",lC=1,Sc="firebaseLocalStorage",fw="fbase_key";class Aa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tu(t,e){return t.transaction([Sc],e?"readwrite":"readonly").objectStore(Sc)}function cC(){const t=indexedDB.deleteDatabase(hw);return new Aa(t).toPromise()}function wh(){const t=indexedDB.open(hw,lC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Sc,{keyPath:fw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Sc)?e(r):(r.close(),await cC(),e(await wh()))})})}async function Kg(t,e,n){const r=tu(t,!0).put({[fw]:e,value:n});return new Aa(r).toPromise()}async function uC(t,e){const n=tu(t,!1).get(e),r=await new Aa(n).toPromise();return r===void 0?null:r.value}function Qg(t,e){const n=tu(t,!0).delete(e);return new Aa(n).toPromise()}const dC=800,hC=3;class pw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eu._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await sC(),!this.activeServiceWorker)return;this.sender=new rC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wh();return await Kg(e,xc,"1"),await Qg(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=tu(i,!1).getAll();return new Aa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pw.type="LOCAL";const fC=pw;new Sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e){return e?Xn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends $f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ss(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ss(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mC(t){return sw(t.auth,new Gf(t),t.bypassAuthState)}function gC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),qA(n,new Gf(t),t.bypassAuthState)}async function yC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),$A(n,new Gf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return gC;default:Cn(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Sa(2e3,1e4);class hs extends mw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="pendingRedirect",Ml=new Map;class wC extends mw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ml.get(this.auth._key());if(!e){try{const r=await EC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ml.set(this.auth._key(),e)}return this.bypassAuthState||Ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EC(t,e){const n=TC(e),r=SC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function xC(t,e){Ml.set(t._key(),e)}function SC(t){return Xn(t._redirectPersistence)}function TC(t){return Ll(_C,t.config.apiKey,t.name)}async function IC(t,e,n=!1){if(ln(t.app))return Promise.reject(er(t));const r=si(t),i=pC(r,e),o=await new wC(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=10*60*1e3;class CC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gw(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yg(e))}saveEventToCache(e){this.cachedEventUids.add(Yg(e)),this.lastProcessedEventTime=Date.now()}}function Yg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t,e={}){return pr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PC=/^https?/;async function DC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kC(t);for(const n of e)try{if(NC(n))return}catch{}Cn(t,"unauthorized-domain")}function NC(t){const e=vh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PC.test(n))return!1;if(RC.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Sa(3e4,6e4);function Jg(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VC(t){return new Promise((e,n)=>{var i,s,o;function r(){Jg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jg(),n(Vn(t,"network-request-failed"))},timeout:jC.get()})}if((s=(i=Ln().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Ln().gapi)!=null&&o.load)r();else{const l=TA("iframefcb");return Ln()[l]=()=>{gapi.load?r():n(Vn(t,"network-request-failed"))},ew(`${SA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ol=null,e})}let Ol=null;function LC(t){return Ol=Ol||VC(t),Ol}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Sa(5e3,15e3),OC="__/auth/iframe",FC="emulator/auth/iframe",zC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Uf(e,FC):`https://${t.config.authDomain}/${OC}`,r={apiKey:e.apiKey,appName:t.name,v:Ws},i=UC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xa(r).slice(1)}`}async function WC(t){const e=await LC(t),n=Ln().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:BC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vn(t,"network-request-failed"),l=Ln().setTimeout(()=>{s(o)},MC.get());function u(){Ln().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,HC=600,GC="_blank",KC="http://localhost";class Xg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QC(t,e,n,r=qC,i=HC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...$C,width:r.toString(),height:i.toString(),top:s,left:o},h=Ct().toLowerCase();n&&(l=G_(h)?GC:n),q_(h)&&(e=e||KC,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[k,N])=>`${y}${k}=${N},`,"");if(pA(h)&&l!=="_self")return YC(e||"",l),new Xg(null);const g=window.open(e||"",l,p);te(g,t,"popup-blocked");try{g.focus()}catch{}return new Xg(g)}function YC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="__/auth/handler",XC="emulator/auth/handler",ZC=encodeURIComponent("fac");async function Zg(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ws,eventId:i};if(e instanceof rw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof Ia){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),h=u?`#${ZC}=${encodeURIComponent(u)}`:"";return`${eb(t)}?${xa(l).slice(1)}${h}`}function eb({config:t}){return t.emulator?Uf(t,XC):`https://${t.authDomain}/${JC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="webStorageSupport";class tb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uw,this._completeRedirectFn=IC,this._overrideRedirectResult=xC}async _openPopup(e,n,r,i){var o;lr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Zg(e,n,r,vh(),i);return QC(e,s,Hf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Zg(e,n,r,vh(),i);return iC(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(lr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WC(e),r=new CC(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pd,{type:pd},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[pd];s!==void 0&&n(!!s),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return X_()||H_()||Wf()}}const nb=tb;var ey="@firebase/auth",ty="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sb(t){Ds(new bi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z_(t)},h=new wA(r,i,s,u);return RA(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ds(new bi("auth-internal",e=>{const n=si(e.getProvider("auth").getImmediate());return(r=>new rb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(ey,ty,ib(t)),$r(ey,ty,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=5*60,ab=b_("authIdTokenMaxAge")||ob;let ny=null;const lb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ab)return;const i=n==null?void 0:n.token;ny!==i&&(ny=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function cb(t=j_()){const e=Ff(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kA(t,{popupRedirectResolver:nb,persistence:[fC,tC,uw]}),r=b_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=lb(s.toString());YA(n,o,()=>o(n.currentUser)),QA(n,l=>o(l))}}const i=A_("auth");return i&&PA(n,`http://${i}`),n}function ub(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}EA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Vn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ub().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sb("Browser");var ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,yw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,_){function x(){}x.prototype=_.prototype,w.D=_.prototype,w.prototype=new x,w.prototype.constructor=w,w.C=function(S,R,D){for(var I=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)I[bt-2]=arguments[bt];return _.prototype[R].apply(S,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,_,x){x||(x=0);var S=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)S[R]=_.charCodeAt(x++)|_.charCodeAt(x++)<<8|_.charCodeAt(x++)<<16|_.charCodeAt(x++)<<24;else for(R=0;16>R;++R)S[R]=_[x++]|_[x++]<<8|_[x++]<<16|_[x++]<<24;_=w.g[0],x=w.g[1],R=w.g[2];var D=w.g[3],I=_+(D^x&(R^D))+S[0]+3614090360&4294967295;_=x+(I<<7&4294967295|I>>>25),I=D+(R^_&(x^R))+S[1]+3905402710&4294967295,D=_+(I<<12&4294967295|I>>>20),I=R+(x^D&(_^x))+S[2]+606105819&4294967295,R=D+(I<<17&4294967295|I>>>15),I=x+(_^R&(D^_))+S[3]+3250441966&4294967295,x=R+(I<<22&4294967295|I>>>10),I=_+(D^x&(R^D))+S[4]+4118548399&4294967295,_=x+(I<<7&4294967295|I>>>25),I=D+(R^_&(x^R))+S[5]+1200080426&4294967295,D=_+(I<<12&4294967295|I>>>20),I=R+(x^D&(_^x))+S[6]+2821735955&4294967295,R=D+(I<<17&4294967295|I>>>15),I=x+(_^R&(D^_))+S[7]+4249261313&4294967295,x=R+(I<<22&4294967295|I>>>10),I=_+(D^x&(R^D))+S[8]+1770035416&4294967295,_=x+(I<<7&4294967295|I>>>25),I=D+(R^_&(x^R))+S[9]+2336552879&4294967295,D=_+(I<<12&4294967295|I>>>20),I=R+(x^D&(_^x))+S[10]+4294925233&4294967295,R=D+(I<<17&4294967295|I>>>15),I=x+(_^R&(D^_))+S[11]+2304563134&4294967295,x=R+(I<<22&4294967295|I>>>10),I=_+(D^x&(R^D))+S[12]+1804603682&4294967295,_=x+(I<<7&4294967295|I>>>25),I=D+(R^_&(x^R))+S[13]+4254626195&4294967295,D=_+(I<<12&4294967295|I>>>20),I=R+(x^D&(_^x))+S[14]+2792965006&4294967295,R=D+(I<<17&4294967295|I>>>15),I=x+(_^R&(D^_))+S[15]+1236535329&4294967295,x=R+(I<<22&4294967295|I>>>10),I=_+(R^D&(x^R))+S[1]+4129170786&4294967295,_=x+(I<<5&4294967295|I>>>27),I=D+(x^R&(_^x))+S[6]+3225465664&4294967295,D=_+(I<<9&4294967295|I>>>23),I=R+(_^x&(D^_))+S[11]+643717713&4294967295,R=D+(I<<14&4294967295|I>>>18),I=x+(D^_&(R^D))+S[0]+3921069994&4294967295,x=R+(I<<20&4294967295|I>>>12),I=_+(R^D&(x^R))+S[5]+3593408605&4294967295,_=x+(I<<5&4294967295|I>>>27),I=D+(x^R&(_^x))+S[10]+38016083&4294967295,D=_+(I<<9&4294967295|I>>>23),I=R+(_^x&(D^_))+S[15]+3634488961&4294967295,R=D+(I<<14&4294967295|I>>>18),I=x+(D^_&(R^D))+S[4]+3889429448&4294967295,x=R+(I<<20&4294967295|I>>>12),I=_+(R^D&(x^R))+S[9]+568446438&4294967295,_=x+(I<<5&4294967295|I>>>27),I=D+(x^R&(_^x))+S[14]+3275163606&4294967295,D=_+(I<<9&4294967295|I>>>23),I=R+(_^x&(D^_))+S[3]+4107603335&4294967295,R=D+(I<<14&4294967295|I>>>18),I=x+(D^_&(R^D))+S[8]+1163531501&4294967295,x=R+(I<<20&4294967295|I>>>12),I=_+(R^D&(x^R))+S[13]+2850285829&4294967295,_=x+(I<<5&4294967295|I>>>27),I=D+(x^R&(_^x))+S[2]+4243563512&4294967295,D=_+(I<<9&4294967295|I>>>23),I=R+(_^x&(D^_))+S[7]+1735328473&4294967295,R=D+(I<<14&4294967295|I>>>18),I=x+(D^_&(R^D))+S[12]+2368359562&4294967295,x=R+(I<<20&4294967295|I>>>12),I=_+(x^R^D)+S[5]+4294588738&4294967295,_=x+(I<<4&4294967295|I>>>28),I=D+(_^x^R)+S[8]+2272392833&4294967295,D=_+(I<<11&4294967295|I>>>21),I=R+(D^_^x)+S[11]+1839030562&4294967295,R=D+(I<<16&4294967295|I>>>16),I=x+(R^D^_)+S[14]+4259657740&4294967295,x=R+(I<<23&4294967295|I>>>9),I=_+(x^R^D)+S[1]+2763975236&4294967295,_=x+(I<<4&4294967295|I>>>28),I=D+(_^x^R)+S[4]+1272893353&4294967295,D=_+(I<<11&4294967295|I>>>21),I=R+(D^_^x)+S[7]+4139469664&4294967295,R=D+(I<<16&4294967295|I>>>16),I=x+(R^D^_)+S[10]+3200236656&4294967295,x=R+(I<<23&4294967295|I>>>9),I=_+(x^R^D)+S[13]+681279174&4294967295,_=x+(I<<4&4294967295|I>>>28),I=D+(_^x^R)+S[0]+3936430074&4294967295,D=_+(I<<11&4294967295|I>>>21),I=R+(D^_^x)+S[3]+3572445317&4294967295,R=D+(I<<16&4294967295|I>>>16),I=x+(R^D^_)+S[6]+76029189&4294967295,x=R+(I<<23&4294967295|I>>>9),I=_+(x^R^D)+S[9]+3654602809&4294967295,_=x+(I<<4&4294967295|I>>>28),I=D+(_^x^R)+S[12]+3873151461&4294967295,D=_+(I<<11&4294967295|I>>>21),I=R+(D^_^x)+S[15]+530742520&4294967295,R=D+(I<<16&4294967295|I>>>16),I=x+(R^D^_)+S[2]+3299628645&4294967295,x=R+(I<<23&4294967295|I>>>9),I=_+(R^(x|~D))+S[0]+4096336452&4294967295,_=x+(I<<6&4294967295|I>>>26),I=D+(x^(_|~R))+S[7]+1126891415&4294967295,D=_+(I<<10&4294967295|I>>>22),I=R+(_^(D|~x))+S[14]+2878612391&4294967295,R=D+(I<<15&4294967295|I>>>17),I=x+(D^(R|~_))+S[5]+4237533241&4294967295,x=R+(I<<21&4294967295|I>>>11),I=_+(R^(x|~D))+S[12]+1700485571&4294967295,_=x+(I<<6&4294967295|I>>>26),I=D+(x^(_|~R))+S[3]+2399980690&4294967295,D=_+(I<<10&4294967295|I>>>22),I=R+(_^(D|~x))+S[10]+4293915773&4294967295,R=D+(I<<15&4294967295|I>>>17),I=x+(D^(R|~_))+S[1]+2240044497&4294967295,x=R+(I<<21&4294967295|I>>>11),I=_+(R^(x|~D))+S[8]+1873313359&4294967295,_=x+(I<<6&4294967295|I>>>26),I=D+(x^(_|~R))+S[15]+4264355552&4294967295,D=_+(I<<10&4294967295|I>>>22),I=R+(_^(D|~x))+S[6]+2734768916&4294967295,R=D+(I<<15&4294967295|I>>>17),I=x+(D^(R|~_))+S[13]+1309151649&4294967295,x=R+(I<<21&4294967295|I>>>11),I=_+(R^(x|~D))+S[4]+4149444226&4294967295,_=x+(I<<6&4294967295|I>>>26),I=D+(x^(_|~R))+S[11]+3174756917&4294967295,D=_+(I<<10&4294967295|I>>>22),I=R+(_^(D|~x))+S[2]+718787259&4294967295,R=D+(I<<15&4294967295|I>>>17),I=x+(D^(R|~_))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+D&4294967295}r.prototype.u=function(w,_){_===void 0&&(_=w.length);for(var x=_-this.blockSize,S=this.B,R=this.h,D=0;D<_;){if(R==0)for(;D<=x;)i(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<_;)if(S[R++]=w.charCodeAt(D++),R==this.blockSize){i(this,S),R=0;break}}else for(;D<_;)if(S[R++]=w[D++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=_},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;var x=8*this.o;for(_=w.length-8;_<w.length;++_)w[_]=x&255,x/=256;for(this.u(w),w=Array(16),_=x=0;4>_;++_)for(var S=0;32>S;S+=8)w[x++]=this.g[_]>>>S&255;return w};function s(w,_){var x=l;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=_(w)}function o(w,_){this.h=_;for(var x=[],S=!0,R=w.length-1;0<=R;R--){var D=w[R]|0;S&&D==_||(x[R]=D,S=!1)}this.g=x}var l={};function u(w){return-128<=w&&128>w?s(w,function(_){return new o([_|0],0>_?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return F(h(-w));for(var _=[],x=1,S=0;w>=x;S++)_[S]=w/x|0,x*=4294967296;return new o(_,0)}function p(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return F(p(w.substring(1),_));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(_,8)),S=g,R=0;R<w.length;R+=8){var D=Math.min(8,w.length-R),I=parseInt(w.substring(R,R+D),_);8>D?(D=h(Math.pow(_,D)),S=S.j(D).add(h(I))):(S=S.j(x),S=S.add(h(I)))}return S}var g=u(0),y=u(1),k=u(16777216);t=o.prototype,t.m=function(){if(V(this))return-F(this).m();for(var w=0,_=1,x=0;x<this.g.length;x++){var S=this.i(x);w+=(0<=S?S:4294967296+S)*_,_*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(V(this))return"-"+F(this).toString(w);for(var _=h(Math.pow(w,6)),x=this,S="";;){var R=M(x,_).g;x=A(x,R.j(_));var D=((0<x.g.length?x.g[0]:x.h)>>>0).toString(w);if(x=R,N(x))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(var _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function V(w){return w.h==-1}t.l=function(w){return w=A(this,w),V(w)?-1:N(w)?0:1};function F(w){for(var _=w.g.length,x=[],S=0;S<_;S++)x[S]=~w.g[S];return new o(x,~w.h).add(y)}t.abs=function(){return V(this)?F(this):this},t.add=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],S=0,R=0;R<=_;R++){var D=S+(this.i(R)&65535)+(w.i(R)&65535),I=(D>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);S=I>>>16,D&=65535,I&=65535,x[R]=I<<16|D}return new o(x,x[x.length-1]&-2147483648?-1:0)};function A(w,_){return w.add(F(_))}t.j=function(w){if(N(this)||N(w))return g;if(V(this))return V(w)?F(this).j(F(w)):F(F(this).j(w));if(V(w))return F(this.j(F(w)));if(0>this.l(k)&&0>w.l(k))return h(this.m()*w.m());for(var _=this.g.length+w.g.length,x=[],S=0;S<2*_;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<w.g.length;R++){var D=this.i(S)>>>16,I=this.i(S)&65535,bt=w.i(R)>>>16,Ht=w.i(R)&65535;x[2*S+2*R]+=I*Ht,E(x,2*S+2*R),x[2*S+2*R+1]+=D*Ht,E(x,2*S+2*R+1),x[2*S+2*R+1]+=I*bt,E(x,2*S+2*R+1),x[2*S+2*R+2]+=D*bt,E(x,2*S+2*R+2)}for(S=0;S<_;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=_;S<2*_;S++)x[S]=0;return new o(x,0)};function E(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function b(w,_){this.g=w,this.h=_}function M(w,_){if(N(_))throw Error("division by zero");if(N(w))return new b(g,g);if(V(w))return _=M(F(w),_),new b(F(_.g),F(_.h));if(V(_))return _=M(w,F(_)),new b(F(_.g),_.h);if(30<w.g.length){if(V(w)||V(_))throw Error("slowDivide_ only works with positive integers.");for(var x=y,S=_;0>=S.l(w);)x=$(x),S=$(S);var R=B(x,1),D=B(S,1);for(S=B(S,2),x=B(x,2);!N(S);){var I=D.add(S);0>=I.l(w)&&(R=R.add(x),D=I),S=B(S,1),x=B(x,1)}return _=A(w,R.j(_)),new b(R,_)}for(R=g;0<=w.l(_);){for(x=Math.max(1,Math.floor(w.m()/_.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=h(x),I=D.j(_);V(I)||0<I.l(w);)x-=S,D=h(x),I=D.j(_);N(D)&&(D=y),R=R.add(D),w=A(w,I)}return new b(R,w)}t.A=function(w){return M(this,w).h},t.and=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],S=0;S<_;S++)x[S]=this.i(S)&w.i(S);return new o(x,this.h&w.h)},t.or=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],S=0;S<_;S++)x[S]=this.i(S)|w.i(S);return new o(x,this.h|w.h)},t.xor=function(w){for(var _=Math.max(this.g.length,w.g.length),x=[],S=0;S<_;S++)x[S]=this.i(S)^w.i(S);return new o(x,this.h^w.h)};function $(w){for(var _=w.g.length+1,x=[],S=0;S<_;S++)x[S]=w.i(S)<<1|w.i(S-1)>>>31;return new o(x,w.h)}function B(w,_){var x=_>>5;_%=32;for(var S=w.g.length-x,R=[],D=0;D<S;D++)R[D]=0<_?w.i(D+x)>>>_|w.i(D+x+1)<<32-_:w.i(D+x);return new o(R,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,qr=o}).apply(typeof ry<"u"?ry:typeof self<"u"?self:typeof window<"u"?window:{});var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vw,xo,_w,Fl,Eh,ww,Ew,xw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof yl=="object"&&yl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in f))break e;f=f[j]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,v=!1,j={next:function(){if(!v&&f<a.length){var L=f++;return{value:d(L,a[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function g(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,y.apply(null,arguments)}function k(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function N(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,j,L){for(var q=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)q[Se-2]=arguments[Se];return d.prototype[j].apply(v,q)}}function V(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function F(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const j=a.length||0,L=v.length||0;a.length=j+L;for(let q=0;q<L;q++)a[j+q]=v[q]}else a.push(v)}}class A{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function E(a){return/^[\s\xa0]*$/.test(a)}function b(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function M(a){return M[" "](a),a}M[" "]=function(){};var $=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function B(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function w(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function _(a){const d={};for(const f in a)d[f]=a[f];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let f,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(f in v)a[f]=v[f];for(let L=0;L<x.length;L++)f=x[L],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function R(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function D(a){l.setTimeout(()=>{throw a},0)}function I(){var a=X;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class bt{constructor(){this.h=this.g=null}add(d,f){const v=Ht.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Ht=new A(()=>new gr,a=>a.reset());class gr{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let kt,H=!1,X=new bt,Z=()=>{const a=l.Promise.resolve(void 0);kt=()=>{a.then(ve)}};var ve=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){D(f)}var d=Ht;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}H=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function at(a,d){if(_e.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if($){e:{try{M(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:C[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&at.aa.h.call(this)}}N(at,_e);var C={2:"touch",3:"pen",4:"mouse"};at.prototype.h=function(){at.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),Y=0;function $e(a,d,f,v,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=j,this.key=++Y,this.da=this.fa=!1}function Ye(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function gt(a){this.src=a,this.g={},this.h=0}gt.prototype.add=function(a,d,f,v,j){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var q=Oi(a,d,v,j);return-1<q?(d=a[q],f||(d.fa=!1)):(d=new $e(d,this.src,L,!!v,j),d.fa=f,a.push(d)),d};function Un(a,d){var f=d.type;if(f in a.g){var v=a.g[f],j=Array.prototype.indexOf.call(v,d,void 0),L;(L=0<=j)&&Array.prototype.splice.call(v,j,1),L&&(Ye(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Oi(a,d,f,v){for(var j=0;j<a.length;++j){var L=a[j];if(!L.da&&L.listener==d&&L.capture==!!f&&L.ha==v)return j}return-1}var pn="closure_lm_"+(1e6*Math.random()|0),Rt={};function nn(a,d,f,v,j){if(Array.isArray(d)){for(var L=0;L<d.length;L++)nn(a,d[L],f,v,j);return null}return f=$n(f),a&&a[U]?a.K(d,f,h(v)?!!v.capture:!1,j):Bn(a,d,f,!1,v,j)}function Bn(a,d,f,v,j,L){if(!d)throw Error("Invalid event type");var q=h(j)?!!j.capture:!!j,Se=me(a);if(Se||(a[pn]=Se=new gt(a)),f=Se.add(d,f,v,q,L),f.proxy)return f;if(v=yr(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Qe||(j=q),j===void 0&&(j=!1),a.addEventListener(d.toString(),v,j);else if(a.attachEvent)a.attachEvent(zi(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function yr(){function a(f){return d.call(a.src,a.listener,f)}const d=li;return a}function Fi(a,d,f,v,j){if(Array.isArray(d))for(var L=0;L<d.length;L++)Fi(a,d[L],f,v,j);else v=h(v)?!!v.capture:!!v,f=$n(f),a&&a[U]?(a=a.i,d=String(d).toString(),d in a.g&&(L=a.g[d],f=Oi(L,f,v,j),-1<f&&(Ye(L[f]),Array.prototype.splice.call(L,f,1),L.length==0&&(delete a.g[d],a.h--)))):a&&(a=me(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Oi(d,f,v,j)),(f=-1<a?d[a]:null)&&Wn(f))}function Wn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[U])Un(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(zi(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=me(d))?(Un(f,a),f.h==0&&(f.src=null,d[pn]=null)):Ye(a)}}}function zi(a){return a in Rt?Rt[a]:Rt[a]="on"+a}function li(a,d){if(a.da)a=!0;else{d=new at(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&Wn(a),a=f.call(v,d)}return a}function me(a){return a=a[pn],a instanceof gt?a:null}var yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function $n(a){return typeof a=="function"?a:(a[yt]||(a[yt]=function(d){return a.handleEvent(d)}),a[yt])}function Ue(){fe.call(this),this.i=new gt(this),this.M=this,this.F=null}N(Ue,fe),Ue.prototype[U]=!0,Ue.prototype.removeEventListener=function(a,d,f,v){Fi(this,a,d,f,v)};function lt(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new _e(d,a);else if(d instanceof _e)d.target=d.target||a;else{var j=d;d=new _e(v,a),S(d,j)}if(j=!0,f)for(var L=f.length-1;0<=L;L--){var q=d.g=f[L];j=Ui(q,v,!0,d)&&j}if(q=d.g=a,j=Ui(q,v,!0,d)&&j,j=Ui(q,v,!1,d)&&j,f)for(L=0;L<f.length;L++)q=d.g=f[L],j=Ui(q,v,!1,d)&&j}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)Ye(f[v]);delete a.g[d],a.h--}}this.F=null},Ue.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},Ue.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function Ui(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,L=0;L<d.length;++L){var q=d[L];if(q&&!q.da&&q.capture==f){var Se=q.listener,ut=q.ha||q.src;q.fa&&Un(a.i,q),j=Se.call(ut,v)!==!1&&j}}return j&&!v.defaultPrevented}function La(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Ma(a){a.g=La(()=>{a.g=null,a.i&&(a.i=!1,Ma(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Su extends fe{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ma(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(a){fe.call(this),this.h=a,this.g={}}N(ci,fe);var m=[];function P(a){B(a.g,function(d,f){this.g.hasOwnProperty(f)&&Wn(d)},a),a.g={}}ci.prototype.N=function(){ci.aa.N.call(this),P(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var re=l.JSON.stringify,ae=l.JSON.parse,Pe=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ct(){}ct.prototype.h=null;function Te(a){return a.h||(a.h=a.i())}function Ot(){}var xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Je(){_e.call(this,"d")}N(Je,_e);function rn(){_e.call(this,"c")}N(rn,_e);var ee={},Pt=null;function le(){return Pt=Pt||new Ue}ee.La="serverreachability";function mn(a){_e.call(this,ee.La,a)}N(mn,_e);function Bi(a){const d=le();lt(d,new mn(d))}ee.STAT_EVENT="statevent";function Ys(a,d){_e.call(this,ee.STAT_EVENT,a),this.stat=d}N(Ys,_e);function Dt(a){const d=le();lt(d,new Ys(d,a))}ee.Ma="timingevent";function kp(a,d){_e.call(this,ee.Ma,a),this.size=d}N(kp,_e);function Js(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function eE(a,d,f,v,j,L){a.info(function(){if(a.g)if(L)for(var q="",Se=L.split("&"),ut=0;ut<Se.length;ut++){var ye=Se[ut].split("=");if(1<ye.length){var vt=ye[0];ye=ye[1];var _t=vt.split("_");q=2<=_t.length&&_t[1]=="type"?q+(vt+"="+ye+"&"):q+(vt+"=redacted&")}}else q=null;else q=L;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+d+`
`+f+`
`+q})}function tE(a,d,f,v,j,L,q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+d+`
`+f+`
`+L+" "+q})}function Wi(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+rE(a,f)+(v?" "+v:"")})}function nE(a,d){a.info(function(){return"TIMEOUT: "+d})}Xs.prototype.info=function(){};function rE(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var q=1;q<j.length;q++)j[q]=""}}}}return re(f)}catch{return d}}var Oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tu;function Fa(){}N(Fa,ct),Fa.prototype.g=function(){return new XMLHttpRequest},Fa.prototype.i=function(){return{}},Tu=new Fa;function vr(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pp}function Pp(){this.i=null,this.g="",this.h=!1}var Dp={},Iu={};function Au(a,d,f){a.L=1,a.v=Wa(qn(d)),a.m=f,a.P=!0,Np(a,null)}function Np(a,d){a.F=Date.now(),za(a),a.A=qn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Gp(f.i,"t",v),a.C=0,f=a.j.J,a.h=new Pp,a.g=dm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Su(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(m[0]=j.toString()),j=m);for(var L=0;L<j.length;L++){var q=nn(f,j[L],v||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Bi(),eE(a.i,a.u,a.A,a.l,a.R,a.m)}vr.prototype.ca=function(a){a=a.target;const d=this.M;d&&Hn(a)==3?d.j():this.Y(a)},vr.prototype.Y=function(a){try{if(a==this.g)e:{const _t=Hn(this.g);var d=this.g.Ba();const Hi=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||em(this.g)))){this.J||_t!=4||d==7||(d==8||0>=Hi?Bi(3):Bi(2)),Cu(this);var f=this.g.Z();this.X=f;t:if(jp(this)){var v=em(this.g);a="";var j=v.length,L=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),Zs(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(L&&d==j-1)});v.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,tE(this.i,this.u,this.A,this.l,this.R,_t,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ut=this.g;if((Se=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Se)){var ye=Se;break t}}ye=null}if(f=ye)Wi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bu(this,f);else{this.o=!1,this.s=3,Dt(12),ui(this),Zs(this);break e}}if(this.P){f=!0;let gn;for(;!this.J&&this.C<q.length;)if(gn=iE(this,q),gn==Iu){_t==4&&(this.s=4,Dt(14),f=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Dp){this.s=4,Dt(15),Wi(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Wi(this.i,this.l,gn,null),bu(this,gn);if(jp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||q.length!=0||this.h.h||(this.s=1,Dt(16),f=!1),this.o=this.o&&f,!f)Wi(this.i,this.l,q,"[Invalid Chunked Response]"),ui(this),Zs(this);else if(0<q.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),ju(vt),vt.M=!0,Dt(11))}}else Wi(this.i,this.l,q,null),bu(this,q);_t==4&&ui(this),this.o&&!this.J&&(_t==4?am(this.j,this):(this.o=!1,za(this)))}else EE(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),ui(this),Zs(this)}}}catch{}finally{}};function jp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function iE(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?Iu:(f=Number(d.substring(f,v)),isNaN(f)?Dp:(v+=1,v+f>d.length?Iu:(d=d.slice(v,v+f),a.C=v+f,d)))}vr.prototype.cancel=function(){this.J=!0,ui(this)};function za(a){a.S=Date.now()+a.I,Vp(a,a.I)}function Vp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Js(y(a.ba,a),d)}function Cu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}vr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(nE(this.i,this.A),this.L!=2&&(Bi(),Dt(17)),ui(this),this.s=2,Zs(this)):Vp(this,this.S-a)};function Zs(a){a.j.G==0||a.J||am(a.j,a)}function ui(a){Cu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,P(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function bu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||ku(f.h,a))){if(!a.K&&ku(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Qa(f),Ga(f);else break e;Nu(f),Dt(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=Js(y(f.Za,f),6e3));if(1>=Op(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else hi(f,11)}else if((a.K||f.g==a)&&Qa(f),!E(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let ye=j[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];const vt=ye[3];vt!=null&&(f.la=vt,f.j.info("VER="+f.la));const _t=ye[4];_t!=null&&(f.Aa=_t,f.j.info("SVER="+f.Aa));const Hi=ye[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(v=1.5*Hi,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const gn=a.g;if(gn){const Ja=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ja){var L=v.h;L.g||Ja.indexOf("spdy")==-1&&Ja.indexOf("quic")==-1&&Ja.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ru(L,L.h),L.h=null))}if(v.D){const Vu=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vu&&(v.ya=Vu,be(v.I,v.D,Vu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var q=a;if(v.qa=um(v,v.J?v.ia:null,v.W),q.K){Fp(v.h,q);var Se=q,ut=v.L;ut&&(Se.I=ut),Se.B&&(Cu(Se),za(Se)),v.g=q}else sm(v);0<f.i.length&&Ka(f)}else ye[0]!="stop"&&ye[0]!="close"||hi(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?hi(f,7):Du(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Bi(4)}catch{}}var sE=class{constructor(a,d){this.g=a,this.map=d}};function Lp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Op(a){return a.h?1:a.g?a.g.size:0}function ku(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Ru(a,d){a.g?a.g.add(d):a.h=d}function Fp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Lp.prototype.cancel=function(){if(this.i=zp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return V(a.i)}function oE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function aE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function Up(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=aE(a),v=oE(a),j=v.length,L=0;L<j;L++)d.call(void 0,v[L],f&&f[L],a)}var Bp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lE(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),j=null;if(0<=v){var L=a[f].substring(0,v);j=a[f].substring(v+1)}else L=a[f];d(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function di(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof di){this.h=a.h,Ua(this,a.j),this.o=a.o,this.g=a.g,Ba(this,a.s),this.l=a.l;var d=a.i,f=new no;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Wp(this,f),this.m=a.m}else a&&(d=String(a).match(Bp))?(this.h=!1,Ua(this,d[1]||"",!0),this.o=eo(d[2]||""),this.g=eo(d[3]||"",!0),Ba(this,d[4]),this.l=eo(d[5]||"",!0),Wp(this,d[6]||"",!0),this.m=eo(d[7]||"")):(this.h=!1,this.i=new no(null,this.h))}di.prototype.toString=function(){var a=[],d=this.j;d&&a.push(to(d,$p,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(to(d,$p,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(to(f,f.charAt(0)=="/"?dE:uE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",to(f,fE)),a.join("")};function qn(a){return new di(a)}function Ua(a,d,f){a.j=f?eo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Ba(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Wp(a,d,f){d instanceof no?(a.i=d,pE(a.i,a.h)):(f||(d=to(d,hE)),a.i=new no(d,a.h))}function be(a,d,f){a.i.set(d,f)}function Wa(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function eo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function to(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,cE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function cE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var $p=/[#\/\?@]/g,uE=/[#\?:]/g,dE=/[#\?]/g,hE=/[#\?@]/g,fE=/#/g;function no(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&lE(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=no.prototype,t.add=function(a,d){_r(this),this.i=null,a=$i(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function qp(a,d){_r(a),d=$i(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Hp(a,d){return _r(a),d=$i(a,d),a.g.has(d)}t.forEach=function(a,d){_r(this),this.g.forEach(function(f,v){f.forEach(function(j){a.call(d,j,v,this)},this)},this)},t.na=function(){_r(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const j=a[v];for(let L=0;L<j.length;L++)f.push(d[v])}return f},t.V=function(a){_r(this);let d=[];if(typeof a=="string")Hp(this,a)&&(d=d.concat(this.g.get($i(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return _r(this),this.i=null,a=$i(this,a),Hp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Gp(a,d,f){qp(a,d),0<f.length&&(a.i=null,a.g.set($i(a,d),V(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const L=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var j=L;q[v]!==""&&(j+="="+encodeURIComponent(String(q[v]))),a.push(j)}}return this.i=a.join("&")};function $i(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function pE(a,d){d&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(f,v){var j=v.toLowerCase();v!=j&&(qp(this,v),Gp(this,j,f))},a)),a.j=d}function mE(a,d){const f=new Xs;if(l.Image){const v=new Image;v.onload=k(wr,f,"TestLoadImage: loaded",!0,d,v),v.onerror=k(wr,f,"TestLoadImage: error",!1,d,v),v.onabort=k(wr,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=k(wr,f,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function gE(a,d){const f=new Xs,v=new AbortController,j=setTimeout(()=>{v.abort(),wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(L=>{clearTimeout(j),L.ok?wr(f,"TestPingServer: ok",!0,d):wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),wr(f,"TestPingServer: error",!1,d)})}function wr(a,d,f,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(f)}catch{}}function yE(){this.g=new Pe}function vE(a,d,f){const v=f||"";try{Up(a,function(j,L){let q=j;h(j)&&(q=re(j)),d.push(v+L+"="+encodeURIComponent(q))})}catch(j){throw d.push(v+"type="+encodeURIComponent("_badmap")),j}}function $a(a){this.l=a.Ub||null,this.j=a.eb||!1}N($a,ct),$a.prototype.g=function(){return new qa(this.l,this.j)},$a.prototype.i=function(a){return function(){return a}}({});function qa(a,d){Ue.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(qa,Ue),t=qa.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,io(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ro(this):io(this),this.readyState==3&&Kp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ro(this))},t.Qa=function(a){this.g&&(this.response=a,ro(this))},t.ga=function(){this.g&&ro(this)};function ro(a){a.readyState=4,a.l=null,a.j=null,a.v=null,io(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function io(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Qp(a){let d="";return B(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function Pu(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Qp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):be(a,d,f))}function Fe(a){Ue.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Fe,Ue);var _E=/^https?$/i,wE=["POST","PUT"];t=Fe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tu.g(),this.v=this.o?Te(this.o):Te(Tu),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(L){Yp(this,L);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)f.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())f.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(wE,d,void 0))||v||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,q]of f)this.g.setRequestHeader(L,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zp(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Yp(this,L)}};function Yp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Jp(a),Ha(a)}function Jp(a){a.A||(a.A=!0,lt(a,"complete"),lt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,lt(this,"complete"),lt(this,"abort"),Ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ha(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xp(this):this.bb())},t.bb=function(){Xp(this)};function Xp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Hn(a)!=4||a.Z()!=2)){if(a.u&&Hn(a)==4)La(a.Ea,0,a);else if(lt(a,"readystatechange"),Hn(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=q===0){var j=String(a.D).match(Bp)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!_E.test(j?j.toLowerCase():"")}f=v}if(f)lt(a,"complete"),lt(a,"success");else{a.m=6;try{var L=2<Hn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Jp(a)}}finally{Ha(a)}}}}function Ha(a,d){if(a.g){Zp(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||lt(a,"ready");try{f.onreadystatechange=v}catch{}}}function Zp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Hn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),ae(d)}};function em(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function EE(a){const d={};a=(a.g&&2<=Hn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(E(a[v]))continue;var f=R(a[v]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=d[j]||[];d[j]=L,L.push(f)}w(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function tm(a){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,a),this.cb=so("retryDelaySeedMs",1e4,a),this.Wa=so("forwardChannelMaxRetries",2,a),this.wa=so("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Lp(a&&a.concurrentRequestLimit),this.Da=new yE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tm.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){Dt(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=um(this,null,this.W),Ka(this)};function Du(a){if(nm(a),a.G==3){var d=a.U++,f=qn(a.I);if(be(f,"SID",a.K),be(f,"RID",d),be(f,"TYPE","terminate"),oo(a,f),d=new vr(a,a.j,d),d.L=2,d.v=Wa(qn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=dm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),za(d)}cm(a)}function Ga(a){a.g&&(ju(a),a.g.cancel(),a.g=null)}function nm(a){Ga(a),a.u&&(l.clearTimeout(a.u),a.u=null),Qa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ka(a){if(!Mp(a.h)&&!a.s){a.s=!0;var d=a.Ga;kt||Z(),H||(kt(),H=!0),X.add(d,a),a.B=0}}function xE(a,d){return Op(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Js(y(a.Ga,a,d),lm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new vr(this,this.j,a);let L=this.o;if(this.S&&(L?(L=_(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=im(this,j,d),f=qn(this.I),be(f,"RID",a),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),oo(this,f),L&&(this.O?d="headers="+encodeURIComponent(String(Qp(L)))+"&"+d:this.m&&Pu(f,this.m,L)),Ru(this.h,j),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),j.T=!0,Au(j,f,null)):Au(j,f,d),this.G=2}}else this.G==3&&(a?rm(this,a):this.i.length==0||Mp(this.h)||rm(this))};function rm(a,d){var f;d?f=d.l:f=a.U++;const v=qn(a.I);be(v,"SID",a.K),be(v,"RID",f),be(v,"AID",a.T),oo(a,v),a.m&&a.o&&Pu(v,a.m,a.o),f=new vr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=im(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ru(a.h,f),Au(f,v,d)}function oo(a,d){a.H&&B(a.H,function(f,v){be(d,v,f)}),a.l&&Up({},function(f,v){be(d,v,f)})}function im(a,d,f){f=Math.min(a.i.length,f);var v=a.l?y(a.l.Na,a.l,a):null;e:{var j=a.i;let L=-1;for(;;){const q=["count="+f];L==-1?0<f?(L=j[0].g,q.push("ofs="+L)):L=0:q.push("ofs="+L);let Se=!0;for(let ut=0;ut<f;ut++){let ye=j[ut].g;const vt=j[ut].map;if(ye-=L,0>ye)L=Math.max(0,j[ut].g-100),Se=!1;else try{vE(vt,q,"req"+ye+"_")}catch{v&&v(vt)}}if(Se){v=q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function sm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;kt||Z(),H||(kt(),H=!0),X.add(d,a),a.v=0}}function Nu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Js(y(a.Fa,a),lm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,om(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Js(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Ga(this),om(this))};function ju(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function om(a){a.g=new vr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=qn(a.qa);be(d,"RID","rpc"),be(d,"SID",a.K),be(d,"AID",a.T),be(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(d,"TO",a.ja),be(d,"TYPE","xmlhttp"),oo(a,d),a.m&&a.o&&Pu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Wa(qn(d)),f.m=null,f.P=!0,Np(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),Nu(this),Dt(19))};function Qa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function am(a,d){var f=null;if(a.g==d){Qa(a),ju(a),a.g=null;var v=2}else if(ku(a.h,d))f=d.D,Fp(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;v=le(),lt(v,new kp(v,f)),Ka(a)}else sm(a);else if(j=d.s,j==3||j==0&&0<d.X||!(v==1&&xE(a,d)||v==2&&Nu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:hi(a,5);break;case 4:hi(a,10);break;case 3:hi(a,6);break;default:hi(a,2)}}}function lm(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function hi(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),v=a.Xa;const j=!v;v=new di(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ua(v,"https"),Wa(v),j?mE(v.toString(),f):gE(v.toString(),f)}else Dt(2);a.G=0,a.l&&a.l.sa(d),cm(a),nm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function cm(a){if(a.G=0,a.ka=[],a.l){const d=zp(a.h);(d.length!=0||a.i.length!=0)&&(F(a.ka,d),F(a.ka,a.i),a.h.i.length=0,V(a.i),a.i.length=0),a.l.ra()}}function um(a,d,f){var v=f instanceof di?qn(f):new di(f);if(v.g!="")d&&(v.g=d+"."+v.g),Ba(v,v.s);else{var j=l.location;v=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var L=new di(null);v&&Ua(L,v),d&&(L.g=d),j&&Ba(L,j),f&&(L.l=f),v=L}return f=a.D,d=a.ya,f&&d&&be(v,f,d),be(v,"VER",a.la),oo(a,v),v}function dm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Fe(new $a({eb:f})):new Fe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hm(){}t=hm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ya(){}Ya.prototype.g=function(a,d){return new Gt(a,d)};function Gt(a,d){Ue.call(this),this.g=new tm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!E(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new qi(this)}N(Gt,Ue),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Du(this.g)},Gt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=re(a),a=f);d.i.push(new sE(d.Ya++,a)),d.G==3&&Ka(d)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Du(this.g),delete this.g,Gt.aa.N.call(this)};function fm(a){Je.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}N(fm,Je);function pm(){rn.call(this),this.status=1}N(pm,rn);function qi(a){this.g=a}N(qi,hm),qi.prototype.ua=function(){lt(this.g,"a")},qi.prototype.ta=function(a){lt(this.g,new fm(a))},qi.prototype.sa=function(a){lt(this.g,new pm)},qi.prototype.ra=function(){lt(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,xw=function(){return new Ya},Ew=function(){return le()},ww=ee,Eh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oa.NO_ERROR=0,Oa.TIMEOUT=8,Oa.HTTP_ERROR=6,Fl=Oa,Rp.COMPLETE="complete",_w=Rp,Ot.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,xo=Ot,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,vw=Fe}).apply(typeof yl<"u"?yl:typeof self<"u"?self:typeof window<"u"?window:{});const iy="@firebase/firestore",sy="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Mf("@firebase/firestore");function Qi(){return Pi.logLevel}function K(t,...e){if(Pi.logLevel<=ue.DEBUG){const n=e.map(Kf);Pi.debug(`Firestore (${qs}): ${t}`,...n)}}function cr(t,...e){if(Pi.logLevel<=ue.ERROR){const n=e.map(Kf);Pi.error(`Firestore (${qs}): ${t}`,...n)}}function Di(t,...e){if(Pi.logLevel<=ue.WARN){const n=e.map(Kf);Pi.warn(`Firestore (${qs}): ${t}`,...n)}}function Kf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Sw(t,r,n)}function Sw(t,e,n){let r=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cr(r),new Error(r)}function we(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Sw(e,i,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Iw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class db{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hb{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new Tw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new St(e)}}class fb{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pb{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new fb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new oy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=gb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function xh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return md(i)===md(s)?de(i,s):md(i)?1:-1}return de(t.length,e.length)}const yb=55296,vb=57343;function md(t){const e=t.charCodeAt(0);return e>=yb&&e<=vb}function Ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="__name__";class Pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Pn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return de(e.length,n.length)}static compareSegments(e,n){const r=Pn.isNumericId(e),i=Pn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Pn.extractNumericId(e).compare(Pn.extractNumericId(n)):xh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}}class Ie extends Pn{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const _b=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends Pn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return _b.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ay}static keyField(){return new it([ay])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new G(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new G(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ie.fromString(e))}static fromName(e){return new J(Ie.fromString(e).popFirst(5))}static empty(){return new J(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e,n){if(!n)throw new G(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Cw(t,e,n,r){if(e===!0&&r===!0)throw new G(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ly(t){if(!J.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cy(t){if(J.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ru(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Vt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ru(t);throw new G(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ca(t,e){if(!bw(t))throw new G(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new G(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=-62135596800,dy=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*dy);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uy)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dy}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ca(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:Ke("string",Ae._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new Ae(0,0))}static max(){return new se(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=-1;function wb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Yr(i,J.empty(),e)}function Eb(t){return new Yr(t.readTime,t.key,ca)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(se.min(),J.empty(),ca)}static max(){return new Yr(se.max(),J.empty(),ca)}}function xb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==Sb)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Ib(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}iu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function su(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function Ab(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="";function Cb(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hy(e)),e=bb(t.get(n),e);return hy(e)}function bb(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case kw:n+="";break;default:n+=s}}return n}function hy(t){return t+kw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vl(this.root,e,this.comparator,!0)}}class vl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new et(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Pw("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const kb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=kb.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="server_timestamp",Nw="__type__",jw="__previous_value__",Vw="__local_write_time__";function Yf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Nw])==null?void 0:r.stringValue)===Dw}function ou(t){const e=t.mapValue.fields[jw];return Yf(e)?ou(e):e}function ua(t){const e=Jr(t.mapValue.fields[Vw].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,r,i,s,o,l,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const Ic="(default)";class js{constructor(e,n){this.projectId=e,this.database=n||Ic}static empty(){return new js("","")}get isDefaultDatabase(){return this.database===Ic}isEqual(e){return e instanceof js&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="__type__",Pb="__max__",_l={mapValue:{}},Mw="__vector__",Ac="value";function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yf(t)?4:Nb(t)?9007199254740991:Db(t)?10:11:ne(28295,{value:t})}function Fn(t,e){if(t===e)return!0;const n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ua(t).isEqual(ua(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jr(i.timestampValue),l=Jr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xr(i.bytesValue).isEqual(Xr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Be(i.doubleValue),l=Be(s.doubleValue);return o===l?Tc(o)===Tc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(fy(o)!==fy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Fn(o[u],l[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function da(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function Vs(t,e){if(t===e)return 0;const n=Zr(t),r=Zr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Be(s.integerValue||s.doubleValue),u=Be(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return my(t.timestampValue,e.timestampValue);case 4:return my(ua(t),ua(e));case 5:return xh(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Xr(s),u=Xr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=de(l[h],u[h]);if(p!==0)return p}return de(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=de(Be(s.latitude),Be(o.latitude));return l!==0?l:de(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gy(t.arrayValue,e.arrayValue);case 10:return function(s,o){var y,k,N,V;const l=s.fields||{},u=o.fields||{},h=(y=l[Ac])==null?void 0:y.arrayValue,p=(k=u[Ac])==null?void 0:k.arrayValue,g=de(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((V=p==null?void 0:p.values)==null?void 0:V.length)||0);return g!==0?g:gy(h,p)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===_l.mapValue&&o===_l.mapValue)return 0;if(s===_l.mapValue)return 1;if(o===_l.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const y=xh(u[g],p[g]);if(y!==0)return y;const k=Vs(l[u[g]],h[p[g]]);if(k!==0)return k}return de(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function my(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Jr(t),r=Jr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function gy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Vs(n[i],r[i]);if(s)return s}return de(n.length,r.length)}function Ls(t){return Sh(t)}function Sh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Sh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Sh(n.fields[o])}`;return i+"}"}(t.mapValue):ne(61005,{value:t})}function zl(t){switch(Zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ou(t);return e?16+zl(e):16;case 5:return 2*t.stringValue.length;case 6:return Xr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+zl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return oi(r.fields,(s,o)=>{i+=s.length+zl(o)}),i}(t.mapValue);default:throw ne(13486,{value:t})}}function yy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Th(t){return!!t&&"integerValue"in t}function Jf(t){return!!t&&"arrayValue"in t}function vy(t){return!!t&&"nullValue"in t}function _y(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ul(t){return!!t&&"mapValue"in t}function Db(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Lw])==null?void 0:r.stringValue)===Mw}function Oo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return oi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oo(t.arrayValue.values[n]);return e}return{...t}}function Nb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Pb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oo(n)}setAll(e){let n=it.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Oo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ul(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){oi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ut(Oo(this.value))}}function Ow(t){const e=[];return oi(t.fields,(n,r)=>{const i=new it([n]);if(Ul(r)){const s=Ow(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new It(e,0,se.min(),se.min(),se.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,i){return new It(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new It(e,2,n,se.min(),se.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,se.min(),se.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.position=e,this.inclusive=n}}function wy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Vs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ey(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n="asc"){this.field=e,this.dir=n}}function jb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{}class Ge extends Fw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Lb(e,n,r):n==="array-contains"?new Fb(e,r):n==="in"?new zb(e,r):n==="not-in"?new Ub(e,r):n==="array-contains-any"?new Bb(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mb(e,r):new Ob(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vs(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(Vs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends Fw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bn(e,n)}matches(e){return zw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zw(t){return t.op==="and"}function Uw(t){return Vb(t)&&zw(t)}function Vb(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function Ih(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Ls(t.value);if(Uw(t))return t.filters.map(e=>Ih(e)).join(",");{const e=t.filters.map(n=>Ih(n)).join(",");return`${t.op}(${e})`}}function Bw(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(t,e):t instanceof bn?function(r,i){return i instanceof bn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Bw(o,i.filters[l]),!0):!1}(t,e):void ne(19439)}function Ww(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Ls(n.value)}`}(t):t instanceof bn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ww).join(" ,")+"}"}(t):"Filter"}class Lb extends Ge{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mb extends Ge{constructor(e,n){super(e,"in",n),this.keys=$w("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ob extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=$w("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $w(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class Fb extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jf(n)&&da(n.arrayValue,this.value)}}class zb extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&da(this.value.arrayValue,n)}}class Ub extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!da(this.value.arrayValue,n)}}class Bb extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function xy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Wb(t,e,n,r,i,s,o)}function Xf(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ih(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ls(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ls(r)).join(",")),e.Te=n}return e.Te}function Zf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Bw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ey(t.startAt,e.startAt)&&Ey(t.endAt,e.endAt)}function Ah(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $b(t,e,n,r,i,s,o,l){return new Ks(t,e,n,r,i,s,o,l)}function au(t){return new Ks(t)}function Sy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qw(t){return t.collectionGroup!==null}function Fo(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new et(it.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ha(s,r))}),n.has(it.keyField().canonicalString())||e.Ie.push(new ha(it.keyField(),r))}return e.Ie}function Mn(t){const e=oe(t);return e.Ee||(e.Ee=qb(e,Fo(t))),e.Ee}function qb(t,e){if(t.limitType==="F")return xy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ha(i.field,s)});const n=t.endAt?new Cc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cc(t.startAt.position,t.startAt.inclusive):null;return xy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ch(t,e){const n=t.filters.concat([e]);return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bh(t,e,n){return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lu(t,e){return Zf(Mn(t),Mn(e))&&t.limitType===e.limitType}function Hw(t){return`${Xf(Mn(t))}|lt:${t.limitType}`}function Yi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ww(i)).join(", ")}]`),su(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ls(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ls(i)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function cu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Fo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=wy(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Fo(r),i)||r.endAt&&!function(o,l,u){const h=wy(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Fo(r),i))}(t,e)}function Hb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Gw(t){return(e,n)=>{let r=!1;for(const i of Fo(t)){const s=Gb(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Gb(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Vs(u,h):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Oe(J.comparator);function ur(){return Kb}const Kw=new Oe(J.comparator);function So(...t){let e=Kw;for(const n of t)e=e.insert(n.key,n);return e}function Qw(t){let e=Kw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _i(){return zo()}function Yw(){return zo()}function zo(){return new Li(t=>t.toString(),(t,e)=>t.isEqual(e))}const Qb=new Oe(J.comparator),Yb=new et(J.comparator);function he(...t){let e=Yb;for(const n of t)e=e.add(n);return e}const Jb=new et(de);function Xb(){return Jb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function Jw(t){return{integerValue:""+t}}function Zb(t,e){return Ab(e)?Jw(e):ep(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this._=void 0}}function ek(t,e,n){return t instanceof bc?function(i,s){const o={fields:{[Nw]:{stringValue:Dw},[Vw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yf(s)&&(s=ou(s)),s&&(o.fields[jw]=s),{mapValue:o}}(n,e):t instanceof fa?Zw(t,e):t instanceof pa?e1(t,e):function(i,s){const o=Xw(i,s),l=Ty(o)+Ty(i.Ae);return Th(o)&&Th(i.Ae)?Jw(l):ep(i.serializer,l)}(t,e)}function tk(t,e,n){return t instanceof fa?Zw(t,e):t instanceof pa?e1(t,e):n}function Xw(t,e){return t instanceof kc?function(r){return Th(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class bc extends uu{}class fa extends uu{constructor(e){super(),this.elements=e}}function Zw(t,e){const n=t1(e);for(const r of t.elements)n.some(i=>Fn(i,r))||n.push(r);return{arrayValue:{values:n}}}class pa extends uu{constructor(e){super(),this.elements=e}}function e1(t,e){let n=t1(e);for(const r of t.elements)n=n.filter(i=>!Fn(i,r));return{arrayValue:{values:n}}}class kc extends uu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ty(t){return Be(t.integerValue||t.doubleValue)}function t1(t){return Jf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fa&&i instanceof fa||r instanceof pa&&i instanceof pa?Ns(r.elements,i.elements,Fn):r instanceof kc&&i instanceof kc?Fn(r.Ae,i.Ae):r instanceof bc&&i instanceof bc}(t.transform,e.transform)}class rk{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class du{}function n1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tp(t.key,dn.none()):new ba(t.key,t.data,dn.none());{const n=t.data,r=Ut.empty();let i=new et(it.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ai(t.key,r,new Jt(i.toArray()),dn.none())}}function ik(t,e,n){t instanceof ba?function(i,s,o){const l=i.value.clone(),u=Ay(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ai?function(i,s,o){if(!Bl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ay(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(r1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Uo(t,e,n,r){return t instanceof ba?function(s,o,l,u){if(!Bl(s.precondition,o))return l;const h=s.value.clone(),p=Cy(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ai?function(s,o,l,u){if(!Bl(s.precondition,o))return l;const h=Cy(s.fieldTransforms,u,o),p=o.data;return p.setAll(r1(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,l){return Bl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function sk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Xw(r.transform,i||null);s!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,s))}return n||null}function Iy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ns(r,i,(s,o)=>nk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ba extends du{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ai extends du{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function r1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ay(t,e,n){const r=new Map;we(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,tk(o,l,n[i]))}return r}function Cy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ek(s,o,e))}return r}class tp extends du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ok extends du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ik(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Uo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Yw();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=n1(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>Iy(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>Iy(n,r))}}class np{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Qb}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new np(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,pe;function uk(t){switch(t){case O.OK:return ne(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function i1(t){if(t===void 0)return cr("GRPC error has no .code"),O.UNKNOWN;switch(t){case qe.OK:return O.OK;case qe.CANCELLED:return O.CANCELLED;case qe.UNKNOWN:return O.UNKNOWN;case qe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case qe.INTERNAL:return O.INTERNAL;case qe.UNAVAILABLE:return O.UNAVAILABLE;case qe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case qe.NOT_FOUND:return O.NOT_FOUND;case qe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case qe.ABORTED:return O.ABORTED;case qe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case qe.DATA_LOSS:return O.DATA_LOSS;default:return ne(39323,{code:t})}}(pe=qe||(qe={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new qr([4294967295,4294967295],0);function by(t){const e=dk().encode(t),n=new yw;return n.update(e),new Uint8Array(n.digest())}function ky(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qr([n,r],0),new qr([i,s],0)]}class rp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new To(`Invalid padding: ${n}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new To(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(qr.fromNumber(r)));return i.compare(hk)===1&&(i=new qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=by(e),[r,i]=ky(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new rp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=by(e),[r,i]=ky(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class To extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ka.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hu(se.min(),i,new Oe(de),ur(),he())}}class ka{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ka(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class s1{constructor(e,n){this.targetId=e,this.Ce=n}}class o1{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ry{constructor(){this.ve=0,this.Fe=Py(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:s})}}),new ka(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Py()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fk{constructor(e){this.Ge=e,this.ze=new Map,this.je=ur(),this.Je=wl(),this.He=wl(),this.Ye=new Oe(de)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Ah(s))if(r===0){const o=new J(s.path);this.et(n,o,It.newNoDocument(o,se.min()))}else we(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Xr(r).toUint8Array()}catch(u){if(u instanceof Pw)return Di("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new rp(o,i,s)}catch(u){return Di(u instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Ah(l.target)){const u=new J(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,It.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=he();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new hu(e,n,this.Ye,this.je,r);return this.je=ur(),this.Je=wl(),this.He=wl(),this.Ye=new Oe(de),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ry,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new et(de),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new et(de),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ry),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wl(){return new Oe(J.comparator)}function Py(){return new Oe(J.comparator)}const pk={asc:"ASCENDING",desc:"DESCENDING"},mk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gk={and:"AND",or:"OR"};class yk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kh(t,e){return t.useProto3Json||su(e)?e:{value:e}}function Rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vk(t,e){return Rc(t,e.toTimestamp())}function On(t){return we(!!t,49232),se.fromTimestamp(function(n){const r=Jr(n);return new Ae(r.seconds,r.nanos)}(t))}function ip(t,e){return Rh(t,e).canonicalString()}function Rh(t,e){const n=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function l1(t){const e=Ie.fromString(t);return we(f1(e),10190,{key:e.toString()}),e}function Ph(t,e){return ip(t.databaseId,e.path)}function gd(t,e){const n=l1(e);if(n.get(1)!==t.databaseId.projectId)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(u1(n))}function c1(t,e){return ip(t.databaseId,e)}function _k(t){const e=l1(t);return e.length===4?Ie.emptyPath():u1(e)}function Dh(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function u1(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Dy(t,e,n){return{name:Ph(t,e),fields:n.value.mapValue.fields}}function wk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ne(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(we(p===void 0||typeof p=="string",58123),ot.fromBase64String(p||"")):(we(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ot.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?O.UNKNOWN:i1(h.code);return new G(p,h.message||"")}(o);n=new o1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gd(t,r.document.name),s=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):se.min(),l=new Ut({mapValue:{fields:r.document.fields}}),u=It.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Wl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gd(t,r.document),s=r.readTime?On(r.readTime):se.min(),o=It.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Wl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gd(t,r.document),s=r.removedTargetIds||[];n=new Wl([],s,i,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ck(i,s),l=r.targetId;n=new s1(l,o)}}return n}function Ek(t,e){let n;if(e instanceof ba)n={update:Dy(t,e.key,e.value)};else if(e instanceof tp)n={delete:Ph(t,e.key)};else if(e instanceof ai)n={update:Dy(t,e.key,e.data),updateMask:Rk(e.fieldMask)};else{if(!(e instanceof ok))return ne(16599,{Vt:e.type});n={verify:Ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof bc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof kc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne(27497)}(t,e.precondition)),n}function xk(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?On(i.updateTime):On(s);return o.isEqual(se.min())&&(o=On(s)),new rk(o,i.transformResults||[])}(n,e))):[]}function Sk(t,e){return{documents:[c1(t,e.path)]}}function Tk(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=c1(t,i);const s=function(h){if(h.length!==0)return h1(bn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:Ji(y.field),direction:Ck(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=kh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function Ik(t){let e=_k(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const y=d1(g);return y instanceof bn&&Uw(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(N){return new ha(Xi(N.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,su(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(g){const y=!!g.before,k=g.values||[];return new Cc(k,y)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const y=!g.before,k=g.values||[];return new Cc(k,y)}(n.endAt)),$b(e,i,o,s,l,"F",u,h)}function Ak(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function d1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xi(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xi(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xi(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xi(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Xi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bn.create(n.compositeFilter.filters.map(r=>d1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function Ck(t){return pk[t]}function bk(t){return mk[t]}function kk(t){return gk[t]}function Ji(t){return{fieldPath:t.canonicalString()}}function Xi(t){return it.fromServerFormat(t.fieldPath)}function h1(t){return t instanceof Ge?function(n){if(n.op==="=="){if(_y(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NAN"}};if(vy(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_y(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NOT_NAN"}};if(vy(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ji(n.field),op:bk(n.op),value:n.value}}}(t):t instanceof bn?function(n){const r=n.getFilters().map(i=>h1(i));return r.length===1?r[0]:{compositeFilter:{op:kk(n.op),filters:r}}}(t):ne(54877,{filter:t})}function Rk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function f1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,i,s=se.min(),o=se.min(),l=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.yt=e}}function Dk(t){const e=Ik({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.Cn=new jk}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Yr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class jk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new et(Ie.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p1=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(p1,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ms(0)}static cr(){return new Ms(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="LruGarbageCollector",Vk=1048576;function Vy([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class Lk{constructor(e){this.Ir=e,this.buffer=new et(Vy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Vy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Mk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(jy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gs(n)?K(jy,"Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Vr(3e5)})}}class Ok{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(iu.ce);const r=new Lk(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Ny)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ny):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,l=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),Qi()<=ue.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function Fk(t,e){return new Ok(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.changes=new Li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Uo(r.mutation,i,Jt.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=_i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=So();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=ur();const o=zo(),l=function(){return zo()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof ai)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Uo(p.mutation,h,p.mutation.getFieldMask(),Ae.now())):o.set(h.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new Uk(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=zo();let i=new Oe((o,l)=>o-l),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Jt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const g=(i.get(l.batchId)||he()).add(u);i=i.insert(l.batchId,g)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,g=Yw();p.forEach(y=>{if(!s.has(y)){const k=n1(n.get(y),r.get(y));k!==null&&g.set(y,k),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(_i());let l=ca,u=s;return o.next(h=>z.forEach(h,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,he())).next(p=>({batchId:l,changes:Qw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=So();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=So();return this.indexManager.getCollectionParents(e,s).next(l=>z.forEach(l,u=>{const h=function(g,y){return new Ks(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,It.newInvalidDocument(p)))});let l=So();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&Uo(p.mutation,h,Jt.empty(),Ae.now()),cu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Dk(i.bundledQuery),readTime:On(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.overlays=new Oe(J.comparator),this.qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_i();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=_i(),s=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Oe((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=_i(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=_i(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return z.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lk(n,r));let s=this.qr.get(n);s===void 0&&(s=he(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.Qr=new et(nt.$r),this.Ur=new et(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Ie([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Ie([])),r=new nt(n,e),i=new nt(n,e+1);let s=he();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||de(e.Yr,n.Yr)}static Kr(e,n){return de(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new et(nt.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ak(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new nt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Qf:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(de);return n.forEach(i=>{const s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new nt(new J(s),0);let l=new et(de);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Yr)),!0)},o),z.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(n.mutations,i=>{const s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new nt(n,0),i=this.Zr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.ri=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():It.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ur();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||xb(Eb(p),r)<=0||(i.has(p.key)||cu(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne(9500)}ii(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Kk(this)}getSize(e){return z.resolve(this.size)}}class Kk extends zk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.persistence=e,this.si=new Li(n=>Xf(n),Zf),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=Ms.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ms(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Pr(n),z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n){this.ui={},this.overlays={},this.ci=new iu(0),this.li=!1,this.li=!0,this.hi=new qk,this.referenceDelegate=e(this),this.Pi=new Qk(this),this.indexManager=new Nk,this.remoteDocumentCache=function(i){return new Gk(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Pk(n),this.Ii=new Wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $k,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Hk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new Yk(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Yk extends Tb{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Ri=new sp,this.Vi=null}static mi(e){return new op(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,r=>{const i=J.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return z.or([()=>z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pc{constructor(e,n){this.persistence=e,this.pi=new Li(r=>Cb(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Fk(this,n)}static mi(e,n){return new Pc(e,n)}Ei(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return z.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zl(e.data.value)),n}br(e,n,r){return z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ap(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return RT()?8:Ib(Ct())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Jk;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Qi()<=ue.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Yi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(Qi()<=ue.DEBUG&&K("QueryEngine","Query:",Yi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Qi()<=ue.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Yi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):z.resolve())}ys(e,n){if(Sy(n))return z.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bh(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,bh(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return Sy(n)||i.isEqual(se.min())?z.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?z.resolve(null):(Qi()<=ue.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yi(n)),this.vs(e,o,n,wb(i,ca)).next(l=>l))})}Ds(e,n){let r=new et(Gw(e));return n.forEach((i,s)=>{cu(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Qi()<=ue.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Yi(n)),this.ps.getDocumentsMatchingQuery(e,n,Yr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="LocalStore",Zk=3e8;class eR{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Oe(de),this.xs=new Li(s=>Xf(s),Zf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function tR(t,e,n,r){return new eR(t,e,n,r)}async function g1(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=he();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function nR(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const g=h.batch,y=g.keys();let k=z.resolve();return y.forEach(N=>{k=k.next(()=>p.getEntry(u,N)).next(V=>{const F=h.docVersions.get(N);we(F!==null,48541),V.version.compareTo(F)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),p.addEntry(V)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function y1(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function rR(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((p,g)=>{const y=i.get(g);if(!y)return;l.push(n.Pi.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(s,p.addedDocuments,g)));let k=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?k=k.withResumeToken(ot.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):p.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(p.resumeToken,r)),i=i.insert(g,k),function(V,F,A){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Zk?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(y,k,p)&&l.push(n.Pi.updateTargetData(s,k))});let u=ur(),h=he();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(iR(s,o,e.documentUpdates).next(p=>{u=p.ks,h=p.qs})),!r.isEqual(se.min())){const p=n.Pi.getLastRemoteSnapshotVersion(s).next(g=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=i,s))}function iR(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ur();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K(lp,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function sR(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Qf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oR(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Nh(t,e,n){const r=oe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gs(o))throw o;K(lp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Ly(t,e,n){const r=oe(t);let i=se.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const g=oe(u),y=g.xs.get(p);return y!==void 0?z.resolve(g.Ms.get(y)):g.Pi.getTargetData(h,p)}(r,o,Mn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:he())).next(l=>(aR(r,Hb(e),l),{documents:l,Qs:s})))}function aR(t,e,n){let r=t.Os.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class My{constructor(){this.activeTargetIds=Xb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lR{constructor(){this.Mo=new My,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new My,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="ConnectivityMonitor";class Fy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(Oy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(Oy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El=null;function jh(){return El===null?El=function(){return 268435456+Math.round(2147483648*Math.random())}():El++,"0x"+El.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="RestConnection",uR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ic?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=jh(),l=this.zo(e,n.toUriEncodedString());K(yd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:h}=new URL(l),p=Bs(h);return this.Jo(e,l,u,r,p).then(g=>(K(yd,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Di(yd,`RPC '${e}' ${o} failed with error: `,g,"url: ",l,"request:",r),g})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=uR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class fR extends dR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=jh();return new Promise((l,u)=>{const h=new vw;h.setWithCredentials(!0),h.listenOnce(_w.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Fl.NO_ERROR:const g=h.getResponseJson();K(xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Fl.TIMEOUT:K(xt,`RPC '${e}' ${o} timed out`),u(new G(O.DEADLINE_EXCEEDED,"Request time out"));break;case Fl.HTTP_ERROR:const y=h.getStatus();if(K(xt,`RPC '${e}' ${o} failed with status:`,y,"response text:",h.getResponseText()),y>0){let k=h.getResponseJson();Array.isArray(k)&&(k=k[0]);const N=k==null?void 0:k.error;if(N&&N.status&&N.message){const V=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(E)>=0?E:O.UNKNOWN}(N.status);u(new G(V,N.message))}else u(new G(O.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new G(O.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{K(xt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);K(xt,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",p,r,15)})}T_(e,n,r){const i=jh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xw(),l=Ew(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");K(xt,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);this.I_(g);let y=!1,k=!1;const N=new hR({Yo:F=>{k?K(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(y||(K(xt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),K(xt,`RPC '${e}' stream ${i} sending:`,F),g.send(F))},Zo:()=>g.close()}),V=(F,A,E)=>{F.listen(A,b=>{try{E(b)}catch(M){setTimeout(()=>{throw M},0)}})};return V(g,xo.EventType.OPEN,()=>{k||(K(xt,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),V(g,xo.EventType.CLOSE,()=>{k||(k=!0,K(xt,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(g))}),V(g,xo.EventType.ERROR,F=>{k||(k=!0,Di(xt,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),N.a_(new G(O.UNAVAILABLE,"The operation could not be completed")))}),V(g,xo.EventType.MESSAGE,F=>{var A;if(!k){const E=F.data[0];we(!!E,16349);const b=E,M=(b==null?void 0:b.error)||((A=b[0])==null?void 0:A.error);if(M){K(xt,`RPC '${e}' stream ${i} received error:`,M);const $=M.status;let B=function(x){const S=qe[x];if(S!==void 0)return i1(S)}($),w=M.message;B===void 0&&(B=O.INTERNAL,w="Unknown error status: "+$+" with message "+M.message),k=!0,N.a_(new G(B,w)),g.close()}else K(xt,`RPC '${e}' stream ${i} received:`,E),N.u_(E)}}),V(l,ww.STAT_EVENT,F=>{F.stat===Eh.PROXY?K(xt,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===Eh.NOPROXY&&K(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){return new yk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="PersistentStream";class _1{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new v1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new G(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(zy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pR extends _1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wk(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?On(o.readTime):se.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Dh(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Ah(u)?{documents:Sk(s,u)}:{query:Tk(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=a1(s,o.resumeToken);const h=kh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(se.min())>0){l.readTime=Rc(s,o.snapshotVersion.toTimestamp());const h=kh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=Ak(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Dh(this.serializer),n.removeTarget=e,this.q_(n)}}class mR extends _1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xk(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Dh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ek(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{}class yR extends gR{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Rh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(O.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Rh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(O.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class vR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cr(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="RemoteStore";class _R{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Mi(this)&&(K(Ni,"Restarting streams for network reachability change."),await async function(u){const h=oe(u);h.Ea.add(4),await Ra(h),h.Ra.set("Unknown"),h.Ea.delete(4),await pu(h)}(this))})}),this.Ra=new vR(r,i)}}async function pu(t){if(Mi(t))for(const e of t.da)await e(!0)}async function Ra(t){for(const e of t.da)await e(!1)}function w1(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hp(n)?dp(n):Qs(n).O_()&&up(n,e))}function cp(t,e){const n=oe(t),r=Qs(n);n.Ia.delete(e),r.O_()&&E1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Mi(n)&&n.Ra.set("Unknown"))}function up(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qs(t).Y_(e)}function E1(t,e){t.Va.Ue(e),Qs(t).Z_(e)}function dp(t){t.Va=new fk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qs(t).start(),t.Ra.ua()}function hp(t){return Mi(t)&&!Qs(t).x_()&&t.Ia.size>0}function Mi(t){return oe(t).Ea.size===0}function x1(t){t.Va=void 0}async function wR(t){t.Ra.set("Online")}async function ER(t){t.Ia.forEach((e,n)=>{up(t,e)})}async function xR(t,e){x1(t),hp(t)?(t.Ra.ha(e),dp(t)):t.Ra.set("Unknown")}async function SR(t,e,n){if(t.Ra.set("Online"),e instanceof o1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){K(Ni,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dc(t,r)}else if(e instanceof Wl?t.Va.Ze(e):e instanceof s1?t.Va.st(e):t.Va.tt(e),!n.isEqual(se.min()))try{const r=await y1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(ot.EMPTY_BYTE_STRING,p.snapshotVersion)),E1(s,u);const g=new Nr(p.target,u,h,p.sequenceNumber);up(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(Ni,"Failed to raise snapshot:",r),await Dc(t,r)}}async function Dc(t,e,n){if(!Gs(e))throw e;t.Ea.add(1),await Ra(t),t.Ra.set("Offline"),n||(n=()=>y1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Ni,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pu(t)})}function S1(t,e){return e().catch(n=>Dc(t,n,e))}async function mu(t){const e=oe(t),n=ei(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qf;for(;TR(e);)try{const i=await sR(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,IR(e,i)}catch(i){await Dc(e,i)}T1(e)&&I1(e)}function TR(t){return Mi(t)&&t.Ta.length<10}function IR(t,e){t.Ta.push(e);const n=ei(t);n.O_()&&n.X_&&n.ea(e.mutations)}function T1(t){return Mi(t)&&!ei(t).x_()&&t.Ta.length>0}function I1(t){ei(t).start()}async function AR(t){ei(t).ra()}async function CR(t){const e=ei(t);for(const n of t.Ta)e.ea(n.mutations)}async function bR(t,e,n){const r=t.Ta.shift(),i=np.from(r,e,n);await S1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await mu(t)}async function kR(t,e){e&&ei(t).X_&&await async function(r,i){if(function(o){return uk(o)&&o!==O.ABORTED}(i.code)){const s=r.Ta.shift();ei(r).B_(),await S1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await mu(r)}}(t,e),T1(t)&&I1(t)}async function Uy(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),K(Ni,"RemoteStore received new credentials");const r=Mi(n);n.Ea.add(3),await Ra(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pu(n)}async function RR(t,e){const n=oe(t);e?(n.Ea.delete(2),await pu(n)):e||(n.Ea.add(2),await Ra(n),n.Ra.set("Unknown"))}function Qs(t){return t.ma||(t.ma=function(n,r,i){const s=oe(n);return s.sa(),new pR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:wR.bind(null,t),t_:ER.bind(null,t),r_:xR.bind(null,t),H_:SR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),hp(t)?dp(t):t.Ra.set("Unknown")):(await t.ma.stop(),x1(t))})),t.ma}function ei(t){return t.fa||(t.fa=function(n,r,i){const s=oe(n);return s.sa(),new mR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:AR.bind(null,t),r_:kR.bind(null,t),ta:CR.bind(null,t),na:bR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await mu(t)):(await t.fa.stop(),t.Ta.length>0&&(K(Ni,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new fp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Gs(t))return new G(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{static emptySet(e){return new Ts(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=So(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ts)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ts;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.ga=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Os{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Os(e,n,Ts.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class DR{constructor(){this.queries=Wy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=Wy(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new G(O.ABORTED,"Firestore shutting down"))}}function Wy(){return new Li(t=>Hw(t),lu)}async function mp(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new PR,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=pp(o,`Initialization of query '${Yi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&yp(n)}async function gp(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NR(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&yp(n)}function jR(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function yp(t){t.Ca.forEach(e=>{e.next()})}var Vh,$y;($y=Vh||(Vh={})).Ma="default",$y.Cache="cache";class vp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.key=e}}class C1{constructor(e){this.key=e}}class VR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=Gw(e),this.tu=new Ts(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new By,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const y=i.get(p),k=cu(this.query,g)?g:null,N=!!y&&this.mutatedKeys.has(y.key),V=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let F=!1;y&&k?y.data.isEqual(k.data)?N!==V&&(r.track({type:3,doc:k}),F=!0):this.su(y,k)||(r.track({type:2,doc:k}),F=!0,(u&&this.eu(k,u)>0||h&&this.eu(k,h)<0)&&(l=!0)):!y&&k?(r.track({type:0,doc:k}),F=!0):y&&!k&&(r.track({type:1,doc:y}),F=!0,(u||h)&&(l=!0)),F&&(k?(o=o.add(k),s=V?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,g)=>function(k,N){const V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:F})}};return V(k)-V(N)}(p.type,g.type)||this.eu(p.doc,g.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Os(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new By,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new C1(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new A1(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Os.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _p="SyncEngine";class LR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MR{constructor(e){this.key=e,this.hu=!1}}class OR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Li(l=>Hw(l),lu),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(J.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=Ms.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FR(t,e,n=!0){const r=N1(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await b1(r,e,n,!0),i}async function zR(t,e){const n=N1(t);await b1(n,e,!0,!1)}async function b1(t,e,n,r){const i=await oR(t.localStore,Mn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await UR(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&w1(t.remoteStore,i),l}async function UR(t,e,n,r,i){t.pu=(g,y,k)=>async function(V,F,A,E){let b=F.view.ru(A);b.Cs&&(b=await Ly(V.localStore,F.query,!1).then(({documents:w})=>F.view.ru(w,b)));const M=E&&E.targetChanges.get(F.targetId),$=E&&E.targetMismatches.get(F.targetId)!=null,B=F.view.applyChanges(b,V.isPrimaryClient,M,$);return Hy(V,F.targetId,B.au),B.snapshot}(t,g,y,k);const s=await Ly(t.localStore,e,!0),o=new VR(e,s.Qs),l=o.ru(s.documents),u=ka.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);Hy(t,n,h.au);const p=new LR(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function BR(t,e,n){const r=oe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!lu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cp(r.remoteStore,i.targetId),Lh(r,i.targetId)}).catch(Hs)):(Lh(r,i.targetId),await Nh(r.localStore,i.targetId,!0))}async function WR(t,e){const n=oe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cp(n.remoteStore,r.targetId))}async function $R(t,e,n){const r=JR(t);try{const i=await function(o,l){const u=oe(o),h=Ae.now(),p=l.reduce((k,N)=>k.add(N.key),he());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",k=>{let N=ur(),V=he();return u.Ns.getEntries(k,p).next(F=>{N=F,N.forEach((A,E)=>{E.isValidDocument()||(V=V.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(k,N)).next(F=>{g=F;const A=[];for(const E of l){const b=sk(E,g.get(E.key).overlayedDocument);b!=null&&A.push(new ai(E.key,b,Ow(b.value.mapValue),dn.exists(!0)))}return u.mutationQueue.addMutationBatch(k,h,A,l)}).next(F=>{y=F;const A=F.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(k,F.batchId,A)})}).then(()=>({batchId:y.batchId,changes:Qw(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Oe(de)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,i.batchId,n),await Pa(r,i.changes),await mu(r.remoteStore)}catch(i){const s=pp(i,"Failed to persist write");n.reject(s)}}async function k1(t,e){const n=oe(t);try{const r=await rR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?we(o.hu,14607):i.removedDocuments.size>0&&(we(o.hu,42227),o.hu=!1))}),await Pa(n,r,e)}catch(r){await Hs(r)}}function qy(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=oe(o);u.onlineState=l;let h=!1;u.queries.forEach((p,g)=>{for(const y of g.Sa)y.va(l)&&(h=!0)}),h&&yp(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qR(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Oe(J.comparator);o=o.insert(s,It.newNoDocument(s,se.min()));const l=he().add(s),u=new hu(se.min(),new Map,new Oe(de),o,l);await k1(r,u),r.du=r.du.remove(s),r.Au.delete(e),wp(r)}else await Nh(r.localStore,e,!1).then(()=>Lh(r,e,n)).catch(Hs)}async function HR(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await nR(n.localStore,e);P1(n,r,null),R1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pa(n,i)}catch(i){await Hs(i)}}async function GR(t,e,n){const r=oe(t);try{const i=await function(o,l){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(we(g!==null,37113),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);P1(r,e,n),R1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pa(r,i)}catch(i){await Hs(i)}}function R1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function P1(t,e,n){const r=oe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Lh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||D1(t,r)})}function D1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(cp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),wp(t))}function Hy(t,e,n){for(const r of n)r instanceof A1?(t.Ru.addReference(r.key,e),KR(t,r)):r instanceof C1?(K(_p,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||D1(t,r.key)):ne(19791,{wu:r})}function KR(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(_p,"New document in limbo: "+n),t.Eu.add(r),wp(t))}function wp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Ie.fromString(e)),r=t.fu.next();t.Au.set(r,new MR(n)),t.du=t.du.insert(n,r),w1(t.remoteStore,new Nr(Mn(au(n.path)),r,"TargetPurposeLimboResolution",iu.ce))}}async function Pa(t,e,n){const r=oe(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=ap.As(u.targetId,h);s.push(g)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const p=oe(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(h,y=>z.forEach(y.Es,k=>p.persistence.referenceDelegate.addReference(g,y.targetId,k)).next(()=>z.forEach(y.ds,k=>p.persistence.referenceDelegate.removeReference(g,y.targetId,k)))))}catch(g){if(!Gs(g))throw g;K(lp,"Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const k=p.Ms.get(y),N=k.snapshotVersion,V=k.withLastLimboFreeSnapshotVersion(N);p.Ms=p.Ms.insert(y,V)}}}(r.localStore,s))}async function QR(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){K(_p,"User change. New user:",e.toKey());const r=await g1(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new G(O.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pa(n,r.Ls)}}function YR(t,e){const n=oe(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let i=he();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function N1(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qR.bind(null,e),e.Pu.H_=NR.bind(null,e.eventManager),e.Pu.yu=jR.bind(null,e.eventManager),e}function JR(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GR.bind(null,e),e}class Nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tR(this.persistence,new Xk,e.initialUser,this.serializer)}Cu(e){return new m1(op.mi,this.serializer)}Du(e){return new lR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nc.provider={build:()=>new Nc};class XR extends Nc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){we(this.persistence.referenceDelegate instanceof Pc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Mk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new m1(r=>Pc.mi(r,n),this.serializer)}}class Mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QR.bind(null,this.syncEngine),await RR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DR}()}createDatastore(e){const n=fu(e.databaseInfo.databaseId),r=function(s){return new fR(s)}(e.databaseInfo);return function(s,o,l,u){return new yR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new _R(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>qy(this.syncEngine,n,0),function(){return Fy.v()?new Fy:new cR}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const g=new OR(i,s,o,l,u,h);return p&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);K(Ni,"RemoteStore shutting down."),s.Ea.add(5),await Ra(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Mh.provider={build:()=>new Mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="FirestoreClient";class ZR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K(ti,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(ti,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _d(t,e){t.asyncQueue.verifyOperationInProgress(),K(ti,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await g1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eP(t);K(ti,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Uy(e.remoteStore,i)),t._onlineComponents=e}async function eP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(ti,"Using user provided OfflineComponentProvider");try{await _d(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),await _d(t,new Nc)}}else K(ti,"Using default OfflineComponentProvider"),await _d(t,new XR(void 0));return t._offlineComponents}async function j1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(ti,"Using user provided OnlineComponentProvider"),await Gy(t,t._uninitializedComponentsProvider._online)):(K(ti,"Using default OnlineComponentProvider"),await Gy(t,new Mh))),t._onlineComponents}function tP(t){return j1(t).then(e=>e.syncEngine)}async function jc(t){const e=await j1(t),n=e.eventManager;return n.onListen=FR.bind(null,e.syncEngine),n.onUnlisten=BR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WR.bind(null,e.syncEngine),n}function nP(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const p=new Ep({next:y=>{p.Nu(),o.enqueueAndForget(()=>gp(s,g));const k=y.docs.has(l);!k&&y.fromCache?h.reject(new G(O.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&y.fromCache&&u&&u.source==="server"?h.reject(new G(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new vp(au(l.path),p,{includeMetadataChanges:!0,qa:!0});return mp(s,g)}(await jc(t),t.asyncQueue,e,n,r)),r.promise}function rP(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const p=new Ep({next:y=>{p.Nu(),o.enqueueAndForget(()=>gp(s,g)),y.fromCache&&u.source==="server"?h.reject(new G(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new vp(l,p,{includeMetadataChanges:!0,qa:!0});return mp(s,g)}(await jc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firestore.googleapis.com",Qy=!0;class Yy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=L1,this.ssl=Qy}else this.host=e.host,this.ssl=e.ssl??Qy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=p1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vk)throw new G(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Iw;switch(r.type){case"firstParty":return new pb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ky.get(n);r&&(K("ComponentProvider","Removing Datastore"),Ky.delete(n),r.terminate())}(this),Promise.resolve()}}function M1(t,e,n,r={}){var h;t=Vt(t,gu);const i=Bs(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(k_(`https://${l}`),R_("Firestore",!0)),s.host!==L1&&s.host!==l&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Ci(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=St.MOCK_USER;else{p=ET(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new G(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new St(y)}t._authCredentials=new db(new Tw(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class Ve{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ca(n,Ve._jsonSchema))return new Ve(e,r||null,new J(Ie.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Ke("string",Ve._jsonSchemaVersion),referencePath:Ke("string")};class nr extends mr{constructor(e,n,r){super(e,n,au(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new J(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function Zi(t,e,...n){if(t=tt(t),Aw("collection","path",e),t instanceof gu){const r=Ie.fromString(e,...n);return cy(r),new nr(t,null,r)}{if(!(t instanceof Ve||t instanceof nr))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return cy(r),new nr(t.firestore,null,r)}}function an(t,e,...n){if(t=tt(t),arguments.length===1&&(e=nu.newId()),Aw("doc","path",e),t instanceof gu){const r=Ie.fromString(e,...n);return ly(r),new Ve(t,null,new J(r))}{if(!(t instanceof Ve||t instanceof nr))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return ly(r),new Ve(t.firestore,t instanceof nr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="AsyncQueue";class Xy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new v1(this,"async_queue_retry"),this._c=()=>{const r=vd();r&&K(Jy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=vd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gs(e))throw e;K(Jy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,cr("INTERNAL UNHANDLED ERROR: ",Zy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=fp.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:Zy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Zy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class zn extends gu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Xy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xy(e),this._firestoreClient=void 0,await e}}}function O1(t,e){const n=typeof t=="object"?t:j_(),r=typeof t=="string"?t:Ic,i=Ff(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=_T("firestore");s&&M1(i,...s)}return i}function Da(t){if(t._terminated)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iP(t),t._firestoreClient}function iP(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,h,p){return new Rb(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,V1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(ot.fromBase64String(e))}catch(n){throw new G(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ca(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:Ke("string",Qt._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(e){if(Ca(e,Tn._jsonSchema))return new Tn(e.latitude,e.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:Ke("string",Tn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ca(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new In(e.vectorValues);throw new G(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:Ke("string",In._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=/^__.*__$/;class oP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new ba(e,this.data,n,this.fieldTransforms)}}class F1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ai(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function z1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class xp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(z1(this.Ac)&&sP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fu(e)}Cc(e,n,r,i=!1){return new xp({Ac:e,methodName:n,Dc:r,path:it.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vu(t){const e=t._freezeSettings(),n=fu(t._databaseId);return new aP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U1(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Sp("Data must be an object, but it was:",o,r);const l=B1(r,o);let u,h;if(s.merge)u=new Jt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const y=Oh(e,g,n);if(!o.contains(y))throw new G(O.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);$1(p,y)||p.push(y)}u=new Jt(p),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new oP(new Ut(l),u,h)}class _u extends yu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _u}}function lP(t,e,n,r){const i=t.Cc(1,e,n);Sp("Data must be an object, but it was:",i,r);const s=[],o=Ut.empty();oi(r,(u,h)=>{const p=Tp(e,u,n);h=tt(h);const g=i.yc(p);if(h instanceof _u)s.push(p);else{const y=ja(h,g);y!=null&&(s.push(p),o.set(p,y))}});const l=new Jt(s);return new F1(o,l,i.fieldTransforms)}function cP(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[Oh(e,r,n)],u=[i];if(s.length%2!=0)throw new G(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(Oh(e,s[y])),u.push(s[y+1]);const h=[],p=Ut.empty();for(let y=l.length-1;y>=0;--y)if(!$1(h,l[y])){const k=l[y];let N=u[y];N=tt(N);const V=o.yc(k);if(N instanceof _u)h.push(k);else{const F=ja(N,V);F!=null&&(h.push(k),p.set(k,F))}}const g=new Jt(h);return new F1(p,g,o.fieldTransforms)}function uP(t,e,n,r=!1){return ja(n,t.Cc(r?4:3,e))}function ja(t,e){if(W1(t=tt(t)))return Sp("Unsupported field value:",e,t),B1(t,e);if(t instanceof yu)return function(r,i){if(!z1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=ja(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:Rc(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rc(i.serializer,s)}}if(r instanceof Tn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qt)return{bytesValue:a1(i.serializer,r._byteString)};if(r instanceof Ve){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ip(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof In)return function(o,l){return{mapValue:{fields:{[Lw]:{stringValue:Mw},[Ac]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return ep(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${ru(r)}`)}(t,e)}function B1(t,e){const n={};return Rw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oi(t,(r,i)=>{const s=ja(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function W1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Tn||t instanceof Qt||t instanceof Ve||t instanceof yu||t instanceof In)}function Sp(t,e,n){if(!W1(n)||!bw(n)){const r=ru(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Oh(t,e,n){if((e=tt(e))instanceof Na)return e._internalPath;if(typeof e=="string")return Tp(t,e);throw Vc("Field path arguments must be of type string or ",t,!1,void 0,n)}const dP=new RegExp("[~\\*/\\[\\]]");function Tp(t,e,n){if(e.search(dP)>=0)throw Vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Na(...e.split("."))._internalPath}catch{throw Vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new G(O.INVALID_ARGUMENT,l+t+u)}function $1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ip("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hP extends q1{data(){return super.data()}}function Ip(t,e){return typeof e=="string"?Tp(t,e):e instanceof Na?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class Cp extends Ap{}function Io(t,e,...n){let r=[];e instanceof Ap&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Eu).length,l=s.filter(u=>u instanceof wu).length;if(o>1||o>0&&l>0)throw new G(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class wu extends Cp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wu(e,n,r)}_apply(e){const n=this._parse(e);return G1(e._query,n),new mr(e.firestore,e.converter,Ch(e._query,n))}_parse(e){const n=vu(e.firestore);return function(s,o,l,u,h,p,g){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new G(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){n0(g,p);const N=[];for(const V of g)N.push(t0(u,s,V));y={arrayValue:{values:N}}}else y=t0(u,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||n0(g,p),y=uP(l,o,g,p==="in"||p==="not-in");return Ge.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Eu extends Ap{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)G1(o,u),o=Ch(o,u)}(e._query,n),new mr(e.firestore,e.converter,Ch(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xu extends Cp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xu(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new G(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ha(s,o)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ks(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function $l(t,e="asc"){const n=e,r=Ip("orderBy",t);return xu._create(r,n)}function t0(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new G(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qw(e)&&n.indexOf("/")!==-1)throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!J.isDocumentKey(r))throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yy(t,new J(r))}if(n instanceof Ve)return yy(t,n._key);throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ru(n)}.`)}function n0(t,e){if(!Array.isArray(t)||t.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G1(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class K1{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return oi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ac].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Be(o.doubleValue));return new In(n)}convertGeoPoint(e){return new Tn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ou(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ua(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);we(f1(r),9688,{name:e});const i=new js(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class fs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hr extends q1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ip("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Hr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hr._jsonSchema={type:Ke("string",Hr._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class Bo extends Hr{data(e={}){return super.data(e)}}class Gr{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bo(this._firestore,this._userDataWriter,r.key,r,new fs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Bo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new fs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Bo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new fs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:fP(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){t=Vt(t,Ve);const e=Vt(t.firestore,zn);return nP(Da(e),t._key).then(n=>X1(e,t,n))}Gr._jsonSchemaVersion="firestore/querySnapshot/1.0",Gr._jsonSchema={type:Ke("string",Gr._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class bp extends K1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function Ao(t){t=Vt(t,mr);const e=Vt(t.firestore,zn),n=Da(e),r=new bp(e);return H1(t._query),rP(n,t._query).then(i=>new Gr(e,r,t,i))}function Fh(t,e,n){t=Vt(t,Ve);const r=Vt(t.firestore,zn),i=Q1(t.converter,e);return Va(r,[U1(vu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dn.none())])}function ps(t,e,n,...r){t=Vt(t,Ve);const i=Vt(t.firestore,zn),s=vu(i);let o;return o=typeof(e=tt(e))=="string"||e instanceof Na?cP(s,"updateDoc",t._key,e,n,r):lP(s,"updateDoc",t._key,e),Va(i,[o.toMutation(t._key,dn.exists(!0))])}function zh(t){return Va(Vt(t.firestore,zn),[new tp(t._key,dn.none())])}function J1(t,e){const n=Vt(t.firestore,zn),r=an(t),i=Q1(t.converter,e);return Va(n,[U1(vu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function pP(t,...e){var u,h,p;t=tt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||e0(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(e0(e[r])){const g=e[r];e[r]=(u=g.next)==null?void 0:u.bind(g),e[r+1]=(h=g.error)==null?void 0:h.bind(g),e[r+2]=(p=g.complete)==null?void 0:p.bind(g)}let s,o,l;if(t instanceof Ve)o=Vt(t.firestore,zn),l=au(t._key.path),s={next:g=>{e[r]&&e[r](X1(o,t,g))},error:e[r+1],complete:e[r+2]};else{const g=Vt(t,mr);o=Vt(g.firestore,zn),l=g._query;const y=new bp(o);s={next:k=>{e[r]&&e[r](new Gr(o,y,g,k))},error:e[r+1],complete:e[r+2]},H1(t._query)}return function(y,k,N,V){const F=new Ep(V),A=new vp(k,F,N);return y.asyncQueue.enqueueAndForget(async()=>mp(await jc(y),A)),()=>{F.Nu(),y.asyncQueue.enqueueAndForget(async()=>gp(await jc(y),A))}}(Da(o),l,i,s)}function Va(t,e){return function(r,i){const s=new tr;return r.asyncQueue.enqueueAndForget(async()=>$R(await tP(r),i,s)),s.promise}(Da(t),e)}function X1(t,e,n){const r=n.docs.get(e._key),i=new bp(t);return new Hr(t,i,e._key,r,new fs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){qs=i})(Ws),Ds(new bi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new zn(new hb(r.getProvider("auth-internal")),new mb(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(h.options.projectId,p)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),$r(iy,sy,e),$r(iy,sy,"esm2020")})();const xl=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:K1,Bytes:Qt,CollectionReference:nr,DocumentReference:Ve,DocumentSnapshot:Hr,FieldPath:Na,FieldValue:yu,Firestore:zn,FirestoreError:G,GeoPoint:Tn,Query:mr,QueryCompositeFilterConstraint:Eu,QueryConstraint:Cp,QueryDocumentSnapshot:Bo,QueryFieldFilterConstraint:wu,QueryOrderByConstraint:xu,QuerySnapshot:Gr,SnapshotMetadata:fs,Timestamp:Ae,VectorValue:In,_AutoId:nu,_ByteString:ot,_DatabaseId:js,_DocumentKey:J,_EmptyAuthCredentialsProvider:Iw,_FieldPath:it,_cast:Vt,_logWarn:Di,_validateIsNotUsedTogether:Cw,addDoc:J1,collection:Zi,connectFirestoreEmulator:M1,deleteDoc:zh,doc:an,ensureFirestoreConfigured:Da,executeWrite:Va,getDoc:Y1,getDocs:Ao,getFirestore:O1,onSnapshot:pP,orderBy:$l,query:Io,setDoc:Fh,updateDoc:ps},Symbol.toStringTag,{value:"Module"}));var mP="firebase",gP="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(mP,gP,"app");const yP={apiKey:"AIzaSyDHDmKPSDZ6NqHdQw-gSXgkuk_MKa3CZbY",authDomain:"amorymiel-ddfaf.firebaseapp.com",projectId:"amorymiel-ddfaf",storageBucket:"amorymiel-ddfaf.firebasestorage.app",messagingSenderId:"86354568079",appId:"1:86354568079:web:7571369a1d391ab5d361fa",measurementId:"G-15KXQ1LM0B"},Z1=N_(yP),Ki=cb(Z1),Ne=O1(Z1),vP=({user:t,onClose:e})=>{const[n,r]=ie.useState("overview"),[i,s]=ie.useState([]),[o,l]=ie.useState([]),[u,h]=ie.useState([]),[p,g]=ie.useState([]),[y,k]=ie.useState(!0),[N,V]=ie.useState({totalUsers:0,totalOrders:0,totalRevenue:0,activeUsers:0}),[F,A]=ie.useState(!1),[E,b]=ie.useState(!1),[M,$]=ie.useState(null),[B,w]=ie.useState({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,minStock:5,maxStock:100,activo:!0,imagen:""}),[_,x]=ie.useState(null),[S,R]=ie.useState(!1),D={A:{miel:"#D4A574",rosa:"#E8B4B8",verde:"#A8C09A",azul:"#B8D4E3"},B:{miel:"#C9A96E",rosa:"#E2A8AC",verde:"#9BB88A",azul:"#A8C8D8"}};ie.useEffect(()=>{t&&I()},[t]),ie.useEffect(()=>{if(t){const C=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),I()},3e4);return()=>clearInterval(C)}},[t]);const I=async()=>{k(!0);try{console.log("Loading users from Firestore..."),console.log("Current user:",t),console.log("User email:",t==null?void 0:t.email),console.log("Is admin?",(t==null?void 0:t.email)==="admin@amorymiel.com");const C=Io(Zi(Ne,"users"),$l("createdAt","desc")),U=await Ao(C);console.log("Users snapshot:",U),console.log("Number of users found:",U.docs.length),console.log("Users snapshot empty?",U.empty);let Y=[];U.empty?(console.log("No users found in Firestore"),Y=[]):(Y=U.docs.map(me=>(console.log("User doc:",me.id,me.data()),{id:me.id,...me.data()})),console.log("Processed users data:",Y)),s(Y);const $e=Io(Zi(Ne,"orders"),$l("createdAt","desc")),gt=(await Ao($e)).docs.map(me=>({id:me.id,...me.data()}));l(gt);const Un=Io(Zi(Ne,"products")),pn=(await Ao(Un)).docs.map(me=>({id:me.id,...me.data()})),Rt=pn.reduce((me,yt)=>(me.find(Ue=>Ue.nombre&&yt.nombre&&Ue.nombre.toLowerCase().trim()===yt.nombre.toLowerCase().trim())?console.log(`Admin Dashboard: Removing duplicate: "${yt.nombre}" (ID: ${yt.id})`):me.push(yt),me),[]);console.log(`Admin Dashboard: Removed ${pn.length-Rt.length} duplicate products`),h(Rt);const nn=Io(Zi(Ne,"cart_items"),$l("addedAt","desc")),yr=(await Ao(nn)).docs.map(me=>({id:me.id,...me.data()}));g(yr),console.log("Cart items loaded:",yr.length),console.log("Calculating stats..."),console.log("Users data length:",Y.length),console.log("Orders data length:",gt.length);const Fi=gt.filter(me=>me.status==="completed").reduce((me,yt)=>me+(yt.total||0),0),Wn=Y.filter(me=>{const yt=me.lastLogin?new Date(me.lastLogin):new Date(0),$n=new Date;return $n.setDate($n.getDate()-30),yt>$n}).length,zi=gt.filter(me=>me.status==="completed"),li={totalUsers:Y.length,totalOrders:zi.length,totalRevenue:Fi,activeUsers:Wn};console.log("New stats calculated:",li),V(li)}catch(C){console.error("Error loading dashboard data:",C)}finally{k(!1)}},bt=async(C,U)=>{try{await ps(an(Ne,"orders",C),{status:U,updatedAt:new Date}),I()}catch(Y){console.error("Error updating order status:",Y)}},Ht=async C=>{if(window.confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{await zh(an(Ne,"users",C)),I()}catch(U){console.error("Error deleting user:",U)}},gr=async C=>{C.preventDefault(),A(!0);try{const U={...B,createdAt:new Date,updatedAt:new Date};if(U.imagen){const Y=Math.round(U.imagen.length/1024);if(console.log(`Image size: ${Y}KB (${Math.round(Y/1024)}MB)`),U.imagen.length>5e6){alert(`La imagen es demasiado grande (${Math.round(Y/1024)}MB). Por favor, usa una imagen más pequeña.`),A(!1);return}}await J1(Zi(Ne,"products"),U),w({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,activo:!0,imagen:""}),I(),r("products"),alert("Producto agregado exitosamente!")}catch(U){console.error("Error adding product:",U),console.error("Error details:",U.message,U.code);let Y="Error al agregar el producto. Inténtalo de nuevo.";U.code==="permission-denied"?Y="No tienes permisos para agregar productos.":U.message.includes("image")&&(Y="Error con la imagen. Intenta con una imagen más pequeña."),alert(Y)}finally{A(!1)}},kt=async C=>{if(window.confirm("¿Estás seguro de que quieres eliminar este producto?"))try{await zh(an(Ne,"products",C)),I(),alert("Producto eliminado exitosamente!")}catch(U){console.error("Error deleting product:",U),alert("Error al eliminar el producto. Inténtalo de nuevo.")}},H=async C=>{try{alert(`📧 Recordatorio enviado a ${C.customerEmail}

Producto: ${C.productName}
Precio: $${C.productPrice}

El cliente recibirá un email recordatorio para completar su compra.`),await ps(an(Ne,"cart_items",C.id),{status:"follow_up_sent",followUpSentAt:new Date}),I()}catch(U){console.error("Error sending follow-up email:",U),alert("Error al enviar el recordatorio por email")}},X=async C=>{try{await ps(an(Ne,"cart_items",C),{status:"purchased",purchasedAt:new Date}),alert("✅ Item marcado como comprado exitosamente"),I()}catch(U){console.error("Error marking as purchased:",U),alert("Error al marcar como comprado")}},Z=C=>{console.log("Edit button clicked for product:",C),$(C.id),b(!0),r("add-product"),w({nombre:C.nombre||"",descripcion:C.descripcion||"",precio:C.precio||0,categoria:C.categoria||"",stock:C.stock||0,minStock:C.minStock||5,maxStock:C.maxStock||100,activo:C.activo!==!1,imagen:C.imagen||""}),console.log("Edit mode activated, switching to form tab")},ve=async C=>{C.preventDefault(),A(!0);try{const U={...B,updatedAt:new Date};if(console.log("Updating product with data:",U),console.log("Product ID:",M),U.imagen){const Y=Math.round(U.imagen.length/1024);if(console.log(`Image size: ${Y}KB (${Math.round(Y/1024)}MB)`),U.imagen.length>5e6){alert(`La imagen es demasiado grande (${Math.round(Y/1024)}MB). Por favor, usa una imagen más pequeña.`),A(!1);return}}await ps(an(Ne,"products",M),U),console.log("Product updated successfully"),w({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,minStock:5,maxStock:100,activo:!0,imagen:""}),b(!1),$(null),I(),alert("Producto actualizado exitosamente!")}catch(U){console.error("Error updating product:",U),console.error("Error details:",U.message,U.code);let Y="Error al actualizar el producto. Inténtalo de nuevo.";U.code==="permission-denied"?Y="No tienes permisos para actualizar este producto.":U.code==="not-found"?Y="El producto no fue encontrado.":U.message.includes("image")&&(Y="Error con la imagen. Intenta con una imagen más pequeña."),alert(Y)}finally{A(!1)}},fe=()=>{b(!1),$(null),w({nombre:"",descripcion:"",precio:0,categoria:"",stock:0,minStock:5,maxStock:100,activo:!0,imagen:""})},_e=()=>{const C=u.filter(Y=>{const $e=Y.stock||0,Ye=Y.minStock||5;return $e<=Ye&&$e>0}),U=u.filter(Y=>(Y.stock||0)===0);return U.length>0&&console.warn(`⚠️ ${U.length} productos sin stock:`,U.map(Y=>Y.nombre)),C.length>0&&console.warn(`⚠️ ${C.length} productos con stock bajo:`,C.map(Y=>Y.nombre)),{lowStockProducts:C,outOfStockProducts:U}},Qe=C=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(C),at=C=>{if(!C)return"Nunca";try{return(C.toDate?C.toDate():new Date(C)).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(U){return console.error("Error formatting date:",U,C),"Fecha inválida"}};return y?c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:c.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"1rem"},children:"Cargando Dashboard..."}),c.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #D4A574",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]})}):c.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:1e3,overflow:"auto"},children:[c.jsxs("div",{style:{background:"white",minHeight:"100vh",padding:window.innerWidth<=768?"1rem":"2rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:window.innerWidth<=768?"1rem":"2rem",paddingBottom:"1rem",borderBottom:"2px solid #D4A574",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsx("h1",{style:{color:"#D4A574",fontSize:window.innerWidth<=768?"1.5rem":"2rem",margin:0,fontFamily:"serif"},children:"🍯 Dashboard Amor y Miel"}),c.jsx("p",{style:{color:"#666",margin:"0.5rem 0 0 0"},children:"Panel de administración"})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[c.jsx("button",{onClick:I,style:{background:"transparent",color:"#D4A574",border:"2px solid #D4A574",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:"🔄 Actualizar"}),c.jsx("button",{onClick:e,style:{background:"#D4A574",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Cerrar Dashboard"})]})]}),c.jsx("div",{style:{display:"flex",gap:window.innerWidth<=768?"0.5rem":"1rem",marginBottom:window.innerWidth<=768?"1rem":"2rem",borderBottom:"1px solid #eee",overflowX:"auto",paddingBottom:"0.5rem"},children:[{id:"overview",label:"📊 Resumen",icon:"📊"},{id:"users",label:"👥 Usuarios",icon:"👥"},{id:"orders",label:"📦 Pedidos",icon:"📦"},{id:"cart-abandonment",label:"🛒 Carritos Abandonados",icon:"🛒"},{id:"products",label:"🛍️ Productos",icon:"🛍️"}].map(C=>c.jsx("button",{onClick:()=>r(C.id),style:{background:n===C.id?"#D4A574":"transparent",color:n===C.id?"white":"#666",border:"none",padding:window.innerWidth<=768?"0.5rem 1rem":"0.75rem 1.5rem",borderRadius:"25px 25px 0 0",cursor:"pointer",fontSize:window.innerWidth<=768?"0.8rem":"1rem",fontWeight:"bold",transition:"all 0.3s ease",whiteSpace:"nowrap",minWidth:window.innerWidth<=768?"auto":"120px"},children:C.label},C.id))}),n==="overview"&&c.jsxs("div",{children:[c.jsx("h2",{style:{color:"#D4A574",marginBottom:"1.5rem"},children:"Resumen General"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[c.jsxs("div",{style:{background:`linear-gradient(135deg, ${D.A.miel} 0%, ${D.B.miel} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"👥"}),c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:N.totalUsers}),c.jsx("div",{children:"Usuarios Totales"})]}),c.jsxs("div",{style:{background:`linear-gradient(135deg, ${D.A.rosa} 0%, ${D.B.rosa} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📦"}),c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:N.totalOrders}),c.jsx("div",{children:"Pedidos Totales"})]}),c.jsxs("div",{style:{background:`linear-gradient(135deg, ${D.A.verde} 0%, ${D.B.verde} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"💰"}),c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:Qe(N.totalRevenue)}),c.jsx("div",{children:"Ingresos Totales"})]}),c.jsxs("div",{style:{background:`linear-gradient(135deg, ${D.A.azul} 0%, ${D.B.azul} 100%)`,color:"white",padding:"1.5rem",borderRadius:"15px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"🔥"}),c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:N.activeUsers}),c.jsx("div",{children:"Usuarios Activos (30 días)"})]})]}),(()=>{const{lowStockProducts:C,outOfStockProducts:U}=_e();return(C.length>0||U.length>0)&&c.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",padding:"1.5rem",marginBottom:"2rem"},children:[c.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"⚠️ Alertas de Inventario"}),U.length>0&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsxs("h4",{style:{color:"#f44336",marginBottom:"0.5rem"},children:["Sin Stock (",U.length,")"]}),U.map(Y=>c.jsxs("div",{style:{background:"#ffebee",padding:"0.5rem",borderRadius:"5px",marginBottom:"0.5rem",border:"1px solid #f44336"},children:[c.jsx("strong",{children:Y.nombre})," - Stock: ",Y.stock||0]},Y.id))]}),C.length>0&&c.jsxs("div",{children:[c.jsxs("h4",{style:{color:"#FF9800",marginBottom:"0.5rem"},children:["Stock Bajo (",C.length,")"]}),C.map(Y=>c.jsxs("div",{style:{background:"#fff3e0",padding:"0.5rem",borderRadius:"5px",marginBottom:"0.5rem",border:"1px solid #FF9800"},children:[c.jsx("strong",{children:Y.nombre})," - Stock: ",Y.stock||0," (Mín: ",Y.minStock||5,")"]},Y.id))]})]})})(),c.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",padding:"1.5rem"},children:[c.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Pedidos Completados Recientes"}),c.jsx("div",{style:{maxHeight:"300px",overflow:"auto"},children:o.filter(C=>C.status==="completed").slice(0,5).length>0?o.filter(C=>C.status==="completed").slice(0,5).map(C=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderBottom:"1px solid #f0f0f0",background:C.status==="completed"?"#f0f8f0":C.status==="pending"?"#fff8e1":"#f5f5f5"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{fontWeight:"bold"},children:["Pedido #",C.id.slice(-8)]}),c.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:[C.customerName," - ",Qe(C.total)]})]}),c.jsx("div",{style:{background:C.status==="completed"?"#4CAF50":C.status==="pending"?"#FF9800":"#9E9E9E",color:"white",padding:"0.25rem 0.75rem",borderRadius:"15px",fontSize:"0.8rem"},children:C.status==="completed"?"Completado":C.status==="pending"?"Pendiente":"Cancelado"})]},C.id)):c.jsx("div",{style:{textAlign:"center",color:"#666",padding:"2rem",fontStyle:"italic"},children:"No hay pedidos completados aún"})})]})]}),n==="users"&&c.jsxs("div",{children:[c.jsx("h2",{style:{color:"#D4A574",marginBottom:"1.5rem"},children:"Gestión de Usuarios"}),c.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr auto",background:"#f8f9fa",padding:"1rem",fontWeight:"bold",borderBottom:"1px solid #eee"},children:[c.jsx("div",{children:"Nombre"}),c.jsx("div",{children:"Email"}),c.jsx("div",{children:"Registro"}),c.jsx("div",{children:"Último Login"}),c.jsx("div",{children:"Estado"}),c.jsx("div",{children:"Acciones"})]}),i.map(C=>c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr auto",padding:"1rem",borderBottom:"1px solid #f0f0f0",alignItems:"center"},children:[c.jsx("div",{children:C.name||"Sin nombre"}),c.jsx("div",{children:C.email}),c.jsx("div",{children:at(C.createdAt)}),c.jsx("div",{children:C.lastLogin?at(C.lastLogin):"Nunca"}),c.jsx("div",{style:{color:C.lastLogin&&new Date(C.lastLogin)>new Date(Date.now()-30*24*60*60*1e3)?"#4CAF50":"#9E9E9E"},children:C.lastLogin&&new Date(C.lastLogin)>new Date(Date.now()-30*24*60*60*1e3)?"Activo":"Inactivo"}),c.jsx("div",{children:c.jsx("button",{onClick:()=>Ht(C.id),style:{background:"#f44336",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})})]},C.id))]})]}),n==="orders"&&c.jsxs("div",{children:[c.jsx("h2",{style:{color:"#D4A574",marginBottom:"1.5rem"},children:"Gestión de Pedidos"}),c.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr auto",background:"#f8f9fa",padding:"1rem",fontWeight:"bold",borderBottom:"1px solid #eee"},children:[c.jsx("div",{children:"ID Pedido"}),c.jsx("div",{children:"Cliente"}),c.jsx("div",{children:"Total"}),c.jsx("div",{children:"Fecha"}),c.jsx("div",{children:"Estado"}),c.jsx("div",{children:"Productos"}),c.jsx("div",{children:"Acciones"})]}),o.map(C=>c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr 1fr auto",padding:"1rem",borderBottom:"1px solid #f0f0f0",alignItems:"center"},children:[c.jsxs("div",{style:{fontFamily:"monospace",fontSize:"0.9rem"},children:["#",C.id.slice(-8)]}),c.jsx("div",{children:C.customerName}),c.jsx("div",{style:{fontWeight:"bold"},children:Qe(C.total)}),c.jsx("div",{children:at(C.createdAt)}),c.jsx("div",{children:c.jsxs("select",{value:C.status||"pending",onChange:U=>bt(C.id,U.target.value),style:{padding:"0.25rem 0.5rem",borderRadius:"5px",border:"1px solid #ddd",fontSize:"0.8rem"},children:[c.jsx("option",{value:"pending",children:"Pendiente"}),c.jsx("option",{value:"processing",children:"Procesando"}),c.jsx("option",{value:"shipped",children:"Enviado"}),c.jsx("option",{value:"completed",children:"Completado"}),c.jsx("option",{value:"cancelled",children:"Cancelado"})]})}),c.jsxs("div",{children:[C.items?C.items.length:0," productos"]}),c.jsx("div",{children:c.jsx("button",{onClick:()=>{x(C),R(!0)},style:{background:"#2196F3",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.8rem"},children:"Ver Detalles"})})]},C.id))]})]}),n==="cart-abandonment"&&c.jsxs("div",{children:[c.jsx("h2",{style:{color:"#D4A574",marginBottom:"1.5rem"},children:"Carritos Abandonados"}),c.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1.5rem",background:"#f8f9fa",borderBottom:"1px solid #eee"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#D4A574"},children:p.filter(C=>C.status==="in_cart").length}),c.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"En Carrito"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ff6b6b"},children:p.filter(C=>{const U=(new Date-new Date(C.addedAt))/36e5;return C.status==="in_cart"&&U>24}).length}),c.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"Abandonados (24h+)"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#51cf66"},children:p.filter(C=>C.status==="purchased").length}),c.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"Convertidos"})]})]}),c.jsx("div",{style:{padding:"1.5rem"},children:c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},children:p.map(C=>{const U=(new Date-new Date(C.addedAt))/36e5,Y=C.status==="in_cart"&&U>24;return c.jsxs("div",{style:{border:"1px solid #eee",borderRadius:"8px",padding:"1rem",background:Y?"#fff5f5":"#f8f9fa"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"bold",color:"#333"},children:C.customerName}),c.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:C.customerEmail})]}),c.jsx("div",{style:{padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold",background:Y?"#ff6b6b":C.status==="purchased"?"#51cf66":"#ffd43b",color:"white"},children:Y?"ABANDONADO":C.status==="purchased"?"COMPRADO":"EN CARRITO"})]}),c.jsxs("div",{style:{marginBottom:"0.5rem"},children:[c.jsx("div",{style:{fontWeight:"600",color:"#333"},children:C.productName}),c.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Cantidad: ",C.quantity," • Precio: $",C.productPrice]})]}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginBottom:"0.5rem"},children:["Agregado: ",new Date(C.addedAt).toLocaleString()]}),Y&&c.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[c.jsx("button",{onClick:()=>H(C),style:{padding:"0.5rem 1rem",background:"#D4A574",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"📧 Enviar Recordatorio"}),c.jsx("button",{onClick:()=>X(C.id),style:{padding:"0.5rem 1rem",background:"#51cf66",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"✅ Marcar como Comprado"})]})]},C.id)})})})]})]}),n==="products"&&c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsx("h2",{style:{color:"#D4A574",margin:0},children:"Gestión de Productos"}),c.jsx("button",{onClick:()=>{b(!1),$(null),w({nombre:"",descripcion:"",precio:"",categoria:"Productos",stock:"",stockMinimo:"",stockMaximo:"",estado:"Activo",imagen:""}),r("add-product")},style:{background:`linear-gradient(135deg, ${D.A.miel} 0%, ${D.B.miel} 100%)`,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:"0.5rem"},children:"➕ Agregar Producto"})]}),c.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",overflow:"hidden"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 2fr 1fr 1fr 1fr 1fr 1fr auto",background:"linear-gradient(135deg, #D4A574 0%, #C9A96E 100%)",color:"white",padding:"1rem",fontWeight:"bold",borderBottom:"2px solid #B8860B",borderRadius:"8px 8px 0 0"},children:[c.jsx("div",{style:{textAlign:"center"},children:"🖼️ Imagen"}),c.jsx("div",{children:"📦 Producto"}),c.jsx("div",{children:"🏷️ Categoría"}),c.jsx("div",{children:"💰 Precio"}),c.jsx("div",{children:"📊 Stock"}),c.jsx("div",{children:"⚠️ Alerta"}),c.jsx("div",{children:"✅ Estado"}),c.jsx("div",{style:{textAlign:"center"},children:"⚙️ Acciones"})]}),u.map(C=>{var gt;const U=C.stock||0,Y=C.minStock||5,$e=U<=Y,Ye=U===0;return c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 2fr 1fr 1fr 1fr 1fr 1fr auto",padding:"1rem",borderBottom:"1px solid #f0f0f0",alignItems:"center",background:Ye?"#ffebee":$e?"#fff3e0":"white"},children:[c.jsx("div",{style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx("img",{src:C.imagen||"/images/products/default-product.png",alt:C.nombre,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"2px solid #f0f0f0"},onError:Un=>{Un.target.src="/images/products/default-product.png"}})}),c.jsxs("div",{style:{paddingLeft:"0.5rem"},children:[c.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem",fontSize:"1rem",color:"#333"},children:C.nombre}),c.jsxs("div",{style:{color:"#666",fontSize:"0.8rem",lineHeight:"1.3",marginBottom:"0.25rem"},children:[(gt=C.descripcion)==null?void 0:gt.substring(0,60),"..."]}),c.jsxs("div",{style:{fontSize:"0.7rem",color:"#999",fontStyle:"italic"},children:["ID: ",C.id]})]}),c.jsx("div",{style:{textAlign:"center"},children:c.jsx("span",{style:{background:"#E8B4B8",color:"#8B4513",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"500"},children:C.categoria||"Sin categoría"})}),c.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#D4A574",textAlign:"center"},children:Qe(C.precio||0)}),c.jsxs("div",{style:{color:Ye?"#f44336":$e?"#FF9800":"#4CAF50",fontWeight:"bold",textAlign:"center"},children:[c.jsxs("div",{style:{fontSize:"1rem"},children:[U," unidades"]}),C.minStock&&c.jsxs("div",{style:{fontSize:"0.7rem",color:"#666",marginTop:"0.25rem"},children:["Mín: ",C.minStock]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Ye&&c.jsx("span",{style:{background:"#f44336",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:"⚠️ Sin Stock"}),$e&&!Ye&&c.jsx("span",{style:{background:"#FF9800",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:"⚠️ Bajo Stock"}),!$e&&!Ye&&c.jsx("span",{style:{background:"#4CAF50",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:"✅ OK"})]}),c.jsx("div",{style:{color:C.activo!==!1?"#4CAF50":"#f44336"},children:C.activo!==!1?"Activo":"Inactivo"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>Z(C),style:{background:"#2196F3",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",marginRight:"0.5rem"},children:"Editar"}),c.jsx("button",{onClick:()=>kt(C.id),style:{background:"#f44336",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]})]},C.id)})]})]}),n==="add-product"&&c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsx("h2",{style:{color:"#D4A574",margin:0},children:"Agregar Nuevo Producto"}),c.jsx("button",{onClick:()=>r("products"),style:{background:"transparent",color:"#D4A574",border:"2px solid #D4A574",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"← Volver a Productos"})]}),c.jsxs("div",{style:{background:"white",border:"1px solid #eee",borderRadius:"10px",padding:"2rem",maxWidth:"800px"},children:[c.jsx("h3",{style:{marginBottom:"1.5rem",color:"#333"},children:E?"Editar Producto":"Agregar Nuevo Producto"}),c.jsxs("form",{onSubmit:E?ve:gr,children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Nombre del Producto *"}),c.jsx("input",{type:"text",required:!0,value:B.nombre,onChange:C=>w(U=>({...U,nombre:C.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Precio *"}),c.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:B.precio,onChange:C=>w(U=>({...U,precio:parseFloat(C.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Descripción *"}),c.jsx("textarea",{required:!0,value:B.descripcion,onChange:C=>w(U=>({...U,descripcion:C.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none",minHeight:"100px",resize:"vertical"}})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Categoría *"}),c.jsxs("select",{required:!0,value:B.categoria,onChange:C=>w(U=>({...U,categoria:C.target.value})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"},children:[c.jsx("option",{value:"",children:"Seleccionar categoría"}),c.jsx("option",{value:"productos",children:"Productos"}),c.jsx("option",{value:"servicios",children:"Servicios"}),c.jsx("option",{value:"kids",children:"Productos para Niños"})]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Stock Actual *"}),c.jsx("input",{type:"number",required:!0,min:"0",value:B.stock,onChange:C=>w(U=>({...U,stock:parseInt(C.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"Estado"}),c.jsxs("select",{value:B.activo?"activo":"inactivo",onChange:C=>w(U=>({...U,activo:C.target.value==="activo"})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"},children:[c.jsx("option",{value:"activo",children:"Activo"}),c.jsx("option",{value:"inactivo",children:"Inactivo"})]})]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem",fontSize:"1.1rem"},children:"📦 Gestión de Inventario"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:["Stock Mínimo *",c.jsx("span",{style:{fontSize:"0.8rem",color:"#666",marginLeft:"0.5rem"},children:"(Alerta cuando baje de este número)"})]}),c.jsx("input",{type:"number",required:!0,min:"0",value:B.minStock,onChange:C=>w(U=>({...U,minStock:parseInt(C.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]}),c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:["Stock Máximo *",c.jsx("span",{style:{fontSize:"0.8rem",color:"#666",marginLeft:"0.5rem"},children:"(Capacidad máxima de almacén)"})]}),c.jsx("input",{type:"number",required:!0,min:"0",value:B.maxStock,onChange:C=>w(U=>({...U,maxStock:parseInt(C.target.value)})),style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none"}})]})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500"},children:"🖼️ Imagen del Producto"}),B.imagen&&c.jsx("div",{style:{marginBottom:"1rem",textAlign:"center"},children:c.jsx("img",{src:B.imagen,alt:"Preview",style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"12px",border:"2px solid #D4A574",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"},onError:C=>{C.target.style.display="none"}})}),c.jsx("input",{type:"url",value:B.imagen,onChange:C=>w(U=>({...U,imagen:C.target.value})),placeholder:"https://ejemplo.com/imagen.jpg",style:{width:"100%",padding:"0.75rem",border:"2px solid #eee",borderRadius:"8px",fontSize:"1rem",outline:"none",marginBottom:"0.5rem"}}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("button",{type:"button",onClick:()=>{const C=prompt("Ingresa la URL de la imagen:");C&&w(U=>({...U,imagen:C}))},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #D4A574 0%, #B8945F 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:C=>{C.target.style.transform="translateY(-1px)",C.target.style.boxShadow="0 4px 12px rgba(212, 165, 116, 0.4)"},onMouseLeave:C=>{C.target.style.transform="translateY(0)",C.target.style.boxShadow="none"},children:"📎 Pegar URL"}),c.jsx("button",{type:"button",onClick:()=>{const C=["/images/products/velas-de-miel-product.png","/images/products/locion-atrayente-product.png","/images/products/locion-palo-santo-product.png","/images/products/agua-florida-product.png","/images/products/brisa-bendicion-dinero-product.png","/images/products/brisa-prosperidad-product.png","/images/products/brisa-abundancia-product.png","/images/products/exfoliante-abrecaminos-product.png","/images/products/exfoliante-venus-product.png","/images/products/feromonas-naturales-product.png","/images/products/feromonas-damas-caballeros-product.png","/images/products/agua-micelar-product.png","/images/products/agua-de-rosas-product.png","/images/products/Aceite Abre Caminos.png","/images/products/aceite-para-ungir-product.png","/images/products/shampoo-artesanal-product.png","/images/products/shampoo-miel-product.png","/images/products/shampoo-romero-product.png","/images/products/mascarilla-capilar-product.png","/images/products/agua-de-luna-product.png","/images/products/Miel Consagrada.png","/images/products/sal-negra-product.png","/images/products/polvo-de-oro-product.png","/images/products/palo-santo-product.png","/images/products/sahumerios-product.png","/images/products/bano-amargo-product.png","/images/products/Bano Energetico Amor Propio.png","/images/products/Bano-Energetico.png","/images/products/Locion-Ellas-Ellos.png"],U=prompt(`Selecciona una imagen existente (1-${C.length}):

${C.map(($e,Ye)=>`${Ye+1}. ${$e.split("/").pop()}`).join(`
`)}`),Y=parseInt(U)-1;Y>=0&&Y<C.length&&w($e=>({...$e,imagen:C[Y]}))},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #8EB080 0%, #6A9B6A 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:C=>{C.target.style.transform="translateY(-1px)",C.target.style.boxShadow="0 4px 12px rgba(142, 176, 128, 0.4)"},onMouseLeave:C=>{C.target.style.transform="translateY(0)",C.target.style.boxShadow="none"},children:"🖼️ Seleccionar Imagen"}),c.jsx("button",{type:"button",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept="image/*",C.onchange=U=>{const Y=U.target.files[0];if(Y){const $e=new FileReader;$e.onload=Ye=>{w(gt=>({...gt,imagen:Ye.target.result}))},$e.readAsDataURL(Y)}},C.click()},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #4A90E2 0%, #357ABD 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:C=>{C.target.style.transform="translateY(-1px)",C.target.style.boxShadow="0 4px 12px rgba(74, 144, 226, 0.4)"},onMouseLeave:C=>{C.target.style.transform="translateY(0)",C.target.style.boxShadow="none"},children:"📁 Subir Imagen"}),c.jsx("button",{type:"button",onClick:()=>w(C=>({...C,imagen:""})),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:C=>{C.target.style.transform="translateY(-1px)",C.target.style.boxShadow="0 4px 12px rgba(255, 107, 107, 0.4)"},onMouseLeave:C=>{C.target.style.transform="translateY(0)",C.target.style.boxShadow="none"},children:"🗑️ Limpiar"})]}),c.jsx("p",{style:{fontSize:"0.8rem",color:"#666",margin:"0.5rem 0 0 0",fontStyle:"italic"},children:"💡 Tip: Puedes pegar una URL de imagen o seleccionar una de las imágenes existentes"})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[c.jsx("button",{type:"button",onClick:()=>{w({nombre:"",descripcion:"",precio:"",categoria:"Productos",stock:"",stockMinimo:"",stockMaximo:"",estado:"Activo",imagen:""}),r("products")},style:{flex:1,padding:"0.75rem",background:"transparent",border:"2px solid #D4A574",color:"#D4A574",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:F,style:{flex:1,padding:"0.75rem",background:`linear-gradient(135deg, ${D.A.miel} 0%, ${D.B.miel} 100%)`,border:"none",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:F?"not-allowed":"pointer",opacity:F?.7:1},children:F?E?"Actualizando...":"Agregando...":E?"Actualizar Producto":"Agregar Producto"}),E&&c.jsx("button",{type:"button",onClick:fe,style:{background:"#6c757d",color:"white",border:"none",padding:"0.8rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",marginLeft:"1rem"},children:"Cancelar"})]})]})]})]}),S&&_&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:c.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"2rem",maxWidth:"800px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsxs("h2",{style:{color:"#D4A574",margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:["📦 Detalles del Pedido #",_.id.slice(-8)]}),c.jsx("button",{onClick:()=>R(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"✕"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[c.jsxs("div",{children:[c.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Información del Pedido"}),c.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:[c.jsxs("p",{children:[c.jsx("strong",{children:"ID:"})," ",_.id]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Cliente:"})," ",_.customerName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",_.customerEmail]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Total:"})," ",Qe(_.total)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",at(_.createdAt)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Estado:"}),c.jsx("span",{style:{background:_.status==="completed"?"#4CAF50":_.status==="pending"?"#FF9800":"#9E9E9E",color:"white",padding:"0.25rem 0.75rem",borderRadius:"15px",fontSize:"0.8rem",marginLeft:"0.5rem"},children:_.status==="completed"?"Completado":_.status==="pending"?"Pendiente":"Cancelado"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Información de Envío"}),c.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:_.shippingAddress?c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Nombre:"})," ",_.shippingAddress.fullName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Dirección:"})," ",_.shippingAddress.address]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Ciudad:"})," ",_.shippingAddress.city]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Estado:"})," ",_.shippingAddress.state]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Código Postal:"})," ",_.shippingAddress.zipCode]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",_.shippingAddress.phone]}),_.shippingAddress.notes&&c.jsxs("p",{children:[c.jsx("strong",{children:"Notas:"})," ",_.shippingAddress.notes]})]}):c.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"No hay información de envío disponible"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{style:{color:"#D4A574",marginBottom:"1rem"},children:"Productos del Pedido"}),c.jsx("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px"},children:_.items&&_.items.length>0?_.items.map((C,U)=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderBottom:"1px solid #eee",background:"white",borderRadius:"8px",marginBottom:"0.5rem"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"bold"},children:C.nombre}),c.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Cantidad: ",C.quantity," × ",Qe(C.precio)]})]}),c.jsx("div",{style:{fontWeight:"bold"},children:Qe(C.precio*C.quantity)})]},U)):c.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"No hay productos en este pedido"})})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[c.jsx("button",{onClick:()=>R(!1),style:{flex:1,padding:"0.75rem",background:"transparent",border:"2px solid #D4A574",color:"#D4A574",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cerrar"}),c.jsx("button",{onClick:()=>{window.print()},style:{flex:1,padding:"0.75rem",background:`linear-gradient(135deg, ${D.A.miel} 0%, ${D.B.miel} 100%)`,border:"none",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"🖨️ Imprimir"})]})]})})]}),c.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},T={D:{miel:"#E0A73A",crema:"#FBF2DE",verde:"#628D6A",carbon:"#1A1714",fondo:"linear-gradient(135deg, #FBF2DE 0%, #FFFFFF 65%)"}},_P={"Velas De Miel":"/images/catalog/velasdemiel1.JPG","Loción Atrayente":"/images/catalog/locion-atrayente.JPG","Loción Palo Santo":"/images/catalog/locion-palo-santo.JPG","Agua Florida":"/images/catalog/agua-florida.JPG","Brisa Áurica Bendición del Dinero":"/images/catalog/brisa-aurica-bendicion-del-dinero.JPG","Brisa Áurica Prosperidad":"/images/catalog/brisa-aurica-prosperidad.JPG","Brisa Áurica Abundancia":"/images/catalog/brisa-aurica-abundancia.JPG","Exfoliante Abre Caminos":"/images/catalog/exfoliante-abrecaminos.JPG","Exfoliante Venus":"/images/catalog/exfoliante-venus.JPG","Feromonas Naturales":"/images/catalog/feromonas-naturales.JPG","Feromonas Damas y Caballeros":"/images/catalog/feromanas-damas-y-caballeros.JPG","Agua Micelar":"/images/catalog/agua-micelar.JPG","Agua de Rosas":"/images/catalog/agua-de-rosas1.JPG","Aceite Abre Caminos":"/images/catalog/aceite-abrecaminos.JPG","Aceite para Ungir":"/images/catalog/aceite-para-ungir.JPG","Shampoo Artesanal":"/images/catalog/shampoo-artesanal.JPG","Shampoo con Extracto de Miel":"/images/catalog/shampoo-con-extracto-de-miel.JPG","Shampoo con Extracto de Romero":"/images/catalog/shampoo-con-extracto-de-romero.JPG","Mascarilla Capilar":"/images/catalog/mascarilla-capilar.JPG","Agua de Luna":"/images/catalog/agua-de-luna.JPG","Miel Consagrada":"/images/catalog/miel-consagrada.JPG","Sal Negra":"/images/catalog/sal-negro.JPG","Polvo de Oro":"/images/catalog/polvo-de-oro.JPG","Palo Santo":"/images/catalog/palo-santo.JPG",Sahumerios:"/images/catalog/sahumerios.JPG","Baño Energético Amargo":"/images/catalog/bano-energetico-amargo.JPG","Baño Energético Amor Propio":"/images/catalog/bano-energetico-amor-propio.JPG","Baño Energético Abre Caminos":"/images/catalog/bano-energetico-abre-caminos.JPG","Loción Ellas y Ellos":"/images/catalog/locion-ellas-y-ellos.JPG"},wP={"Palo Santo":{elaboracion:"El Palo Santo es una madera sagrada que proviene del árbol Bursera graveolens, nativo de América del Sur. Se recolecta de forma sostenible de árboles que han muerto naturalmente, permitiendo que la madera se cure y desarrolle sus propiedades aromáticas y energéticas únicas durante el proceso de secado natural.",proposito:"El Palo Santo es reconocido por sus propiedades medicinales antirreumáticas, diuréticas, depurativas y antisépticas. Es ampliamente utilizado en prácticas de yoga, reiki y aromaterapia para limpiar y purificar ambientes, eliminar energías negativas y crear espacios de paz y armonía espiritual.",beneficios:"Purifica el aire y elimina bacterias, reduce el estrés y la ansiedad, facilita la meditación y la concentración, mejora la calidad del sueño, equilibra las emociones, fortalece el sistema inmunológico, y crea un ambiente propicio para la sanación espiritual y el bienestar general.",modoUso:"Enciende el Palo Santo con una vela, inclínalo en un ángulo de 45 grados y deja que se consuma durante 1-2 minutos. Apaga la llama y pasa el humo sagrado sobre tu cuerpo y por los espacios que desees purificar. El humo debe circular libremente para limpiar las energías negativas.",ingredientes:"100% Palo Santo (Bursera graveolens) de origen natural, sin aditivos químicos ni conservantes artificiales.",duracion:"Cada barra de Palo Santo puede durar entre 8-12 usos, dependiendo del tamaño y la frecuencia de uso.",cuidados:"Conservar en un lugar seco y fresco, alejado de la humedad. Mantener en su empaque original para preservar sus propiedades aromáticas."},"Velas De Miel":{elaboracion:"Nuestras velas de miel son elaboradas artesanalmente con cera de abeja 100% pura, recolectada de colmenas locales y sostenibles. El proceso incluye la filtración natural de la cera, el moldeado a mano y la consagración ritual para potenciar sus propiedades energéticas de abundancia y prosperidad.",proposito:"Diseñadas específicamente para rituales de abundancia, prosperidad y purificación energética. La cera de abeja natural emite iones negativos que purifican el aire y crean un ambiente propicio para la manifestación de deseos y la atracción de energías positivas.",beneficios:"Purifica el aire de toxinas y alérgenos, mejora la calidad del aire interior, emite iones negativos beneficiosos, crea un ambiente relajante y meditativo, potencia rituales de abundancia, y su aroma natural es relajante y terapéutico.",modoUso:"Enciende la vela en un lugar seguro y estable. Deja que se consuma completamente para activar sus propiedades energéticas. Ideal para usar durante meditaciones, rituales de abundancia o simplemente para crear un ambiente purificado en tu hogar.",ingredientes:"Cera de abeja 100% pura, mecha de algodón natural, sin parafina ni aditivos químicos.",duracion:"Tiempo de combustión: 8-12 horas, dependiendo del tamaño de la vela.",cuidados:"Mantener alejada de corrientes de aire, no mover mientras está encendida, y cortar la mecha a 1cm antes de cada uso para una combustión óptima."},"Miel Consagrada":{elaboracion:"Nuestra miel consagrada es recolectada de colmenas locales y purificadas, sometida a rituales sagrados de consagración bajo la luna llena. El proceso incluye la purificación energética, la bendición ritual y el almacenamiento en recipientes de cristal para preservar su pureza y propiedades energéticas.",proposito:"Especialmente consagrada para rituales de abundancia, prosperidad y manifestación. Su pureza energética la hace ideal para endulzar decretos, rituales de atracción y ceremonias de abundancia, potenciando la ley de atracción y la manifestación de deseos.",beneficios:"Potencia rituales de abundancia y prosperidad, endulza decretos y afirmaciones, atrae energías positivas y oportunidades, fortalece la conexión espiritual, y su pureza energética facilita la manifestación de deseos.",modoUso:"Consumir una cucharadita en ayunas con intención de abundancia, usar para endulzar decretos escritos, agregar a rituales de manifestación, o simplemente consumir con gratitud para atraer prosperidad.",ingredientes:"Miel de abeja 100% pura, sin pasteurizar, sin aditivos químicos ni conservantes artificiales.",duracion:"Conservar en refrigeración hasta 2 años, mantener en recipiente de cristal para preservar sus propiedades energéticas.",cuidados:"Mantener en lugar fresco y seco, alejado de la luz directa del sol, y usar utensilios de madera o cristal para preservar su pureza energética."}},EP=["Todos","Velas","Lociones","Brisas Áuricas","Exfoliantes","Feromonas","Faciales","Aceites","Shampoo","Cabello","Energéticos","Miel","Protección","Rituales","Sahumerios","Baños Energéticos","Servicios"];function xP(){const[t,e]=ie.useState([]),[n,r]=ie.useState(""),[i,s]=ie.useState("Todos"),[o,l]=ie.useState([]),[u,h]=ie.useState([]),[p,g]=ie.useState([]),[y,k]=ie.useState([]),[N,V]=ie.useState(null),[F,A]=ie.useState(!1),[E,b]=ie.useState(!1),[M,$]=ie.useState(""),[B,w]=ie.useState(!1),[_,x]=ie.useState(""),[S,R]=ie.useState(null),[D,I]=ie.useState(null),[bt,Ht]=ie.useState([]),[gr,kt]=ie.useState([]),[H,X]=ie.useState(!1),[Z,ve]=ie.useState("login"),[fe,_e]=ie.useState(""),[Qe,at]=ie.useState(!1),[C,U]=ie.useState(!1),[Y,$e]=ie.useState(!1),Ye=async()=>{try{if(!Ne){console.log("Firebase db not initialized, using empty arrays");return}console.log("Loading products from Firestore...");const{collection:m,query:P,getDocs:re}=await ml(async()=>{const{collection:ee,query:Pt,getDocs:le}=await Promise.resolve().then(()=>xl);return{collection:ee,query:Pt,getDocs:le}},void 0),ae=P(m(Ne,"products")),ct=(await re(ae)).docs.map(ee=>({id:ee.id,...ee.data()}));console.log("All products loaded from Firestore:",ct.length);const Te=ct.reduce((ee,Pt)=>(ee.find(mn=>mn.nombre&&Pt.nombre&&mn.nombre.toLowerCase().trim()===Pt.nombre.toLowerCase().trim())?console.log(`Removing duplicate: "${Pt.nombre}" (ID: ${Pt.id})`):ee.push(Pt),ee),[]);console.log(`Removed ${ct.length-Te.length} duplicate products`),console.log("Unique products after deduplication:",Te.map(ee=>ee.nombre));const Ot=Te.filter(ee=>ee.categoria&&!["Servicios","servicios"].includes(ee.categoria)&&!ee.categoria.toLowerCase().includes("kids")&&!ee.categoria.toLowerCase().includes("niños")),xe=Te.filter(ee=>ee.categoria&&["Servicios","servicios"].includes(ee.categoria));console.log("Services found:",xe.map(ee=>ee.nombre));const Je=Te.filter(ee=>ee.categoria&&(ee.categoria.toLowerCase().includes("kids")||ee.categoria.toLowerCase().includes("niños"))&&!["Servicios","servicios"].includes(ee.categoria)),rn=Te.filter(ee=>ee.categoria&&(ee.categoria.toLowerCase().includes("kids")||ee.categoria.toLowerCase().includes("niños"))&&["Servicios","servicios"].includes(ee.categoria));console.log("Separated products:",{regular:Ot.length,services:xe.length,kidsProducts:Je.length,kidsServices:rn.length}),console.log("Kids Products:",Je.map(ee=>`${ee.nombre} (${ee.categoria})`)),console.log("Kids Services:",rn.map(ee=>`${ee.nombre} (${ee.categoria})`)),l(Ot),h(xe),g(Je),k(rn)}catch(m){console.error("Error loading products from Firestore:",m),console.log("Firestore failed, keeping empty arrays")}};ie.useEffect(()=>{Ye()},[]),ie.useEffect(()=>{if(!Ne){console.log("Firebase db not initialized, skipping real-time listener");return}(async()=>{console.log("Setting up real-time listener for products...");const{collection:P,query:re,onSnapshot:ae}=await ml(async()=>{const{collection:Te,query:Ot,onSnapshot:xe}=await Promise.resolve().then(()=>xl);return{collection:Te,query:Ot,onSnapshot:xe}},void 0),Pe=re(P(Ne,"products")),ct=ae(Pe,Te=>{console.log("Products updated in Firestore, refreshing homepage...");const Ot=Te.docs.map(le=>({id:le.id,...le.data()})),xe=Ot.reduce((le,mn)=>(le.find(Ys=>Ys.nombre&&mn.nombre&&Ys.nombre.toLowerCase().trim()===mn.nombre.toLowerCase().trim())?console.log(`Removing duplicate: "${mn.nombre}" (ID: ${mn.id})`):le.push(mn),le),[]);console.log(`Removed ${Ot.length-xe.length} duplicate products`),console.log("Unique products after deduplication:",xe.map(le=>le.nombre));const Je=xe.filter(le=>le.categoria&&!["Servicios","servicios"].includes(le.categoria)&&!le.categoria.toLowerCase().includes("kids")&&!le.categoria.toLowerCase().includes("niños")),rn=xe.filter(le=>le.categoria&&["Servicios","servicios"].includes(le.categoria));console.log("Services found:",rn.map(le=>le.nombre));const ee=xe.filter(le=>le.categoria&&(le.categoria.toLowerCase().includes("kids")||le.categoria.toLowerCase().includes("niños"))&&!["Servicios","servicios"].includes(le.categoria)),Pt=xe.filter(le=>le.categoria&&(le.categoria.toLowerCase().includes("kids")||le.categoria.toLowerCase().includes("niños"))&&["Servicios","servicios"].includes(le.categoria));console.log("Kids Products:",ee.map(le=>`${le.nombre} (${le.categoria})`)),console.log("Kids Services:",Pt.map(le=>`${le.nombre} (${le.categoria})`)),l(Je),h(rn),g(ee),k(Pt)},Te=>{console.error("Error in products listener:",Te)});return()=>ct()})()},[]);const gt=async()=>{try{console.log("Creating admin account...");const m="admin@amorymiel.com",ae=(await Gg(Ki,m,"admin123456")).user,Pe={uid:ae.uid,email:m,name:"Admin Amor y Miel",isAdmin:!0,createdAt:new Date,wishlist:[],orderHistory:[],preferences:{newsletter:!0,notifications:!0}};await Fh(an(Ne,"users",ae.uid),Pe),console.log("Admin account created successfully!"),alert("Admin account created! Email: admin@amorymiel.com, Password: admin123456")}catch(m){m.code==="auth/email-already-in-use"?console.log("Admin account already exists"):console.error("Error creating admin account:",m)}},Un=async()=>{try{if(console.log("Adding stock information to existing products..."),!Ne)throw new Error("Firebase database not initialized");const{collection:m,query:P,getDocs:re,updateDoc:ae,doc:Pe}=await ml(async()=>{const{collection:xe,query:Je,getDocs:rn,updateDoc:ee,doc:Pt}=await Promise.resolve().then(()=>xl);return{collection:xe,query:Je,getDocs:rn,updateDoc:ee,doc:Pt}},void 0);console.log("Creating query...");const ct=P(m(Ne,"products"));console.log("Query created successfully"),console.log("Getting documents...");const Te=await re(ct);if(console.log(`Found ${Te.docs.length} products`),Te.empty){console.log("No products found in Firestore"),alert("No products found in Firestore to add stock to.");return}let Ot=0;for(const xe of Te.docs)try{const Je=xe.data();console.log(`Checking product: ${Je.nombre||xe.id}`),Je.stock===void 0?(console.log(`Updating stock for product: ${Je.nombre||xe.id}`),await ae(Pe(Ne,"products",xe.id),{stock:50,minStock:5,maxStock:100,lastUpdated:new Date}),console.log(`✅ Added stock info to product: ${Je.nombre||xe.id}`),Ot++):console.log(`Product already has stock info: ${Je.nombre||xe.id}`)}catch(Je){console.error(`Error updating product ${xe.id}:`,Je)}console.log(`Stock information update complete! Updated ${Ot} products.`),alert(`✅ Stock information added to ${Ot} products!`)}catch(m){console.error("Error adding stock to products:",m),console.error("Error details:",{message:m.message,stack:m.stack,name:m.name}),alert(`Error adding stock information: ${m.message}`)}},[Oi,pn]=ie.useState(!1),[Rt,nn]=ie.useState({fullName:"",address:"",city:"",state:"",zipCode:"",phone:"",notes:""}),Bn={PUBLIC_KEY:"N9a2Ar4ONVT5fRerl",SERVICE_ID:"service_ih1vhyb",TEMPLATE_ID:"template_9aexk4c"};[...new Set(o.map(m=>m.categoria))];const yr=o.filter(m=>{const P=n===""||m.nombre.toLowerCase().includes(n.toLowerCase())||m.descripcion.toLowerCase().includes(n.toLowerCase())||m.tags.some(ae=>ae.toLowerCase().includes(n.toLowerCase())),re=i==="Todos"||m.categoria===i;return P&&re}),Fi=m=>{r(m.target.value)},Wn=async m=>{if(!S){X(!0),ve("login");return}const P=m.stock||0,re=t.find(Pe=>Pe.id===m.id),ae=re?re.quantity:0;if(P===0){alert("❌ Este producto está agotado y no está disponible para la venta.");return}if(ae>=P){alert(`❌ No hay suficiente stock disponible. Solo quedan ${P} unidades.`);return}e(Pe=>Pe.find(Te=>Te.id===m.id)?Pe.map(Te=>Te.id===m.id?{...Te,quantity:Te.quantity+1}:Te):[...Pe,{...m,quantity:1}]),await zi(m)},zi=async m=>{try{if(!S||!S.uid)return;const P={userId:S.uid,customerName:(D==null?void 0:D.name)||S.email||"Cliente",customerEmail:S.email||"no-email@example.com",productId:m.id,productName:m.nombre,productPrice:m.precio,quantity:1,addedAt:new Date,status:"in_cart"},{collection:re,addDoc:ae}=await ml(async()=>{const{collection:Pe,addDoc:ct}=await Promise.resolve().then(()=>xl);return{collection:Pe,addDoc:ct}},void 0);await ae(re(Ne,"cart_items"),P),console.log("Cart addition tracked:",P)}catch(P){console.error("Error tracking cart addition:",P)}},li=m=>{e(P=>P.filter(re=>re.id!==m))},me=(m,P)=>{if(P<=0){li(m);return}e(re=>re.map(ae=>ae.id===m?{...ae,quantity:P}:ae))},yt=()=>t.reduce((m,P)=>m+P.precio*P.quantity,0),$n=async()=>{if(!S){X(!0),ve("login");return}if(t.length===0){alert("Tu carrito está vacío. Agrega productos antes de proceder al pago.");return}pn(!0)},Ue=async()=>{A(!0);try{console.log("Starting order creation process..."),console.log("User:",S),console.log("Cart:",t),console.log("User profile:",D),console.log("Shipping address:",Rt);const m=yt(),P=`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,re=`https://link.mercadopago.com.mx/amorymiel?amount=${m}&order_id=${P}`;pn(!1),window.open(re,"_blank"),alert(`¡Redirigiendo a Mercado Pago para completar el pago!

Total: $${m}

La orden se creará automáticamente cuando el pago sea confirmado.`)}catch(m){console.error("Error creating order:",m),console.error("Error details:",m.message,m.code),console.error("Error stack:",m.stack),console.error("User state:",{user:S,userProfile:D,cart:t}),alert(`Error al crear la orden: ${m.message}

Código de error: ${m.code||"N/A"}

Por favor, inténtalo de nuevo.`)}finally{A(!1)}},lt=async m=>{m.preventDefault(),b(!0),$("");const P=new FormData(m.target),re={from_name:P.get("name"),from_email:P.get("email"),from_phone:P.get("phone"),message:P.get("message"),name:P.get("name"),email:P.get("email")};try{await Ig.send(Bn.SERVICE_ID,Bn.TEMPLATE_ID,re,Bn.PUBLIC_KEY),$("¡Mensaje enviado exitosamente! Te contactaremos pronto."),m.target.reset()}catch(ae){console.error("Error sending email:",ae),$("Error al enviar el mensaje. Por favor, inténtalo de nuevo.")}finally{b(!1)}},Ui=async m=>{m.preventDefault(),w(!0),x("");const P=m.target.email.value,re={from_name:"Newsletter Subscriber",from_email:P,from_phone:"N/A",message:`Nueva suscripción al newsletter de Amor y Miel.

Email: ${P}

Fecha: ${new Date().toLocaleDateString()}`,name:"Newsletter Subscriber",email:P};try{await Ig.send(Bn.SERVICE_ID,Bn.TEMPLATE_ID,re,Bn.PUBLIC_KEY),x("¡Te has suscrito exitosamente! Recibirás nuestros tips de bienestar."),m.target.reset()}catch(ae){console.error("Error sending newsletter subscription:",ae),x("Error al suscribirse. Por favor, inténtalo de nuevo.")}finally{w(!1)}},La=async(m,P,re)=>{try{console.log("Creating user account for:",m);const Pe=(await Gg(Ki,m,P)).user;console.log("User created with UID:",Pe.uid);const ct={uid:Pe.uid,email:m,name:re,createdAt:new Date,wishlist:[],orderHistory:[],preferences:{newsletter:!0,notifications:!0}};console.log("Saving user data to Firestore:",ct),await Fh(an(Ne,"users",Pe.uid),ct),console.log("User data saved successfully to Firestore"),_e("¡Cuenta creada exitosamente!"),X(!1)}catch(ae){console.error("Error creating account:",ae),_e("Error al crear cuenta: "+ae.message)}},Ma=async(m,P)=>{try{const ae=(await KA(Ki,m,P)).user;await ps(an(Ne,"users",ae.uid),{lastLogin:new Date}),_e("¡Inicio de sesión exitoso!"),X(!1)}catch(re){_e("Error al iniciar sesión: "+re.message)}},Su=async()=>{try{await XA(Ki),R(null),I(null),Ht([]),kt([])}catch(m){console.error("Error signing out:",m)}},ci=async m=>{try{await GA(Ki,m),_e("Se ha enviado un enlace de recuperación a tu email.")}catch(P){_e("Error al enviar email de recuperación: "+P.message)}};return ie.useEffect(()=>{const m=JA(Ki,async P=>{if(P){R(P);const re=await Y1(an(Ne,"users",P.uid));if(re.exists()){const ae=re.data();I(ae),Ht(ae.wishlist||[]),kt(ae.orderHistory||[]),U(ae.isAdmin===!0||P.email==="admin@amorymiel.com")}}else R(null),I(null),Ht([]),kt([]),U(!1)});return()=>m()},[]),c.jsxs("div",{style:{background:T.D.fondo,minHeight:"100vh"},children:[c.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),c.jsx("header",{style:{background:"#FBF2DE",boxShadow:"0 2px 20px rgba(0,0,0,0.08)",position:"sticky",top:0,zIndex:100,padding:window.innerWidth<=768?"0.5rem 0":"1rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:window.innerWidth<=768?"0.5rem":"1rem"},children:[c.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:c.jsx("img",{src:"/images/logo/amorymiellogo.png",alt:"Amor y Miel",style:{height:window.innerWidth<=768?"60px":"80px"}})}),c.jsxs("nav",{style:{display:window.innerWidth<=768?"none":"flex",gap:"2rem",alignItems:"center",flexWrap:"wrap"},children:[c.jsx("a",{href:"#inicio",style:{color:T.D.carbon,textDecoration:"none"},children:"Inicio"}),c.jsx("a",{href:"#productos",style:{color:T.D.carbon,textDecoration:"none"},children:"Productos"}),c.jsx("a",{href:"#servicios",style:{color:T.D.carbon,textDecoration:"none"},children:"Servicios"}),c.jsx("a",{href:"#kids",style:{color:T.D.carbon,textDecoration:"none"},children:"Para Niños"}),c.jsx("a",{href:"#quienes-somos",style:{color:T.D.carbon,textDecoration:"none"},children:"Quiénes somos"}),c.jsx("a",{href:"#contacto",style:{color:T.D.carbon,textDecoration:"none"},children:"Contacto"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.5rem":"1rem",flexWrap:"wrap"},children:[c.jsx("input",{type:"text",placeholder:"Buscar productos...",value:n,onChange:Fi,style:{padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",border:`2px solid ${T.D.crema}`,borderRadius:"25px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",width:window.innerWidth<=768?"150px":"200px",outline:"none",transition:"border-color 0.3s ease"},onFocus:m=>{m.target.style.borderColor=T.D.miel},onBlur:m=>{m.target.style.borderColor=T.D.crema}}),S?c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.5rem":"1rem",flexWrap:"wrap"},children:[c.jsxs("span",{style:{color:T.D.carbon,fontSize:"0.9rem"},children:["¡Hola, ",(D==null?void 0:D.name)||S.email,"!"]}),C&&c.jsx("button",{onClick:()=>at(!0),style:{background:`linear-gradient(135deg, ${T.D.verde} 0%, #8EB080 100%)`,color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",cursor:"pointer",transition:"all 0.3s ease",fontWeight:"bold"},onMouseEnter:m=>{m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.2)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.boxShadow="none"},children:"🛠️ Admin Dashboard"}),!C&&c.jsx("button",{onClick:gt,style:{background:"transparent",color:T.D.miel,border:`2px solid ${T.D.miel}`,padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:"🔧 Create Admin"}),C&&window.innerWidth>768&&c.jsx("button",{onClick:Un,style:{background:"transparent",color:T.D.verde,border:`2px solid ${T.D.verde}`,padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold",marginLeft:"0.5rem"},children:"📦 Add Stock"}),c.jsx("button",{onClick:Su,style:{background:"transparent",border:`2px solid ${T.D.miel}`,color:T.D.miel,padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",borderRadius:"20px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.background=T.D.miel,m.target.style.color="white"},onMouseLeave:m=>{m.target.style.background="transparent",m.target.style.color=T.D.miel},children:"Cerrar Sesión"})]}):c.jsx("button",{onClick:()=>{X(!0),ve("login")},style:{background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:window.innerWidth<=768?"0.4rem 0.8rem":"0.5rem 1rem",borderRadius:"20px",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 4px 15px rgba(224, 167, 58, 0.3)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.boxShadow="none"},children:"Iniciar Sesión"}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.3rem":"0.5rem",cursor:"pointer",padding:window.innerWidth<=768?"0.4rem 0.6rem":"0.5rem 0.8rem",borderRadius:"8px",background:"transparent",border:`1px solid ${T.D.crema}`,transition:"all 0.3s ease"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor=T.D.crema,m.currentTarget.style.borderColor=T.D.miel},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent",m.currentTarget.style.borderColor=T.D.crema},children:[c.jsx("span",{style:{fontSize:"20px"},children:"🛍️"}),c.jsx("span",{style:{color:T.D.carbon,fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"500"},children:S?`Carrito (${t.length})`:"Inicia sesión para comprar"})]})]})]})}),c.jsx("section",{id:"inicio",style:{background:"linear-gradient(135deg, #FBF2DE 0%, #FFFFFF 65%)",padding:"1rem 0",minHeight:"60vh",display:"flex",alignItems:"center"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:window.innerWidth<=768?"1rem":"2rem",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsxs("h1",{style:{fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:"bold",color:T.D.carbon,margin:"0 0 1.5rem 0",lineHeight:"1.2"},children:["Cuidado natural, artesanal y"," ",c.jsx("span",{style:{color:T.D.miel},children:"con amor."})]}),c.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.2rem)",color:"#666",margin:"0 0 2rem 0",lineHeight:"1.6"},children:"Productos y rituales holísticos inspirados en la miel, las plantas y la energía del bienestar."}),c.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:[c.jsx("button",{style:{background:T.D.miel,color:"white",border:"none",padding:"1rem 2rem",borderRadius:"25px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"600"},onClick:()=>document.getElementById("productos").scrollIntoView({behavior:"smooth"}),children:"Ver productos"}),c.jsx("button",{style:{background:"transparent",color:T.D.miel,border:`2px solid ${T.D.miel}`,padding:"1rem 2rem",borderRadius:"25px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"600"},onClick:()=>document.getElementById("servicios").scrollIntoView({behavior:"smooth"}),children:"+ Ver servicios"})]}),c.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("span",{style:{fontSize:"1.5rem"},children:"🌿"}),c.jsx("span",{style:{color:T.D.carbon,fontSize:"0.9rem"},children:"100% natural"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("span",{style:{fontSize:"1.5rem"},children:"💰"}),c.jsx("span",{style:{color:T.D.carbon,fontSize:"0.9rem"},children:"Precios justos"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("span",{style:{fontSize:"1.5rem"},children:"❤️"}),c.jsx("span",{style:{color:T.D.carbon,fontSize:"0.9rem"},children:"Hecho con amor"})]})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsx("div",{style:{background:"white",borderRadius:"20px",padding:"1rem",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",maxWidth:"750px"},children:c.jsx("img",{src:"/images/catalog/Lucid_Origin_Stunning_3D_rendered_lifestyle_image_featuring_la_0.jpg",alt:"Productos Amor y Miel",style:{width:"100%",height:"auto",borderRadius:"15px",objectFit:"cover"},onError:m=>{m.target.src="/images/logo/amorymiellogo.png"}})})})]})}),c.jsx("section",{style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem 0",borderBottom:`1px solid ${T.D.crema}`},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:T.D.carbon,fontSize:"1.5rem",fontWeight:"600"},children:"Categorías"}),c.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.95rem"},children:"Explora nuestros productos por categoría"})]}),c.jsx("div",{style:{display:"flex",gap:"0.8rem",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},children:EP.map(m=>c.jsx("button",{onClick:()=>s(m),style:{background:i===m?`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`:"white",color:i===m?"white":T.D.carbon,border:i===m?"none":`2px solid ${T.D.crema}`,padding:"0.7rem 1.5rem",borderRadius:"30px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",transition:"all 0.3s ease",boxShadow:i===m?"0 4px 15px rgba(212, 165, 116, 0.3)":"0 2px 8px rgba(0,0,0,0.05)",minWidth:"auto",whiteSpace:"nowrap"},onMouseEnter:P=>{i!==m&&(P.target.style.borderColor=T.D.miel,P.target.style.transform="translateY(-2px)",P.target.style.boxShadow="0 4px 12px rgba(212, 165, 116, 0.2)")},onMouseLeave:P=>{i!==m&&(P.target.style.borderColor=T.D.crema,P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 2px 8px rgba(0,0,0,0.05)")},children:m},m))}),c.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem"},children:c.jsxs("span",{style:{color:"#666",fontSize:"0.9rem",fontWeight:"500"},children:[yr.length," ",yr.length===1?"producto":"productos",i!=="Todos"&&` en ${i.toLowerCase()}`]})})]})}),c.jsx("section",{id:"productos",style:{padding:"1rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{color:T.D.carbon,margin:"0 0 0.5rem 0",fontSize:"3rem",fontWeight:"700",letterSpacing:"-0.02em"},children:"Nuestros Productos"}),c.jsx("div",{style:{width:"80px",height:"4px",background:`linear-gradient(90deg, ${T.D.miel} 0%, #d4a574 100%)`,margin:"0 auto",borderRadius:"2px"}}),c.jsx("p",{style:{color:"#666",fontSize:"1.1rem",margin:"1rem 0 0 0",fontWeight:"400"},children:"Productos artesanales elaborados con amor y consagrados para tu bienestar"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2.5rem)"},children:yr.map(m=>c.jsxs("div",{style:{background:"linear-gradient(145deg, #ffffff 0%, #fefefe 100%)",borderRadius:"24px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",border:`2px solid ${T.D.crema}`,borderTop:`4px solid ${T.D.miel}`,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",backdropFilter:"blur(10px)"},onMouseEnter:P=>{P.currentTarget.style.transform="translateY(-12px) scale(1.02)",P.currentTarget.style.boxShadow="0 20px 60px rgba(212, 165, 116, 0.15), 0 8px 24px rgba(0,0,0,0.08)",P.currentTarget.style.borderColor=T.D.miel,P.currentTarget.style.borderTopColor="#b8945f"},onMouseLeave:P=>{P.currentTarget.style.transform="translateY(0) scale(1)",P.currentTarget.style.boxShadow="0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",P.currentTarget.style.borderColor=T.D.crema,P.currentTarget.style.borderTopColor=T.D.miel},children:[c.jsxs("div",{style:{position:"relative",overflow:"hidden"},children:[c.jsx("img",{src:m.imagen,alt:m.nombre,style:{width:"100%",height:"350px",objectFit:"cover",transition:"transform 0.4s ease"},onError:P=>{P.target.src="/images/logo/amorymiellogo.png"}}),c.jsx("div",{style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)",backdropFilter:"blur(15px)",padding:"0.5rem 1rem",borderRadius:"25px",border:`2px solid ${T.D.miel}`,boxShadow:"0 4px 15px rgba(212, 165, 116, 0.2)"},children:c.jsx("span",{style:{color:T.D.miel,fontSize:"0.7rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:m.categoria})})]}),c.jsxs("div",{style:{padding:"clamp(1.5rem, 3vw, 2.5rem)",background:"linear-gradient(180deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,1) 100%)"},children:[c.jsx("h3",{style:{margin:"0 0 1rem 0",color:T.D.carbon,fontSize:"clamp(1.2rem, 3vw, 1.5rem)",fontWeight:"700",lineHeight:"1.3",letterSpacing:"-0.02em"},children:m.nombre}),c.jsx("p",{style:{color:"#666",fontSize:"clamp(0.85rem, 2.5vw, 0.95rem)",margin:"0 0 1.5rem 0",lineHeight:"1.6",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:m.descripcion}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[c.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"700",color:T.D.miel,lineHeight:"1"},children:["$",m.precio]}),c.jsx("span",{style:{fontSize:"0.8rem",color:"#999",fontWeight:"500"},children:m.moneda}),c.jsx("div",{style:{marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const P=m.stock||0,re=m.minStock||5,ae=P===0,Pe=P<=re&&P>0;return ae?c.jsx("span",{style:{background:"#f44336",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:"⚠️ Sin Stock"}):Pe?c.jsxs("span",{style:{background:"#FF9800",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:["⚠️ Solo ",P," disponibles"]}):c.jsxs("span",{style:{background:"#4CAF50",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"bold"},children:["✅ En Stock (",P,")"]})})()})]}),c.jsxs("div",{style:{display:"flex",gap:"0.6rem",flexWrap:"wrap",alignItems:"center"},children:[c.jsx("button",{onClick:()=>V(m),style:{background:"transparent",color:T.D.miel,border:`2px solid ${T.D.miel}`,padding:"0.6rem 1rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.3s ease",minWidth:"80px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:P=>{P.target.style.background=T.D.miel,P.target.style.color="white",P.target.style.transform="translateY(-1px)"},onMouseLeave:P=>{P.target.style.background="transparent",P.target.style.color=T.D.miel,P.target.style.transform="translateY(0)"},children:"Ver más"}),c.jsx("button",{onClick:()=>Wn(m),style:{background:(m.stock||0)===0?"#cccccc":`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:(m.stock||0)===0?"#666666":"white",border:"none",padding:"0.6rem 1rem",borderRadius:"25px",cursor:(m.stock||0)===0?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.3s ease",minWidth:"80px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:(m.stock||0)===0?"none":"0 3px 12px rgba(212, 165, 116, 0.3)"},onMouseEnter:P=>{P.target.style.transform="translateY(-2px)",P.target.style.boxShadow="0 6px 20px rgba(224, 167, 58, 0.4)"},onMouseLeave:P=>{P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 4px 15px rgba(224, 167, 58, 0.3)"},children:(()=>{const re=(m.stock||0)===0;return S?re?"Sin Stock":"Agregar":"Inicia sesión"})()})]})]})]})]},m.id))})]})}),c.jsx("section",{id:"servicios",style:{background:"white",padding:"1.5rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsx("h2",{style:{textAlign:"center",color:T.D.carbon,marginBottom:"1.5rem",fontSize:"clamp(2rem, 5vw, 2.5rem)",fontWeight:"700"},children:"Nuestros Servicios"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2rem)"},children:u.map(m=>c.jsxs("div",{style:{background:"white",borderRadius:"15px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",border:`2px solid ${T.D.crema}`},children:[c.jsx("img",{src:m.imagen,alt:m.nombre,style:{width:"100%",height:"350px",objectFit:"cover"},onError:P=>{P.target.src="/images/logo/amorymiellogo.png"}}),c.jsxs("div",{style:{padding:"1.5rem"},children:[c.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:T.D.carbon},children:m.nombre}),c.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:[m.duracion," • ",m.modalidad]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"bold",color:T.D.miel},children:["$",m.precio," ",m.moneda]}),c.jsx("a",{href:m.bookingLink,target:"_blank",rel:"noopener noreferrer",style:{background:T.D.verde,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",textDecoration:"none"},children:"Agendar"})]})]})]},m.id))})]})}),c.jsx("section",{id:"kids",style:{background:"linear-gradient(135deg, #fff8e1 0%, #f3e5ab 100%)",padding:"4rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:T.D.carbon,margin:"0 0 1rem 0"},children:"🌟 Para los Pequeños 🌟"}),c.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Productos y servicios especialmente diseñados para el bienestar y desarrollo integral de los niños"})]}),c.jsxs("div",{style:{marginBottom:"4rem"},children:[c.jsx("h3",{style:{fontSize:"2rem",fontWeight:"600",color:T.D.miel,textAlign:"center",margin:"0 0 2rem 0"},children:"Productos para Niños"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2.5rem)"},children:p.map(m=>c.jsxs("div",{style:{background:"linear-gradient(145deg, #ffffff 0%, #fefefe 100%)",borderRadius:"24px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",border:`2px solid ${T.D.crema}`,borderTop:"4px solid #ffd54f",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative"},onMouseEnter:P=>{P.currentTarget.style.transform="translateY(-8px)",P.currentTarget.style.boxShadow="0 20px 40px rgba(0,0,0,0.12), 0 8px 16px rgba(0,0,0,0.08)",P.currentTarget.style.borderColor="#ffd54f"},onMouseLeave:P=>{P.currentTarget.style.transform="translateY(0)",P.currentTarget.style.boxShadow="0 8px 32px rgba(0,0,0,0.06), 0 2px 8px rgba(0,0,0,0.04)",P.currentTarget.style.borderColor=T.D.crema},children:[c.jsx("div",{style:{position:"absolute",top:"1.2rem",right:"1.2rem",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)",backdropFilter:"blur(15px)",padding:"0.5rem 1rem",borderRadius:"25px",border:"2px solid #ffd54f",boxShadow:"0 4px 15px rgba(255, 213, 79, 0.2)"},children:c.jsx("span",{style:{fontSize:"0.7rem",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px",color:T.D.miel},children:m.categoria.toUpperCase()})}),c.jsx("img",{src:m.imagen,alt:m.nombre,style:{width:"100%",height:"350px",objectFit:"cover"},onError:P=>{P.target.src="/images/logo/amorymiellogo.png"}}),c.jsxs("div",{style:{padding:"clamp(1.5rem, 3vw, 2.5rem)",background:"linear-gradient(180deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,1) 100%)"},children:[c.jsx("h3",{style:{fontSize:"clamp(1.2rem, 3vw, 1.5rem)",fontWeight:"700",color:T.D.carbon,margin:"0 0 0.8rem 0",lineHeight:"1.3"},children:m.nombre}),c.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:"0 0 1.2rem 0",lineHeight:"1.5"},children:m.descripcion}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:"1.2rem"},children:[c.jsxs("span",{style:{fontSize:"1.4rem",fontWeight:"700",color:T.D.miel,lineHeight:"1"},children:["$",m.precio]}),c.jsx("span",{style:{fontSize:"0.8rem",color:"#999",fontWeight:"500"},children:m.moneda})]}),c.jsxs("div",{style:{display:"flex",gap:"0.6rem",flexWrap:"wrap",alignItems:"center"},children:[c.jsx("button",{onClick:()=>V(m),style:{background:"transparent",color:T.D.miel,border:`2px solid ${T.D.miel}`,padding:"0.6rem 1rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.3s ease",minWidth:"80px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:P=>{P.target.style.background=T.D.miel,P.target.style.color="white",P.target.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.target.style.background="transparent",P.target.style.color=T.D.miel,P.target.style.transform="translateY(0)"},children:"Ver más"}),c.jsx("button",{onClick:()=>Wn(m),style:{background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"0.6rem 1rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",transition:"all 0.3s ease",minWidth:"80px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 3px 12px rgba(212, 165, 116, 0.3)"},onMouseEnter:P=>{P.target.style.transform="translateY(-2px)",P.target.style.boxShadow="0 6px 20px rgba(212, 165, 116, 0.4)"},onMouseLeave:P=>{P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 3px 12px rgba(212, 165, 116, 0.3)"},children:S?"Agregar al Carrito":"Inicia sesión para comprar"})]})]})]},m.id))})]}),c.jsxs("div",{children:[c.jsx("h3",{style:{fontSize:"2rem",fontWeight:"600",color:T.D.miel,textAlign:"center",margin:"0 0 2rem 0"},children:"Servicios para Niños"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"repeat(auto-fill, minmax(250px, 1fr))":"repeat(auto-fill, minmax(280px, 1fr))",gap:window.innerWidth<=768?"1rem":"clamp(1.5rem, 4vw, 2rem)"},children:y.map(m=>c.jsxs("div",{style:{background:"white",borderRadius:"20px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",border:"2px solid #ffd54f",transition:"all 0.3s ease"},onMouseEnter:P=>{P.currentTarget.style.transform="translateY(-5px)",P.currentTarget.style.boxShadow="0 15px 40px rgba(0,0,0,0.15)"},onMouseLeave:P=>{P.currentTarget.style.transform="translateY(0)",P.currentTarget.style.boxShadow="0 10px 30px rgba(0,0,0,0.1)"},children:[c.jsx("img",{src:m.imagen,alt:m.nombre,style:{width:"100%",height:"350px",objectFit:"cover"},onError:P=>{P.target.src="/images/logo/amorymiellogo.png"}}),c.jsxs("div",{style:{padding:"1.5rem"},children:[c.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:T.D.carbon},children:m.nombre}),c.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:[m.duracion," • ",m.modalidad]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"bold",color:T.D.miel},children:["$",m.precio," ",m.moneda]}),c.jsx("a",{href:m.bookingLink,target:"_blank",rel:"noopener noreferrer",style:{background:"#ffd54f",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",textDecoration:"none",transition:"all 0.3s ease"},onMouseEnter:P=>{P.target.style.background="#ffc107",P.target.style.transform="translateY(-2px)"},onMouseLeave:P=>{P.target.style.background="#ffd54f",P.target.style.transform="translateY(0)"},children:"Agendar"})]})]})]},m.id))})]})]})}),c.jsx("section",{id:"quienes-somos",style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"4rem 0"},children:c.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"3rem",alignItems:"center"},children:[c.jsx("div",{style:{textAlign:"center"},children:c.jsx("img",{src:"/images/about/quiensomos.jpg",alt:"Amor y Miel - Quiénes Somos",style:{width:"100%",maxWidth:"500px",height:"auto",borderRadius:"20px",boxShadow:"0 15px 40px rgba(0,0,0,0.1)",border:`3px solid ${T.D.miel}`},onError:m=>{m.target.src="/images/logo/amorymiellogo.png"}})}),c.jsxs("div",{style:{padding:"0 1rem"},children:[c.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:T.D.carbon,margin:"0 0 1.5rem 0",lineHeight:"1.2"},children:"Quiénes Somos"}),c.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.08)",border:`2px solid ${T.D.crema}`},children:[c.jsxs("p",{style:{fontSize:"1.1rem",lineHeight:"1.7",color:"#555",margin:"0 0 1.5rem 0"},children:["En ",c.jsx("strong",{style:{color:T.D.miel},children:"Amor y Miel"}),", creemos en el poder transformador de la naturaleza y la energía del amor. Somos una marca artesanal dedicada a crear productos y servicios holísticos que nutren el cuerpo, la mente y el alma."]}),c.jsxs("p",{style:{fontSize:"1.1rem",lineHeight:"1.7",color:"#555",margin:"0 0 1.5rem 0"},children:["Cada producto es elaborado con ",c.jsx("strong",{style:{color:T.D.miel},children:"ingredientes naturales"})," cuidadosamente seleccionados y consagrados bajo rituales de amor y sanación. Nuestros servicios holísticos están diseñados para acompañarte en tu camino hacia el bienestar integral."]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginTop:"2rem"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"🌿"}),c.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:T.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:"100% Natural"}),c.jsx("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:"Ingredientes puros y orgánicos"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"💝"}),c.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:T.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:"Hecho con Amor"}),c.jsx("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:"Cada producto es consagrado"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"✨"}),c.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:T.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:"Energía Positiva"}),c.jsx("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:"Rituales de sanación holística"})]})]}),c.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:c.jsx("a",{href:"#contacto",style:{background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",padding:"1rem 2rem",borderRadius:"30px",textDecoration:"none",fontSize:"1rem",fontWeight:"600",display:"inline-block",boxShadow:"0 5px 15px rgba(212, 165, 116, 0.3)",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 8px 25px rgba(212, 165, 116, 0.4)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.boxShadow="0 5px 15px rgba(212, 165, 116, 0.3)"},children:"Conoce Nuestra Historia"})})]})]})]})})}),c.jsx("section",{style:{background:"white",padding:"4rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:T.D.carbon,margin:"0 0 1rem 0"},children:"🚚 Información de Envíos"}),c.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Entregamos nuestros productos con amor y cuidado a toda la República Mexicana"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:window.innerWidth<=768?"1rem":"2rem"},children:[c.jsxs("div",{style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${T.D.crema}`,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"📦"}),c.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:T.D.carbon,margin:"0 0 1rem 0"},children:"Envíos Nacionales"}),c.jsx("p",{style:{color:"#666",lineHeight:"1.6",margin:"0 0 1rem 0"},children:"Realizamos envíos a toda la República Mexicana"}),c.jsx("p",{style:{color:T.D.miel,fontWeight:"600",fontSize:"1.1rem",margin:"0"},children:"3-7 días hábiles"})]}),c.jsxs("div",{style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${T.D.crema}`,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"💰"}),c.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:T.D.carbon,margin:"0 0 1rem 0"},children:"Costo de Envío"}),c.jsx("p",{style:{color:"#666",lineHeight:"1.6",margin:"0 0 1rem 0"},children:"Envío gratuito en compras mayores a $500 MXN"}),c.jsx("p",{style:{color:T.D.miel,fontWeight:"600",fontSize:"1.1rem",margin:"0"},children:"$80 MXN (compras menores)"})]}),c.jsxs("div",{style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${T.D.crema}`,textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"🛡️"}),c.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:T.D.carbon,margin:"0 0 1rem 0"},children:"Empaque Seguro"}),c.jsx("p",{style:{color:"#666",lineHeight:"1.6",margin:"0 0 1rem 0"},children:"Todos nuestros productos son empacados con cuidado y protección"}),c.jsx("p",{style:{color:T.D.miel,fontWeight:"600",fontSize:"1.1rem",margin:"0"},children:"100% protegido"})]})]}),c.jsxs("div",{style:{background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,padding:"2rem",borderRadius:"20px",marginTop:"2rem",textAlign:"center"},children:[c.jsx("h3",{style:{color:"white",fontSize:"1.5rem",fontWeight:"600",margin:"0 0 1rem 0"},children:"📞 ¿Necesitas ayuda con tu envío?"}),c.jsx("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem",margin:"0 0 1rem 0"},children:"Contáctanos por WhatsApp para consultas sobre envíos y seguimiento"}),c.jsx("a",{href:"https://wa.me/529991320209?text=Hola,%20tengo%20una%20consulta%20sobre%20envíos",target:"_blank",rel:"noopener noreferrer",style:{background:"white",color:T.D.miel,padding:"1rem 2rem",borderRadius:"30px",textDecoration:"none",fontWeight:"600",fontSize:"1.1rem",display:"inline-block",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 8px 25px rgba(0,0,0,0.15)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.boxShadow="none"},children:"Contactar por WhatsApp"})]})]})}),c.jsx("section",{style:{background:"white",padding:"4rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:T.D.carbon,margin:"0 0 1rem 0"},children:"💬 Lo Que Dicen Nuestros Clientes"}),c.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Testimonios reales de personas que han transformado su bienestar con nuestros productos"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"2rem"},children:[{name:"María González",text:"Los productos de Amor y Miel han transformado mi rutina de autocuidado. El Kit de Bienestar Completo es perfecto para relajarme después del trabajo.",rating:5},{name:"Carlos Rodríguez",text:"La Sonoterapia fue una experiencia increíble. Me ayudó a reducir el estrés y encontrar paz interior. Definitivamente lo recomiendo.",rating:5},{name:"Ana Martínez",text:"Las velas de miel tienen un aroma delicioso y crean un ambiente muy relajante. Mi familia y yo las usamos todas las noches.",rating:5},{name:"Laura Fernández",text:"Los baños energéticos son mágicos. Me ayudaron a limpiar mi energía y sentirme renovada. El servicio al cliente es excepcional.",rating:5},{name:"Roberto Silva",text:"La Numerología me abrió los ojos a muchas cosas. Los productos son de excelente calidad y el ambiente es muy relajante.",rating:5},{name:"Carmen Ruiz",text:"Mi hija ama los productos para niños. Son suaves, naturales y realmente funcionan. Recomiendo Amor y Miel a todas las mamás.",rating:5}].map((m,P)=>c.jsxs("div",{style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${T.D.crema}`,boxShadow:"0 8px 25px rgba(0,0,0,0.08)"},children:[c.jsx("div",{style:{marginBottom:"1rem"},children:[...Array(m.rating)].map((re,ae)=>c.jsx("span",{style:{color:"#ffd700",fontSize:"1.2rem"},children:"⭐"},ae))}),c.jsxs("p",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#555",margin:"0 0 1.5rem 0",fontStyle:"italic"},children:['"',m.text,'"']}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1.2rem"},children:m.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0",color:T.D.carbon,fontSize:"1.1rem",fontWeight:"600"},children:m.name}),c.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.9rem"},children:"Cliente Verificado"})]})]})]},P))})]})}),c.jsx("section",{style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"4rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:T.D.carbon,margin:"0 0 1rem 0"},children:"❓ Preguntas Frecuentes"}),c.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Resolvemos las dudas más comunes sobre nuestros productos y servicios"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(500px, 1fr))",gap:"1.5rem"},children:[{question:"¿Los productos son 100% naturales?",answer:"Sí, todos nuestros productos están elaborados con ingredientes 100% naturales y orgánicos. No utilizamos químicos dañinos ni conservantes artificiales."},{question:"¿Cómo puedo agendar una cita para servicios?",answer:"Puedes agendar tu cita directamente a través de WhatsApp al +52 999 132 0209 o haciendo clic en el botón 'Agendar' de cada servicio."},{question:"¿Hacen envíos a toda la república?",answer:"Sí, realizamos envíos a toda la República Mexicana. Los tiempos de entrega varían según la ubicación, generalmente de 3 a 7 días hábiles."},{question:"¿Los productos tienen garantía?",answer:"Ofrecemos garantía de satisfacción. Si no estás completamente satisfecho con tu compra, puedes devolver el producto en un plazo de 15 días."},{question:"¿Puedo usar los productos si estoy embarazada?",answer:"Recomendamos consultar con tu médico antes de usar cualquier producto durante el embarazo. Algunos ingredientes pueden no ser recomendables en esta etapa."},{question:"¿Cómo debo conservar los productos?",answer:"Mantén los productos en un lugar fresco, seco y alejado de la luz directa del sol. Esto asegura que mantengan sus propiedades por más tiempo."}].map((m,P)=>c.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"15px",border:`2px solid ${T.D.crema}`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)"},children:[c.jsx("h3",{style:{margin:"0 0 1rem 0",color:T.D.miel,fontSize:"1.1rem",fontWeight:"600"},children:m.question}),c.jsx("p",{style:{margin:"0",color:"#555",lineHeight:"1.6",fontSize:"0.95rem"},children:m.answer})]},P))})]})}),c.jsx("section",{style:{background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,padding:"4rem 0"},children:c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"0 1rem",textAlign:"center"},children:[c.jsx("h2",{style:{fontSize:"clamp(2rem, 4vw, 2.8rem)",fontWeight:"700",color:"white",margin:"0 0 1rem 0"},children:"📧 Mantente Conectado"}),c.jsx("p",{style:{fontSize:"1.2rem",color:"rgba(255,255,255,0.9)",margin:"0 0 2rem 0",lineHeight:"1.6"},children:"Recibe tips de bienestar, ofertas especiales y novedades directamente en tu correo"}),c.jsxs("form",{onSubmit:Ui,style:{display:"flex",gap:"1rem",maxWidth:"500px",margin:"0 auto",flexWrap:"wrap",justifyContent:"center"},children:[c.jsx("input",{type:"email",name:"email",placeholder:"Tu correo electrónico",required:!0,style:{flex:"1",minWidth:"250px",padding:"1rem 1.5rem",borderRadius:"30px",border:"none",fontSize:"1rem",outline:"none",boxShadow:"0 4px 15px rgba(0,0,0,0.1)"}}),c.jsx("button",{type:"submit",disabled:B,style:{background:B?"#ccc":"white",color:T.D.miel,border:"none",padding:"1rem 2rem",borderRadius:"30px",fontSize:"1rem",fontWeight:"600",cursor:B?"not-allowed":"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",transition:"all 0.3s ease",opacity:B?.7:1},onMouseEnter:m=>{B||(m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.15)")},onMouseLeave:m=>{B||(m.target.style.transform="translateY(0)",m.target.style.boxShadow="0 4px 15px rgba(0,0,0,0.1)")},children:B?c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{marginRight:"0.5rem"},children:"⏳"}),"Suscribiendo..."]}):"Suscribirse"})]}),_&&c.jsx("div",{style:{padding:"1rem",margin:"1rem auto 0 auto",maxWidth:"500px",borderRadius:"10px",backgroundColor:_.includes("exitosamente")?"rgba(212, 237, 218, 0.9)":"rgba(248, 215, 218, 0.9)",color:_.includes("exitosamente")?"#155724":"#721c24",border:`1px solid ${_.includes("exitosamente")?"rgba(195, 230, 203, 0.8)":"rgba(245, 198, 203, 0.8)"}`,textAlign:"center",fontWeight:"500"},children:_}),c.jsx("p",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.8)",margin:"1.5rem 0 0 0"},children:"No compartimos tu información. Puedes cancelar tu suscripción en cualquier momento."})]})}),c.jsx("section",{id:"contacto",style:{background:"white",padding:"4rem 0"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[c.jsx("h2",{style:{fontSize:"clamp(2.5rem, 5vw, 3.5rem)",fontWeight:"700",color:T.D.carbon,margin:"0 0 1rem 0"},children:"📞 Contáctanos"}),c.jsx("p",{style:{fontSize:"1.2rem",color:"#666",maxWidth:"600px",margin:"0 auto",lineHeight:"1.6"},children:"Estamos aquí para ayudarte en tu camino hacia el bienestar integral"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:window.innerWidth<=768?"2rem":"3rem"},children:[c.jsxs("div",{children:[c.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:T.D.miel,margin:"0 0 1.5rem 0"},children:"Información de Contacto"}),c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem"},children:"📱"}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0",color:T.D.carbon},children:"WhatsApp"}),c.jsx("p",{style:{margin:"0",color:"#666"},children:"+52 999 132 0209"})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem"},children:"📧"}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0",color:T.D.carbon},children:"Email"}),c.jsx("p",{style:{margin:"0",color:"#666"},children:"info@amorymiel.com"})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem"},children:"🕒"}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0",color:T.D.carbon},children:"Horarios"}),c.jsx("p",{style:{margin:"0",color:"#666"},children:"Lunes a Sábado: 9:00 AM - 7:00 PM"})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[c.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem",flexShrink:0},children:"📍"}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:T.D.carbon},children:"Dirección de Tienda Física"}),c.jsxs("div",{style:{color:"#666",lineHeight:"1.5"},children:[c.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:"600"},children:"Gestalt del Caribe"}),c.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Calle Yaxcopoil M2 SM59, Edificio 9,"}),c.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Local 217 Centro Comercial Cancún Maya,"}),c.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Cancún, Q. Roo. CP 77515"})]})]})]}),c.jsxs("div",{style:{marginTop:"2rem"},children:[c.jsx("h4",{style:{margin:"0 0 1rem 0",color:T.D.carbon},children:"📍 Encuéntranos en el Mapa"}),c.jsx("div",{style:{width:"100%",height:"300px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.1)",border:`2px solid ${T.D.miel}`,background:"#f8f9fa"},children:c.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3720.123456789!2d-86.8515!3d21.1619!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f4c2b123456789%3A0x123456789abcdef!2sCentro%20Comercial%20Canc%C3%BAn%20Maya!5e0!3m2!1ses!2smx!4v1234567890123!5m2!1ses!2smx",width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Ubicación de Amor y Miel - Gestalt del Caribe"})}),c.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",color:"#666",fontSize:"0.9rem"},children:[c.jsxs("p",{style:{margin:"0"},children:[c.jsx("strong",{children:"📍 Gestalt del Caribe"}),c.jsx("br",{}),"Centro Comercial Cancún Maya, Local 217",c.jsx("br",{}),"Cancún, Quintana Roo, México"]}),c.jsx("a",{href:"https://maps.google.com/?q=Centro+Comercial+Cancún+Maya,+Cancún,+Q.Roo",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"0.5rem",padding:"0.5rem 1rem",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",textDecoration:"none",borderRadius:"25px",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 6px 15px rgba(212, 165, 116, 0.4)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.boxShadow="none"},children:"🗺️ Abrir en Google Maps"})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 1rem 0",color:T.D.carbon},children:"Síguenos"}),c.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[c.jsx("a",{href:"https://www.instagram.com/_amor_y_miel_/reels",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"45px",height:"45px",borderRadius:"50%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",textDecoration:"none",fontSize:"1.2rem",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 6px 15px rgba(212, 165, 116, 0.4)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.boxShadow="none"},children:"📷"}),c.jsx("a",{href:"https://www.facebook.com/p/Amor-y-Miel-100089698655453/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"45px",height:"45px",borderRadius:"50%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",textDecoration:"none",fontSize:"1.2rem",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 6px 15px rgba(212, 165, 116, 0.4)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.boxShadow="none"},children:"📘"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",color:T.D.miel,margin:"0 0 1.5rem 0"},children:"Envíanos un Mensaje"}),c.jsxs("form",{onSubmit:lt,style:{background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`,padding:"2rem",borderRadius:"20px",border:`2px solid ${T.D.crema}`},children:[c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"name",required:!0,style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${T.D.crema}`,fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:m=>{m.target.style.borderColor=T.D.miel},onBlur:m=>{m.target.style.borderColor=T.D.crema}})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Correo Electrónico"}),c.jsx("input",{type:"email",name:"email",required:!0,style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${T.D.crema}`,fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:m=>{m.target.style.borderColor=T.D.miel},onBlur:m=>{m.target.style.borderColor=T.D.crema}})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Asunto"}),c.jsxs("select",{style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${T.D.crema}`,fontSize:"1rem",outline:"none",background:"white"},children:[c.jsx("option",{children:"Consulta sobre productos"}),c.jsx("option",{children:"Agendar servicio"}),c.jsx("option",{children:"Información general"}),c.jsx("option",{children:"Soporte técnico"}),c.jsx("option",{children:"Otro"})]})]}),c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Mensaje"}),c.jsx("textarea",{name:"message",required:!0,rows:"4",style:{width:"100%",padding:"1rem",borderRadius:"10px",border:`2px solid ${T.D.crema}`,fontSize:"1rem",outline:"none",resize:"vertical",transition:"border-color 0.3s ease"},onFocus:m=>{m.target.style.borderColor=T.D.miel},onBlur:m=>{m.target.style.borderColor=T.D.crema}})]}),M&&c.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",borderRadius:"10px",backgroundColor:M.includes("exitosamente")?"#d4edda":"#f8d7da",color:M.includes("exitosamente")?"#155724":"#721c24",border:`1px solid ${M.includes("exitosamente")?"#c3e6cb":"#f5c6cb"}`,textAlign:"center",fontWeight:"500"},children:M}),c.jsx("button",{type:"submit",disabled:E,style:{width:"100%",background:E?"#ccc":`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"1rem 2rem",borderRadius:"30px",fontSize:"1rem",fontWeight:"600",cursor:E?"not-allowed":"pointer",boxShadow:"0 4px 15px rgba(212, 165, 116, 0.3)",transition:"all 0.3s ease",opacity:E?.7:1},onMouseEnter:m=>{E||(m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 8px 25px rgba(212, 165, 116, 0.4)")},onMouseLeave:m=>{E||(m.target.style.transform="translateY(0)",m.target.style.boxShadow="0 4px 15px rgba(212, 165, 116, 0.3)")},children:E?c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{marginRight:"0.5rem"},children:"⏳"}),"Enviando..."]}):"Enviar Mensaje"})]})]})]})]})}),c.jsx("footer",{style:{background:T.D.carbon,color:"white",padding:"3rem 0 1rem 0",marginTop:"3rem"},children:c.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"clamp(1.5rem, 4vw, 2rem)",marginBottom:"2rem"},children:[c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[c.jsx("img",{src:"/images/logo/amorymiellogo.png",alt:"Amor y Miel",style:{height:"40px"}}),c.jsx("h3",{style:{margin:0},children:"Amor y Miel"})]}),c.jsx("p",{style:{color:"#ccc",lineHeight:"1.6"},children:"Productos holísticos artesanales para el bienestar espiritual y físico. Cuidado natural, artesanal y con amor."})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Productos"}),c.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Velas"})}),c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Lociones"})}),c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Aceites"})}),c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#productos",style:{color:"#ccc",textDecoration:"none"},children:"Baños Energéticos"})})]})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Servicios"}),c.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Sonoterapia"})}),c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Ceremonia de Cacao"})}),c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Numerología"})}),c.jsx("li",{style:{marginBottom:"0.5rem"},children:c.jsx("a",{href:"#servicios",style:{color:"#ccc",textDecoration:"none"},children:"Tarot Angelical"})})]})]}),c.jsxs("div",{children:[c.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Contacto"}),c.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"📱 WhatsApp: +52 999 132 0209"}),c.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"📧 Email: info@amorymiel.com"}),c.jsxs("div",{style:{color:"#ccc",margin:"0 0 1rem 0",lineHeight:"1.4"},children:[c.jsx("p",{style:{margin:"0 0 0.25rem 0",fontWeight:"600"},children:"📍 Gestalt del Caribe"}),c.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Calle Yaxcopoil M2 SM59, Edificio 9,"}),c.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Local 217 Centro Comercial Cancún Maya,"}),c.jsx("p",{style:{margin:"0 0 0.25rem 0"},children:"Cancún, Q. Roo. CP 77515"})]}),c.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Métodos de Pago"}),c.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"💳 Mercado Pago"}),c.jsx("p",{style:{color:"#ccc",margin:"0 0 0.5rem 0"},children:"🏦 Transferencia bancaria"}),c.jsx("p",{style:{color:"#ccc",margin:"0 0 1rem 0"},children:"💰 Pago en efectivo"}),c.jsx("h4",{style:{margin:"0 0 1rem 0"},children:"Síguenos"}),c.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[c.jsxs("a",{href:"https://www.instagram.com/_amor_y_miel_/reels",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",textDecoration:"none",transition:"color 0.3s ease"},onMouseEnter:m=>m.target.style.color="#E0A73A",onMouseLeave:m=>m.target.style.color="#ccc",children:[c.jsx("span",{style:{fontSize:"1.2rem"},children:"📷"}),c.jsx("span",{children:"Instagram"})]}),c.jsxs("a",{href:"https://www.facebook.com/p/Amor-y-Miel-100089698655453/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#ccc",textDecoration:"none",transition:"color 0.3s ease"},onMouseEnter:m=>m.target.style.color="#E0A73A",onMouseLeave:m=>m.target.style.color="#ccc",children:[c.jsx("span",{style:{fontSize:"1.2rem"},children:"📘"}),c.jsx("span",{children:"Facebook"})]})]})]})]}),c.jsx("div",{style:{borderTop:"1px solid #444",paddingTop:"1rem",textAlign:"center"},children:c.jsx("p",{style:{color:"#ccc",margin:0},children:"© 2024 Amor y Miel. Todos los derechos reservados. Hecho con ❤️ en México."})})]})}),N&&(()=>{const m={...N,...wP[N.nombre]||{}};return c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:window.innerWidth<=768?"1rem":"2rem"},children:c.jsxs("div",{style:{background:"white",borderRadius:"20px",maxWidth:"1200px",width:"100%",maxHeight:"100vh",overflow:"auto",position:"relative"},children:[c.jsx("button",{onClick:()=>V(null),style:{position:"absolute",top:"1rem",right:"1rem",background:"#ff4444",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:"pointer",fontSize:"1.2rem",zIndex:1001},children:"✕"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:window.innerWidth<=768?"1rem":"2rem",padding:window.innerWidth<=768?"1rem":"2rem",minHeight:window.innerWidth<=768?"auto":"800px"},children:[c.jsx("div",{children:c.jsx("img",{src:_P[m.nombre]||m.imagen,alt:m.nombre,style:{width:"100%",height:"auto",maxHeight:window.innerWidth<=768?"400px":"600px",objectFit:"contain",borderRadius:"15px",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},onError:P=>{P.target.src="/images/logo/amorymiellogo.png"}})}),c.jsxs("div",{children:[c.jsx("div",{style:{marginBottom:"1rem"},children:c.jsx("span",{style:{background:T.D.miel,color:"white",padding:"0.25rem 0.75rem",borderRadius:"15px",fontSize:"0.8rem",fontWeight:"600"},children:m.categoria})}),c.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:T.D.carbon,margin:"0 0 0.5rem 0"},children:m.nombre}),c.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:"0 0 1rem 0",lineHeight:"1.4"},children:m.descripcion}),c.jsxs("div",{style:{marginBottom:"1rem",background:"linear-gradient(145deg, #fafafa 0%, #f5f5f5 100%)",borderRadius:"15px",padding:"1.5rem",border:`2px solid ${T.D.crema}`},children:[m.elaboracion&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h4",{style:{color:T.D.miel,margin:"0 0 0.75rem 0",fontSize:"1rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🧪 Elaboración"}),c.jsx("p",{style:{color:"#555",fontSize:"0.9rem",margin:0,lineHeight:"1.6",background:"white",padding:"1rem",borderRadius:"10px",border:`1px solid ${T.D.crema}`},children:m.elaboracion})]}),m.proposito&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h4",{style:{color:T.D.miel,margin:"0 0 0.75rem 0",fontSize:"1rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🎯 Propósito"}),c.jsx("p",{style:{color:"#555",fontSize:"0.9rem",margin:0,lineHeight:"1.6",background:"white",padding:"1rem",borderRadius:"10px",border:`1px solid ${T.D.crema}`},children:m.proposito})]}),m.beneficios&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h4",{style:{color:T.D.miel,margin:"0 0 0.75rem 0",fontSize:"1rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:"✨ Beneficios"}),c.jsx("p",{style:{color:"#555",fontSize:"0.9rem",margin:0,lineHeight:"1.6",background:"white",padding:"1rem",borderRadius:"10px",border:`1px solid ${T.D.crema}`},children:m.beneficios})]}),m.modoUso&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h4",{style:{color:T.D.miel,margin:"0 0 0.75rem 0",fontSize:"1rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:"📖 Modo de Uso"}),c.jsx("p",{style:{color:"#555",fontSize:"0.9rem",margin:0,lineHeight:"1.6",background:"white",padding:"1rem",borderRadius:"10px",border:`1px solid ${T.D.crema}`},children:m.modoUso})]}),m.ingredientes&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h4",{style:{color:T.D.miel,margin:"0 0 0.75rem 0",fontSize:"1rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🌿 Ingredientes"}),c.jsx("p",{style:{color:"#555",fontSize:"0.9rem",margin:0,lineHeight:"1.6",background:"white",padding:"1rem",borderRadius:"10px",border:`1px solid ${T.D.crema}`},children:m.ingredientes})]}),m.duracion&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h4",{style:{color:T.D.miel,margin:"0 0 0.75rem 0",fontSize:"1rem",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:"⏱️ Duración"}),c.jsx("p",{style:{color:"#555",fontSize:"0.9rem",margin:0,lineHeight:"1.6",background:"white",padding:"1rem",borderRadius:"10px",border:`1px solid ${T.D.crema}`},children:m.duracion})]}),m.cuidados&&c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsx("h4",{style:{color:T.D.carbon,margin:"0 0 0.5rem 0",fontSize:"0.9rem",fontWeight:"600"},children:"⚠️ Cuidados"}),c.jsx("p",{style:{color:"#666",fontSize:"0.8rem",margin:0,lineHeight:"1.4"},children:m.cuidados})]})]}),c.jsxs("div",{style:{borderTop:"1px solid #eee",paddingTop:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:"bold",color:T.D.miel},children:["$",N.precio," ",N.moneda]}),c.jsxs("div",{style:{display:"flex",gap:"0.8rem",flexWrap:"wrap",flexDirection:window.innerWidth<=768?"column":"row"},children:[c.jsx("button",{onClick:()=>{Wn(N),V(null)},style:{background:T.D.miel,color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",flex:"1",minWidth:"120px"},children:S?"Agregar al Carrito":"Inicia sesión para comprar"}),c.jsxs("button",{onClick:()=>{const P=`https://link.mercadopago.com.mx/amorymiel?amount=${N.precio}`;window.open(P,"_blank")},style:{background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"0.8rem 1.5rem",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"700",flex:"1",minWidth:"120px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.4rem",boxShadow:"0 4px 15px rgba(224, 167, 58, 0.3)",transition:"all 0.3s ease"},onMouseEnter:P=>{P.target.style.transform="translateY(-2px)",P.target.style.boxShadow="0 8px 25px rgba(224, 167, 58, 0.4)",P.target.style.background="linear-gradient(135deg, #f0b854 0%, #e0a73a 100%)"},onMouseLeave:P=>{P.target.style.transform="translateY(0)",P.target.style.boxShadow="0 4px 15px rgba(224, 167, 58, 0.3)",P.target.style.background=`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`},children:[c.jsx("span",{style:{fontSize:"1rem"},children:"💳"}),c.jsx("span",{style:{textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"Pagar Ahora"})]})]})]})]})]})]})})})(),t.length>0&&c.jsxs("div",{style:{position:"fixed",top:"0",right:"0",width:window.innerWidth<=768?"100%":"400px",height:"100vh",background:"white",boxShadow:window.innerWidth<=768?"0 0 30px rgba(0,0,0,0.15)":"-10px 0 30px rgba(0,0,0,0.15)",zIndex:1e3,display:"flex",flexDirection:"column",transform:"translateX(0)",transition:"transform 0.3s ease-in-out"},children:[c.jsx("div",{style:{padding:window.innerWidth<=768?"1rem 1rem 0.5rem":"2rem 1.5rem 1rem",borderBottom:`1px solid ${T.D.crema}`,background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[c.jsxs("h3",{style:{margin:"0",color:T.D.carbon,fontSize:window.innerWidth<=768?"1.2rem":"1.5rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:["🛍️ Carrito (",t.length,")"]}),c.jsx("button",{onClick:()=>e([]),style:{background:"transparent",border:"none",color:T.D.carbon,cursor:"pointer",padding:"0.5rem",borderRadius:"8px",fontSize:"1.2rem",transition:"background-color 0.3s ease"},onMouseEnter:m=>m.target.style.backgroundColor="rgba(0,0,0,0.1)",onMouseLeave:m=>m.target.style.backgroundColor="transparent",children:"🗑️"})]})}),c.jsx("div",{style:{flex:"1",overflowY:"auto",padding:window.innerWidth<=768?"0.5rem 1rem":"1rem 1.5rem"},children:t.map(m=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:window.innerWidth<=768?"0.5rem":"1rem",padding:window.innerWidth<=768?"0.8rem":"1rem",marginBottom:window.innerWidth<=768?"0.8rem":"1rem",background:"white",borderRadius:"15px",border:`1px solid ${T.D.crema}`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)",transition:"all 0.3s ease"},children:[c.jsx("img",{src:m.imagen,alt:m.nombre,style:{width:window.innerWidth<=768?"50px":"60px",height:window.innerWidth<=768?"50px":"60px",objectFit:"cover",borderRadius:"10px",border:`1px solid ${T.D.crema}`},onError:P=>P.target.src="/images/logo/amorymiellogo.png"}),c.jsxs("div",{style:{flex:"1"},children:[c.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:window.innerWidth<=768?"0.85rem":"0.95rem",color:T.D.carbon,fontWeight:"600",lineHeight:"1.3"},children:m.nombre}),c.jsxs("p",{style:{margin:"0 0 0.5rem 0",fontSize:window.innerWidth<=768?"0.75rem":"0.85rem",color:T.D.miel,fontWeight:"600"},children:["$",m.precio," MXN"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>me(m.id,m.quantity-1),style:{background:T.D.crema,border:"none",borderRadius:"6px",width:window.innerWidth<=768?"24px":"28px",height:window.innerWidth<=768?"24px":"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",color:T.D.carbon,transition:"all 0.3s ease"},onMouseEnter:P=>P.target.style.background=T.D.miel,onMouseLeave:P=>P.target.style.background=T.D.crema,children:"−"}),c.jsx("span",{style:{minWidth:window.innerWidth<=768?"25px":"30px",textAlign:"center",fontSize:window.innerWidth<=768?"0.8rem":"0.9rem",fontWeight:"600",color:T.D.carbon},children:m.quantity}),c.jsx("button",{onClick:()=>me(m.id,m.quantity+1),style:{background:T.D.crema,border:"none",borderRadius:"6px",width:window.innerWidth<=768?"24px":"28px",height:window.innerWidth<=768?"24px":"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",color:T.D.carbon,transition:"all 0.3s ease"},onMouseEnter:P=>P.target.style.background=T.D.miel,onMouseLeave:P=>P.target.style.background=T.D.crema,children:"+"})]})]}),c.jsx("button",{onClick:()=>li(m.id),style:{background:"transparent",border:"none",color:"#ff4444",cursor:"pointer",padding:"0.5rem",borderRadius:"8px",fontSize:"1.2rem",transition:"all 0.3s ease"},onMouseEnter:P=>{P.target.style.backgroundColor="rgba(255, 68, 68, 0.1)",P.target.style.transform="scale(1.1)"},onMouseLeave:P=>{P.target.style.backgroundColor="transparent",P.target.style.transform="scale(1)"},children:"✕"})]},m.id))}),c.jsxs("div",{style:{padding:"1.5rem",borderTop:`1px solid ${T.D.crema}`,background:`linear-gradient(135deg, ${T.D.crema} 0%, #f8f5f0 100%)`},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[c.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600",color:T.D.carbon},children:"Total:"}),c.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"700",color:T.D.miel},children:["$",yt()," MXN"]})]}),c.jsx("button",{onClick:$n,style:{width:"100%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"1.2rem 1.5rem",borderRadius:"20px",fontSize:"1.1rem",fontWeight:"700",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 8px 25px rgba(224, 167, 58, 0.4), 0 4px 12px rgba(224, 167, 58, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.8rem",position:"relative",overflow:"hidden"},onMouseEnter:m=>{m.target.style.transform="translateY(-3px) scale(1.02)",m.target.style.boxShadow="0 15px 35px rgba(224, 167, 58, 0.5), 0 8px 20px rgba(224, 167, 58, 0.3)",m.target.style.background="linear-gradient(135deg, #f0b854 0%, #e0a73a 100%)"},onMouseLeave:m=>{m.target.style.transform="translateY(0) scale(1)",m.target.style.boxShadow="0 8px 25px rgba(224, 167, 58, 0.4), 0 4px 12px rgba(224, 167, 58, 0.2)",m.target.style.background=`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`},children:F?c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{fontSize:"1.3rem",animation:"spin 1s linear infinite"},children:"⏳"}),c.jsx("span",{style:{textShadow:"0 2px 4px rgba(0,0,0,0.2)",letterSpacing:"0.5px"},children:"Procesando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{fontSize:"1.3rem",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:"💳"}),c.jsx("span",{style:{textShadow:"0 2px 4px rgba(0,0,0,0.2)",letterSpacing:"0.5px"},children:"Pagar con Mercado Pago"})]})})]})]}),H&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:c.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"20px",maxWidth:"400px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:T.D.carbon,margin:0},children:Z==="login"?"Iniciar Sesión":"Crear Cuenta"}),c.jsx("button",{onClick:()=>X(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"×"})]}),fe&&c.jsx("div",{style:{padding:"0.8rem",marginBottom:"1rem",borderRadius:"8px",backgroundColor:fe.includes("exitosamente")?"#d4edda":"#f8d7da",color:fe.includes("exitosamente")?"#155724":"#721c24",border:`1px solid ${fe.includes("exitosamente")?"#c3e6cb":"#f5c6cb"}`,textAlign:"center",fontSize:"0.9rem"},children:fe}),c.jsxs("form",{onSubmit:async m=>{m.preventDefault();const P=new FormData(m.target),re=P.get("email"),ae=P.get("password"),Pe=P.get("name");Z==="login"?await Ma(re,ae):await La(re,ae,Pe)},children:[Z==="register"&&c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"name",required:!0,style:{width:"100%",padding:"0.8rem",borderRadius:"8px",border:`2px solid ${T.D.crema}`,fontSize:"1rem",outline:"none"}})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Correo Electrónico"}),c.jsx("input",{type:"email",name:"email",required:!0,style:{width:"100%",padding:"0.8rem",borderRadius:"8px",border:`2px solid ${T.D.crema}`,fontSize:"1rem",outline:"none"}})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",required:!0,style:{width:"100%",padding:"0.8rem",borderRadius:"8px",border:`2px solid ${T.D.crema}`,fontSize:"1rem",outline:"none"}})]}),c.jsx("button",{type:"submit",style:{width:"100%",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,color:"white",border:"none",padding:"1rem",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:Z==="login"?"Iniciar Sesión":"Crear Cuenta"})]}),c.jsx("div",{style:{textAlign:"center"},children:Z==="login"?c.jsxs(c.Fragment,{children:[c.jsxs("p",{style:{color:"#666",margin:"0 0 1rem 0"},children:["¿No tienes cuenta?"," ",c.jsx("button",{onClick:()=>ve("register"),style:{background:"none",border:"none",color:T.D.miel,cursor:"pointer",textDecoration:"underline"},children:"Crear cuenta"})]}),c.jsx("button",{onClick:()=>{const m=prompt("Ingresa tu email para recuperar contraseña:");m&&ci(m)},style:{background:"none",border:"none",color:T.D.miel,cursor:"pointer",textDecoration:"underline",fontSize:"0.9rem"},children:"¿Olvidaste tu contraseña?"})]}):c.jsxs("p",{style:{color:"#666",margin:0},children:["¿Ya tienes cuenta?"," ",c.jsx("button",{onClick:()=>ve("login"),style:{background:"none",border:"none",color:T.D.miel,cursor:"pointer",textDecoration:"underline"},children:"Iniciar sesión"})]})})]})}),Oi&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:c.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsx("h2",{style:{color:T.D.miel,margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:"📦 Información de Envío"}),c.jsx("button",{onClick:()=>pn(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:"✕"})]}),c.jsxs("form",{onSubmit:m=>{m.preventDefault(),Ue()},children:[c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Nombre Completo *"}),c.jsx("input",{type:"text",required:!0,value:Rt.fullName,onChange:m=>nn(P=>({...P,fullName:m.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${T.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border-color 0.3s ease"},onFocus:m=>m.target.style.borderColor=T.D.miel,onBlur:m=>m.target.style.borderColor=T.D.crema})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Dirección Completa *"}),c.jsx("textarea",{required:!0,value:Rt.address,onChange:m=>nn(P=>({...P,address:m.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${T.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",minHeight:"80px",resize:"vertical"},onFocus:m=>m.target.style.borderColor=T.D.miel,onBlur:m=>m.target.style.borderColor=T.D.crema})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Ciudad *"}),c.jsx("input",{type:"text",required:!0,value:Rt.city,onChange:m=>nn(P=>({...P,city:m.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${T.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:m=>m.target.style.borderColor=T.D.miel,onBlur:m=>m.target.style.borderColor=T.D.crema})]}),c.jsxs("div",{style:{flex:1},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Estado *"}),c.jsx("input",{type:"text",required:!0,value:Rt.state,onChange:m=>nn(P=>({...P,state:m.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${T.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:m=>m.target.style.borderColor=T.D.miel,onBlur:m=>m.target.style.borderColor=T.D.crema})]})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Código Postal *"}),c.jsx("input",{type:"text",required:!0,value:Rt.zipCode,onChange:m=>nn(P=>({...P,zipCode:m.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${T.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:m=>m.target.style.borderColor=T.D.miel,onBlur:m=>m.target.style.borderColor=T.D.crema})]}),c.jsxs("div",{style:{flex:1},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Teléfono *"}),c.jsx("input",{type:"tel",required:!0,value:Rt.phone,onChange:m=>nn(P=>({...P,phone:m.target.value})),style:{width:"100%",padding:"0.75rem",border:`2px solid ${T.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none"},onFocus:m=>m.target.style.borderColor=T.D.miel,onBlur:m=>m.target.style.borderColor=T.D.crema})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:T.D.carbon,fontWeight:"500"},children:"Notas de Envío (Opcional)"}),c.jsx("textarea",{value:Rt.notes,onChange:m=>nn(P=>({...P,notes:m.target.value})),placeholder:"Instrucciones especiales para la entrega...",style:{width:"100%",padding:"0.75rem",border:`2px solid ${T.D.crema}`,borderRadius:"8px",fontSize:"1rem",outline:"none",minHeight:"60px",resize:"vertical"},onFocus:m=>m.target.style.borderColor=T.D.miel,onBlur:m=>m.target.style.borderColor=T.D.crema})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[c.jsx("button",{type:"button",onClick:()=>pn(!1),style:{flex:1,padding:"0.75rem",background:"transparent",border:`2px solid ${T.D.miel}`,color:T.D.miel,borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:m=>{m.target.style.background=T.D.miel,m.target.style.color="white"},onMouseLeave:m=>{m.target.style.background="transparent",m.target.style.color=T.D.miel},children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:F,style:{flex:1,padding:"0.75rem",background:`linear-gradient(135deg, ${T.D.miel} 0%, #d4a574 100%)`,border:"none",color:"white",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:F?"not-allowed":"pointer",opacity:F?.7:1,transition:"all 0.3s ease"},children:F?"Procesando...":"Continuar al Pago"})]})]})]})}),Qe&&c.jsx(vP,{user:S,onClose:()=>at(!1)})]})}wd.createRoot(document.getElementById("root")).render(c.jsx(FE.StrictMode,{children:c.jsx(xP,{})}));
